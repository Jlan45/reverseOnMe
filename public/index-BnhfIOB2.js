(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const d of document.querySelectorAll('link[rel="modulepreload"]'))c(d);new MutationObserver(d=>{for(const S of d)if(S.type==="childList")for(const b of S.addedNodes)b.tagName==="LINK"&&b.rel==="modulepreload"&&c(b)}).observe(document,{childList:!0,subtree:!0});function r(d){const S={};return d.integrity&&(S.integrity=d.integrity),d.referrerPolicy&&(S.referrerPolicy=d.referrerPolicy),d.crossOrigin==="use-credentials"?S.credentials="include":d.crossOrigin==="anonymous"?S.credentials="omit":S.credentials="same-origin",S}function c(d){if(d.ep)return;d.ep=!0;const S=r(d);fetch(d.href,S)}})();/**
* @vue/shared v3.4.19
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function ts(e,t){const r=new Set(e.split(","));return t?c=>r.has(c.toLowerCase()):c=>r.has(c)}const be={},_t=[],Me=()=>{},In=()=>!1,ni=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),is=e=>e.startsWith("onUpdate:"),Re=Object.assign,ss=(e,t)=>{const r=e.indexOf(t);r>-1&&e.splice(r,1)},Hn=Object.prototype.hasOwnProperty,pe=(e,t)=>Hn.call(e,t),ce=Array.isArray,Rt=e=>ai(e)==="[object Map]",Fn=e=>ai(e)==="[object Set]",ue=e=>typeof e=="function",Ee=e=>typeof e=="string",oi=e=>typeof e=="symbol",Ce=e=>e!==null&&typeof e=="object",Cr=e=>(Ce(e)||ue(e))&&ue(e.then)&&ue(e.catch),Nn=Object.prototype.toString,ai=e=>Nn.call(e),Un=e=>ai(e).slice(8,-1),Wn=e=>ai(e)==="[object Object]",rs=e=>Ee(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,Lt=ts(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),li=e=>{const t=Object.create(null);return r=>t[r]||(t[r]=e(r))},jn=/-(\w)/g,vt=li(e=>e.replace(jn,(t,r)=>r?r.toUpperCase():"")),$n=/\B([A-Z])/g,bt=li(e=>e.replace($n,"-$1").toLowerCase()),yr=li(e=>e.charAt(0).toUpperCase()+e.slice(1)),yi=li(e=>e?`on${yr(e)}`:""),ht=(e,t)=>!Object.is(e,t),Vt=(e,t)=>{for(let r=0;r<e.length;r++)e[r](t)},ei=(e,t,r)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:r})},Ii=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let As;const wr=()=>As||(As=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function ns(e){if(ce(e)){const t={};for(let r=0;r<e.length;r++){const c=e[r],d=Ee(c)?Vn(c):ns(c);if(d)for(const S in d)t[S]=d[S]}return t}else if(Ee(e)||Ce(e))return e}const zn=/;(?![^(]*\))/g,Kn=/:([^]+)/,qn=/\/\*[^]*?\*\//g;function Vn(e){const t={};return e.replace(qn,"").split(zn).forEach(r=>{if(r){const c=r.split(Kn);c.length>1&&(t[c[0].trim()]=c[1].trim())}}),t}function os(e){let t="";if(Ee(e))t=e;else if(ce(e))for(let r=0;r<e.length;r++){const c=os(e[r]);c&&(t+=c+" ")}else if(Ce(e))for(const r in e)e[r]&&(t+=r+" ");return t.trim()}const Gn="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Xn=ts(Gn);function Er(e){return!!e||e===""}/**
* @vue/reactivity v3.4.19
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Ie;class Jn{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this.parent=Ie,!t&&Ie&&(this.index=(Ie.scopes||(Ie.scopes=[])).push(this)-1)}get active(){return this._active}run(t){if(this._active){const r=Ie;try{return Ie=this,t()}finally{Ie=r}}}on(){Ie=this}off(){Ie=this.parent}stop(t){if(this._active){let r,c;for(r=0,c=this.effects.length;r<c;r++)this.effects[r].stop();for(r=0,c=this.cleanups.length;r<c;r++)this.cleanups[r]();if(this.scopes)for(r=0,c=this.scopes.length;r<c;r++)this.scopes[r].stop(!0);if(!this.detached&&this.parent&&!t){const d=this.parent.scopes.pop();d&&d!==this&&(this.parent.scopes[this.index]=d,d.index=this.index)}this.parent=void 0,this._active=!1}}}function Yn(e,t=Ie){t&&t.active&&t.effects.push(e)}function Zn(){return Ie}let lt;class as{constructor(t,r,c,d){this.fn=t,this.trigger=r,this.scheduler=c,this.active=!0,this.deps=[],this._dirtyLevel=4,this._trackId=0,this._runnings=0,this._shouldSchedule=!1,this._depsLength=0,Yn(this,d)}get dirty(){if(this._dirtyLevel===2||this._dirtyLevel===3){this._dirtyLevel=1,ut();for(let t=0;t<this._depsLength;t++){const r=this.deps[t];if(r.computed&&(Qn(r.computed),this._dirtyLevel>=4))break}this._dirtyLevel===1&&(this._dirtyLevel=0),dt()}return this._dirtyLevel>=4}set dirty(t){this._dirtyLevel=t?4:0}run(){if(this._dirtyLevel=0,!this.active)return this.fn();let t=tt,r=lt;try{return tt=!0,lt=this,this._runnings++,Ds(this),this.fn()}finally{Ts(this),this._runnings--,lt=r,tt=t}}stop(){var t;this.active&&(Ds(this),Ts(this),(t=this.onStop)==null||t.call(this),this.active=!1)}}function Qn(e){return e.value}function Ds(e){e._trackId++,e._depsLength=0}function Ts(e){if(e.deps.length>e._depsLength){for(let t=e._depsLength;t<e.deps.length;t++)xr(e.deps[t],e);e.deps.length=e._depsLength}}function xr(e,t){const r=e.get(t);r!==void 0&&t._trackId!==r&&(e.delete(t),e.size===0&&e.cleanup())}let tt=!0,Hi=0;const Rr=[];function ut(){Rr.push(tt),tt=!1}function dt(){const e=Rr.pop();tt=e===void 0?!0:e}function ls(){Hi++}function cs(){for(Hi--;!Hi&&Fi.length;)Fi.shift()()}function Lr(e,t,r){if(t.get(e)!==e._trackId){t.set(e,e._trackId);const c=e.deps[e._depsLength];c!==t?(c&&xr(c,e),e.deps[e._depsLength++]=t):e._depsLength++}}const Fi=[];function kr(e,t,r){ls();for(const c of e.keys()){let d;c._dirtyLevel<t&&(d??(d=e.get(c)===c._trackId))&&(c._shouldSchedule||(c._shouldSchedule=c._dirtyLevel===0),c._dirtyLevel=t),c._shouldSchedule&&(d??(d=e.get(c)===c._trackId))&&(c.trigger(),(!c._runnings||c.allowRecurse)&&c._dirtyLevel!==2&&(c._shouldSchedule=!1,c.scheduler&&Fi.push(c.scheduler)))}cs()}const Ar=(e,t)=>{const r=new Map;return r.cleanup=e,r.computed=t,r},Ni=new WeakMap,ct=Symbol(""),Ui=Symbol("");function De(e,t,r){if(tt&&lt){let c=Ni.get(e);c||Ni.set(e,c=new Map);let d=c.get(r);d||c.set(r,d=Ar(()=>c.delete(r))),Lr(lt,d)}}function qe(e,t,r,c,d,S){const b=Ni.get(e);if(!b)return;let i=[];if(t==="clear")i=[...b.values()];else if(r==="length"&&ce(e)){const l=Number(c);b.forEach((u,_)=>{(_==="length"||!oi(_)&&_>=l)&&i.push(u)})}else switch(r!==void 0&&i.push(b.get(r)),t){case"add":ce(e)?rs(r)&&i.push(b.get("length")):(i.push(b.get(ct)),Rt(e)&&i.push(b.get(Ui)));break;case"delete":ce(e)||(i.push(b.get(ct)),Rt(e)&&i.push(b.get(Ui)));break;case"set":Rt(e)&&i.push(b.get(ct));break}ls();for(const l of i)l&&kr(l,4);cs()}const eo=ts("__proto__,__v_isRef,__isVue"),Dr=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(oi)),Bs=to();function to(){const e={};return["includes","indexOf","lastIndexOf"].forEach(t=>{e[t]=function(...r){const c=ve(this);for(let S=0,b=this.length;S<b;S++)De(c,"get",S+"");const d=c[t](...r);return d===-1||d===!1?c[t](...r.map(ve)):d}}),["push","pop","shift","unshift","splice"].forEach(t=>{e[t]=function(...r){ut(),ls();const c=ve(this)[t].apply(this,r);return cs(),dt(),c}}),e}function io(e){const t=ve(this);return De(t,"has",e),t.hasOwnProperty(e)}class Tr{constructor(t=!1,r=!1){this._isReadonly=t,this._shallow=r}get(t,r,c){const d=this._isReadonly,S=this._shallow;if(r==="__v_isReactive")return!d;if(r==="__v_isReadonly")return d;if(r==="__v_isShallow")return S;if(r==="__v_raw")return c===(d?S?go:Pr:S?Mr:Or).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(c)?t:void 0;const b=ce(t);if(!d){if(b&&pe(Bs,r))return Reflect.get(Bs,r,c);if(r==="hasOwnProperty")return io}const i=Reflect.get(t,r,c);return(oi(r)?Dr.has(r):eo(r))||(d||De(t,"get",r),S)?i:Oe(i)?b&&rs(r)?i:i.value:Ce(i)?d?Ir(i):ds(i):i}}class Br extends Tr{constructor(t=!1){super(!1,t)}set(t,r,c,d){let S=t[r];if(!this._shallow){const l=Tt(S);if(!Wi(c)&&!Tt(c)&&(S=ve(S),c=ve(c)),!ce(t)&&Oe(S)&&!Oe(c))return l?!1:(S.value=c,!0)}const b=ce(t)&&rs(r)?Number(r)<t.length:pe(t,r),i=Reflect.set(t,r,c,d);return t===ve(d)&&(b?ht(c,S)&&qe(t,"set",r,c):qe(t,"add",r,c)),i}deleteProperty(t,r){const c=pe(t,r);t[r];const d=Reflect.deleteProperty(t,r);return d&&c&&qe(t,"delete",r,void 0),d}has(t,r){const c=Reflect.has(t,r);return(!oi(r)||!Dr.has(r))&&De(t,"has",r),c}ownKeys(t){return De(t,"iterate",ce(t)?"length":ct),Reflect.ownKeys(t)}}class so extends Tr{constructor(t=!1){super(!0,t)}set(t,r){return!0}deleteProperty(t,r){return!0}}const ro=new Br,no=new so,oo=new Br(!0),hs=e=>e,ci=e=>Reflect.getPrototypeOf(e);function Wt(e,t,r=!1,c=!1){e=e.__v_raw;const d=ve(e),S=ve(t);r||(ht(t,S)&&De(d,"get",t),De(d,"get",S));const{has:b}=ci(d),i=c?hs:r?ps:_s;if(b.call(d,t))return i(e.get(t));if(b.call(d,S))return i(e.get(S));e!==d&&e.get(t)}function jt(e,t=!1){const r=this.__v_raw,c=ve(r),d=ve(e);return t||(ht(e,d)&&De(c,"has",e),De(c,"has",d)),e===d?r.has(e):r.has(e)||r.has(d)}function $t(e,t=!1){return e=e.__v_raw,!t&&De(ve(e),"iterate",ct),Reflect.get(e,"size",e)}function Os(e){e=ve(e);const t=ve(this);return ci(t).has.call(t,e)||(t.add(e),qe(t,"add",e,e)),this}function Ms(e,t){t=ve(t);const r=ve(this),{has:c,get:d}=ci(r);let S=c.call(r,e);S||(e=ve(e),S=c.call(r,e));const b=d.call(r,e);return r.set(e,t),S?ht(t,b)&&qe(r,"set",e,t):qe(r,"add",e,t),this}function Ps(e){const t=ve(this),{has:r,get:c}=ci(t);let d=r.call(t,e);d||(e=ve(e),d=r.call(t,e)),c&&c.call(t,e);const S=t.delete(e);return d&&qe(t,"delete",e,void 0),S}function Is(){const e=ve(this),t=e.size!==0,r=e.clear();return t&&qe(e,"clear",void 0,void 0),r}function zt(e,t){return function(c,d){const S=this,b=S.__v_raw,i=ve(b),l=t?hs:e?ps:_s;return!e&&De(i,"iterate",ct),b.forEach((u,_)=>c.call(d,l(u),l(_),S))}}function Kt(e,t,r){return function(...c){const d=this.__v_raw,S=ve(d),b=Rt(S),i=e==="entries"||e===Symbol.iterator&&b,l=e==="keys"&&b,u=d[e](...c),_=r?hs:t?ps:_s;return!t&&De(S,"iterate",l?Ui:ct),{next(){const{value:h,done:g}=u.next();return g?{value:h,done:g}:{value:i?[_(h[0]),_(h[1])]:_(h),done:g}},[Symbol.iterator](){return this}}}}function Xe(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function ao(){const e={get(S){return Wt(this,S)},get size(){return $t(this)},has:jt,add:Os,set:Ms,delete:Ps,clear:Is,forEach:zt(!1,!1)},t={get(S){return Wt(this,S,!1,!0)},get size(){return $t(this)},has:jt,add:Os,set:Ms,delete:Ps,clear:Is,forEach:zt(!1,!0)},r={get(S){return Wt(this,S,!0)},get size(){return $t(this,!0)},has(S){return jt.call(this,S,!0)},add:Xe("add"),set:Xe("set"),delete:Xe("delete"),clear:Xe("clear"),forEach:zt(!0,!1)},c={get(S){return Wt(this,S,!0,!0)},get size(){return $t(this,!0)},has(S){return jt.call(this,S,!0)},add:Xe("add"),set:Xe("set"),delete:Xe("delete"),clear:Xe("clear"),forEach:zt(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(S=>{e[S]=Kt(S,!1,!1),r[S]=Kt(S,!0,!1),t[S]=Kt(S,!1,!0),c[S]=Kt(S,!0,!0)}),[e,r,t,c]}const[lo,co,ho,uo]=ao();function us(e,t){const r=t?e?uo:ho:e?co:lo;return(c,d,S)=>d==="__v_isReactive"?!e:d==="__v_isReadonly"?e:d==="__v_raw"?c:Reflect.get(pe(r,d)&&d in c?r:c,d,S)}const fo={get:us(!1,!1)},_o={get:us(!1,!0)},po={get:us(!0,!1)},Or=new WeakMap,Mr=new WeakMap,Pr=new WeakMap,go=new WeakMap;function vo(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function mo(e){return e.__v_skip||!Object.isExtensible(e)?0:vo(Un(e))}function ds(e){return Tt(e)?e:fs(e,!1,ro,fo,Or)}function So(e){return fs(e,!1,oo,_o,Mr)}function Ir(e){return fs(e,!0,no,po,Pr)}function fs(e,t,r,c,d){if(!Ce(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const S=d.get(e);if(S)return S;const b=mo(e);if(b===0)return e;const i=new Proxy(e,b===2?c:r);return d.set(e,i),i}function pt(e){return Tt(e)?pt(e.__v_raw):!!(e&&e.__v_isReactive)}function Tt(e){return!!(e&&e.__v_isReadonly)}function Wi(e){return!!(e&&e.__v_isShallow)}function Hr(e){return pt(e)||Tt(e)}function ve(e){const t=e&&e.__v_raw;return t?ve(t):e}function Fr(e){return Object.isExtensible(e)&&ei(e,"__v_skip",!0),e}const _s=e=>Ce(e)?ds(e):e,ps=e=>Ce(e)?Ir(e):e;class Nr{constructor(t,r,c,d){this._setter=r,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this.effect=new as(()=>t(this._value),()=>wi(this,this.effect._dirtyLevel===2?2:3)),this.effect.computed=this,this.effect.active=this._cacheable=!d,this.__v_isReadonly=c}get value(){const t=ve(this);return(!t._cacheable||t.effect.dirty)&&ht(t._value,t._value=t.effect.run())&&wi(t,4),Co(t),t.effect._dirtyLevel>=2&&wi(t,2),t._value}set value(t){this._setter(t)}get _dirty(){return this.effect.dirty}set _dirty(t){this.effect.dirty=t}}function bo(e,t,r=!1){let c,d;const S=ue(e);return S?(c=e,d=Me):(c=e.get,d=e.set),new Nr(c,d,S||!d,r)}function Co(e){var t;tt&&lt&&(e=ve(e),Lr(lt,(t=e.dep)!=null?t:e.dep=Ar(()=>e.dep=void 0,e instanceof Nr?e:void 0)))}function wi(e,t=4,r){e=ve(e);const c=e.dep;c&&kr(c,t)}function Oe(e){return!!(e&&e.__v_isRef===!0)}function yo(e){return Oe(e)?e.value:e}const wo={get:(e,t,r)=>yo(Reflect.get(e,t,r)),set:(e,t,r,c)=>{const d=e[t];return Oe(d)&&!Oe(r)?(d.value=r,!0):Reflect.set(e,t,r,c)}};function Ur(e){return pt(e)?e:new Proxy(e,wo)}/**
* @vue/runtime-core v3.4.19
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function it(e,t,r,c){try{return c?e(...c):e()}catch(d){hi(d,t,r)}}function Fe(e,t,r,c){if(ue(e)){const S=it(e,t,r,c);return S&&Cr(S)&&S.catch(b=>{hi(b,t,r)}),S}const d=[];for(let S=0;S<e.length;S++)d.push(Fe(e[S],t,r,c));return d}function hi(e,t,r,c=!0){const d=t?t.vnode:null;if(t){let S=t.parent;const b=t.proxy,i=`https://vuejs.org/error-reference/#runtime-${r}`;for(;S;){const u=S.ec;if(u){for(let _=0;_<u.length;_++)if(u[_](e,b,i)===!1)return}S=S.parent}const l=t.appContext.config.errorHandler;if(l){it(l,null,10,[e,b,i]);return}}Eo(e,r,d,c)}function Eo(e,t,r,c=!0){console.error(e)}let Bt=!1,ji=!1;const xe=[];let $e=0;const gt=[];let Ye=null,ot=0;const Wr=Promise.resolve();let gs=null;function xo(e){const t=gs||Wr;return e?t.then(this?e.bind(this):e):t}function Ro(e){let t=$e+1,r=xe.length;for(;t<r;){const c=t+r>>>1,d=xe[c],S=Ot(d);S<e||S===e&&d.pre?t=c+1:r=c}return t}function vs(e){(!xe.length||!xe.includes(e,Bt&&e.allowRecurse?$e+1:$e))&&(e.id==null?xe.push(e):xe.splice(Ro(e.id),0,e),jr())}function jr(){!Bt&&!ji&&(ji=!0,gs=Wr.then(zr))}function Lo(e){const t=xe.indexOf(e);t>$e&&xe.splice(t,1)}function ko(e){ce(e)?gt.push(...e):(!Ye||!Ye.includes(e,e.allowRecurse?ot+1:ot))&&gt.push(e),jr()}function Hs(e,t,r=Bt?$e+1:0){for(;r<xe.length;r++){const c=xe[r];if(c&&c.pre){if(e&&c.id!==e.uid)continue;xe.splice(r,1),r--,c()}}}function $r(e){if(gt.length){const t=[...new Set(gt)].sort((r,c)=>Ot(r)-Ot(c));if(gt.length=0,Ye){Ye.push(...t);return}for(Ye=t,ot=0;ot<Ye.length;ot++)Ye[ot]();Ye=null,ot=0}}const Ot=e=>e.id==null?1/0:e.id,Ao=(e,t)=>{const r=Ot(e)-Ot(t);if(r===0){if(e.pre&&!t.pre)return-1;if(t.pre&&!e.pre)return 1}return r};function zr(e){ji=!1,Bt=!0,xe.sort(Ao);try{for($e=0;$e<xe.length;$e++){const t=xe[$e];t&&t.active!==!1&&it(t,null,14)}}finally{$e=0,xe.length=0,$r(),Bt=!1,gs=null,(xe.length||gt.length)&&zr()}}function Do(e,t,...r){if(e.isUnmounted)return;const c=e.vnode.props||be;let d=r;const S=t.startsWith("update:"),b=S&&t.slice(7);if(b&&b in c){const _=`${b==="modelValue"?"model":b}Modifiers`,{number:h,trim:g}=c[_]||be;g&&(d=r.map(C=>Ee(C)?C.trim():C)),h&&(d=r.map(Ii))}let i,l=c[i=yi(t)]||c[i=yi(vt(t))];!l&&S&&(l=c[i=yi(bt(t))]),l&&Fe(l,e,6,d);const u=c[i+"Once"];if(u){if(!e.emitted)e.emitted={};else if(e.emitted[i])return;e.emitted[i]=!0,Fe(u,e,6,d)}}function Kr(e,t,r=!1){const c=t.emitsCache,d=c.get(e);if(d!==void 0)return d;const S=e.emits;let b={},i=!1;if(!ue(e)){const l=u=>{const _=Kr(u,t,!0);_&&(i=!0,Re(b,_))};!r&&t.mixins.length&&t.mixins.forEach(l),e.extends&&l(e.extends),e.mixins&&e.mixins.forEach(l)}return!S&&!i?(Ce(e)&&c.set(e,null),null):(ce(S)?S.forEach(l=>b[l]=null):Re(b,S),Ce(e)&&c.set(e,b),b)}function ui(e,t){return!e||!ni(t)?!1:(t=t.slice(2).replace(/Once$/,""),pe(e,t[0].toLowerCase()+t.slice(1))||pe(e,bt(t))||pe(e,t))}let Be=null,qr=null;function ti(e){const t=Be;return Be=e,qr=e&&e.type.__scopeId||null,t}function To(e,t=Be,r){if(!t||e._n)return e;const c=(...d)=>{c._d&&Gs(-1);const S=ti(t);let b;try{b=e(...d)}finally{ti(S),c._d&&Gs(1)}return b};return c._n=!0,c._c=!0,c._d=!0,c}function Ei(e){const{type:t,vnode:r,proxy:c,withProxy:d,props:S,propsOptions:[b],slots:i,attrs:l,emit:u,render:_,renderCache:h,data:g,setupState:C,ctx:y,inheritAttrs:v}=e;let s,a;const n=ti(e);try{if(r.shapeFlag&4){const f=d||c,m=f;s=je(_.call(m,f,h,S,C,g,y)),a=l}else{const f=t;s=je(f.length>1?f(S,{attrs:l,slots:i,emit:u}):f(S,null)),a=t.props?l:Bo(l)}}catch(f){Dt.length=0,hi(f,e,1),s=st(Mt)}let o=s;if(a&&v!==!1){const f=Object.keys(a),{shapeFlag:m}=o;f.length&&m&7&&(b&&f.some(is)&&(a=Oo(a,b)),o=mt(o,a))}return r.dirs&&(o=mt(o),o.dirs=o.dirs?o.dirs.concat(r.dirs):r.dirs),r.transition&&(o.transition=r.transition),s=o,ti(n),s}const Bo=e=>{let t;for(const r in e)(r==="class"||r==="style"||ni(r))&&((t||(t={}))[r]=e[r]);return t},Oo=(e,t)=>{const r={};for(const c in e)(!is(c)||!(c.slice(9)in t))&&(r[c]=e[c]);return r};function Mo(e,t,r){const{props:c,children:d,component:S}=e,{props:b,children:i,patchFlag:l}=t,u=S.emitsOptions;if(t.dirs||t.transition)return!0;if(r&&l>=0){if(l&1024)return!0;if(l&16)return c?Fs(c,b,u):!!b;if(l&8){const _=t.dynamicProps;for(let h=0;h<_.length;h++){const g=_[h];if(b[g]!==c[g]&&!ui(u,g))return!0}}}else return(d||i)&&(!i||!i.$stable)?!0:c===b?!1:c?b?Fs(c,b,u):!0:!!b;return!1}function Fs(e,t,r){const c=Object.keys(t);if(c.length!==Object.keys(e).length)return!0;for(let d=0;d<c.length;d++){const S=c[d];if(t[S]!==e[S]&&!ui(r,S))return!0}return!1}function Po({vnode:e,parent:t},r){for(;t;){const c=t.subTree;if(c.suspense&&c.suspense.activeBranch===e&&(c.el=e.el),c===e)(e=t.vnode).el=r,t=t.parent;else break}}const Io=Symbol.for("v-ndc"),Ho=e=>e.__isSuspense;function Fo(e,t){t&&t.pendingBranch?ce(e)?t.effects.push(...e):t.effects.push(e):ko(e)}const No=Symbol.for("v-scx"),Uo=()=>Xt(No),qt={};function xi(e,t,r){return Vr(e,t,r)}function Vr(e,t,{immediate:r,deep:c,flush:d,once:S,onTrack:b,onTrigger:i}=be){if(t&&S){const w=t;t=(...R)=>{w(...R),m()}}const l=ke,u=w=>c===!0?w:at(w,c===!1?1:void 0);let _,h=!1,g=!1;if(Oe(e)?(_=()=>e.value,h=Wi(e)):pt(e)?(_=()=>u(e),h=!0):ce(e)?(g=!0,h=e.some(w=>pt(w)||Wi(w)),_=()=>e.map(w=>{if(Oe(w))return w.value;if(pt(w))return u(w);if(ue(w))return it(w,l,2)})):ue(e)?t?_=()=>it(e,l,2):_=()=>(C&&C(),Fe(e,l,3,[y])):_=Me,t&&c){const w=_;_=()=>at(w())}let C,y=w=>{C=o.onStop=()=>{it(w,l,4),C=o.onStop=void 0}},v;if(pi)if(y=Me,t?r&&Fe(t,l,3,[_(),g?[]:void 0,y]):_(),d==="sync"){const w=Uo();v=w.__watcherHandles||(w.__watcherHandles=[])}else return Me;let s=g?new Array(e.length).fill(qt):qt;const a=()=>{if(!(!o.active||!o.dirty))if(t){const w=o.run();(c||h||(g?w.some((R,p)=>ht(R,s[p])):ht(w,s)))&&(C&&C(),Fe(t,l,3,[w,s===qt?void 0:g&&s[0]===qt?[]:s,y]),s=w)}else o.run()};a.allowRecurse=!!t;let n;d==="sync"?n=a:d==="post"?n=()=>Ae(a,l&&l.suspense):(a.pre=!0,l&&(a.id=l.uid),n=()=>vs(a));const o=new as(_,Me,n),f=Zn(),m=()=>{o.stop(),f&&ss(f.effects,o)};return t?r?a():s=o.run():d==="post"?Ae(o.run.bind(o),l&&l.suspense):o.run(),v&&v.push(m),m}function Wo(e,t,r){const c=this.proxy,d=Ee(e)?e.includes(".")?Gr(c,e):()=>c[e]:e.bind(c,c);let S;ue(t)?S=t:(S=t.handler,r=t);const b=Ht(this),i=Vr(d,S.bind(c),r);return b(),i}function Gr(e,t){const r=t.split(".");return()=>{let c=e;for(let d=0;d<r.length&&c;d++)c=c[r[d]];return c}}function at(e,t,r=0,c){if(!Ce(e)||e.__v_skip)return e;if(t&&t>0){if(r>=t)return e;r++}if(c=c||new Set,c.has(e))return e;if(c.add(e),Oe(e))at(e.value,t,r,c);else if(ce(e))for(let d=0;d<e.length;d++)at(e[d],t,r,c);else if(Fn(e)||Rt(e))e.forEach(d=>{at(d,t,r,c)});else if(Wn(e))for(const d in e)at(e[d],t,r,c);return e}function Ns(e,t){if(Be===null)return e;const r=gi(Be)||Be.proxy,c=e.dirs||(e.dirs=[]);for(let d=0;d<t.length;d++){let[S,b,i,l=be]=t[d];S&&(ue(S)&&(S={mounted:S,updated:S}),S.deep&&at(b),c.push({dir:S,instance:r,value:b,oldValue:void 0,arg:i,modifiers:l}))}return e}function rt(e,t,r,c){const d=e.dirs,S=t&&t.dirs;for(let b=0;b<d.length;b++){const i=d[b];S&&(i.oldValue=S[b].value);let l=i.dir[c];l&&(ut(),Fe(l,r,8,[e.el,i,e,t]),dt())}}const Gt=e=>!!e.type.__asyncLoader,Xr=e=>e.type.__isKeepAlive;function jo(e,t){Jr(e,"a",t)}function $o(e,t){Jr(e,"da",t)}function Jr(e,t,r=ke){const c=e.__wdc||(e.__wdc=()=>{let d=r;for(;d;){if(d.isDeactivated)return;d=d.parent}return e()});if(di(t,c,r),r){let d=r.parent;for(;d&&d.parent;)Xr(d.parent.vnode)&&zo(c,t,r,d),d=d.parent}}function zo(e,t,r,c){const d=di(t,e,c,!0);Yr(()=>{ss(c[t],d)},r)}function di(e,t,r=ke,c=!1){if(r){const d=r[e]||(r[e]=[]),S=t.__weh||(t.__weh=(...b)=>{if(r.isUnmounted)return;ut();const i=Ht(r),l=Fe(t,r,e,b);return i(),dt(),l});return c?d.unshift(S):d.push(S),S}}const Ge=e=>(t,r=ke)=>(!pi||e==="sp")&&di(e,(...c)=>t(...c),r),Ko=Ge("bm"),qo=Ge("m"),Vo=Ge("bu"),Go=Ge("u"),Xo=Ge("bum"),Yr=Ge("um"),Jo=Ge("sp"),Yo=Ge("rtg"),Zo=Ge("rtc");function Qo(e,t=ke){di("ec",e,t)}const $i=e=>e?un(e)?gi(e)||e.proxy:$i(e.parent):null,kt=Re(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>$i(e.parent),$root:e=>$i(e.root),$emit:e=>e.emit,$options:e=>ms(e),$forceUpdate:e=>e.f||(e.f=()=>{e.effect.dirty=!0,vs(e.update)}),$nextTick:e=>e.n||(e.n=xo.bind(e.proxy)),$watch:e=>Wo.bind(e)}),Ri=(e,t)=>e!==be&&!e.__isScriptSetup&&pe(e,t),ea={get({_:e},t){const{ctx:r,setupState:c,data:d,props:S,accessCache:b,type:i,appContext:l}=e;let u;if(t[0]!=="$"){const C=b[t];if(C!==void 0)switch(C){case 1:return c[t];case 2:return d[t];case 4:return r[t];case 3:return S[t]}else{if(Ri(c,t))return b[t]=1,c[t];if(d!==be&&pe(d,t))return b[t]=2,d[t];if((u=e.propsOptions[0])&&pe(u,t))return b[t]=3,S[t];if(r!==be&&pe(r,t))return b[t]=4,r[t];zi&&(b[t]=0)}}const _=kt[t];let h,g;if(_)return t==="$attrs"&&De(e,"get",t),_(e);if((h=i.__cssModules)&&(h=h[t]))return h;if(r!==be&&pe(r,t))return b[t]=4,r[t];if(g=l.config.globalProperties,pe(g,t))return g[t]},set({_:e},t,r){const{data:c,setupState:d,ctx:S}=e;return Ri(d,t)?(d[t]=r,!0):c!==be&&pe(c,t)?(c[t]=r,!0):pe(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(S[t]=r,!0)},has({_:{data:e,setupState:t,accessCache:r,ctx:c,appContext:d,propsOptions:S}},b){let i;return!!r[b]||e!==be&&pe(e,b)||Ri(t,b)||(i=S[0])&&pe(i,b)||pe(c,b)||pe(kt,b)||pe(d.config.globalProperties,b)},defineProperty(e,t,r){return r.get!=null?e._.accessCache[t]=0:pe(r,"value")&&this.set(e,t,r.value,null),Reflect.defineProperty(e,t,r)}};function Us(e){return ce(e)?e.reduce((t,r)=>(t[r]=null,t),{}):e}let zi=!0;function ta(e){const t=ms(e),r=e.proxy,c=e.ctx;zi=!1,t.beforeCreate&&Ws(t.beforeCreate,e,"bc");const{data:d,computed:S,methods:b,watch:i,provide:l,inject:u,created:_,beforeMount:h,mounted:g,beforeUpdate:C,updated:y,activated:v,deactivated:s,beforeDestroy:a,beforeUnmount:n,destroyed:o,unmounted:f,render:m,renderTracked:w,renderTriggered:R,errorCaptured:p,serverPrefetch:E,expose:k,inheritAttrs:M,components:D,directives:O,filters:W}=t;if(u&&ia(u,c,null),b)for(const U in b){const x=b[U];ue(x)&&(c[U]=x.bind(r))}if(d){const U=d.call(r,r);Ce(U)&&(e.data=ds(U))}if(zi=!0,S)for(const U in S){const x=S[U],T=ue(x)?x.bind(r,r):ue(x.get)?x.get.bind(r,r):Me,B=!ue(x)&&ue(x.set)?x.set.bind(r):Me,I=Pa({get:T,set:B});Object.defineProperty(c,U,{enumerable:!0,configurable:!0,get:()=>I.value,set:G=>I.value=G})}if(i)for(const U in i)Zr(i[U],c,r,U);if(l){const U=ue(l)?l.call(r):l;Reflect.ownKeys(U).forEach(x=>{la(x,U[x])})}_&&Ws(_,e,"c");function K(U,x){ce(x)?x.forEach(T=>U(T.bind(r))):x&&U(x.bind(r))}if(K(Ko,h),K(qo,g),K(Vo,C),K(Go,y),K(jo,v),K($o,s),K(Qo,p),K(Zo,w),K(Yo,R),K(Xo,n),K(Yr,f),K(Jo,E),ce(k))if(k.length){const U=e.exposed||(e.exposed={});k.forEach(x=>{Object.defineProperty(U,x,{get:()=>r[x],set:T=>r[x]=T})})}else e.exposed||(e.exposed={});m&&e.render===Me&&(e.render=m),M!=null&&(e.inheritAttrs=M),D&&(e.components=D),O&&(e.directives=O)}function ia(e,t,r=Me){ce(e)&&(e=Ki(e));for(const c in e){const d=e[c];let S;Ce(d)?"default"in d?S=Xt(d.from||c,d.default,!0):S=Xt(d.from||c):S=Xt(d),Oe(S)?Object.defineProperty(t,c,{enumerable:!0,configurable:!0,get:()=>S.value,set:b=>S.value=b}):t[c]=S}}function Ws(e,t,r){Fe(ce(e)?e.map(c=>c.bind(t.proxy)):e.bind(t.proxy),t,r)}function Zr(e,t,r,c){const d=c.includes(".")?Gr(r,c):()=>r[c];if(Ee(e)){const S=t[e];ue(S)&&xi(d,S)}else if(ue(e))xi(d,e.bind(r));else if(Ce(e))if(ce(e))e.forEach(S=>Zr(S,t,r,c));else{const S=ue(e.handler)?e.handler.bind(r):t[e.handler];ue(S)&&xi(d,S,e)}}function ms(e){const t=e.type,{mixins:r,extends:c}=t,{mixins:d,optionsCache:S,config:{optionMergeStrategies:b}}=e.appContext,i=S.get(t);let l;return i?l=i:!d.length&&!r&&!c?l=t:(l={},d.length&&d.forEach(u=>ii(l,u,b,!0)),ii(l,t,b)),Ce(t)&&S.set(t,l),l}function ii(e,t,r,c=!1){const{mixins:d,extends:S}=t;S&&ii(e,S,r,!0),d&&d.forEach(b=>ii(e,b,r,!0));for(const b in t)if(!(c&&b==="expose")){const i=sa[b]||r&&r[b];e[b]=i?i(e[b],t[b]):t[b]}return e}const sa={data:js,props:$s,emits:$s,methods:xt,computed:xt,beforeCreate:Le,created:Le,beforeMount:Le,mounted:Le,beforeUpdate:Le,updated:Le,beforeDestroy:Le,beforeUnmount:Le,destroyed:Le,unmounted:Le,activated:Le,deactivated:Le,errorCaptured:Le,serverPrefetch:Le,components:xt,directives:xt,watch:na,provide:js,inject:ra};function js(e,t){return t?e?function(){return Re(ue(e)?e.call(this,this):e,ue(t)?t.call(this,this):t)}:t:e}function ra(e,t){return xt(Ki(e),Ki(t))}function Ki(e){if(ce(e)){const t={};for(let r=0;r<e.length;r++)t[e[r]]=e[r];return t}return e}function Le(e,t){return e?[...new Set([].concat(e,t))]:t}function xt(e,t){return e?Re(Object.create(null),e,t):t}function $s(e,t){return e?ce(e)&&ce(t)?[...new Set([...e,...t])]:Re(Object.create(null),Us(e),Us(t??{})):t}function na(e,t){if(!e)return t;if(!t)return e;const r=Re(Object.create(null),e);for(const c in t)r[c]=Le(e[c],t[c]);return r}function Qr(){return{app:null,config:{isNativeTag:In,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let oa=0;function aa(e,t){return function(c,d=null){ue(c)||(c=Re({},c)),d!=null&&!Ce(d)&&(d=null);const S=Qr(),b=new WeakSet;let i=!1;const l=S.app={_uid:oa++,_component:c,_props:d,_container:null,_context:S,_instance:null,version:Ia,get config(){return S.config},set config(u){},use(u,..._){return b.has(u)||(u&&ue(u.install)?(b.add(u),u.install(l,..._)):ue(u)&&(b.add(u),u(l,..._))),l},mixin(u){return S.mixins.includes(u)||S.mixins.push(u),l},component(u,_){return _?(S.components[u]=_,l):S.components[u]},directive(u,_){return _?(S.directives[u]=_,l):S.directives[u]},mount(u,_,h){if(!i){const g=st(c,d);return g.appContext=S,h===!0?h="svg":h===!1&&(h=void 0),_&&t?t(g,u):e(g,u,h),i=!0,l._container=u,u.__vue_app__=l,gi(g.component)||g.component.proxy}},unmount(){i&&(e(null,l._container),delete l._container.__vue_app__)},provide(u,_){return S.provides[u]=_,l},runWithContext(u){const _=At;At=l;try{return u()}finally{At=_}}};return l}}let At=null;function la(e,t){if(ke){let r=ke.provides;const c=ke.parent&&ke.parent.provides;c===r&&(r=ke.provides=Object.create(c)),r[e]=t}}function Xt(e,t,r=!1){const c=ke||Be;if(c||At){const d=c?c.parent==null?c.vnode.appContext&&c.vnode.appContext.provides:c.parent.provides:At._context.provides;if(d&&e in d)return d[e];if(arguments.length>1)return r&&ue(t)?t.call(c&&c.proxy):t}}function ca(e,t,r,c=!1){const d={},S={};ei(S,_i,1),e.propsDefaults=Object.create(null),en(e,t,d,S);for(const b in e.propsOptions[0])b in d||(d[b]=void 0);r?e.props=c?d:So(d):e.type.props?e.props=d:e.props=S,e.attrs=S}function ha(e,t,r,c){const{props:d,attrs:S,vnode:{patchFlag:b}}=e,i=ve(d),[l]=e.propsOptions;let u=!1;if((c||b>0)&&!(b&16)){if(b&8){const _=e.vnode.dynamicProps;for(let h=0;h<_.length;h++){let g=_[h];if(ui(e.emitsOptions,g))continue;const C=t[g];if(l)if(pe(S,g))C!==S[g]&&(S[g]=C,u=!0);else{const y=vt(g);d[y]=qi(l,i,y,C,e,!1)}else C!==S[g]&&(S[g]=C,u=!0)}}}else{en(e,t,d,S)&&(u=!0);let _;for(const h in i)(!t||!pe(t,h)&&((_=bt(h))===h||!pe(t,_)))&&(l?r&&(r[h]!==void 0||r[_]!==void 0)&&(d[h]=qi(l,i,h,void 0,e,!0)):delete d[h]);if(S!==i)for(const h in S)(!t||!pe(t,h))&&(delete S[h],u=!0)}u&&qe(e,"set","$attrs")}function en(e,t,r,c){const[d,S]=e.propsOptions;let b=!1,i;if(t)for(let l in t){if(Lt(l))continue;const u=t[l];let _;d&&pe(d,_=vt(l))?!S||!S.includes(_)?r[_]=u:(i||(i={}))[_]=u:ui(e.emitsOptions,l)||(!(l in c)||u!==c[l])&&(c[l]=u,b=!0)}if(S){const l=ve(r),u=i||be;for(let _=0;_<S.length;_++){const h=S[_];r[h]=qi(d,l,h,u[h],e,!pe(u,h))}}return b}function qi(e,t,r,c,d,S){const b=e[r];if(b!=null){const i=pe(b,"default");if(i&&c===void 0){const l=b.default;if(b.type!==Function&&!b.skipFactory&&ue(l)){const{propsDefaults:u}=d;if(r in u)c=u[r];else{const _=Ht(d);c=u[r]=l.call(null,t),_()}}else c=l}b[0]&&(S&&!i?c=!1:b[1]&&(c===""||c===bt(r))&&(c=!0))}return c}function tn(e,t,r=!1){const c=t.propsCache,d=c.get(e);if(d)return d;const S=e.props,b={},i=[];let l=!1;if(!ue(e)){const _=h=>{l=!0;const[g,C]=tn(h,t,!0);Re(b,g),C&&i.push(...C)};!r&&t.mixins.length&&t.mixins.forEach(_),e.extends&&_(e.extends),e.mixins&&e.mixins.forEach(_)}if(!S&&!l)return Ce(e)&&c.set(e,_t),_t;if(ce(S))for(let _=0;_<S.length;_++){const h=vt(S[_]);zs(h)&&(b[h]=be)}else if(S)for(const _ in S){const h=vt(_);if(zs(h)){const g=S[_],C=b[h]=ce(g)||ue(g)?{type:g}:Re({},g);if(C){const y=Vs(Boolean,C.type),v=Vs(String,C.type);C[0]=y>-1,C[1]=v<0||y<v,(y>-1||pe(C,"default"))&&i.push(h)}}}const u=[b,i];return Ce(e)&&c.set(e,u),u}function zs(e){return e[0]!=="$"&&!Lt(e)}function Ks(e){return e===null?"null":typeof e=="function"?e.name||"":typeof e=="object"&&e.constructor&&e.constructor.name||""}function qs(e,t){return Ks(e)===Ks(t)}function Vs(e,t){return ce(t)?t.findIndex(r=>qs(r,e)):ue(t)&&qs(t,e)?0:-1}const sn=e=>e[0]==="_"||e==="$stable",Ss=e=>ce(e)?e.map(je):[je(e)],ua=(e,t,r)=>{if(t._n)return t;const c=To((...d)=>Ss(t(...d)),r);return c._c=!1,c},rn=(e,t,r)=>{const c=e._ctx;for(const d in e){if(sn(d))continue;const S=e[d];if(ue(S))t[d]=ua(d,S,c);else if(S!=null){const b=Ss(S);t[d]=()=>b}}},nn=(e,t)=>{const r=Ss(t);e.slots.default=()=>r},da=(e,t)=>{if(e.vnode.shapeFlag&32){const r=t._;r?(e.slots=ve(t),ei(t,"_",r)):rn(t,e.slots={})}else e.slots={},t&&nn(e,t);ei(e.slots,_i,1)},fa=(e,t,r)=>{const{vnode:c,slots:d}=e;let S=!0,b=be;if(c.shapeFlag&32){const i=t._;i?r&&i===1?S=!1:(Re(d,t),!r&&i===1&&delete d._):(S=!t.$stable,rn(t,d)),b=t}else t&&(nn(e,t),b={default:1});if(S)for(const i in d)!sn(i)&&b[i]==null&&delete d[i]};function Vi(e,t,r,c,d=!1){if(ce(e)){e.forEach((g,C)=>Vi(g,t&&(ce(t)?t[C]:t),r,c,d));return}if(Gt(c)&&!d)return;const S=c.shapeFlag&4?gi(c.component)||c.component.proxy:c.el,b=d?null:S,{i,r:l}=e,u=t&&t.r,_=i.refs===be?i.refs={}:i.refs,h=i.setupState;if(u!=null&&u!==l&&(Ee(u)?(_[u]=null,pe(h,u)&&(h[u]=null)):Oe(u)&&(u.value=null)),ue(l))it(l,i,12,[b,_]);else{const g=Ee(l),C=Oe(l);if(g||C){const y=()=>{if(e.f){const v=g?pe(h,l)?h[l]:_[l]:l.value;d?ce(v)&&ss(v,S):ce(v)?v.includes(S)||v.push(S):g?(_[l]=[S],pe(h,l)&&(h[l]=_[l])):(l.value=[S],e.k&&(_[e.k]=l.value))}else g?(_[l]=b,pe(h,l)&&(h[l]=b)):C&&(l.value=b,e.k&&(_[e.k]=b))};b?(y.id=-1,Ae(y,r)):y()}}}const Ae=Fo;function _a(e){return pa(e)}function pa(e,t){const r=wr();r.__VUE__=!0;const{insert:c,remove:d,patchProp:S,createElement:b,createText:i,createComment:l,setText:u,setElementText:_,parentNode:h,nextSibling:g,setScopeId:C=Me,insertStaticContent:y}=e,v=(A,P,N,V=null,F=null,J=null,ee=void 0,Y=null,Z=!!P.dynamicChildren)=>{if(A===P)return;A&&!wt(A,P)&&(V=L(A),G(A,F,J,!0),A=null),P.patchFlag===-2&&(Z=!1,P.dynamicChildren=null);const{type:X,ref:Q,shapeFlag:ne}=P;switch(X){case fi:s(A,P,N,V);break;case Mt:a(A,P,N,V);break;case ki:A==null&&n(P,N,V,ee);break;case We:D(A,P,N,V,F,J,ee,Y,Z);break;default:ne&1?m(A,P,N,V,F,J,ee,Y,Z):ne&6?O(A,P,N,V,F,J,ee,Y,Z):(ne&64||ne&128)&&X.process(A,P,N,V,F,J,ee,Y,Z,j)}Q!=null&&F&&Vi(Q,A&&A.ref,J,P||A,!P)},s=(A,P,N,V)=>{if(A==null)c(P.el=i(P.children),N,V);else{const F=P.el=A.el;P.children!==A.children&&u(F,P.children)}},a=(A,P,N,V)=>{A==null?c(P.el=l(P.children||""),N,V):P.el=A.el},n=(A,P,N,V)=>{[A.el,A.anchor]=y(A.children,P,N,V,A.el,A.anchor)},o=({el:A,anchor:P},N,V)=>{let F;for(;A&&A!==P;)F=g(A),c(A,N,V),A=F;c(P,N,V)},f=({el:A,anchor:P})=>{let N;for(;A&&A!==P;)N=g(A),d(A),A=N;d(P)},m=(A,P,N,V,F,J,ee,Y,Z)=>{P.type==="svg"?ee="svg":P.type==="math"&&(ee="mathml"),A==null?w(P,N,V,F,J,ee,Y,Z):E(A,P,F,J,ee,Y,Z)},w=(A,P,N,V,F,J,ee,Y)=>{let Z,X;const{props:Q,shapeFlag:ne,transition:se,dirs:ae}=A;if(Z=A.el=b(A.type,J,Q&&Q.is,Q),ne&8?_(Z,A.children):ne&16&&p(A.children,Z,null,V,F,Li(A,J),ee,Y),ae&&rt(A,null,V,"created"),R(Z,A,A.scopeId,ee,V),Q){for(const de in Q)de!=="value"&&!Lt(de)&&S(Z,de,null,Q[de],J,A.children,V,F,_e);"value"in Q&&S(Z,"value",null,Q.value,J),(X=Q.onVnodeBeforeMount)&&Ue(X,V,A)}ae&&rt(A,null,V,"beforeMount");const he=ga(F,se);he&&se.beforeEnter(Z),c(Z,P,N),((X=Q&&Q.onVnodeMounted)||he||ae)&&Ae(()=>{X&&Ue(X,V,A),he&&se.enter(Z),ae&&rt(A,null,V,"mounted")},F)},R=(A,P,N,V,F)=>{if(N&&C(A,N),V)for(let J=0;J<V.length;J++)C(A,V[J]);if(F){let J=F.subTree;if(P===J){const ee=F.vnode;R(A,ee,ee.scopeId,ee.slotScopeIds,F.parent)}}},p=(A,P,N,V,F,J,ee,Y,Z=0)=>{for(let X=Z;X<A.length;X++){const Q=A[X]=Y?Ze(A[X]):je(A[X]);v(null,Q,P,N,V,F,J,ee,Y)}},E=(A,P,N,V,F,J,ee)=>{const Y=P.el=A.el;let{patchFlag:Z,dynamicChildren:X,dirs:Q}=P;Z|=A.patchFlag&16;const ne=A.props||be,se=P.props||be;let ae;if(N&&nt(N,!1),(ae=se.onVnodeBeforeUpdate)&&Ue(ae,N,P,A),Q&&rt(P,A,N,"beforeUpdate"),N&&nt(N,!0),X?k(A.dynamicChildren,X,Y,N,V,Li(P,F),J):ee||x(A,P,Y,null,N,V,Li(P,F),J,!1),Z>0){if(Z&16)M(Y,P,ne,se,N,V,F);else if(Z&2&&ne.class!==se.class&&S(Y,"class",null,se.class,F),Z&4&&S(Y,"style",ne.style,se.style,F),Z&8){const he=P.dynamicProps;for(let de=0;de<he.length;de++){const me=he[de],Se=ne[me],we=se[me];(we!==Se||me==="value")&&S(Y,me,Se,we,F,A.children,N,V,_e)}}Z&1&&A.children!==P.children&&_(Y,P.children)}else!ee&&X==null&&M(Y,P,ne,se,N,V,F);((ae=se.onVnodeUpdated)||Q)&&Ae(()=>{ae&&Ue(ae,N,P,A),Q&&rt(P,A,N,"updated")},V)},k=(A,P,N,V,F,J,ee)=>{for(let Y=0;Y<P.length;Y++){const Z=A[Y],X=P[Y],Q=Z.el&&(Z.type===We||!wt(Z,X)||Z.shapeFlag&70)?h(Z.el):N;v(Z,X,Q,null,V,F,J,ee,!0)}},M=(A,P,N,V,F,J,ee)=>{if(N!==V){if(N!==be)for(const Y in N)!Lt(Y)&&!(Y in V)&&S(A,Y,N[Y],null,ee,P.children,F,J,_e);for(const Y in V){if(Lt(Y))continue;const Z=V[Y],X=N[Y];Z!==X&&Y!=="value"&&S(A,Y,X,Z,ee,P.children,F,J,_e)}"value"in V&&S(A,"value",N.value,V.value,ee)}},D=(A,P,N,V,F,J,ee,Y,Z)=>{const X=P.el=A?A.el:i(""),Q=P.anchor=A?A.anchor:i("");let{patchFlag:ne,dynamicChildren:se,slotScopeIds:ae}=P;ae&&(Y=Y?Y.concat(ae):ae),A==null?(c(X,N,V),c(Q,N,V),p(P.children||[],N,Q,F,J,ee,Y,Z)):ne>0&&ne&64&&se&&A.dynamicChildren?(k(A.dynamicChildren,se,N,F,J,ee,Y),(P.key!=null||F&&P===F.subTree)&&on(A,P,!0)):x(A,P,N,Q,F,J,ee,Y,Z)},O=(A,P,N,V,F,J,ee,Y,Z)=>{P.slotScopeIds=Y,A==null?P.shapeFlag&512?F.ctx.activate(P,N,V,ee,Z):W(P,N,V,F,J,ee,Z):q(A,P,Z)},W=(A,P,N,V,F,J,ee)=>{const Y=A.component=Aa(A,V,F);if(Xr(A)&&(Y.ctx.renderer=j),Da(Y),Y.asyncDep){if(F&&F.registerDep(Y,K),!A.el){const Z=Y.subTree=st(Mt);a(null,Z,P,N)}}else K(Y,A,P,N,F,J,ee)},q=(A,P,N)=>{const V=P.component=A.component;if(Mo(A,P,N))if(V.asyncDep&&!V.asyncResolved){U(V,P,N);return}else V.next=P,Lo(V.update),V.effect.dirty=!0,V.update();else P.el=A.el,V.vnode=P},K=(A,P,N,V,F,J,ee)=>{const Y=()=>{if(A.isMounted){let{next:Q,bu:ne,u:se,parent:ae,vnode:he}=A;{const ge=an(A);if(ge){Q&&(Q.el=he.el,U(A,Q,ee)),ge.asyncDep.then(()=>{A.isUnmounted||Y()});return}}let de=Q,me;nt(A,!1),Q?(Q.el=he.el,U(A,Q,ee)):Q=he,ne&&Vt(ne),(me=Q.props&&Q.props.onVnodeBeforeUpdate)&&Ue(me,ae,Q,he),nt(A,!0);const Se=Ei(A),we=A.subTree;A.subTree=Se,v(we,Se,h(we.el),L(we),A,F,J),Q.el=Se.el,de===null&&Po(A,Se.el),se&&Ae(se,F),(me=Q.props&&Q.props.onVnodeUpdated)&&Ae(()=>Ue(me,ae,Q,he),F)}else{let Q;const{el:ne,props:se}=P,{bm:ae,m:he,parent:de}=A,me=Gt(P);if(nt(A,!1),ae&&Vt(ae),!me&&(Q=se&&se.onVnodeBeforeMount)&&Ue(Q,de,P),nt(A,!0),ne&&ie){const Se=()=>{A.subTree=Ei(A),ie(ne,A.subTree,A,F,null)};me?P.type.__asyncLoader().then(()=>!A.isUnmounted&&Se()):Se()}else{const Se=A.subTree=Ei(A);v(null,Se,N,V,A,F,J),P.el=Se.el}if(he&&Ae(he,F),!me&&(Q=se&&se.onVnodeMounted)){const Se=P;Ae(()=>Ue(Q,de,Se),F)}(P.shapeFlag&256||de&&Gt(de.vnode)&&de.vnode.shapeFlag&256)&&A.a&&Ae(A.a,F),A.isMounted=!0,P=N=V=null}},Z=A.effect=new as(Y,Me,()=>vs(X),A.scope),X=A.update=()=>{Z.dirty&&Z.run()};X.id=A.uid,nt(A,!0),X()},U=(A,P,N)=>{P.component=A;const V=A.vnode.props;A.vnode=P,A.next=null,ha(A,P.props,V,N),fa(A,P.children,N),ut(),Hs(A),dt()},x=(A,P,N,V,F,J,ee,Y,Z=!1)=>{const X=A&&A.children,Q=A?A.shapeFlag:0,ne=P.children,{patchFlag:se,shapeFlag:ae}=P;if(se>0){if(se&128){B(X,ne,N,V,F,J,ee,Y,Z);return}else if(se&256){T(X,ne,N,V,F,J,ee,Y,Z);return}}ae&8?(Q&16&&_e(X,F,J),ne!==X&&_(N,ne)):Q&16?ae&16?B(X,ne,N,V,F,J,ee,Y,Z):_e(X,F,J,!0):(Q&8&&_(N,""),ae&16&&p(ne,N,V,F,J,ee,Y,Z))},T=(A,P,N,V,F,J,ee,Y,Z)=>{A=A||_t,P=P||_t;const X=A.length,Q=P.length,ne=Math.min(X,Q);let se;for(se=0;se<ne;se++){const ae=P[se]=Z?Ze(P[se]):je(P[se]);v(A[se],ae,N,null,F,J,ee,Y,Z)}X>Q?_e(A,F,J,!0,!1,ne):p(P,N,V,F,J,ee,Y,Z,ne)},B=(A,P,N,V,F,J,ee,Y,Z)=>{let X=0;const Q=P.length;let ne=A.length-1,se=Q-1;for(;X<=ne&&X<=se;){const ae=A[X],he=P[X]=Z?Ze(P[X]):je(P[X]);if(wt(ae,he))v(ae,he,N,null,F,J,ee,Y,Z);else break;X++}for(;X<=ne&&X<=se;){const ae=A[ne],he=P[se]=Z?Ze(P[se]):je(P[se]);if(wt(ae,he))v(ae,he,N,null,F,J,ee,Y,Z);else break;ne--,se--}if(X>ne){if(X<=se){const ae=se+1,he=ae<Q?P[ae].el:V;for(;X<=se;)v(null,P[X]=Z?Ze(P[X]):je(P[X]),N,he,F,J,ee,Y,Z),X++}}else if(X>se)for(;X<=ne;)G(A[X],F,J,!0),X++;else{const ae=X,he=X,de=new Map;for(X=he;X<=se;X++){const Te=P[X]=Z?Ze(P[X]):je(P[X]);Te.key!=null&&de.set(Te.key,X)}let me,Se=0;const we=se-he+1;let ge=!1,Ut=0;const yt=new Array(we);for(X=0;X<we;X++)yt[X]=0;for(X=ae;X<=ne;X++){const Te=A[X];if(Se>=we){G(Te,F,J,!0);continue}let Ne;if(Te.key!=null)Ne=de.get(Te.key);else for(me=he;me<=se;me++)if(yt[me-he]===0&&wt(Te,P[me])){Ne=me;break}Ne===void 0?G(Te,F,J,!0):(yt[Ne-he]=X+1,Ne>=Ut?Ut=Ne:ge=!0,v(Te,P[Ne],N,null,F,J,ee,Y,Z),Se++)}const Ls=ge?va(yt):_t;for(me=Ls.length-1,X=we-1;X>=0;X--){const Te=he+X,Ne=P[Te],ks=Te+1<Q?P[Te+1].el:V;yt[X]===0?v(null,Ne,N,ks,F,J,ee,Y,Z):ge&&(me<0||X!==Ls[me]?I(Ne,N,ks,2):me--)}}},I=(A,P,N,V,F=null)=>{const{el:J,type:ee,transition:Y,children:Z,shapeFlag:X}=A;if(X&6){I(A.component.subTree,P,N,V);return}if(X&128){A.suspense.move(P,N,V);return}if(X&64){ee.move(A,P,N,j);return}if(ee===We){c(J,P,N);for(let ne=0;ne<Z.length;ne++)I(Z[ne],P,N,V);c(A.anchor,P,N);return}if(ee===ki){o(A,P,N);return}if(V!==2&&X&1&&Y)if(V===0)Y.beforeEnter(J),c(J,P,N),Ae(()=>Y.enter(J),F);else{const{leave:ne,delayLeave:se,afterLeave:ae}=Y,he=()=>c(J,P,N),de=()=>{ne(J,()=>{he(),ae&&ae()})};se?se(J,he,de):de()}else c(J,P,N)},G=(A,P,N,V=!1,F=!1)=>{const{type:J,props:ee,ref:Y,children:Z,dynamicChildren:X,shapeFlag:Q,patchFlag:ne,dirs:se}=A;if(Y!=null&&Vi(Y,null,N,A,!0),Q&256){P.ctx.deactivate(A);return}const ae=Q&1&&se,he=!Gt(A);let de;if(he&&(de=ee&&ee.onVnodeBeforeUnmount)&&Ue(de,P,A),Q&6)re(A.component,N,V);else{if(Q&128){A.suspense.unmount(N,V);return}ae&&rt(A,null,P,"beforeUnmount"),Q&64?A.type.remove(A,P,N,F,j,V):X&&(J!==We||ne>0&&ne&64)?_e(X,P,N,!1,!0):(J===We&&ne&384||!F&&Q&16)&&_e(Z,P,N),V&&te(A)}(he&&(de=ee&&ee.onVnodeUnmounted)||ae)&&Ae(()=>{de&&Ue(de,P,A),ae&&rt(A,null,P,"unmounted")},N)},te=A=>{const{type:P,el:N,anchor:V,transition:F}=A;if(P===We){oe(N,V);return}if(P===ki){f(A);return}const J=()=>{d(N),F&&!F.persisted&&F.afterLeave&&F.afterLeave()};if(A.shapeFlag&1&&F&&!F.persisted){const{leave:ee,delayLeave:Y}=F,Z=()=>ee(N,J);Y?Y(A.el,J,Z):Z()}else J()},oe=(A,P)=>{let N;for(;A!==P;)N=g(A),d(A),A=N;d(P)},re=(A,P,N)=>{const{bum:V,scope:F,update:J,subTree:ee,um:Y}=A;V&&Vt(V),F.stop(),J&&(J.active=!1,G(ee,A,P,N)),Y&&Ae(Y,P),Ae(()=>{A.isUnmounted=!0},P),P&&P.pendingBranch&&!P.isUnmounted&&A.asyncDep&&!A.asyncResolved&&A.suspenseId===P.pendingId&&(P.deps--,P.deps===0&&P.resolve())},_e=(A,P,N,V=!1,F=!1,J=0)=>{for(let ee=J;ee<A.length;ee++)G(A[ee],P,N,V,F)},L=A=>A.shapeFlag&6?L(A.component.subTree):A.shapeFlag&128?A.suspense.next():g(A.anchor||A.el);let H=!1;const $=(A,P,N)=>{A==null?P._vnode&&G(P._vnode,null,null,!0):v(P._vnode||null,A,P,null,null,null,N),H||(H=!0,Hs(),$r(),H=!1),P._vnode=A},j={p:v,um:G,m:I,r:te,mt:W,mc:p,pc:x,pbc:k,n:L,o:e};let le,ie;return t&&([le,ie]=t(j)),{render:$,hydrate:le,createApp:aa($,le)}}function Li({type:e,props:t},r){return r==="svg"&&e==="foreignObject"||r==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:r}function nt({effect:e,update:t},r){e.allowRecurse=t.allowRecurse=r}function ga(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function on(e,t,r=!1){const c=e.children,d=t.children;if(ce(c)&&ce(d))for(let S=0;S<c.length;S++){const b=c[S];let i=d[S];i.shapeFlag&1&&!i.dynamicChildren&&((i.patchFlag<=0||i.patchFlag===32)&&(i=d[S]=Ze(d[S]),i.el=b.el),r||on(b,i)),i.type===fi&&(i.el=b.el)}}function va(e){const t=e.slice(),r=[0];let c,d,S,b,i;const l=e.length;for(c=0;c<l;c++){const u=e[c];if(u!==0){if(d=r[r.length-1],e[d]<u){t[c]=d,r.push(c);continue}for(S=0,b=r.length-1;S<b;)i=S+b>>1,e[r[i]]<u?S=i+1:b=i;u<e[r[S]]&&(S>0&&(t[c]=r[S-1]),r[S]=c)}}for(S=r.length,b=r[S-1];S-- >0;)r[S]=b,b=t[b];return r}function an(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:an(t)}const ma=e=>e.__isTeleport,We=Symbol.for("v-fgt"),fi=Symbol.for("v-txt"),Mt=Symbol.for("v-cmt"),ki=Symbol.for("v-stc"),Dt=[];let He=null;function ln(e=!1){Dt.push(He=e?null:[])}function Sa(){Dt.pop(),He=Dt[Dt.length-1]||null}let Pt=1;function Gs(e){Pt+=e}function cn(e){return e.dynamicChildren=Pt>0?He||_t:null,Sa(),Pt>0&&He&&He.push(e),e}function ba(e,t,r,c,d,S){return cn(et(e,t,r,c,d,S,!0))}function Ca(e,t,r,c,d){return cn(st(e,t,r,c,d,!0))}function ya(e){return e?e.__v_isVNode===!0:!1}function wt(e,t){return e.type===t.type&&e.key===t.key}const _i="__vInternal",hn=({key:e})=>e??null,Jt=({ref:e,ref_key:t,ref_for:r})=>(typeof e=="number"&&(e=""+e),e!=null?Ee(e)||Oe(e)||ue(e)?{i:Be,r:e,k:t,f:!!r}:e:null);function et(e,t=null,r=null,c=0,d=null,S=e===We?0:1,b=!1,i=!1){const l={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&hn(t),ref:t&&Jt(t),scopeId:qr,slotScopeIds:null,children:r,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:S,patchFlag:c,dynamicProps:d,dynamicChildren:null,appContext:null,ctx:Be};return i?(bs(l,r),S&128&&e.normalize(l)):r&&(l.shapeFlag|=Ee(r)?8:16),Pt>0&&!b&&He&&(l.patchFlag>0||S&6)&&l.patchFlag!==32&&He.push(l),l}const st=wa;function wa(e,t=null,r=null,c=0,d=null,S=!1){if((!e||e===Io)&&(e=Mt),ya(e)){const i=mt(e,t,!0);return r&&bs(i,r),Pt>0&&!S&&He&&(i.shapeFlag&6?He[He.indexOf(e)]=i:He.push(i)),i.patchFlag|=-2,i}if(Ma(e)&&(e=e.__vccOpts),t){t=Ea(t);let{class:i,style:l}=t;i&&!Ee(i)&&(t.class=os(i)),Ce(l)&&(Hr(l)&&!ce(l)&&(l=Re({},l)),t.style=ns(l))}const b=Ee(e)?1:Ho(e)?128:ma(e)?64:Ce(e)?4:ue(e)?2:0;return et(e,t,r,c,d,b,S,!0)}function Ea(e){return e?Hr(e)||_i in e?Re({},e):e:null}function mt(e,t,r=!1){const{props:c,ref:d,patchFlag:S,children:b}=e,i=t?Ra(c||{},t):c;return{__v_isVNode:!0,__v_skip:!0,type:e.type,props:i,key:i&&hn(i),ref:t&&t.ref?r&&d?ce(d)?d.concat(Jt(t)):[d,Jt(t)]:Jt(t):d,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:b,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==We?S===-1?16:S|16:S,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&mt(e.ssContent),ssFallback:e.ssFallback&&mt(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce}}function xa(e=" ",t=0){return st(fi,null,e,t)}function je(e){return e==null||typeof e=="boolean"?st(Mt):ce(e)?st(We,null,e.slice()):typeof e=="object"?Ze(e):st(fi,null,String(e))}function Ze(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:mt(e)}function bs(e,t){let r=0;const{shapeFlag:c}=e;if(t==null)t=null;else if(ce(t))r=16;else if(typeof t=="object")if(c&65){const d=t.default;d&&(d._c&&(d._d=!1),bs(e,d()),d._c&&(d._d=!0));return}else{r=32;const d=t._;!d&&!(_i in t)?t._ctx=Be:d===3&&Be&&(Be.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else ue(t)?(t={default:t,_ctx:Be},r=32):(t=String(t),c&64?(r=16,t=[xa(t)]):r=8);e.children=t,e.shapeFlag|=r}function Ra(...e){const t={};for(let r=0;r<e.length;r++){const c=e[r];for(const d in c)if(d==="class")t.class!==c.class&&(t.class=os([t.class,c.class]));else if(d==="style")t.style=ns([t.style,c.style]);else if(ni(d)){const S=t[d],b=c[d];b&&S!==b&&!(ce(S)&&S.includes(b))&&(t[d]=S?[].concat(S,b):b)}else d!==""&&(t[d]=c[d])}return t}function Ue(e,t,r,c=null){Fe(e,t,7,[r,c])}const La=Qr();let ka=0;function Aa(e,t,r){const c=e.type,d=(t?t.appContext:e.appContext)||La,S={uid:ka++,vnode:e,type:c,parent:t,appContext:d,root:null,next:null,subTree:null,effect:null,update:null,scope:new Jn(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(d.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:tn(c,d),emitsOptions:Kr(c,d),emit:null,emitted:null,propsDefaults:be,inheritAttrs:c.inheritAttrs,ctx:be,data:be,props:be,attrs:be,slots:be,refs:be,setupState:be,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:r,suspenseId:r?r.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return S.ctx={_:S},S.root=t?t.root:S,S.emit=Do.bind(null,S),e.ce&&e.ce(S),S}let ke=null,si,Gi;{const e=wr(),t=(r,c)=>{let d;return(d=e[r])||(d=e[r]=[]),d.push(c),S=>{d.length>1?d.forEach(b=>b(S)):d[0](S)}};si=t("__VUE_INSTANCE_SETTERS__",r=>ke=r),Gi=t("__VUE_SSR_SETTERS__",r=>pi=r)}const Ht=e=>{const t=ke;return si(e),e.scope.on(),()=>{e.scope.off(),si(t)}},Xs=()=>{ke&&ke.scope.off(),si(null)};function un(e){return e.vnode.shapeFlag&4}let pi=!1;function Da(e,t=!1){t&&Gi(t);const{props:r,children:c}=e.vnode,d=un(e);ca(e,r,d,t),da(e,c);const S=d?Ta(e,t):void 0;return t&&Gi(!1),S}function Ta(e,t){const r=e.type;e.accessCache=Object.create(null),e.proxy=Fr(new Proxy(e.ctx,ea));const{setup:c}=r;if(c){const d=e.setupContext=c.length>1?Oa(e):null,S=Ht(e);ut();const b=it(c,e,0,[e.props,d]);if(dt(),S(),Cr(b)){if(b.then(Xs,Xs),t)return b.then(i=>{Js(e,i,t)}).catch(i=>{hi(i,e,0)});e.asyncDep=b}else Js(e,b,t)}else dn(e,t)}function Js(e,t,r){ue(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:Ce(t)&&(e.setupState=Ur(t)),dn(e,r)}let Ys;function dn(e,t,r){const c=e.type;if(!e.render){if(!t&&Ys&&!c.render){const d=c.template||ms(e).template;if(d){const{isCustomElement:S,compilerOptions:b}=e.appContext.config,{delimiters:i,compilerOptions:l}=c,u=Re(Re({isCustomElement:S,delimiters:i},b),l);c.render=Ys(d,u)}}e.render=c.render||Me}{const d=Ht(e);ut();try{ta(e)}finally{dt(),d()}}}function Ba(e){return e.attrsProxy||(e.attrsProxy=new Proxy(e.attrs,{get(t,r){return De(e,"get","$attrs"),t[r]}}))}function Oa(e){const t=r=>{e.exposed=r||{}};return{get attrs(){return Ba(e)},slots:e.slots,emit:e.emit,expose:t}}function gi(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy(Ur(Fr(e.exposed)),{get(t,r){if(r in t)return t[r];if(r in kt)return kt[r](e)},has(t,r){return r in t||r in kt}}))}function Ma(e){return ue(e)&&"__vccOpts"in e}const Pa=(e,t)=>bo(e,t,pi),Ia="3.4.19";/**
* @vue/runtime-dom v3.4.19
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const Ha="http://www.w3.org/2000/svg",Fa="http://www.w3.org/1998/Math/MathML",Qe=typeof document<"u"?document:null,Zs=Qe&&Qe.createElement("template"),Na={insert:(e,t,r)=>{t.insertBefore(e,r||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,r,c)=>{const d=t==="svg"?Qe.createElementNS(Ha,e):t==="mathml"?Qe.createElementNS(Fa,e):Qe.createElement(e,r?{is:r}:void 0);return e==="select"&&c&&c.multiple!=null&&d.setAttribute("multiple",c.multiple),d},createText:e=>Qe.createTextNode(e),createComment:e=>Qe.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Qe.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,r,c,d,S){const b=r?r.previousSibling:t.lastChild;if(d&&(d===S||d.nextSibling))for(;t.insertBefore(d.cloneNode(!0),r),!(d===S||!(d=d.nextSibling)););else{Zs.innerHTML=c==="svg"?`<svg>${e}</svg>`:c==="mathml"?`<math>${e}</math>`:e;const i=Zs.content;if(c==="svg"||c==="mathml"){const l=i.firstChild;for(;l.firstChild;)i.appendChild(l.firstChild);i.removeChild(l)}t.insertBefore(i,r)}return[b?b.nextSibling:t.firstChild,r?r.previousSibling:t.lastChild]}},Ua=Symbol("_vtc");function Wa(e,t,r){const c=e[Ua];c&&(t=(t?[t,...c]:[...c]).join(" ")),t==null?e.removeAttribute("class"):r?e.setAttribute("class",t):e.className=t}const Qs=Symbol("_vod"),ja=Symbol(""),$a=/(^|;)\s*display\s*:/;function za(e,t,r){const c=e.style,d=Ee(r),S=c.display;let b=!1;if(r&&!d){if(t&&!Ee(t))for(const i in t)r[i]==null&&Xi(c,i,"");for(const i in r)i==="display"&&(b=!0),Xi(c,i,r[i])}else if(d){if(t!==r){const i=c[ja];i&&(r+=";"+i),c.cssText=r,b=$a.test(r)}}else t&&e.removeAttribute("style");Qs in e&&(e[Qs]=b?c.display:"",c.display=S)}const er=/\s*!important$/;function Xi(e,t,r){if(ce(r))r.forEach(c=>Xi(e,t,c));else if(r==null&&(r=""),t.startsWith("--"))e.setProperty(t,r);else{const c=Ka(e,t);er.test(r)?e.setProperty(bt(c),r.replace(er,""),"important"):e[c]=r}}const tr=["Webkit","Moz","ms"],Ai={};function Ka(e,t){const r=Ai[t];if(r)return r;let c=vt(t);if(c!=="filter"&&c in e)return Ai[t]=c;c=yr(c);for(let d=0;d<tr.length;d++){const S=tr[d]+c;if(S in e)return Ai[t]=S}return t}const ir="http://www.w3.org/1999/xlink";function qa(e,t,r,c,d){if(c&&t.startsWith("xlink:"))r==null?e.removeAttributeNS(ir,t.slice(6,t.length)):e.setAttributeNS(ir,t,r);else{const S=Xn(t);r==null||S&&!Er(r)?e.removeAttribute(t):e.setAttribute(t,S?"":r)}}function Va(e,t,r,c,d,S,b){if(t==="innerHTML"||t==="textContent"){c&&b(c,d,S),e[t]=r??"";return}const i=e.tagName;if(t==="value"&&i!=="PROGRESS"&&!i.includes("-")){e._value=r;const u=i==="OPTION"?e.getAttribute("value"):e.value,_=r??"";u!==_&&(e.value=_),r==null&&e.removeAttribute(t);return}let l=!1;if(r===""||r==null){const u=typeof e[t];u==="boolean"?r=Er(r):r==null&&u==="string"?(r="",l=!0):u==="number"&&(r=0,l=!0)}try{e[t]=r}catch{}l&&e.removeAttribute(t)}function ft(e,t,r,c){e.addEventListener(t,r,c)}function Ga(e,t,r,c){e.removeEventListener(t,r,c)}const sr=Symbol("_vei");function Xa(e,t,r,c,d=null){const S=e[sr]||(e[sr]={}),b=S[t];if(c&&b)b.value=c;else{const[i,l]=Ja(t);if(c){const u=S[t]=Qa(c,d);ft(e,i,u,l)}else b&&(Ga(e,i,b,l),S[t]=void 0)}}const rr=/(?:Once|Passive|Capture)$/;function Ja(e){let t;if(rr.test(e)){t={};let c;for(;c=e.match(rr);)e=e.slice(0,e.length-c[0].length),t[c[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):bt(e.slice(2)),t]}let Di=0;const Ya=Promise.resolve(),Za=()=>Di||(Ya.then(()=>Di=0),Di=Date.now());function Qa(e,t){const r=c=>{if(!c._vts)c._vts=Date.now();else if(c._vts<=r.attached)return;Fe(el(c,r.value),t,5,[c])};return r.value=e,r.attached=Za(),r}function el(e,t){if(ce(t)){const r=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{r.call(e),e._stopped=!0},t.map(c=>d=>!d._stopped&&c&&c(d))}else return t}const nr=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,tl=(e,t,r,c,d,S,b,i,l)=>{const u=d==="svg";t==="class"?Wa(e,c,u):t==="style"?za(e,r,c):ni(t)?is(t)||Xa(e,t,r,c,b):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):il(e,t,c,u))?Va(e,t,c,S,b,i,l):(t==="true-value"?e._trueValue=c:t==="false-value"&&(e._falseValue=c),qa(e,t,c,u))};function il(e,t,r,c){if(c)return!!(t==="innerHTML"||t==="textContent"||t in e&&nr(t)&&ue(r));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const d=e.tagName;if(d==="IMG"||d==="VIDEO"||d==="CANVAS"||d==="SOURCE")return!1}return nr(t)&&Ee(r)?!1:t in e}const or=e=>{const t=e.props["onUpdate:modelValue"]||!1;return ce(t)?r=>Vt(t,r):t};function sl(e){e.target.composing=!0}function ar(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const Ti=Symbol("_assign"),lr={created(e,{modifiers:{lazy:t,trim:r,number:c}},d){e[Ti]=or(d);const S=c||d.props&&d.props.type==="number";ft(e,t?"change":"input",b=>{if(b.target.composing)return;let i=e.value;r&&(i=i.trim()),S&&(i=Ii(i)),e[Ti](i)}),r&&ft(e,"change",()=>{e.value=e.value.trim()}),t||(ft(e,"compositionstart",sl),ft(e,"compositionend",ar),ft(e,"change",ar))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,modifiers:{lazy:r,trim:c,number:d}},S){if(e[Ti]=or(S),e.composing)return;const b=d||e.type==="number"?Ii(e.value):e.value,i=t??"";b!==i&&(document.activeElement===e&&e.type!=="range"&&(r||c&&e.value.trim()===i)||(e.value=i))}},rl=Re({patchProp:tl},Na);let cr;function nl(){return cr||(cr=_a(rl))}const ol=(...e)=>{const t=nl().createApp(...e),{mount:r}=t;return t.mount=c=>{const d=ll(c);if(!d)return;const S=t._component;!ue(S)&&!S.render&&!S.template&&(S.template=d.innerHTML),d.innerHTML="";const b=r(d,!1,al(d));return d instanceof Element&&(d.removeAttribute("v-cloak"),d.setAttribute("data-v-app","")),b},t};function al(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function ll(e){return Ee(e)?document.querySelector(e):e}var fn={exports:{}};(function(e,t){(function(r,c){e.exports=c()})(self,()=>(()=>{var r={4567:function(b,i,l){var u=this&&this.__decorate||function(o,f,m,w){var R,p=arguments.length,E=p<3?f:w===null?w=Object.getOwnPropertyDescriptor(f,m):w;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(o,f,m,w);else for(var k=o.length-1;k>=0;k--)(R=o[k])&&(E=(p<3?R(E):p>3?R(f,m,E):R(f,m))||E);return p>3&&E&&Object.defineProperty(f,m,E),E},_=this&&this.__param||function(o,f){return function(m,w){f(m,w,o)}};Object.defineProperty(i,"__esModule",{value:!0}),i.AccessibilityManager=void 0;const h=l(9042),g=l(6114),C=l(9924),y=l(844),v=l(5596),s=l(4725),a=l(3656);let n=i.AccessibilityManager=class extends y.Disposable{constructor(o,f){super(),this._terminal=o,this._renderService=f,this._liveRegionLineCount=0,this._charsToConsume=[],this._charsToAnnounce="",this._accessibilityContainer=document.createElement("div"),this._accessibilityContainer.classList.add("xterm-accessibility"),this._rowContainer=document.createElement("div"),this._rowContainer.setAttribute("role","list"),this._rowContainer.classList.add("xterm-accessibility-tree"),this._rowElements=[];for(let m=0;m<this._terminal.rows;m++)this._rowElements[m]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[m]);if(this._topBoundaryFocusListener=m=>this._handleBoundaryFocus(m,0),this._bottomBoundaryFocusListener=m=>this._handleBoundaryFocus(m,1),this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions(),this._accessibilityContainer.appendChild(this._rowContainer),this._liveRegion=document.createElement("div"),this._liveRegion.classList.add("live-region"),this._liveRegion.setAttribute("aria-live","assertive"),this._accessibilityContainer.appendChild(this._liveRegion),this._liveRegionDebouncer=this.register(new C.TimeBasedDebouncer(this._renderRows.bind(this))),!this._terminal.element)throw new Error("Cannot enable accessibility before Terminal.open");this._terminal.element.insertAdjacentElement("afterbegin",this._accessibilityContainer),this.register(this._terminal.onResize(m=>this._handleResize(m.rows))),this.register(this._terminal.onRender(m=>this._refreshRows(m.start,m.end))),this.register(this._terminal.onScroll(()=>this._refreshRows())),this.register(this._terminal.onA11yChar(m=>this._handleChar(m))),this.register(this._terminal.onLineFeed(()=>this._handleChar(`
`))),this.register(this._terminal.onA11yTab(m=>this._handleTab(m))),this.register(this._terminal.onKey(m=>this._handleKey(m.key))),this.register(this._terminal.onBlur(()=>this._clearLiveRegion())),this.register(this._renderService.onDimensionsChange(()=>this._refreshRowsDimensions())),this._screenDprMonitor=new v.ScreenDprMonitor(window),this.register(this._screenDprMonitor),this._screenDprMonitor.setListener(()=>this._refreshRowsDimensions()),this.register((0,a.addDisposableDomListener)(window,"resize",()=>this._refreshRowsDimensions())),this._refreshRows(),this.register((0,y.toDisposable)(()=>{this._accessibilityContainer.remove(),this._rowElements.length=0}))}_handleTab(o){for(let f=0;f<o;f++)this._handleChar(" ")}_handleChar(o){this._liveRegionLineCount<21&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==o&&(this._charsToAnnounce+=o):this._charsToAnnounce+=o,o===`
`&&(this._liveRegionLineCount++,this._liveRegionLineCount===21&&(this._liveRegion.textContent+=h.tooMuchOutput)),g.isMac&&this._liveRegion.textContent&&this._liveRegion.textContent.length>0&&!this._liveRegion.parentNode&&setTimeout(()=>{this._accessibilityContainer.appendChild(this._liveRegion)},0))}_clearLiveRegion(){this._liveRegion.textContent="",this._liveRegionLineCount=0,g.isMac&&this._liveRegion.remove()}_handleKey(o){this._clearLiveRegion(),new RegExp("\\p{Control}","u").test(o)||this._charsToConsume.push(o)}_refreshRows(o,f){this._liveRegionDebouncer.refresh(o,f,this._terminal.rows)}_renderRows(o,f){const m=this._terminal.buffer,w=m.lines.length.toString();for(let R=o;R<=f;R++){const p=m.translateBufferLineToString(m.ydisp+R,!0),E=(m.ydisp+R+1).toString(),k=this._rowElements[R];k&&(p.length===0?k.innerText=" ":k.textContent=p,k.setAttribute("aria-posinset",E),k.setAttribute("aria-setsize",w))}this._announceCharacters()}_announceCharacters(){this._charsToAnnounce.length!==0&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")}_handleBoundaryFocus(o,f){const m=o.target,w=this._rowElements[f===0?1:this._rowElements.length-2];if(m.getAttribute("aria-posinset")===(f===0?"1":`${this._terminal.buffer.lines.length}`)||o.relatedTarget!==w)return;let R,p;if(f===0?(R=m,p=this._rowElements.pop(),this._rowContainer.removeChild(p)):(R=this._rowElements.shift(),p=m,this._rowContainer.removeChild(R)),R.removeEventListener("focus",this._topBoundaryFocusListener),p.removeEventListener("focus",this._bottomBoundaryFocusListener),f===0){const E=this._createAccessibilityTreeNode();this._rowElements.unshift(E),this._rowContainer.insertAdjacentElement("afterbegin",E)}else{const E=this._createAccessibilityTreeNode();this._rowElements.push(E),this._rowContainer.appendChild(E)}this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(f===0?-1:1),this._rowElements[f===0?1:this._rowElements.length-2].focus(),o.preventDefault(),o.stopImmediatePropagation()}_handleResize(o){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(let f=this._rowContainer.children.length;f<this._terminal.rows;f++)this._rowElements[f]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[f]);for(;this._rowElements.length>o;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()}_createAccessibilityTreeNode(){const o=document.createElement("div");return o.setAttribute("role","listitem"),o.tabIndex=-1,this._refreshRowDimensions(o),o}_refreshRowsDimensions(){if(this._renderService.dimensions.css.cell.height){this._accessibilityContainer.style.width=`${this._renderService.dimensions.css.canvas.width}px`,this._rowElements.length!==this._terminal.rows&&this._handleResize(this._terminal.rows);for(let o=0;o<this._terminal.rows;o++)this._refreshRowDimensions(this._rowElements[o])}}_refreshRowDimensions(o){o.style.height=`${this._renderService.dimensions.css.cell.height}px`}};i.AccessibilityManager=n=u([_(1,s.IRenderService)],n)},3614:(b,i)=>{function l(g){return g.replace(/\r?\n/g,"\r")}function u(g,C){return C?"\x1B[200~"+g+"\x1B[201~":g}function _(g,C,y,v){g=u(g=l(g),y.decPrivateModes.bracketedPasteMode&&v.rawOptions.ignoreBracketedPasteMode!==!0),y.triggerDataEvent(g,!0),C.value=""}function h(g,C,y){const v=y.getBoundingClientRect(),s=g.clientX-v.left-10,a=g.clientY-v.top-10;C.style.width="20px",C.style.height="20px",C.style.left=`${s}px`,C.style.top=`${a}px`,C.style.zIndex="1000",C.focus()}Object.defineProperty(i,"__esModule",{value:!0}),i.rightClickHandler=i.moveTextAreaUnderMouseCursor=i.paste=i.handlePasteEvent=i.copyHandler=i.bracketTextForPaste=i.prepareTextForTerminal=void 0,i.prepareTextForTerminal=l,i.bracketTextForPaste=u,i.copyHandler=function(g,C){g.clipboardData&&g.clipboardData.setData("text/plain",C.selectionText),g.preventDefault()},i.handlePasteEvent=function(g,C,y,v){g.stopPropagation(),g.clipboardData&&_(g.clipboardData.getData("text/plain"),C,y,v)},i.paste=_,i.moveTextAreaUnderMouseCursor=h,i.rightClickHandler=function(g,C,y,v,s){h(g,C,y),s&&v.rightClickSelect(g),C.value=v.selectionText,C.select()}},7239:(b,i,l)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ColorContrastCache=void 0;const u=l(1505);i.ColorContrastCache=class{constructor(){this._color=new u.TwoKeyMap,this._css=new u.TwoKeyMap}setCss(_,h,g){this._css.set(_,h,g)}getCss(_,h){return this._css.get(_,h)}setColor(_,h,g){this._color.set(_,h,g)}getColor(_,h){return this._color.get(_,h)}clear(){this._color.clear(),this._css.clear()}}},3656:(b,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.addDisposableDomListener=void 0,i.addDisposableDomListener=function(l,u,_,h){l.addEventListener(u,_,h);let g=!1;return{dispose:()=>{g||(g=!0,l.removeEventListener(u,_,h))}}}},6465:function(b,i,l){var u=this&&this.__decorate||function(s,a,n,o){var f,m=arguments.length,w=m<3?a:o===null?o=Object.getOwnPropertyDescriptor(a,n):o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")w=Reflect.decorate(s,a,n,o);else for(var R=s.length-1;R>=0;R--)(f=s[R])&&(w=(m<3?f(w):m>3?f(a,n,w):f(a,n))||w);return m>3&&w&&Object.defineProperty(a,n,w),w},_=this&&this.__param||function(s,a){return function(n,o){a(n,o,s)}};Object.defineProperty(i,"__esModule",{value:!0}),i.Linkifier2=void 0;const h=l(3656),g=l(8460),C=l(844),y=l(2585);let v=i.Linkifier2=class extends C.Disposable{get currentLink(){return this._currentLink}constructor(s){super(),this._bufferService=s,this._linkProviders=[],this._linkCacheDisposables=[],this._isMouseOut=!0,this._wasResized=!1,this._activeLine=-1,this._onShowLinkUnderline=this.register(new g.EventEmitter),this.onShowLinkUnderline=this._onShowLinkUnderline.event,this._onHideLinkUnderline=this.register(new g.EventEmitter),this.onHideLinkUnderline=this._onHideLinkUnderline.event,this.register((0,C.getDisposeArrayDisposable)(this._linkCacheDisposables)),this.register((0,C.toDisposable)(()=>{this._lastMouseEvent=void 0})),this.register(this._bufferService.onResize(()=>{this._clearCurrentLink(),this._wasResized=!0}))}registerLinkProvider(s){return this._linkProviders.push(s),{dispose:()=>{const a=this._linkProviders.indexOf(s);a!==-1&&this._linkProviders.splice(a,1)}}}attachToDom(s,a,n){this._element=s,this._mouseService=a,this._renderService=n,this.register((0,h.addDisposableDomListener)(this._element,"mouseleave",()=>{this._isMouseOut=!0,this._clearCurrentLink()})),this.register((0,h.addDisposableDomListener)(this._element,"mousemove",this._handleMouseMove.bind(this))),this.register((0,h.addDisposableDomListener)(this._element,"mousedown",this._handleMouseDown.bind(this))),this.register((0,h.addDisposableDomListener)(this._element,"mouseup",this._handleMouseUp.bind(this)))}_handleMouseMove(s){if(this._lastMouseEvent=s,!this._element||!this._mouseService)return;const a=this._positionFromMouseEvent(s,this._element,this._mouseService);if(!a)return;this._isMouseOut=!1;const n=s.composedPath();for(let o=0;o<n.length;o++){const f=n[o];if(f.classList.contains("xterm"))break;if(f.classList.contains("xterm-hover"))return}this._lastBufferCell&&a.x===this._lastBufferCell.x&&a.y===this._lastBufferCell.y||(this._handleHover(a),this._lastBufferCell=a)}_handleHover(s){if(this._activeLine!==s.y||this._wasResized)return this._clearCurrentLink(),this._askForLink(s,!1),void(this._wasResized=!1);this._currentLink&&this._linkAtPosition(this._currentLink.link,s)||(this._clearCurrentLink(),this._askForLink(s,!0))}_askForLink(s,a){var n,o;this._activeProviderReplies&&a||((n=this._activeProviderReplies)===null||n===void 0||n.forEach(m=>{m==null||m.forEach(w=>{w.link.dispose&&w.link.dispose()})}),this._activeProviderReplies=new Map,this._activeLine=s.y);let f=!1;for(const[m,w]of this._linkProviders.entries())a?!((o=this._activeProviderReplies)===null||o===void 0)&&o.get(m)&&(f=this._checkLinkProviderResult(m,s,f)):w.provideLinks(s.y,R=>{var p,E;if(this._isMouseOut)return;const k=R==null?void 0:R.map(M=>({link:M}));(p=this._activeProviderReplies)===null||p===void 0||p.set(m,k),f=this._checkLinkProviderResult(m,s,f),((E=this._activeProviderReplies)===null||E===void 0?void 0:E.size)===this._linkProviders.length&&this._removeIntersectingLinks(s.y,this._activeProviderReplies)})}_removeIntersectingLinks(s,a){const n=new Set;for(let o=0;o<a.size;o++){const f=a.get(o);if(f)for(let m=0;m<f.length;m++){const w=f[m],R=w.link.range.start.y<s?0:w.link.range.start.x,p=w.link.range.end.y>s?this._bufferService.cols:w.link.range.end.x;for(let E=R;E<=p;E++){if(n.has(E)){f.splice(m--,1);break}n.add(E)}}}}_checkLinkProviderResult(s,a,n){var o;if(!this._activeProviderReplies)return n;const f=this._activeProviderReplies.get(s);let m=!1;for(let w=0;w<s;w++)this._activeProviderReplies.has(w)&&!this._activeProviderReplies.get(w)||(m=!0);if(!m&&f){const w=f.find(R=>this._linkAtPosition(R.link,a));w&&(n=!0,this._handleNewLink(w))}if(this._activeProviderReplies.size===this._linkProviders.length&&!n)for(let w=0;w<this._activeProviderReplies.size;w++){const R=(o=this._activeProviderReplies.get(w))===null||o===void 0?void 0:o.find(p=>this._linkAtPosition(p.link,a));if(R){n=!0,this._handleNewLink(R);break}}return n}_handleMouseDown(){this._mouseDownLink=this._currentLink}_handleMouseUp(s){if(!this._element||!this._mouseService||!this._currentLink)return;const a=this._positionFromMouseEvent(s,this._element,this._mouseService);a&&this._mouseDownLink===this._currentLink&&this._linkAtPosition(this._currentLink.link,a)&&this._currentLink.link.activate(s,this._currentLink.link.text)}_clearCurrentLink(s,a){this._element&&this._currentLink&&this._lastMouseEvent&&(!s||!a||this._currentLink.link.range.start.y>=s&&this._currentLink.link.range.end.y<=a)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,(0,C.disposeArray)(this._linkCacheDisposables))}_handleNewLink(s){if(!this._element||!this._lastMouseEvent||!this._mouseService)return;const a=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);a&&this._linkAtPosition(s.link,a)&&(this._currentLink=s,this._currentLink.state={decorations:{underline:s.link.decorations===void 0||s.link.decorations.underline,pointerCursor:s.link.decorations===void 0||s.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,s.link,this._lastMouseEvent),s.link.decorations={},Object.defineProperties(s.link.decorations,{pointerCursor:{get:()=>{var n,o;return(o=(n=this._currentLink)===null||n===void 0?void 0:n.state)===null||o===void 0?void 0:o.decorations.pointerCursor},set:n=>{var o,f;!((o=this._currentLink)===null||o===void 0)&&o.state&&this._currentLink.state.decorations.pointerCursor!==n&&(this._currentLink.state.decorations.pointerCursor=n,this._currentLink.state.isHovered&&((f=this._element)===null||f===void 0||f.classList.toggle("xterm-cursor-pointer",n)))}},underline:{get:()=>{var n,o;return(o=(n=this._currentLink)===null||n===void 0?void 0:n.state)===null||o===void 0?void 0:o.decorations.underline},set:n=>{var o,f,m;!((o=this._currentLink)===null||o===void 0)&&o.state&&((m=(f=this._currentLink)===null||f===void 0?void 0:f.state)===null||m===void 0?void 0:m.decorations.underline)!==n&&(this._currentLink.state.decorations.underline=n,this._currentLink.state.isHovered&&this._fireUnderlineEvent(s.link,n))}}}),this._renderService&&this._linkCacheDisposables.push(this._renderService.onRenderedViewportChange(n=>{if(!this._currentLink)return;const o=n.start===0?0:n.start+1+this._bufferService.buffer.ydisp,f=this._bufferService.buffer.ydisp+1+n.end;if(this._currentLink.link.range.start.y>=o&&this._currentLink.link.range.end.y<=f&&(this._clearCurrentLink(o,f),this._lastMouseEvent&&this._element)){const m=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);m&&this._askForLink(m,!1)}})))}_linkHover(s,a,n){var o;!((o=this._currentLink)===null||o===void 0)&&o.state&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(a,!0),this._currentLink.state.decorations.pointerCursor&&s.classList.add("xterm-cursor-pointer")),a.hover&&a.hover(n,a.text)}_fireUnderlineEvent(s,a){const n=s.range,o=this._bufferService.buffer.ydisp,f=this._createLinkUnderlineEvent(n.start.x-1,n.start.y-o-1,n.end.x,n.end.y-o-1,void 0);(a?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(f)}_linkLeave(s,a,n){var o;!((o=this._currentLink)===null||o===void 0)&&o.state&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(a,!1),this._currentLink.state.decorations.pointerCursor&&s.classList.remove("xterm-cursor-pointer")),a.leave&&a.leave(n,a.text)}_linkAtPosition(s,a){const n=s.range.start.y*this._bufferService.cols+s.range.start.x,o=s.range.end.y*this._bufferService.cols+s.range.end.x,f=a.y*this._bufferService.cols+a.x;return n<=f&&f<=o}_positionFromMouseEvent(s,a,n){const o=n.getCoords(s,a,this._bufferService.cols,this._bufferService.rows);if(o)return{x:o[0],y:o[1]+this._bufferService.buffer.ydisp}}_createLinkUnderlineEvent(s,a,n,o,f){return{x1:s,y1:a,x2:n,y2:o,cols:this._bufferService.cols,fg:f}}};i.Linkifier2=v=u([_(0,y.IBufferService)],v)},9042:(b,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.tooMuchOutput=i.promptLabel=void 0,i.promptLabel="Terminal input",i.tooMuchOutput="Too much output to announce, navigate to rows manually to read"},3730:function(b,i,l){var u=this&&this.__decorate||function(v,s,a,n){var o,f=arguments.length,m=f<3?s:n===null?n=Object.getOwnPropertyDescriptor(s,a):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")m=Reflect.decorate(v,s,a,n);else for(var w=v.length-1;w>=0;w--)(o=v[w])&&(m=(f<3?o(m):f>3?o(s,a,m):o(s,a))||m);return f>3&&m&&Object.defineProperty(s,a,m),m},_=this&&this.__param||function(v,s){return function(a,n){s(a,n,v)}};Object.defineProperty(i,"__esModule",{value:!0}),i.OscLinkProvider=void 0;const h=l(511),g=l(2585);let C=i.OscLinkProvider=class{constructor(v,s,a){this._bufferService=v,this._optionsService=s,this._oscLinkService=a}provideLinks(v,s){var a;const n=this._bufferService.buffer.lines.get(v-1);if(!n)return void s(void 0);const o=[],f=this._optionsService.rawOptions.linkHandler,m=new h.CellData,w=n.getTrimmedLength();let R=-1,p=-1,E=!1;for(let k=0;k<w;k++)if(p!==-1||n.hasContent(k)){if(n.loadCell(k,m),m.hasExtendedAttrs()&&m.extended.urlId){if(p===-1){p=k,R=m.extended.urlId;continue}E=m.extended.urlId!==R}else p!==-1&&(E=!0);if(E||p!==-1&&k===w-1){const M=(a=this._oscLinkService.getLinkData(R))===null||a===void 0?void 0:a.uri;if(M){const D={start:{x:p+1,y:v},end:{x:k+(E||k!==w-1?0:1),y:v}};let O=!1;if(!(f!=null&&f.allowNonHttpProtocols))try{const W=new URL(M);["http:","https:"].includes(W.protocol)||(O=!0)}catch{O=!0}O||o.push({text:M,range:D,activate:(W,q)=>f?f.activate(W,q,D):y(0,q),hover:(W,q)=>{var K;return(K=f==null?void 0:f.hover)===null||K===void 0?void 0:K.call(f,W,q,D)},leave:(W,q)=>{var K;return(K=f==null?void 0:f.leave)===null||K===void 0?void 0:K.call(f,W,q,D)}})}E=!1,m.hasExtendedAttrs()&&m.extended.urlId?(p=k,R=m.extended.urlId):(p=-1,R=-1)}}s(o)}};function y(v,s){if(confirm(`Do you want to navigate to ${s}?

WARNING: This link could potentially be dangerous`)){const a=window.open();if(a){try{a.opener=null}catch{}a.location.href=s}else console.warn("Opening link blocked as opener could not be cleared")}}i.OscLinkProvider=C=u([_(0,g.IBufferService),_(1,g.IOptionsService),_(2,g.IOscLinkService)],C)},6193:(b,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.RenderDebouncer=void 0,i.RenderDebouncer=class{constructor(l,u){this._parentWindow=l,this._renderCallback=u,this._refreshCallbacks=[]}dispose(){this._animationFrame&&(this._parentWindow.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}addRefreshCallback(l){return this._refreshCallbacks.push(l),this._animationFrame||(this._animationFrame=this._parentWindow.requestAnimationFrame(()=>this._innerRefresh())),this._animationFrame}refresh(l,u,_){this._rowCount=_,l=l!==void 0?l:0,u=u!==void 0?u:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,l):l,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,u):u,this._animationFrame||(this._animationFrame=this._parentWindow.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._animationFrame=void 0,this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return void this._runRefreshCallbacks();const l=Math.max(this._rowStart,0),u=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(l,u),this._runRefreshCallbacks()}_runRefreshCallbacks(){for(const l of this._refreshCallbacks)l(0);this._refreshCallbacks=[]}}},5596:(b,i,l)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ScreenDprMonitor=void 0;const u=l(844);class _ extends u.Disposable{constructor(g){super(),this._parentWindow=g,this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this.register((0,u.toDisposable)(()=>{this.clearListener()}))}setListener(g){this._listener&&this.clearListener(),this._listener=g,this._outerListener=()=>{this._listener&&(this._listener(this._parentWindow.devicePixelRatio,this._currentDevicePixelRatio),this._updateDpr())},this._updateDpr()}_updateDpr(){var g;this._outerListener&&((g=this._resolutionMediaMatchList)===null||g===void 0||g.removeListener(this._outerListener),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._resolutionMediaMatchList=this._parentWindow.matchMedia(`screen and (resolution: ${this._parentWindow.devicePixelRatio}dppx)`),this._resolutionMediaMatchList.addListener(this._outerListener))}clearListener(){this._resolutionMediaMatchList&&this._listener&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._listener=void 0,this._outerListener=void 0)}}i.ScreenDprMonitor=_},3236:(b,i,l)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Terminal=void 0;const u=l(3614),_=l(3656),h=l(6465),g=l(9042),C=l(3730),y=l(1680),v=l(3107),s=l(5744),a=l(2950),n=l(1296),o=l(428),f=l(4269),m=l(5114),w=l(8934),R=l(3230),p=l(9312),E=l(4725),k=l(6731),M=l(8055),D=l(8969),O=l(8460),W=l(844),q=l(6114),K=l(8437),U=l(2584),x=l(7399),T=l(5941),B=l(9074),I=l(2585),G=l(5435),te=l(4567),oe=typeof window<"u"?window.document:null;class re extends D.CoreTerminal{get onFocus(){return this._onFocus.event}get onBlur(){return this._onBlur.event}get onA11yChar(){return this._onA11yCharEmitter.event}get onA11yTab(){return this._onA11yTabEmitter.event}get onWillOpen(){return this._onWillOpen.event}constructor(L={}){super(L),this.browser=q,this._keyDownHandled=!1,this._keyDownSeen=!1,this._keyPressHandled=!1,this._unprocessedDeadKey=!1,this._accessibilityManager=this.register(new W.MutableDisposable),this._onCursorMove=this.register(new O.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onKey=this.register(new O.EventEmitter),this.onKey=this._onKey.event,this._onRender=this.register(new O.EventEmitter),this.onRender=this._onRender.event,this._onSelectionChange=this.register(new O.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onTitleChange=this.register(new O.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onBell=this.register(new O.EventEmitter),this.onBell=this._onBell.event,this._onFocus=this.register(new O.EventEmitter),this._onBlur=this.register(new O.EventEmitter),this._onA11yCharEmitter=this.register(new O.EventEmitter),this._onA11yTabEmitter=this.register(new O.EventEmitter),this._onWillOpen=this.register(new O.EventEmitter),this._setup(),this.linkifier2=this.register(this._instantiationService.createInstance(h.Linkifier2)),this.linkifier2.registerLinkProvider(this._instantiationService.createInstance(C.OscLinkProvider)),this._decorationService=this._instantiationService.createInstance(B.DecorationService),this._instantiationService.setService(I.IDecorationService,this._decorationService),this.register(this._inputHandler.onRequestBell(()=>this._onBell.fire())),this.register(this._inputHandler.onRequestRefreshRows((H,$)=>this.refresh(H,$))),this.register(this._inputHandler.onRequestSendFocus(()=>this._reportFocus())),this.register(this._inputHandler.onRequestReset(()=>this.reset())),this.register(this._inputHandler.onRequestWindowsOptionsReport(H=>this._reportWindowsOptions(H))),this.register(this._inputHandler.onColor(H=>this._handleColorEvent(H))),this.register((0,O.forwardEvent)(this._inputHandler.onCursorMove,this._onCursorMove)),this.register((0,O.forwardEvent)(this._inputHandler.onTitleChange,this._onTitleChange)),this.register((0,O.forwardEvent)(this._inputHandler.onA11yChar,this._onA11yCharEmitter)),this.register((0,O.forwardEvent)(this._inputHandler.onA11yTab,this._onA11yTabEmitter)),this.register(this._bufferService.onResize(H=>this._afterResize(H.cols,H.rows))),this.register((0,W.toDisposable)(()=>{var H,$;this._customKeyEventHandler=void 0,($=(H=this.element)===null||H===void 0?void 0:H.parentNode)===null||$===void 0||$.removeChild(this.element)}))}_handleColorEvent(L){if(this._themeService)for(const H of L){let $,j="";switch(H.index){case 256:$="foreground",j="10";break;case 257:$="background",j="11";break;case 258:$="cursor",j="12";break;default:$="ansi",j="4;"+H.index}switch(H.type){case 0:const le=M.color.toColorRGB($==="ansi"?this._themeService.colors.ansi[H.index]:this._themeService.colors[$]);this.coreService.triggerDataEvent(`${U.C0.ESC}]${j};${(0,T.toRgbString)(le)}${U.C1_ESCAPED.ST}`);break;case 1:if($==="ansi")this._themeService.modifyColors(ie=>ie.ansi[H.index]=M.rgba.toColor(...H.color));else{const ie=$;this._themeService.modifyColors(A=>A[ie]=M.rgba.toColor(...H.color))}break;case 2:this._themeService.restoreColor(H.index)}}}_setup(){super._setup(),this._customKeyEventHandler=void 0}get buffer(){return this.buffers.active}focus(){this.textarea&&this.textarea.focus({preventScroll:!0})}_handleScreenReaderModeOptionChange(L){L?!this._accessibilityManager.value&&this._renderService&&(this._accessibilityManager.value=this._instantiationService.createInstance(te.AccessibilityManager,this)):this._accessibilityManager.clear()}_handleTextAreaFocus(L){this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(U.C0.ESC+"[I"),this.updateCursorStyle(L),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()}blur(){var L;return(L=this.textarea)===null||L===void 0?void 0:L.blur()}_handleTextAreaBlur(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(U.C0.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()}_syncTextArea(){if(!this.textarea||!this.buffer.isCursorInViewport||this._compositionHelper.isComposing||!this._renderService)return;const L=this.buffer.ybase+this.buffer.y,H=this.buffer.lines.get(L);if(!H)return;const $=Math.min(this.buffer.x,this.cols-1),j=this._renderService.dimensions.css.cell.height,le=H.getWidth($),ie=this._renderService.dimensions.css.cell.width*le,A=this.buffer.y*this._renderService.dimensions.css.cell.height,P=$*this._renderService.dimensions.css.cell.width;this.textarea.style.left=P+"px",this.textarea.style.top=A+"px",this.textarea.style.width=ie+"px",this.textarea.style.height=j+"px",this.textarea.style.lineHeight=j+"px",this.textarea.style.zIndex="-5"}_initGlobal(){this._bindKeys(),this.register((0,_.addDisposableDomListener)(this.element,"copy",H=>{this.hasSelection()&&(0,u.copyHandler)(H,this._selectionService)}));const L=H=>(0,u.handlePasteEvent)(H,this.textarea,this.coreService,this.optionsService);this.register((0,_.addDisposableDomListener)(this.textarea,"paste",L)),this.register((0,_.addDisposableDomListener)(this.element,"paste",L)),q.isFirefox?this.register((0,_.addDisposableDomListener)(this.element,"mousedown",H=>{H.button===2&&(0,u.rightClickHandler)(H,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})):this.register((0,_.addDisposableDomListener)(this.element,"contextmenu",H=>{(0,u.rightClickHandler)(H,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})),q.isLinux&&this.register((0,_.addDisposableDomListener)(this.element,"auxclick",H=>{H.button===1&&(0,u.moveTextAreaUnderMouseCursor)(H,this.textarea,this.screenElement)}))}_bindKeys(){this.register((0,_.addDisposableDomListener)(this.textarea,"keyup",L=>this._keyUp(L),!0)),this.register((0,_.addDisposableDomListener)(this.textarea,"keydown",L=>this._keyDown(L),!0)),this.register((0,_.addDisposableDomListener)(this.textarea,"keypress",L=>this._keyPress(L),!0)),this.register((0,_.addDisposableDomListener)(this.textarea,"compositionstart",()=>this._compositionHelper.compositionstart())),this.register((0,_.addDisposableDomListener)(this.textarea,"compositionupdate",L=>this._compositionHelper.compositionupdate(L))),this.register((0,_.addDisposableDomListener)(this.textarea,"compositionend",()=>this._compositionHelper.compositionend())),this.register((0,_.addDisposableDomListener)(this.textarea,"input",L=>this._inputEvent(L),!0)),this.register(this.onRender(()=>this._compositionHelper.updateCompositionElements()))}open(L){var H;if(!L)throw new Error("Terminal requires a parent element.");L.isConnected||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),this._document=L.ownerDocument,this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),L.appendChild(this.element);const $=oe.createDocumentFragment();this._viewportElement=oe.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),$.appendChild(this._viewportElement),this._viewportScrollArea=oe.createElement("div"),this._viewportScrollArea.classList.add("xterm-scroll-area"),this._viewportElement.appendChild(this._viewportScrollArea),this.screenElement=oe.createElement("div"),this.screenElement.classList.add("xterm-screen"),this._helperContainer=oe.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),$.appendChild(this.screenElement),this.textarea=oe.createElement("textarea"),this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",g.promptLabel),q.isChromeOS||this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this._coreBrowserService=this._instantiationService.createInstance(m.CoreBrowserService,this.textarea,(H=this._document.defaultView)!==null&&H!==void 0?H:window),this._instantiationService.setService(E.ICoreBrowserService,this._coreBrowserService),this.register((0,_.addDisposableDomListener)(this.textarea,"focus",j=>this._handleTextAreaFocus(j))),this.register((0,_.addDisposableDomListener)(this.textarea,"blur",()=>this._handleTextAreaBlur())),this._helperContainer.appendChild(this.textarea),this._charSizeService=this._instantiationService.createInstance(o.CharSizeService,this._document,this._helperContainer),this._instantiationService.setService(E.ICharSizeService,this._charSizeService),this._themeService=this._instantiationService.createInstance(k.ThemeService),this._instantiationService.setService(E.IThemeService,this._themeService),this._characterJoinerService=this._instantiationService.createInstance(f.CharacterJoinerService),this._instantiationService.setService(E.ICharacterJoinerService,this._characterJoinerService),this._renderService=this.register(this._instantiationService.createInstance(R.RenderService,this.rows,this.screenElement)),this._instantiationService.setService(E.IRenderService,this._renderService),this.register(this._renderService.onRenderedViewportChange(j=>this._onRender.fire(j))),this.onResize(j=>this._renderService.resize(j.cols,j.rows)),this._compositionView=oe.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(a.CompositionHelper,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this.element.appendChild($);try{this._onWillOpen.fire(this.element)}catch{}this._renderService.hasRenderer()||this._renderService.setRenderer(this._createRenderer()),this._mouseService=this._instantiationService.createInstance(w.MouseService),this._instantiationService.setService(E.IMouseService,this._mouseService),this.viewport=this._instantiationService.createInstance(y.Viewport,this._viewportElement,this._viewportScrollArea),this.viewport.onRequestScrollLines(j=>this.scrollLines(j.amount,j.suppressScrollEvent,1)),this.register(this._inputHandler.onRequestSyncScrollBar(()=>this.viewport.syncScrollArea())),this.register(this.viewport),this.register(this.onCursorMove(()=>{this._renderService.handleCursorMove(),this._syncTextArea()})),this.register(this.onResize(()=>this._renderService.handleResize(this.cols,this.rows))),this.register(this.onBlur(()=>this._renderService.handleBlur())),this.register(this.onFocus(()=>this._renderService.handleFocus())),this.register(this._renderService.onDimensionsChange(()=>this.viewport.syncScrollArea())),this._selectionService=this.register(this._instantiationService.createInstance(p.SelectionService,this.element,this.screenElement,this.linkifier2)),this._instantiationService.setService(E.ISelectionService,this._selectionService),this.register(this._selectionService.onRequestScrollLines(j=>this.scrollLines(j.amount,j.suppressScrollEvent))),this.register(this._selectionService.onSelectionChange(()=>this._onSelectionChange.fire())),this.register(this._selectionService.onRequestRedraw(j=>this._renderService.handleSelectionChanged(j.start,j.end,j.columnSelectMode))),this.register(this._selectionService.onLinuxMouseSelection(j=>{this.textarea.value=j,this.textarea.focus(),this.textarea.select()})),this.register(this._onScroll.event(j=>{this.viewport.syncScrollArea(),this._selectionService.refresh()})),this.register((0,_.addDisposableDomListener)(this._viewportElement,"scroll",()=>this._selectionService.refresh())),this.linkifier2.attachToDom(this.screenElement,this._mouseService,this._renderService),this.register(this._instantiationService.createInstance(v.BufferDecorationRenderer,this.screenElement)),this.register((0,_.addDisposableDomListener)(this.element,"mousedown",j=>this._selectionService.handleMouseDown(j))),this.coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager.value=this._instantiationService.createInstance(te.AccessibilityManager,this)),this.register(this.optionsService.onSpecificOptionChange("screenReaderMode",j=>this._handleScreenReaderModeOptionChange(j))),this.options.overviewRulerWidth&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(s.OverviewRulerRenderer,this._viewportElement,this.screenElement))),this.optionsService.onSpecificOptionChange("overviewRulerWidth",j=>{!this._overviewRulerRenderer&&j&&this._viewportElement&&this.screenElement&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(s.OverviewRulerRenderer,this._viewportElement,this.screenElement)))}),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()}_createRenderer(){return this._instantiationService.createInstance(n.DomRenderer,this.element,this.screenElement,this._viewportElement,this.linkifier2)}bindMouse(){const L=this,H=this.element;function $(ie){const A=L._mouseService.getMouseReportCoords(ie,L.screenElement);if(!A)return!1;let P,N;switch(ie.overrideType||ie.type){case"mousemove":N=32,ie.buttons===void 0?(P=3,ie.button!==void 0&&(P=ie.button<3?ie.button:3)):P=1&ie.buttons?0:4&ie.buttons?1:2&ie.buttons?2:3;break;case"mouseup":N=0,P=ie.button<3?ie.button:3;break;case"mousedown":N=1,P=ie.button<3?ie.button:3;break;case"wheel":if(L.viewport.getLinesScrolled(ie)===0)return!1;N=ie.deltaY<0?0:1,P=4;break;default:return!1}return!(N===void 0||P===void 0||P>4)&&L.coreMouseService.triggerMouseEvent({col:A.col,row:A.row,x:A.x,y:A.y,button:P,action:N,ctrl:ie.ctrlKey,alt:ie.altKey,shift:ie.shiftKey})}const j={mouseup:null,wheel:null,mousedrag:null,mousemove:null},le={mouseup:ie=>($(ie),ie.buttons||(this._document.removeEventListener("mouseup",j.mouseup),j.mousedrag&&this._document.removeEventListener("mousemove",j.mousedrag)),this.cancel(ie)),wheel:ie=>($(ie),this.cancel(ie,!0)),mousedrag:ie=>{ie.buttons&&$(ie)},mousemove:ie=>{ie.buttons||$(ie)}};this.register(this.coreMouseService.onProtocolChange(ie=>{ie?(this.optionsService.rawOptions.logLevel==="debug"&&this._logService.debug("Binding to mouse events:",this.coreMouseService.explainEvents(ie)),this.element.classList.add("enable-mouse-events"),this._selectionService.disable()):(this._logService.debug("Unbinding from mouse events."),this.element.classList.remove("enable-mouse-events"),this._selectionService.enable()),8&ie?j.mousemove||(H.addEventListener("mousemove",le.mousemove),j.mousemove=le.mousemove):(H.removeEventListener("mousemove",j.mousemove),j.mousemove=null),16&ie?j.wheel||(H.addEventListener("wheel",le.wheel,{passive:!1}),j.wheel=le.wheel):(H.removeEventListener("wheel",j.wheel),j.wheel=null),2&ie?j.mouseup||(H.addEventListener("mouseup",le.mouseup),j.mouseup=le.mouseup):(this._document.removeEventListener("mouseup",j.mouseup),H.removeEventListener("mouseup",j.mouseup),j.mouseup=null),4&ie?j.mousedrag||(j.mousedrag=le.mousedrag):(this._document.removeEventListener("mousemove",j.mousedrag),j.mousedrag=null)})),this.coreMouseService.activeProtocol=this.coreMouseService.activeProtocol,this.register((0,_.addDisposableDomListener)(H,"mousedown",ie=>{if(ie.preventDefault(),this.focus(),this.coreMouseService.areMouseEventsActive&&!this._selectionService.shouldForceSelection(ie))return $(ie),j.mouseup&&this._document.addEventListener("mouseup",j.mouseup),j.mousedrag&&this._document.addEventListener("mousemove",j.mousedrag),this.cancel(ie)})),this.register((0,_.addDisposableDomListener)(H,"wheel",ie=>{if(!j.wheel){if(!this.buffer.hasScrollback){const A=this.viewport.getLinesScrolled(ie);if(A===0)return;const P=U.C0.ESC+(this.coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(ie.deltaY<0?"A":"B");let N="";for(let V=0;V<Math.abs(A);V++)N+=P;return this.coreService.triggerDataEvent(N,!0),this.cancel(ie,!0)}return this.viewport.handleWheel(ie)?this.cancel(ie):void 0}},{passive:!1})),this.register((0,_.addDisposableDomListener)(H,"touchstart",ie=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchStart(ie),this.cancel(ie)},{passive:!0})),this.register((0,_.addDisposableDomListener)(H,"touchmove",ie=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchMove(ie)?void 0:this.cancel(ie)},{passive:!1}))}refresh(L,H){var $;($=this._renderService)===null||$===void 0||$.refreshRows(L,H)}updateCursorStyle(L){var H;!((H=this._selectionService)===null||H===void 0)&&H.shouldColumnSelect(L)?this.element.classList.add("column-select"):this.element.classList.remove("column-select")}_showCursor(){this.coreService.isCursorInitialized||(this.coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))}scrollLines(L,H,$=0){var j;$===1?(super.scrollLines(L,H,$),this.refresh(0,this.rows-1)):(j=this.viewport)===null||j===void 0||j.scrollLines(L)}paste(L){(0,u.paste)(L,this.textarea,this.coreService,this.optionsService)}attachCustomKeyEventHandler(L){this._customKeyEventHandler=L}registerLinkProvider(L){return this.linkifier2.registerLinkProvider(L)}registerCharacterJoiner(L){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");const H=this._characterJoinerService.register(L);return this.refresh(0,this.rows-1),H}deregisterCharacterJoiner(L){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");this._characterJoinerService.deregister(L)&&this.refresh(0,this.rows-1)}get markers(){return this.buffer.markers}registerMarker(L){return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+L)}registerDecoration(L){return this._decorationService.registerDecoration(L)}hasSelection(){return!!this._selectionService&&this._selectionService.hasSelection}select(L,H,$){this._selectionService.setSelection(L,H,$)}getSelection(){return this._selectionService?this._selectionService.selectionText:""}getSelectionPosition(){if(this._selectionService&&this._selectionService.hasSelection)return{start:{x:this._selectionService.selectionStart[0],y:this._selectionService.selectionStart[1]},end:{x:this._selectionService.selectionEnd[0],y:this._selectionService.selectionEnd[1]}}}clearSelection(){var L;(L=this._selectionService)===null||L===void 0||L.clearSelection()}selectAll(){var L;(L=this._selectionService)===null||L===void 0||L.selectAll()}selectLines(L,H){var $;($=this._selectionService)===null||$===void 0||$.selectLines(L,H)}_keyDown(L){if(this._keyDownHandled=!1,this._keyDownSeen=!0,this._customKeyEventHandler&&this._customKeyEventHandler(L)===!1)return!1;const H=this.browser.isMac&&this.options.macOptionIsMeta&&L.altKey;if(!H&&!this._compositionHelper.keydown(L))return this.options.scrollOnUserInput&&this.buffer.ybase!==this.buffer.ydisp&&this.scrollToBottom(),!1;H||L.key!=="Dead"&&L.key!=="AltGraph"||(this._unprocessedDeadKey=!0);const $=(0,x.evaluateKeyboardEvent)(L,this.coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(L),$.type===3||$.type===2){const j=this.rows-1;return this.scrollLines($.type===2?-j:j),this.cancel(L,!0)}return $.type===1&&this.selectAll(),!!this._isThirdLevelShift(this.browser,L)||($.cancel&&this.cancel(L,!0),!$.key||!!(L.key&&!L.ctrlKey&&!L.altKey&&!L.metaKey&&L.key.length===1&&L.key.charCodeAt(0)>=65&&L.key.charCodeAt(0)<=90)||(this._unprocessedDeadKey?(this._unprocessedDeadKey=!1,!0):($.key!==U.C0.ETX&&$.key!==U.C0.CR||(this.textarea.value=""),this._onKey.fire({key:$.key,domEvent:L}),this._showCursor(),this.coreService.triggerDataEvent($.key,!0),!this.optionsService.rawOptions.screenReaderMode||L.altKey||L.ctrlKey?this.cancel(L,!0):void(this._keyDownHandled=!0))))}_isThirdLevelShift(L,H){const $=L.isMac&&!this.options.macOptionIsMeta&&H.altKey&&!H.ctrlKey&&!H.metaKey||L.isWindows&&H.altKey&&H.ctrlKey&&!H.metaKey||L.isWindows&&H.getModifierState("AltGraph");return H.type==="keypress"?$:$&&(!H.keyCode||H.keyCode>47)}_keyUp(L){this._keyDownSeen=!1,this._customKeyEventHandler&&this._customKeyEventHandler(L)===!1||(function(H){return H.keyCode===16||H.keyCode===17||H.keyCode===18}(L)||this.focus(),this.updateCursorStyle(L),this._keyPressHandled=!1)}_keyPress(L){let H;if(this._keyPressHandled=!1,this._keyDownHandled||this._customKeyEventHandler&&this._customKeyEventHandler(L)===!1)return!1;if(this.cancel(L),L.charCode)H=L.charCode;else if(L.which===null||L.which===void 0)H=L.keyCode;else{if(L.which===0||L.charCode===0)return!1;H=L.which}return!(!H||(L.altKey||L.ctrlKey||L.metaKey)&&!this._isThirdLevelShift(this.browser,L)||(H=String.fromCharCode(H),this._onKey.fire({key:H,domEvent:L}),this._showCursor(),this.coreService.triggerDataEvent(H,!0),this._keyPressHandled=!0,this._unprocessedDeadKey=!1,0))}_inputEvent(L){if(L.data&&L.inputType==="insertText"&&(!L.composed||!this._keyDownSeen)&&!this.optionsService.rawOptions.screenReaderMode){if(this._keyPressHandled)return!1;this._unprocessedDeadKey=!1;const H=L.data;return this.coreService.triggerDataEvent(H,!0),this.cancel(L),!0}return!1}resize(L,H){L!==this.cols||H!==this.rows?super.resize(L,H):this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure()}_afterResize(L,H){var $,j;($=this._charSizeService)===null||$===void 0||$.measure(),(j=this.viewport)===null||j===void 0||j.syncScrollArea(!0)}clear(){var L;if(this.buffer.ybase!==0||this.buffer.y!==0){this.buffer.clearAllMarkers(),this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(let H=1;H<this.rows;H++)this.buffer.lines.push(this.buffer.getBlankLine(K.DEFAULT_ATTR_DATA));this._onScroll.fire({position:this.buffer.ydisp,source:0}),(L=this.viewport)===null||L===void 0||L.reset(),this.refresh(0,this.rows-1)}}reset(){var L,H;this.options.rows=this.rows,this.options.cols=this.cols;const $=this._customKeyEventHandler;this._setup(),super.reset(),(L=this._selectionService)===null||L===void 0||L.reset(),this._decorationService.reset(),(H=this.viewport)===null||H===void 0||H.reset(),this._customKeyEventHandler=$,this.refresh(0,this.rows-1)}clearTextureAtlas(){var L;(L=this._renderService)===null||L===void 0||L.clearTextureAtlas()}_reportFocus(){var L;!((L=this.element)===null||L===void 0)&&L.classList.contains("focus")?this.coreService.triggerDataEvent(U.C0.ESC+"[I"):this.coreService.triggerDataEvent(U.C0.ESC+"[O")}_reportWindowsOptions(L){if(this._renderService)switch(L){case G.WindowsOptionsReportType.GET_WIN_SIZE_PIXELS:const H=this._renderService.dimensions.css.canvas.width.toFixed(0),$=this._renderService.dimensions.css.canvas.height.toFixed(0);this.coreService.triggerDataEvent(`${U.C0.ESC}[4;${$};${H}t`);break;case G.WindowsOptionsReportType.GET_CELL_SIZE_PIXELS:const j=this._renderService.dimensions.css.cell.width.toFixed(0),le=this._renderService.dimensions.css.cell.height.toFixed(0);this.coreService.triggerDataEvent(`${U.C0.ESC}[6;${le};${j}t`)}}cancel(L,H){if(this.options.cancelEvents||H)return L.preventDefault(),L.stopPropagation(),!1}}i.Terminal=re},9924:(b,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.TimeBasedDebouncer=void 0,i.TimeBasedDebouncer=class{constructor(l,u=1e3){this._renderCallback=l,this._debounceThresholdMS=u,this._lastRefreshMs=0,this._additionalRefreshRequested=!1}dispose(){this._refreshTimeoutID&&clearTimeout(this._refreshTimeoutID)}refresh(l,u,_){this._rowCount=_,l=l!==void 0?l:0,u=u!==void 0?u:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,l):l,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,u):u;const h=Date.now();if(h-this._lastRefreshMs>=this._debounceThresholdMS)this._lastRefreshMs=h,this._innerRefresh();else if(!this._additionalRefreshRequested){const g=h-this._lastRefreshMs,C=this._debounceThresholdMS-g;this._additionalRefreshRequested=!0,this._refreshTimeoutID=window.setTimeout(()=>{this._lastRefreshMs=Date.now(),this._innerRefresh(),this._additionalRefreshRequested=!1,this._refreshTimeoutID=void 0},C)}}_innerRefresh(){if(this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return;const l=Math.max(this._rowStart,0),u=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(l,u)}}},1680:function(b,i,l){var u=this&&this.__decorate||function(a,n,o,f){var m,w=arguments.length,R=w<3?n:f===null?f=Object.getOwnPropertyDescriptor(n,o):f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")R=Reflect.decorate(a,n,o,f);else for(var p=a.length-1;p>=0;p--)(m=a[p])&&(R=(w<3?m(R):w>3?m(n,o,R):m(n,o))||R);return w>3&&R&&Object.defineProperty(n,o,R),R},_=this&&this.__param||function(a,n){return function(o,f){n(o,f,a)}};Object.defineProperty(i,"__esModule",{value:!0}),i.Viewport=void 0;const h=l(3656),g=l(4725),C=l(8460),y=l(844),v=l(2585);let s=i.Viewport=class extends y.Disposable{constructor(a,n,o,f,m,w,R,p){super(),this._viewportElement=a,this._scrollArea=n,this._bufferService=o,this._optionsService=f,this._charSizeService=m,this._renderService=w,this._coreBrowserService=R,this.scrollBarWidth=0,this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._wheelPartialScroll=0,this._refreshAnimationFrame=null,this._ignoreNextScrollEvent=!1,this._smoothScrollState={startTime:0,origin:-1,target:-1},this._onRequestScrollLines=this.register(new C.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this.scrollBarWidth=this._viewportElement.offsetWidth-this._scrollArea.offsetWidth||15,this.register((0,h.addDisposableDomListener)(this._viewportElement,"scroll",this._handleScroll.bind(this))),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(E=>this._activeBuffer=E.activeBuffer)),this._renderDimensions=this._renderService.dimensions,this.register(this._renderService.onDimensionsChange(E=>this._renderDimensions=E)),this._handleThemeChange(p.colors),this.register(p.onChangeColors(E=>this._handleThemeChange(E))),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.syncScrollArea())),setTimeout(()=>this.syncScrollArea())}_handleThemeChange(a){this._viewportElement.style.backgroundColor=a.background.css}reset(){this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._coreBrowserService.window.requestAnimationFrame(()=>this.syncScrollArea())}_refresh(a){if(a)return this._innerRefresh(),void(this._refreshAnimationFrame!==null&&this._coreBrowserService.window.cancelAnimationFrame(this._refreshAnimationFrame));this._refreshAnimationFrame===null&&(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._charSizeService.height>0){this._currentRowHeight=this._renderService.dimensions.device.cell.height/this._coreBrowserService.dpr,this._currentDeviceCellHeight=this._renderService.dimensions.device.cell.height,this._lastRecordedViewportHeight=this._viewportElement.offsetHeight;const n=Math.round(this._currentRowHeight*this._lastRecordedBufferLength)+(this._lastRecordedViewportHeight-this._renderService.dimensions.css.canvas.height);this._lastRecordedBufferHeight!==n&&(this._lastRecordedBufferHeight=n,this._scrollArea.style.height=this._lastRecordedBufferHeight+"px")}const a=this._bufferService.buffer.ydisp*this._currentRowHeight;this._viewportElement.scrollTop!==a&&(this._ignoreNextScrollEvent=!0,this._viewportElement.scrollTop=a),this._refreshAnimationFrame=null}syncScrollArea(a=!1){if(this._lastRecordedBufferLength!==this._bufferService.buffer.lines.length)return this._lastRecordedBufferLength=this._bufferService.buffer.lines.length,void this._refresh(a);this._lastRecordedViewportHeight===this._renderService.dimensions.css.canvas.height&&this._lastScrollTop===this._activeBuffer.ydisp*this._currentRowHeight&&this._renderDimensions.device.cell.height===this._currentDeviceCellHeight||this._refresh(a)}_handleScroll(a){if(this._lastScrollTop=this._viewportElement.scrollTop,!this._viewportElement.offsetParent)return;if(this._ignoreNextScrollEvent)return this._ignoreNextScrollEvent=!1,void this._onRequestScrollLines.fire({amount:0,suppressScrollEvent:!0});const n=Math.round(this._lastScrollTop/this._currentRowHeight)-this._bufferService.buffer.ydisp;this._onRequestScrollLines.fire({amount:n,suppressScrollEvent:!0})}_smoothScroll(){if(this._isDisposed||this._smoothScrollState.origin===-1||this._smoothScrollState.target===-1)return;const a=this._smoothScrollPercent();this._viewportElement.scrollTop=this._smoothScrollState.origin+Math.round(a*(this._smoothScrollState.target-this._smoothScrollState.origin)),a<1?this._coreBrowserService.window.requestAnimationFrame(()=>this._smoothScroll()):this._clearSmoothScrollState()}_smoothScrollPercent(){return this._optionsService.rawOptions.smoothScrollDuration&&this._smoothScrollState.startTime?Math.max(Math.min((Date.now()-this._smoothScrollState.startTime)/this._optionsService.rawOptions.smoothScrollDuration,1),0):1}_clearSmoothScrollState(){this._smoothScrollState.startTime=0,this._smoothScrollState.origin=-1,this._smoothScrollState.target=-1}_bubbleScroll(a,n){const o=this._viewportElement.scrollTop+this._lastRecordedViewportHeight;return!(n<0&&this._viewportElement.scrollTop!==0||n>0&&o<this._lastRecordedBufferHeight)||(a.cancelable&&a.preventDefault(),!1)}handleWheel(a){const n=this._getPixelsScrolled(a);return n!==0&&(this._optionsService.rawOptions.smoothScrollDuration?(this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target===-1?this._smoothScrollState.target=this._viewportElement.scrollTop+n:this._smoothScrollState.target+=n,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()):this._viewportElement.scrollTop+=n,this._bubbleScroll(a,n))}scrollLines(a){if(a!==0)if(this._optionsService.rawOptions.smoothScrollDuration){const n=a*this._currentRowHeight;this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target=this._smoothScrollState.origin+n,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()}else this._onRequestScrollLines.fire({amount:a,suppressScrollEvent:!1})}_getPixelsScrolled(a){if(a.deltaY===0||a.shiftKey)return 0;let n=this._applyScrollModifier(a.deltaY,a);return a.deltaMode===WheelEvent.DOM_DELTA_LINE?n*=this._currentRowHeight:a.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(n*=this._currentRowHeight*this._bufferService.rows),n}getBufferElements(a,n){var o;let f,m="";const w=[],R=n??this._bufferService.buffer.lines.length,p=this._bufferService.buffer.lines;for(let E=a;E<R;E++){const k=p.get(E);if(!k)continue;const M=(o=p.get(E+1))===null||o===void 0?void 0:o.isWrapped;if(m+=k.translateToString(!M),!M||E===p.length-1){const D=document.createElement("div");D.textContent=m,w.push(D),m.length>0&&(f=D),m=""}}return{bufferElements:w,cursorElement:f}}getLinesScrolled(a){if(a.deltaY===0||a.shiftKey)return 0;let n=this._applyScrollModifier(a.deltaY,a);return a.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(n/=this._currentRowHeight+0,this._wheelPartialScroll+=n,n=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):a.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(n*=this._bufferService.rows),n}_applyScrollModifier(a,n){const o=this._optionsService.rawOptions.fastScrollModifier;return o==="alt"&&n.altKey||o==="ctrl"&&n.ctrlKey||o==="shift"&&n.shiftKey?a*this._optionsService.rawOptions.fastScrollSensitivity*this._optionsService.rawOptions.scrollSensitivity:a*this._optionsService.rawOptions.scrollSensitivity}handleTouchStart(a){this._lastTouchY=a.touches[0].pageY}handleTouchMove(a){const n=this._lastTouchY-a.touches[0].pageY;return this._lastTouchY=a.touches[0].pageY,n!==0&&(this._viewportElement.scrollTop+=n,this._bubbleScroll(a,n))}};i.Viewport=s=u([_(2,v.IBufferService),_(3,v.IOptionsService),_(4,g.ICharSizeService),_(5,g.IRenderService),_(6,g.ICoreBrowserService),_(7,g.IThemeService)],s)},3107:function(b,i,l){var u=this&&this.__decorate||function(s,a,n,o){var f,m=arguments.length,w=m<3?a:o===null?o=Object.getOwnPropertyDescriptor(a,n):o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")w=Reflect.decorate(s,a,n,o);else for(var R=s.length-1;R>=0;R--)(f=s[R])&&(w=(m<3?f(w):m>3?f(a,n,w):f(a,n))||w);return m>3&&w&&Object.defineProperty(a,n,w),w},_=this&&this.__param||function(s,a){return function(n,o){a(n,o,s)}};Object.defineProperty(i,"__esModule",{value:!0}),i.BufferDecorationRenderer=void 0;const h=l(3656),g=l(4725),C=l(844),y=l(2585);let v=i.BufferDecorationRenderer=class extends C.Disposable{constructor(s,a,n,o){super(),this._screenElement=s,this._bufferService=a,this._decorationService=n,this._renderService=o,this._decorationElements=new Map,this._altBufferIsActive=!1,this._dimensionsChanged=!1,this._container=document.createElement("div"),this._container.classList.add("xterm-decoration-container"),this._screenElement.appendChild(this._container),this.register(this._renderService.onRenderedViewportChange(()=>this._doRefreshDecorations())),this.register(this._renderService.onDimensionsChange(()=>{this._dimensionsChanged=!0,this._queueRefresh()})),this.register((0,h.addDisposableDomListener)(window,"resize",()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._altBufferIsActive=this._bufferService.buffer===this._bufferService.buffers.alt})),this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh())),this.register(this._decorationService.onDecorationRemoved(f=>this._removeDecoration(f))),this.register((0,C.toDisposable)(()=>{this._container.remove(),this._decorationElements.clear()}))}_queueRefresh(){this._animationFrame===void 0&&(this._animationFrame=this._renderService.addRefreshCallback(()=>{this._doRefreshDecorations(),this._animationFrame=void 0}))}_doRefreshDecorations(){for(const s of this._decorationService.decorations)this._renderDecoration(s);this._dimensionsChanged=!1}_renderDecoration(s){this._refreshStyle(s),this._dimensionsChanged&&this._refreshXPosition(s)}_createElement(s){var a,n;const o=document.createElement("div");o.classList.add("xterm-decoration"),o.classList.toggle("xterm-decoration-top-layer",((a=s==null?void 0:s.options)===null||a===void 0?void 0:a.layer)==="top"),o.style.width=`${Math.round((s.options.width||1)*this._renderService.dimensions.css.cell.width)}px`,o.style.height=(s.options.height||1)*this._renderService.dimensions.css.cell.height+"px",o.style.top=(s.marker.line-this._bufferService.buffers.active.ydisp)*this._renderService.dimensions.css.cell.height+"px",o.style.lineHeight=`${this._renderService.dimensions.css.cell.height}px`;const f=(n=s.options.x)!==null&&n!==void 0?n:0;return f&&f>this._bufferService.cols&&(o.style.display="none"),this._refreshXPosition(s,o),o}_refreshStyle(s){const a=s.marker.line-this._bufferService.buffers.active.ydisp;if(a<0||a>=this._bufferService.rows)s.element&&(s.element.style.display="none",s.onRenderEmitter.fire(s.element));else{let n=this._decorationElements.get(s);n||(n=this._createElement(s),s.element=n,this._decorationElements.set(s,n),this._container.appendChild(n),s.onDispose(()=>{this._decorationElements.delete(s),n.remove()})),n.style.top=a*this._renderService.dimensions.css.cell.height+"px",n.style.display=this._altBufferIsActive?"none":"block",s.onRenderEmitter.fire(n)}}_refreshXPosition(s,a=s.element){var n;if(!a)return;const o=(n=s.options.x)!==null&&n!==void 0?n:0;(s.options.anchor||"left")==="right"?a.style.right=o?o*this._renderService.dimensions.css.cell.width+"px":"":a.style.left=o?o*this._renderService.dimensions.css.cell.width+"px":""}_removeDecoration(s){var a;(a=this._decorationElements.get(s))===null||a===void 0||a.remove(),this._decorationElements.delete(s),s.dispose()}};i.BufferDecorationRenderer=v=u([_(1,y.IBufferService),_(2,y.IDecorationService),_(3,g.IRenderService)],v)},5871:(b,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ColorZoneStore=void 0,i.ColorZoneStore=class{constructor(){this._zones=[],this._zonePool=[],this._zonePoolIndex=0,this._linePadding={full:0,left:0,center:0,right:0}}get zones(){return this._zonePool.length=Math.min(this._zonePool.length,this._zones.length),this._zones}clear(){this._zones.length=0,this._zonePoolIndex=0}addDecoration(l){if(l.options.overviewRulerOptions){for(const u of this._zones)if(u.color===l.options.overviewRulerOptions.color&&u.position===l.options.overviewRulerOptions.position){if(this._lineIntersectsZone(u,l.marker.line))return;if(this._lineAdjacentToZone(u,l.marker.line,l.options.overviewRulerOptions.position))return void this._addLineToZone(u,l.marker.line)}if(this._zonePoolIndex<this._zonePool.length)return this._zonePool[this._zonePoolIndex].color=l.options.overviewRulerOptions.color,this._zonePool[this._zonePoolIndex].position=l.options.overviewRulerOptions.position,this._zonePool[this._zonePoolIndex].startBufferLine=l.marker.line,this._zonePool[this._zonePoolIndex].endBufferLine=l.marker.line,void this._zones.push(this._zonePool[this._zonePoolIndex++]);this._zones.push({color:l.options.overviewRulerOptions.color,position:l.options.overviewRulerOptions.position,startBufferLine:l.marker.line,endBufferLine:l.marker.line}),this._zonePool.push(this._zones[this._zones.length-1]),this._zonePoolIndex++}}setPadding(l){this._linePadding=l}_lineIntersectsZone(l,u){return u>=l.startBufferLine&&u<=l.endBufferLine}_lineAdjacentToZone(l,u,_){return u>=l.startBufferLine-this._linePadding[_||"full"]&&u<=l.endBufferLine+this._linePadding[_||"full"]}_addLineToZone(l,u){l.startBufferLine=Math.min(l.startBufferLine,u),l.endBufferLine=Math.max(l.endBufferLine,u)}}},5744:function(b,i,l){var u=this&&this.__decorate||function(f,m,w,R){var p,E=arguments.length,k=E<3?m:R===null?R=Object.getOwnPropertyDescriptor(m,w):R;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(f,m,w,R);else for(var M=f.length-1;M>=0;M--)(p=f[M])&&(k=(E<3?p(k):E>3?p(m,w,k):p(m,w))||k);return E>3&&k&&Object.defineProperty(m,w,k),k},_=this&&this.__param||function(f,m){return function(w,R){m(w,R,f)}};Object.defineProperty(i,"__esModule",{value:!0}),i.OverviewRulerRenderer=void 0;const h=l(5871),g=l(3656),C=l(4725),y=l(844),v=l(2585),s={full:0,left:0,center:0,right:0},a={full:0,left:0,center:0,right:0},n={full:0,left:0,center:0,right:0};let o=i.OverviewRulerRenderer=class extends y.Disposable{get _width(){return this._optionsService.options.overviewRulerWidth||0}constructor(f,m,w,R,p,E,k){var M;super(),this._viewportElement=f,this._screenElement=m,this._bufferService=w,this._decorationService=R,this._renderService=p,this._optionsService=E,this._coreBrowseService=k,this._colorZoneStore=new h.ColorZoneStore,this._shouldUpdateDimensions=!0,this._shouldUpdateAnchor=!0,this._lastKnownBufferLength=0,this._canvas=document.createElement("canvas"),this._canvas.classList.add("xterm-decoration-overview-ruler"),this._refreshCanvasDimensions(),(M=this._viewportElement.parentElement)===null||M===void 0||M.insertBefore(this._canvas,this._viewportElement);const D=this._canvas.getContext("2d");if(!D)throw new Error("Ctx cannot be null");this._ctx=D,this._registerDecorationListeners(),this._registerBufferChangeListeners(),this._registerDimensionChangeListeners(),this.register((0,y.toDisposable)(()=>{var O;(O=this._canvas)===null||O===void 0||O.remove()}))}_registerDecorationListeners(){this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh(void 0,!0))),this.register(this._decorationService.onDecorationRemoved(()=>this._queueRefresh(void 0,!0)))}_registerBufferChangeListeners(){this.register(this._renderService.onRenderedViewportChange(()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._canvas.style.display=this._bufferService.buffer===this._bufferService.buffers.alt?"none":"block"})),this.register(this._bufferService.onScroll(()=>{this._lastKnownBufferLength!==this._bufferService.buffers.normal.lines.length&&(this._refreshDrawHeightConstants(),this._refreshColorZonePadding())}))}_registerDimensionChangeListeners(){this.register(this._renderService.onRender(()=>{this._containerHeight&&this._containerHeight===this._screenElement.clientHeight||(this._queueRefresh(!0),this._containerHeight=this._screenElement.clientHeight)})),this.register(this._optionsService.onSpecificOptionChange("overviewRulerWidth",()=>this._queueRefresh(!0))),this.register((0,g.addDisposableDomListener)(this._coreBrowseService.window,"resize",()=>this._queueRefresh(!0))),this._queueRefresh(!0)}_refreshDrawConstants(){const f=Math.floor(this._canvas.width/3),m=Math.ceil(this._canvas.width/3);a.full=this._canvas.width,a.left=f,a.center=m,a.right=f,this._refreshDrawHeightConstants(),n.full=0,n.left=0,n.center=a.left,n.right=a.left+a.center}_refreshDrawHeightConstants(){s.full=Math.round(2*this._coreBrowseService.dpr);const f=this._canvas.height/this._bufferService.buffer.lines.length,m=Math.round(Math.max(Math.min(f,12),6)*this._coreBrowseService.dpr);s.left=m,s.center=m,s.right=m}_refreshColorZonePadding(){this._colorZoneStore.setPadding({full:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*s.full),left:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*s.left),center:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*s.center),right:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*s.right)}),this._lastKnownBufferLength=this._bufferService.buffers.normal.lines.length}_refreshCanvasDimensions(){this._canvas.style.width=`${this._width}px`,this._canvas.width=Math.round(this._width*this._coreBrowseService.dpr),this._canvas.style.height=`${this._screenElement.clientHeight}px`,this._canvas.height=Math.round(this._screenElement.clientHeight*this._coreBrowseService.dpr),this._refreshDrawConstants(),this._refreshColorZonePadding()}_refreshDecorations(){this._shouldUpdateDimensions&&this._refreshCanvasDimensions(),this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._colorZoneStore.clear();for(const m of this._decorationService.decorations)this._colorZoneStore.addDecoration(m);this._ctx.lineWidth=1;const f=this._colorZoneStore.zones;for(const m of f)m.position!=="full"&&this._renderColorZone(m);for(const m of f)m.position==="full"&&this._renderColorZone(m);this._shouldUpdateDimensions=!1,this._shouldUpdateAnchor=!1}_renderColorZone(f){this._ctx.fillStyle=f.color,this._ctx.fillRect(n[f.position||"full"],Math.round((this._canvas.height-1)*(f.startBufferLine/this._bufferService.buffers.active.lines.length)-s[f.position||"full"]/2),a[f.position||"full"],Math.round((this._canvas.height-1)*((f.endBufferLine-f.startBufferLine)/this._bufferService.buffers.active.lines.length)+s[f.position||"full"]))}_queueRefresh(f,m){this._shouldUpdateDimensions=f||this._shouldUpdateDimensions,this._shouldUpdateAnchor=m||this._shouldUpdateAnchor,this._animationFrame===void 0&&(this._animationFrame=this._coreBrowseService.window.requestAnimationFrame(()=>{this._refreshDecorations(),this._animationFrame=void 0}))}};i.OverviewRulerRenderer=o=u([_(2,v.IBufferService),_(3,v.IDecorationService),_(4,C.IRenderService),_(5,v.IOptionsService),_(6,C.ICoreBrowserService)],o)},2950:function(b,i,l){var u=this&&this.__decorate||function(v,s,a,n){var o,f=arguments.length,m=f<3?s:n===null?n=Object.getOwnPropertyDescriptor(s,a):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")m=Reflect.decorate(v,s,a,n);else for(var w=v.length-1;w>=0;w--)(o=v[w])&&(m=(f<3?o(m):f>3?o(s,a,m):o(s,a))||m);return f>3&&m&&Object.defineProperty(s,a,m),m},_=this&&this.__param||function(v,s){return function(a,n){s(a,n,v)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CompositionHelper=void 0;const h=l(4725),g=l(2585),C=l(2584);let y=i.CompositionHelper=class{get isComposing(){return this._isComposing}constructor(v,s,a,n,o,f){this._textarea=v,this._compositionView=s,this._bufferService=a,this._optionsService=n,this._coreService=o,this._renderService=f,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0},this._dataAlreadySent=""}compositionstart(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._dataAlreadySent="",this._compositionView.classList.add("active")}compositionupdate(v){this._compositionView.textContent=v.data,this.updateCompositionElements(),setTimeout(()=>{this._compositionPosition.end=this._textarea.value.length},0)}compositionend(){this._finalizeComposition(!0)}keydown(v){if(this._isComposing||this._isSendingComposition){if(v.keyCode===229||v.keyCode===16||v.keyCode===17||v.keyCode===18)return!1;this._finalizeComposition(!1)}return v.keyCode!==229||(this._handleAnyTextareaChanges(),!1)}_finalizeComposition(v){if(this._compositionView.classList.remove("active"),this._isComposing=!1,v){const s={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout(()=>{if(this._isSendingComposition){let a;this._isSendingComposition=!1,s.start+=this._dataAlreadySent.length,a=this._isComposing?this._textarea.value.substring(s.start,s.end):this._textarea.value.substring(s.start),a.length>0&&this._coreService.triggerDataEvent(a,!0)}},0)}else{this._isSendingComposition=!1;const s=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(s,!0)}}_handleAnyTextareaChanges(){const v=this._textarea.value;setTimeout(()=>{if(!this._isComposing){const s=this._textarea.value,a=s.replace(v,"");this._dataAlreadySent=a,s.length>v.length?this._coreService.triggerDataEvent(a,!0):s.length<v.length?this._coreService.triggerDataEvent(`${C.C0.DEL}`,!0):s.length===v.length&&s!==v&&this._coreService.triggerDataEvent(s,!0)}},0)}updateCompositionElements(v){if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){const s=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),a=this._renderService.dimensions.css.cell.height,n=this._bufferService.buffer.y*this._renderService.dimensions.css.cell.height,o=s*this._renderService.dimensions.css.cell.width;this._compositionView.style.left=o+"px",this._compositionView.style.top=n+"px",this._compositionView.style.height=a+"px",this._compositionView.style.lineHeight=a+"px",this._compositionView.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._compositionView.style.fontSize=this._optionsService.rawOptions.fontSize+"px";const f=this._compositionView.getBoundingClientRect();this._textarea.style.left=o+"px",this._textarea.style.top=n+"px",this._textarea.style.width=Math.max(f.width,1)+"px",this._textarea.style.height=Math.max(f.height,1)+"px",this._textarea.style.lineHeight=f.height+"px"}v||setTimeout(()=>this.updateCompositionElements(!0),0)}}};i.CompositionHelper=y=u([_(2,g.IBufferService),_(3,g.IOptionsService),_(4,g.ICoreService),_(5,h.IRenderService)],y)},9806:(b,i)=>{function l(u,_,h){const g=h.getBoundingClientRect(),C=u.getComputedStyle(h),y=parseInt(C.getPropertyValue("padding-left")),v=parseInt(C.getPropertyValue("padding-top"));return[_.clientX-g.left-y,_.clientY-g.top-v]}Object.defineProperty(i,"__esModule",{value:!0}),i.getCoords=i.getCoordsRelativeToElement=void 0,i.getCoordsRelativeToElement=l,i.getCoords=function(u,_,h,g,C,y,v,s,a){if(!y)return;const n=l(u,_,h);return n?(n[0]=Math.ceil((n[0]+(a?v/2:0))/v),n[1]=Math.ceil(n[1]/s),n[0]=Math.min(Math.max(n[0],1),g+(a?1:0)),n[1]=Math.min(Math.max(n[1],1),C),n):void 0}},9504:(b,i,l)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.moveToCellSequence=void 0;const u=l(2584);function _(s,a,n,o){const f=s-h(s,n),m=a-h(a,n),w=Math.abs(f-m)-function(R,p,E){let k=0;const M=R-h(R,E),D=p-h(p,E);for(let O=0;O<Math.abs(M-D);O++){const W=g(R,p)==="A"?-1:1,q=E.buffer.lines.get(M+W*O);q!=null&&q.isWrapped&&k++}return k}(s,a,n);return v(w,y(g(s,a),o))}function h(s,a){let n=0,o=a.buffer.lines.get(s),f=o==null?void 0:o.isWrapped;for(;f&&s>=0&&s<a.rows;)n++,o=a.buffer.lines.get(--s),f=o==null?void 0:o.isWrapped;return n}function g(s,a){return s>a?"A":"B"}function C(s,a,n,o,f,m){let w=s,R=a,p="";for(;w!==n||R!==o;)w+=f?1:-1,f&&w>m.cols-1?(p+=m.buffer.translateBufferLineToString(R,!1,s,w),w=0,s=0,R++):!f&&w<0&&(p+=m.buffer.translateBufferLineToString(R,!1,0,s+1),w=m.cols-1,s=w,R--);return p+m.buffer.translateBufferLineToString(R,!1,s,w)}function y(s,a){const n=a?"O":"[";return u.C0.ESC+n+s}function v(s,a){s=Math.floor(s);let n="";for(let o=0;o<s;o++)n+=a;return n}i.moveToCellSequence=function(s,a,n,o){const f=n.buffer.x,m=n.buffer.y;if(!n.buffer.hasScrollback)return function(p,E,k,M,D,O){return _(E,M,D,O).length===0?"":v(C(p,E,p,E-h(E,D),!1,D).length,y("D",O))}(f,m,0,a,n,o)+_(m,a,n,o)+function(p,E,k,M,D,O){let W;W=_(E,M,D,O).length>0?M-h(M,D):E;const q=M,K=function(U,x,T,B,I,G){let te;return te=_(T,B,I,G).length>0?B-h(B,I):x,U<T&&te<=B||U>=T&&te<B?"C":"D"}(p,E,k,M,D,O);return v(C(p,W,k,q,K==="C",D).length,y(K,O))}(f,m,s,a,n,o);let w;if(m===a)return w=f>s?"D":"C",v(Math.abs(f-s),y(w,o));w=m>a?"D":"C";const R=Math.abs(m-a);return v(function(p,E){return E.cols-p}(m>a?s:f,n)+(R-1)*n.cols+1+((m>a?f:s)-1),y(w,o))}},1296:function(b,i,l){var u=this&&this.__decorate||function(D,O,W,q){var K,U=arguments.length,x=U<3?O:q===null?q=Object.getOwnPropertyDescriptor(O,W):q;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")x=Reflect.decorate(D,O,W,q);else for(var T=D.length-1;T>=0;T--)(K=D[T])&&(x=(U<3?K(x):U>3?K(O,W,x):K(O,W))||x);return U>3&&x&&Object.defineProperty(O,W,x),x},_=this&&this.__param||function(D,O){return function(W,q){O(W,q,D)}};Object.defineProperty(i,"__esModule",{value:!0}),i.DomRenderer=void 0;const h=l(3787),g=l(2550),C=l(2223),y=l(6171),v=l(4725),s=l(8055),a=l(8460),n=l(844),o=l(2585),f="xterm-dom-renderer-owner-",m="xterm-rows",w="xterm-fg-",R="xterm-bg-",p="xterm-focus",E="xterm-selection";let k=1,M=i.DomRenderer=class extends n.Disposable{constructor(D,O,W,q,K,U,x,T,B,I){super(),this._element=D,this._screenElement=O,this._viewportElement=W,this._linkifier2=q,this._charSizeService=U,this._optionsService=x,this._bufferService=T,this._coreBrowserService=B,this._themeService=I,this._terminalClass=k++,this._rowElements=[],this.onRequestRedraw=this.register(new a.EventEmitter).event,this._rowContainer=document.createElement("div"),this._rowContainer.classList.add(m),this._rowContainer.style.lineHeight="normal",this._rowContainer.setAttribute("aria-hidden","true"),this._refreshRowElements(this._bufferService.cols,this._bufferService.rows),this._selectionContainer=document.createElement("div"),this._selectionContainer.classList.add(E),this._selectionContainer.setAttribute("aria-hidden","true"),this.dimensions=(0,y.createRenderDimensions)(),this._updateDimensions(),this.register(this._optionsService.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._themeService.onChangeColors(G=>this._injectCss(G))),this._injectCss(this._themeService.colors),this._rowFactory=K.createInstance(h.DomRendererRowFactory,document),this._element.classList.add(f+this._terminalClass),this._screenElement.appendChild(this._rowContainer),this._screenElement.appendChild(this._selectionContainer),this.register(this._linkifier2.onShowLinkUnderline(G=>this._handleLinkHover(G))),this.register(this._linkifier2.onHideLinkUnderline(G=>this._handleLinkLeave(G))),this.register((0,n.toDisposable)(()=>{this._element.classList.remove(f+this._terminalClass),this._rowContainer.remove(),this._selectionContainer.remove(),this._widthCache.dispose(),this._themeStyleElement.remove(),this._dimensionsStyleElement.remove()})),this._widthCache=new g.WidthCache(document),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}_updateDimensions(){const D=this._coreBrowserService.dpr;this.dimensions.device.char.width=this._charSizeService.width*D,this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*D),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.left=0,this.dimensions.device.char.top=0,this.dimensions.device.canvas.width=this.dimensions.device.cell.width*this._bufferService.cols,this.dimensions.device.canvas.height=this.dimensions.device.cell.height*this._bufferService.rows,this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/D),this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/D),this.dimensions.css.cell.width=this.dimensions.css.canvas.width/this._bufferService.cols,this.dimensions.css.cell.height=this.dimensions.css.canvas.height/this._bufferService.rows;for(const W of this._rowElements)W.style.width=`${this.dimensions.css.canvas.width}px`,W.style.height=`${this.dimensions.css.cell.height}px`,W.style.lineHeight=`${this.dimensions.css.cell.height}px`,W.style.overflow="hidden";this._dimensionsStyleElement||(this._dimensionsStyleElement=document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement));const O=`${this._terminalSelector} .${m} span { display: inline-block; height: 100%; vertical-align: top;}`;this._dimensionsStyleElement.textContent=O,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._screenElement.style.height=`${this.dimensions.css.canvas.height}px`}_injectCss(D){this._themeStyleElement||(this._themeStyleElement=document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));let O=`${this._terminalSelector} .${m} { color: ${D.foreground.css}; font-family: ${this._optionsService.rawOptions.fontFamily}; font-size: ${this._optionsService.rawOptions.fontSize}px; font-kerning: none; white-space: pre}`;O+=`${this._terminalSelector} .${m} .xterm-dim { color: ${s.color.multiplyOpacity(D.foreground,.5).css};}`,O+=`${this._terminalSelector} span:not(.xterm-bold) { font-weight: ${this._optionsService.rawOptions.fontWeight};}${this._terminalSelector} span.xterm-bold { font-weight: ${this._optionsService.rawOptions.fontWeightBold};}${this._terminalSelector} span.xterm-italic { font-style: italic;}`,O+="@keyframes blink_box_shadow_"+this._terminalClass+" { 50% {  border-bottom-style: hidden; }}",O+="@keyframes blink_block_"+this._terminalClass+` { 0% {  background-color: ${D.cursor.css};  color: ${D.cursorAccent.css}; } 50% {  background-color: inherit;  color: ${D.cursor.css}; }}`,O+=`${this._terminalSelector} .${m}.${p} .xterm-cursor.xterm-cursor-blink:not(.xterm-cursor-block) { animation: blink_box_shadow_`+this._terminalClass+` 1s step-end infinite;}${this._terminalSelector} .${m}.${p} .xterm-cursor.xterm-cursor-blink.xterm-cursor-block { animation: blink_block_`+this._terminalClass+` 1s step-end infinite;}${this._terminalSelector} .${m} .xterm-cursor.xterm-cursor-block { background-color: ${D.cursor.css}; color: ${D.cursorAccent.css};}${this._terminalSelector} .${m} .xterm-cursor.xterm-cursor-outline { outline: 1px solid ${D.cursor.css}; outline-offset: -1px;}${this._terminalSelector} .${m} .xterm-cursor.xterm-cursor-bar { box-shadow: ${this._optionsService.rawOptions.cursorWidth}px 0 0 ${D.cursor.css} inset;}${this._terminalSelector} .${m} .xterm-cursor.xterm-cursor-underline { border-bottom: 1px ${D.cursor.css}; border-bottom-style: solid; height: calc(100% - 1px);}`,O+=`${this._terminalSelector} .${E} { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}${this._terminalSelector}.focus .${E} div { position: absolute; background-color: ${D.selectionBackgroundOpaque.css};}${this._terminalSelector} .${E} div { position: absolute; background-color: ${D.selectionInactiveBackgroundOpaque.css};}`;for(const[W,q]of D.ansi.entries())O+=`${this._terminalSelector} .${w}${W} { color: ${q.css}; }${this._terminalSelector} .${w}${W}.xterm-dim { color: ${s.color.multiplyOpacity(q,.5).css}; }${this._terminalSelector} .${R}${W} { background-color: ${q.css}; }`;O+=`${this._terminalSelector} .${w}${C.INVERTED_DEFAULT_COLOR} { color: ${s.color.opaque(D.background).css}; }${this._terminalSelector} .${w}${C.INVERTED_DEFAULT_COLOR}.xterm-dim { color: ${s.color.multiplyOpacity(s.color.opaque(D.background),.5).css}; }${this._terminalSelector} .${R}${C.INVERTED_DEFAULT_COLOR} { background-color: ${D.foreground.css}; }`,this._themeStyleElement.textContent=O}_setDefaultSpacing(){const D=this.dimensions.css.cell.width-this._widthCache.get("W",!1,!1);this._rowContainer.style.letterSpacing=`${D}px`,this._rowFactory.defaultSpacing=D}handleDevicePixelRatioChange(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}_refreshRowElements(D,O){for(let W=this._rowElements.length;W<=O;W++){const q=document.createElement("div");this._rowContainer.appendChild(q),this._rowElements.push(q)}for(;this._rowElements.length>O;)this._rowContainer.removeChild(this._rowElements.pop())}handleResize(D,O){this._refreshRowElements(D,O),this._updateDimensions()}handleCharSizeChanged(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}handleBlur(){this._rowContainer.classList.remove(p)}handleFocus(){this._rowContainer.classList.add(p),this.renderRows(this._bufferService.buffer.y,this._bufferService.buffer.y)}handleSelectionChanged(D,O,W){if(this._selectionContainer.replaceChildren(),this._rowFactory.handleSelectionChanged(D,O,W),this.renderRows(0,this._bufferService.rows-1),!D||!O)return;const q=D[1]-this._bufferService.buffer.ydisp,K=O[1]-this._bufferService.buffer.ydisp,U=Math.max(q,0),x=Math.min(K,this._bufferService.rows-1);if(U>=this._bufferService.rows||x<0)return;const T=document.createDocumentFragment();if(W){const B=D[0]>O[0];T.appendChild(this._createSelectionElement(U,B?O[0]:D[0],B?D[0]:O[0],x-U+1))}else{const B=q===U?D[0]:0,I=U===K?O[0]:this._bufferService.cols;T.appendChild(this._createSelectionElement(U,B,I));const G=x-U-1;if(T.appendChild(this._createSelectionElement(U+1,0,this._bufferService.cols,G)),U!==x){const te=K===x?O[0]:this._bufferService.cols;T.appendChild(this._createSelectionElement(x,0,te))}}this._selectionContainer.appendChild(T)}_createSelectionElement(D,O,W,q=1){const K=document.createElement("div");return K.style.height=q*this.dimensions.css.cell.height+"px",K.style.top=D*this.dimensions.css.cell.height+"px",K.style.left=O*this.dimensions.css.cell.width+"px",K.style.width=this.dimensions.css.cell.width*(W-O)+"px",K}handleCursorMove(){}_handleOptionsChanged(){this._updateDimensions(),this._injectCss(this._themeService.colors),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}clear(){for(const D of this._rowElements)D.replaceChildren()}renderRows(D,O){const W=this._bufferService.buffer,q=W.ybase+W.y,K=Math.min(W.x,this._bufferService.cols-1),U=this._optionsService.rawOptions.cursorBlink,x=this._optionsService.rawOptions.cursorStyle,T=this._optionsService.rawOptions.cursorInactiveStyle;for(let B=D;B<=O;B++){const I=B+W.ydisp,G=this._rowElements[B],te=W.lines.get(I);if(!G||!te)break;G.replaceChildren(...this._rowFactory.createRow(te,I,I===q,x,T,K,U,this.dimensions.css.cell.width,this._widthCache,-1,-1))}}get _terminalSelector(){return`.${f}${this._terminalClass}`}_handleLinkHover(D){this._setCellUnderline(D.x1,D.x2,D.y1,D.y2,D.cols,!0)}_handleLinkLeave(D){this._setCellUnderline(D.x1,D.x2,D.y1,D.y2,D.cols,!1)}_setCellUnderline(D,O,W,q,K,U){W<0&&(D=0),q<0&&(O=0);const x=this._bufferService.rows-1;W=Math.max(Math.min(W,x),0),q=Math.max(Math.min(q,x),0),K=Math.min(K,this._bufferService.cols);const T=this._bufferService.buffer,B=T.ybase+T.y,I=Math.min(T.x,K-1),G=this._optionsService.rawOptions.cursorBlink,te=this._optionsService.rawOptions.cursorStyle,oe=this._optionsService.rawOptions.cursorInactiveStyle;for(let re=W;re<=q;++re){const _e=re+T.ydisp,L=this._rowElements[re],H=T.lines.get(_e);if(!L||!H)break;L.replaceChildren(...this._rowFactory.createRow(H,_e,_e===B,te,oe,I,G,this.dimensions.css.cell.width,this._widthCache,U?re===W?D:0:-1,U?(re===q?O:K)-1:-1))}}};i.DomRenderer=M=u([_(4,o.IInstantiationService),_(5,v.ICharSizeService),_(6,o.IOptionsService),_(7,o.IBufferService),_(8,v.ICoreBrowserService),_(9,v.IThemeService)],M)},3787:function(b,i,l){var u=this&&this.__decorate||function(w,R,p,E){var k,M=arguments.length,D=M<3?R:E===null?E=Object.getOwnPropertyDescriptor(R,p):E;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")D=Reflect.decorate(w,R,p,E);else for(var O=w.length-1;O>=0;O--)(k=w[O])&&(D=(M<3?k(D):M>3?k(R,p,D):k(R,p))||D);return M>3&&D&&Object.defineProperty(R,p,D),D},_=this&&this.__param||function(w,R){return function(p,E){R(p,E,w)}};Object.defineProperty(i,"__esModule",{value:!0}),i.DomRendererRowFactory=void 0;const h=l(2223),g=l(643),C=l(511),y=l(2585),v=l(8055),s=l(4725),a=l(4269),n=l(6171),o=l(3734);let f=i.DomRendererRowFactory=class{constructor(w,R,p,E,k,M,D){this._document=w,this._characterJoinerService=R,this._optionsService=p,this._coreBrowserService=E,this._coreService=k,this._decorationService=M,this._themeService=D,this._workCell=new C.CellData,this._columnSelectMode=!1,this.defaultSpacing=0}handleSelectionChanged(w,R,p){this._selectionStart=w,this._selectionEnd=R,this._columnSelectMode=p}createRow(w,R,p,E,k,M,D,O,W,q,K){const U=[],x=this._characterJoinerService.getJoinedCharacters(R),T=this._themeService.colors;let B,I=w.getNoBgTrimmedLength();p&&I<M+1&&(I=M+1);let G=0,te="",oe=0,re=0,_e=0,L=!1,H=0,$=!1,j=0;const le=[],ie=q!==-1&&K!==-1;for(let A=0;A<I;A++){w.loadCell(A,this._workCell);let P=this._workCell.getWidth();if(P===0)continue;let N=!1,V=A,F=this._workCell;if(x.length>0&&A===x[0][0]){N=!0;const ge=x.shift();F=new a.JoinedCellData(this._workCell,w.translateToString(!0,ge[0],ge[1]),ge[1]-ge[0]),V=ge[1]-1,P=F.getWidth()}const J=this._isCellInSelection(A,R),ee=p&&A===M,Y=ie&&A>=q&&A<=K;let Z=!1;this._decorationService.forEachDecorationAtCell(A,R,void 0,ge=>{Z=!0});let X=F.getChars()||g.WHITESPACE_CELL_CHAR;if(X===" "&&(F.isUnderline()||F.isOverline())&&(X=" "),j=P*O-W.get(X,F.isBold(),F.isItalic()),B){if(G&&(J&&$||!J&&!$&&F.bg===oe)&&(J&&$&&T.selectionForeground||F.fg===re)&&F.extended.ext===_e&&Y===L&&j===H&&!ee&&!N&&!Z){te+=X,G++;continue}G&&(B.textContent=te),B=this._document.createElement("span"),G=0,te=""}else B=this._document.createElement("span");if(oe=F.bg,re=F.fg,_e=F.extended.ext,L=Y,H=j,$=J,N&&M>=A&&M<=V&&(M=A),!this._coreService.isCursorHidden&&ee){if(le.push("xterm-cursor"),this._coreBrowserService.isFocused)D&&le.push("xterm-cursor-blink"),le.push(E==="bar"?"xterm-cursor-bar":E==="underline"?"xterm-cursor-underline":"xterm-cursor-block");else if(k)switch(k){case"outline":le.push("xterm-cursor-outline");break;case"block":le.push("xterm-cursor-block");break;case"bar":le.push("xterm-cursor-bar");break;case"underline":le.push("xterm-cursor-underline")}}if(F.isBold()&&le.push("xterm-bold"),F.isItalic()&&le.push("xterm-italic"),F.isDim()&&le.push("xterm-dim"),te=F.isInvisible()?g.WHITESPACE_CELL_CHAR:F.getChars()||g.WHITESPACE_CELL_CHAR,F.isUnderline()&&(le.push(`xterm-underline-${F.extended.underlineStyle}`),te===" "&&(te=" "),!F.isUnderlineColorDefault()))if(F.isUnderlineColorRGB())B.style.textDecorationColor=`rgb(${o.AttributeData.toColorRGB(F.getUnderlineColor()).join(",")})`;else{let ge=F.getUnderlineColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&F.isBold()&&ge<8&&(ge+=8),B.style.textDecorationColor=T.ansi[ge].css}F.isOverline()&&(le.push("xterm-overline"),te===" "&&(te=" ")),F.isStrikethrough()&&le.push("xterm-strikethrough"),Y&&(B.style.textDecoration="underline");let Q=F.getFgColor(),ne=F.getFgColorMode(),se=F.getBgColor(),ae=F.getBgColorMode();const he=!!F.isInverse();if(he){const ge=Q;Q=se,se=ge;const Ut=ne;ne=ae,ae=Ut}let de,me,Se,we=!1;switch(this._decorationService.forEachDecorationAtCell(A,R,void 0,ge=>{ge.options.layer!=="top"&&we||(ge.backgroundColorRGB&&(ae=50331648,se=ge.backgroundColorRGB.rgba>>8&16777215,de=ge.backgroundColorRGB),ge.foregroundColorRGB&&(ne=50331648,Q=ge.foregroundColorRGB.rgba>>8&16777215,me=ge.foregroundColorRGB),we=ge.options.layer==="top")}),!we&&J&&(de=this._coreBrowserService.isFocused?T.selectionBackgroundOpaque:T.selectionInactiveBackgroundOpaque,se=de.rgba>>8&16777215,ae=50331648,we=!0,T.selectionForeground&&(ne=50331648,Q=T.selectionForeground.rgba>>8&16777215,me=T.selectionForeground)),we&&le.push("xterm-decoration-top"),ae){case 16777216:case 33554432:Se=T.ansi[se],le.push(`xterm-bg-${se}`);break;case 50331648:Se=v.rgba.toColor(se>>16,se>>8&255,255&se),this._addStyle(B,`background-color:#${m((se>>>0).toString(16),"0",6)}`);break;default:he?(Se=T.foreground,le.push(`xterm-bg-${h.INVERTED_DEFAULT_COLOR}`)):Se=T.background}switch(de||F.isDim()&&(de=v.color.multiplyOpacity(Se,.5)),ne){case 16777216:case 33554432:F.isBold()&&Q<8&&this._optionsService.rawOptions.drawBoldTextInBrightColors&&(Q+=8),this._applyMinimumContrast(B,Se,T.ansi[Q],F,de,void 0)||le.push(`xterm-fg-${Q}`);break;case 50331648:const ge=v.rgba.toColor(Q>>16&255,Q>>8&255,255&Q);this._applyMinimumContrast(B,Se,ge,F,de,me)||this._addStyle(B,`color:#${m(Q.toString(16),"0",6)}`);break;default:this._applyMinimumContrast(B,Se,T.foreground,F,de,void 0)||he&&le.push(`xterm-fg-${h.INVERTED_DEFAULT_COLOR}`)}le.length&&(B.className=le.join(" "),le.length=0),ee||N||Z?B.textContent=te:G++,j!==this.defaultSpacing&&(B.style.letterSpacing=`${j}px`),U.push(B),A=V}return B&&G&&(B.textContent=te),U}_applyMinimumContrast(w,R,p,E,k,M){if(this._optionsService.rawOptions.minimumContrastRatio===1||(0,n.excludeFromContrastRatioDemands)(E.getCode()))return!1;const D=this._getContrastCache(E);let O;if(k||M||(O=D.getColor(R.rgba,p.rgba)),O===void 0){const W=this._optionsService.rawOptions.minimumContrastRatio/(E.isDim()?2:1);O=v.color.ensureContrastRatio(k||R,M||p,W),D.setColor((k||R).rgba,(M||p).rgba,O??null)}return!!O&&(this._addStyle(w,`color:${O.css}`),!0)}_getContrastCache(w){return w.isDim()?this._themeService.colors.halfContrastCache:this._themeService.colors.contrastCache}_addStyle(w,R){w.setAttribute("style",`${w.getAttribute("style")||""}${R};`)}_isCellInSelection(w,R){const p=this._selectionStart,E=this._selectionEnd;return!(!p||!E)&&(this._columnSelectMode?p[0]<=E[0]?w>=p[0]&&R>=p[1]&&w<E[0]&&R<=E[1]:w<p[0]&&R>=p[1]&&w>=E[0]&&R<=E[1]:R>p[1]&&R<E[1]||p[1]===E[1]&&R===p[1]&&w>=p[0]&&w<E[0]||p[1]<E[1]&&R===E[1]&&w<E[0]||p[1]<E[1]&&R===p[1]&&w>=p[0])}};function m(w,R,p){for(;w.length<p;)w=R+w;return w}i.DomRendererRowFactory=f=u([_(1,s.ICharacterJoinerService),_(2,y.IOptionsService),_(3,s.ICoreBrowserService),_(4,y.ICoreService),_(5,y.IDecorationService),_(6,s.IThemeService)],f)},2550:(b,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.WidthCache=void 0,i.WidthCache=class{constructor(l){this._flat=new Float32Array(256),this._font="",this._fontSize=0,this._weight="normal",this._weightBold="bold",this._measureElements=[],this._container=l.createElement("div"),this._container.style.position="absolute",this._container.style.top="-50000px",this._container.style.width="50000px",this._container.style.whiteSpace="pre",this._container.style.fontKerning="none";const u=l.createElement("span"),_=l.createElement("span");_.style.fontWeight="bold";const h=l.createElement("span");h.style.fontStyle="italic";const g=l.createElement("span");g.style.fontWeight="bold",g.style.fontStyle="italic",this._measureElements=[u,_,h,g],this._container.appendChild(u),this._container.appendChild(_),this._container.appendChild(h),this._container.appendChild(g),l.body.appendChild(this._container),this.clear()}dispose(){this._container.remove(),this._measureElements.length=0,this._holey=void 0}clear(){this._flat.fill(-9999),this._holey=new Map}setFont(l,u,_,h){l===this._font&&u===this._fontSize&&_===this._weight&&h===this._weightBold||(this._font=l,this._fontSize=u,this._weight=_,this._weightBold=h,this._container.style.fontFamily=this._font,this._container.style.fontSize=`${this._fontSize}px`,this._measureElements[0].style.fontWeight=`${_}`,this._measureElements[1].style.fontWeight=`${h}`,this._measureElements[2].style.fontWeight=`${_}`,this._measureElements[3].style.fontWeight=`${h}`,this.clear())}get(l,u,_){let h=0;if(!u&&!_&&l.length===1&&(h=l.charCodeAt(0))<256)return this._flat[h]!==-9999?this._flat[h]:this._flat[h]=this._measure(l,0);let g=l;u&&(g+="B"),_&&(g+="I");let C=this._holey.get(g);if(C===void 0){let y=0;u&&(y|=1),_&&(y|=2),C=this._measure(l,y),this._holey.set(g,C)}return C}_measure(l,u){const _=this._measureElements[u];return _.textContent=l.repeat(32),_.offsetWidth/32}}},2223:(b,i,l)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.TEXT_BASELINE=i.DIM_OPACITY=i.INVERTED_DEFAULT_COLOR=void 0;const u=l(6114);i.INVERTED_DEFAULT_COLOR=257,i.DIM_OPACITY=.5,i.TEXT_BASELINE=u.isFirefox||u.isLegacyEdge?"bottom":"ideographic"},6171:(b,i)=>{function l(u){return 57508<=u&&u<=57558}Object.defineProperty(i,"__esModule",{value:!0}),i.createRenderDimensions=i.excludeFromContrastRatioDemands=i.isRestrictedPowerlineGlyph=i.isPowerlineGlyph=i.throwIfFalsy=void 0,i.throwIfFalsy=function(u){if(!u)throw new Error("value must not be falsy");return u},i.isPowerlineGlyph=l,i.isRestrictedPowerlineGlyph=function(u){return 57520<=u&&u<=57527},i.excludeFromContrastRatioDemands=function(u){return l(u)||function(_){return 9472<=_&&_<=9631}(u)},i.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}}},456:(b,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.SelectionModel=void 0,i.SelectionModel=class{constructor(l){this._bufferService=l,this.isSelectAllActive=!1,this.selectionStartLength=0}clearSelection(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0}get finalSelectionStart(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart&&this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart}get finalSelectionEnd(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){const l=this.selectionStart[0]+this.selectionStartLength;return l>this._bufferService.cols?l%this._bufferService.cols==0?[this._bufferService.cols,this.selectionStart[1]+Math.floor(l/this._bufferService.cols)-1]:[l%this._bufferService.cols,this.selectionStart[1]+Math.floor(l/this._bufferService.cols)]:[l,this.selectionStart[1]]}if(this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]){const l=this.selectionStart[0]+this.selectionStartLength;return l>this._bufferService.cols?[l%this._bufferService.cols,this.selectionStart[1]+Math.floor(l/this._bufferService.cols)]:[Math.max(l,this.selectionEnd[0]),this.selectionEnd[1]]}return this.selectionEnd}}areSelectionValuesReversed(){const l=this.selectionStart,u=this.selectionEnd;return!(!l||!u)&&(l[1]>u[1]||l[1]===u[1]&&l[0]>u[0])}handleTrim(l){return this.selectionStart&&(this.selectionStart[1]-=l),this.selectionEnd&&(this.selectionEnd[1]-=l),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)}}},428:function(b,i,l){var u=this&&this.__decorate||function(s,a,n,o){var f,m=arguments.length,w=m<3?a:o===null?o=Object.getOwnPropertyDescriptor(a,n):o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")w=Reflect.decorate(s,a,n,o);else for(var R=s.length-1;R>=0;R--)(f=s[R])&&(w=(m<3?f(w):m>3?f(a,n,w):f(a,n))||w);return m>3&&w&&Object.defineProperty(a,n,w),w},_=this&&this.__param||function(s,a){return function(n,o){a(n,o,s)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CharSizeService=void 0;const h=l(2585),g=l(8460),C=l(844);let y=i.CharSizeService=class extends C.Disposable{get hasValidSize(){return this.width>0&&this.height>0}constructor(s,a,n){super(),this._optionsService=n,this.width=0,this.height=0,this._onCharSizeChange=this.register(new g.EventEmitter),this.onCharSizeChange=this._onCharSizeChange.event,this._measureStrategy=new v(s,a,this._optionsService),this.register(this._optionsService.onMultipleOptionChange(["fontFamily","fontSize"],()=>this.measure()))}measure(){const s=this._measureStrategy.measure();s.width===this.width&&s.height===this.height||(this.width=s.width,this.height=s.height,this._onCharSizeChange.fire())}};i.CharSizeService=y=u([_(2,h.IOptionsService)],y);class v{constructor(a,n,o){this._document=a,this._parentElement=n,this._optionsService=o,this._result={width:0,height:0},this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W".repeat(32),this._measureElement.setAttribute("aria-hidden","true"),this._measureElement.style.whiteSpace="pre",this._measureElement.style.fontKerning="none",this._parentElement.appendChild(this._measureElement)}measure(){this._measureElement.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._measureElement.style.fontSize=`${this._optionsService.rawOptions.fontSize}px`;const a={height:Number(this._measureElement.offsetHeight),width:Number(this._measureElement.offsetWidth)};return a.width!==0&&a.height!==0&&(this._result.width=a.width/32,this._result.height=Math.ceil(a.height)),this._result}}},4269:function(b,i,l){var u=this&&this.__decorate||function(a,n,o,f){var m,w=arguments.length,R=w<3?n:f===null?f=Object.getOwnPropertyDescriptor(n,o):f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")R=Reflect.decorate(a,n,o,f);else for(var p=a.length-1;p>=0;p--)(m=a[p])&&(R=(w<3?m(R):w>3?m(n,o,R):m(n,o))||R);return w>3&&R&&Object.defineProperty(n,o,R),R},_=this&&this.__param||function(a,n){return function(o,f){n(o,f,a)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CharacterJoinerService=i.JoinedCellData=void 0;const h=l(3734),g=l(643),C=l(511),y=l(2585);class v extends h.AttributeData{constructor(n,o,f){super(),this.content=0,this.combinedData="",this.fg=n.fg,this.bg=n.bg,this.combinedData=o,this._width=f}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(n){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}i.JoinedCellData=v;let s=i.CharacterJoinerService=class _n{constructor(n){this._bufferService=n,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new C.CellData}register(n){const o={id:this._nextCharacterJoinerId++,handler:n};return this._characterJoiners.push(o),o.id}deregister(n){for(let o=0;o<this._characterJoiners.length;o++)if(this._characterJoiners[o].id===n)return this._characterJoiners.splice(o,1),!0;return!1}getJoinedCharacters(n){if(this._characterJoiners.length===0)return[];const o=this._bufferService.buffer.lines.get(n);if(!o||o.length===0)return[];const f=[],m=o.translateToString(!0);let w=0,R=0,p=0,E=o.getFg(0),k=o.getBg(0);for(let M=0;M<o.getTrimmedLength();M++)if(o.loadCell(M,this._workCell),this._workCell.getWidth()!==0){if(this._workCell.fg!==E||this._workCell.bg!==k){if(M-w>1){const D=this._getJoinedRanges(m,p,R,o,w);for(let O=0;O<D.length;O++)f.push(D[O])}w=M,p=R,E=this._workCell.fg,k=this._workCell.bg}R+=this._workCell.getChars().length||g.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-w>1){const M=this._getJoinedRanges(m,p,R,o,w);for(let D=0;D<M.length;D++)f.push(M[D])}return f}_getJoinedRanges(n,o,f,m,w){const R=n.substring(o,f);let p=[];try{p=this._characterJoiners[0].handler(R)}catch(E){console.error(E)}for(let E=1;E<this._characterJoiners.length;E++)try{const k=this._characterJoiners[E].handler(R);for(let M=0;M<k.length;M++)_n._mergeRanges(p,k[M])}catch(k){console.error(k)}return this._stringRangesToCellRanges(p,m,w),p}_stringRangesToCellRanges(n,o,f){let m=0,w=!1,R=0,p=n[m];if(p){for(let E=f;E<this._bufferService.cols;E++){const k=o.getWidth(E),M=o.getString(E).length||g.WHITESPACE_CELL_CHAR.length;if(k!==0){if(!w&&p[0]<=R&&(p[0]=E,w=!0),p[1]<=R){if(p[1]=E,p=n[++m],!p)break;p[0]<=R?(p[0]=E,w=!0):w=!1}R+=M}}p&&(p[1]=this._bufferService.cols)}}static _mergeRanges(n,o){let f=!1;for(let m=0;m<n.length;m++){const w=n[m];if(f){if(o[1]<=w[0])return n[m-1][1]=o[1],n;if(o[1]<=w[1])return n[m-1][1]=Math.max(o[1],w[1]),n.splice(m,1),n;n.splice(m,1),m--}else{if(o[1]<=w[0])return n.splice(m,0,o),n;if(o[1]<=w[1])return w[0]=Math.min(o[0],w[0]),n;o[0]<w[1]&&(w[0]=Math.min(o[0],w[0]),f=!0)}}return f?n[n.length-1][1]=o[1]:n.push(o),n}};i.CharacterJoinerService=s=u([_(0,y.IBufferService)],s)},5114:(b,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CoreBrowserService=void 0,i.CoreBrowserService=class{constructor(l,u){this._textarea=l,this.window=u,this._isFocused=!1,this._cachedIsFocused=void 0,this._textarea.addEventListener("focus",()=>this._isFocused=!0),this._textarea.addEventListener("blur",()=>this._isFocused=!1)}get dpr(){return this.window.devicePixelRatio}get isFocused(){return this._cachedIsFocused===void 0&&(this._cachedIsFocused=this._isFocused&&this._textarea.ownerDocument.hasFocus(),queueMicrotask(()=>this._cachedIsFocused=void 0)),this._cachedIsFocused}}},8934:function(b,i,l){var u=this&&this.__decorate||function(y,v,s,a){var n,o=arguments.length,f=o<3?v:a===null?a=Object.getOwnPropertyDescriptor(v,s):a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")f=Reflect.decorate(y,v,s,a);else for(var m=y.length-1;m>=0;m--)(n=y[m])&&(f=(o<3?n(f):o>3?n(v,s,f):n(v,s))||f);return o>3&&f&&Object.defineProperty(v,s,f),f},_=this&&this.__param||function(y,v){return function(s,a){v(s,a,y)}};Object.defineProperty(i,"__esModule",{value:!0}),i.MouseService=void 0;const h=l(4725),g=l(9806);let C=i.MouseService=class{constructor(y,v){this._renderService=y,this._charSizeService=v}getCoords(y,v,s,a,n){return(0,g.getCoords)(window,y,v,s,a,this._charSizeService.hasValidSize,this._renderService.dimensions.css.cell.width,this._renderService.dimensions.css.cell.height,n)}getMouseReportCoords(y,v){const s=(0,g.getCoordsRelativeToElement)(window,y,v);if(this._charSizeService.hasValidSize)return s[0]=Math.min(Math.max(s[0],0),this._renderService.dimensions.css.canvas.width-1),s[1]=Math.min(Math.max(s[1],0),this._renderService.dimensions.css.canvas.height-1),{col:Math.floor(s[0]/this._renderService.dimensions.css.cell.width),row:Math.floor(s[1]/this._renderService.dimensions.css.cell.height),x:Math.floor(s[0]),y:Math.floor(s[1])}}};i.MouseService=C=u([_(0,h.IRenderService),_(1,h.ICharSizeService)],C)},3230:function(b,i,l){var u=this&&this.__decorate||function(f,m,w,R){var p,E=arguments.length,k=E<3?m:R===null?R=Object.getOwnPropertyDescriptor(m,w):R;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(f,m,w,R);else for(var M=f.length-1;M>=0;M--)(p=f[M])&&(k=(E<3?p(k):E>3?p(m,w,k):p(m,w))||k);return E>3&&k&&Object.defineProperty(m,w,k),k},_=this&&this.__param||function(f,m){return function(w,R){m(w,R,f)}};Object.defineProperty(i,"__esModule",{value:!0}),i.RenderService=void 0;const h=l(3656),g=l(6193),C=l(5596),y=l(4725),v=l(8460),s=l(844),a=l(7226),n=l(2585);let o=i.RenderService=class extends s.Disposable{get dimensions(){return this._renderer.value.dimensions}constructor(f,m,w,R,p,E,k,M){if(super(),this._rowCount=f,this._charSizeService=R,this._renderer=this.register(new s.MutableDisposable),this._pausedResizeTask=new a.DebouncedIdleTask,this._isPaused=!1,this._needsFullRefresh=!1,this._isNextRenderRedrawOnly=!0,this._needsSelectionRefresh=!1,this._canvasWidth=0,this._canvasHeight=0,this._selectionState={start:void 0,end:void 0,columnSelectMode:!1},this._onDimensionsChange=this.register(new v.EventEmitter),this.onDimensionsChange=this._onDimensionsChange.event,this._onRenderedViewportChange=this.register(new v.EventEmitter),this.onRenderedViewportChange=this._onRenderedViewportChange.event,this._onRender=this.register(new v.EventEmitter),this.onRender=this._onRender.event,this._onRefreshRequest=this.register(new v.EventEmitter),this.onRefreshRequest=this._onRefreshRequest.event,this._renderDebouncer=new g.RenderDebouncer(k.window,(D,O)=>this._renderRows(D,O)),this.register(this._renderDebouncer),this._screenDprMonitor=new C.ScreenDprMonitor(k.window),this._screenDprMonitor.setListener(()=>this.handleDevicePixelRatioChange()),this.register(this._screenDprMonitor),this.register(E.onResize(()=>this._fullRefresh())),this.register(E.buffers.onBufferActivate(()=>{var D;return(D=this._renderer.value)===null||D===void 0?void 0:D.clear()})),this.register(w.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._charSizeService.onCharSizeChange(()=>this.handleCharSizeChanged())),this.register(p.onDecorationRegistered(()=>this._fullRefresh())),this.register(p.onDecorationRemoved(()=>this._fullRefresh())),this.register(w.onMultipleOptionChange(["customGlyphs","drawBoldTextInBrightColors","letterSpacing","lineHeight","fontFamily","fontSize","fontWeight","fontWeightBold","minimumContrastRatio"],()=>{this.clear(),this.handleResize(E.cols,E.rows),this._fullRefresh()})),this.register(w.onMultipleOptionChange(["cursorBlink","cursorStyle"],()=>this.refreshRows(E.buffer.y,E.buffer.y,!0))),this.register((0,h.addDisposableDomListener)(k.window,"resize",()=>this.handleDevicePixelRatioChange())),this.register(M.onChangeColors(()=>this._fullRefresh())),"IntersectionObserver"in k.window){const D=new k.window.IntersectionObserver(O=>this._handleIntersectionChange(O[O.length-1]),{threshold:0});D.observe(m),this.register({dispose:()=>D.disconnect()})}}_handleIntersectionChange(f){this._isPaused=f.isIntersecting===void 0?f.intersectionRatio===0:!f.isIntersecting,this._isPaused||this._charSizeService.hasValidSize||this._charSizeService.measure(),!this._isPaused&&this._needsFullRefresh&&(this._pausedResizeTask.flush(),this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)}refreshRows(f,m,w=!1){this._isPaused?this._needsFullRefresh=!0:(w||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(f,m,this._rowCount))}_renderRows(f,m){this._renderer.value&&(f=Math.min(f,this._rowCount-1),m=Math.min(m,this._rowCount-1),this._renderer.value.renderRows(f,m),this._needsSelectionRefresh&&(this._renderer.value.handleSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRenderedViewportChange.fire({start:f,end:m}),this._onRender.fire({start:f,end:m}),this._isNextRenderRedrawOnly=!0)}resize(f,m){this._rowCount=m,this._fireOnCanvasResize()}_handleOptionsChanged(){this._renderer.value&&(this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize())}_fireOnCanvasResize(){this._renderer.value&&(this._renderer.value.dimensions.css.canvas.width===this._canvasWidth&&this._renderer.value.dimensions.css.canvas.height===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.value.dimensions))}hasRenderer(){return!!this._renderer.value}setRenderer(f){this._renderer.value=f,this._renderer.value.onRequestRedraw(m=>this.refreshRows(m.start,m.end,!0)),this._needsSelectionRefresh=!0,this._fullRefresh()}addRefreshCallback(f){return this._renderDebouncer.addRefreshCallback(f)}_fullRefresh(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)}clearTextureAtlas(){var f,m;this._renderer.value&&((m=(f=this._renderer.value).clearTextureAtlas)===null||m===void 0||m.call(f),this._fullRefresh())}handleDevicePixelRatioChange(){this._charSizeService.measure(),this._renderer.value&&(this._renderer.value.handleDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1))}handleResize(f,m){this._renderer.value&&(this._isPaused?this._pausedResizeTask.set(()=>this._renderer.value.handleResize(f,m)):this._renderer.value.handleResize(f,m),this._fullRefresh())}handleCharSizeChanged(){var f;(f=this._renderer.value)===null||f===void 0||f.handleCharSizeChanged()}handleBlur(){var f;(f=this._renderer.value)===null||f===void 0||f.handleBlur()}handleFocus(){var f;(f=this._renderer.value)===null||f===void 0||f.handleFocus()}handleSelectionChanged(f,m,w){var R;this._selectionState.start=f,this._selectionState.end=m,this._selectionState.columnSelectMode=w,(R=this._renderer.value)===null||R===void 0||R.handleSelectionChanged(f,m,w)}handleCursorMove(){var f;(f=this._renderer.value)===null||f===void 0||f.handleCursorMove()}clear(){var f;(f=this._renderer.value)===null||f===void 0||f.clear()}};i.RenderService=o=u([_(2,n.IOptionsService),_(3,y.ICharSizeService),_(4,n.IDecorationService),_(5,n.IBufferService),_(6,y.ICoreBrowserService),_(7,y.IThemeService)],o)},9312:function(b,i,l){var u=this&&this.__decorate||function(p,E,k,M){var D,O=arguments.length,W=O<3?E:M===null?M=Object.getOwnPropertyDescriptor(E,k):M;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")W=Reflect.decorate(p,E,k,M);else for(var q=p.length-1;q>=0;q--)(D=p[q])&&(W=(O<3?D(W):O>3?D(E,k,W):D(E,k))||W);return O>3&&W&&Object.defineProperty(E,k,W),W},_=this&&this.__param||function(p,E){return function(k,M){E(k,M,p)}};Object.defineProperty(i,"__esModule",{value:!0}),i.SelectionService=void 0;const h=l(9806),g=l(9504),C=l(456),y=l(4725),v=l(8460),s=l(844),a=l(6114),n=l(4841),o=l(511),f=l(2585),m=" ",w=new RegExp(m,"g");let R=i.SelectionService=class extends s.Disposable{constructor(p,E,k,M,D,O,W,q,K){super(),this._element=p,this._screenElement=E,this._linkifier=k,this._bufferService=M,this._coreService=D,this._mouseService=O,this._optionsService=W,this._renderService=q,this._coreBrowserService=K,this._dragScrollAmount=0,this._enabled=!0,this._workCell=new o.CellData,this._mouseDownTimeStamp=0,this._oldHasSelection=!1,this._oldSelectionStart=void 0,this._oldSelectionEnd=void 0,this._onLinuxMouseSelection=this.register(new v.EventEmitter),this.onLinuxMouseSelection=this._onLinuxMouseSelection.event,this._onRedrawRequest=this.register(new v.EventEmitter),this.onRequestRedraw=this._onRedrawRequest.event,this._onSelectionChange=this.register(new v.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onRequestScrollLines=this.register(new v.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this._mouseMoveListener=U=>this._handleMouseMove(U),this._mouseUpListener=U=>this._handleMouseUp(U),this._coreService.onUserInput(()=>{this.hasSelection&&this.clearSelection()}),this._trimListener=this._bufferService.buffer.lines.onTrim(U=>this._handleTrim(U)),this.register(this._bufferService.buffers.onBufferActivate(U=>this._handleBufferActivate(U))),this.enable(),this._model=new C.SelectionModel(this._bufferService),this._activeSelectionMode=0,this.register((0,s.toDisposable)(()=>{this._removeMouseDownListeners()}))}reset(){this.clearSelection()}disable(){this.clearSelection(),this._enabled=!1}enable(){this._enabled=!0}get selectionStart(){return this._model.finalSelectionStart}get selectionEnd(){return this._model.finalSelectionEnd}get hasSelection(){const p=this._model.finalSelectionStart,E=this._model.finalSelectionEnd;return!(!p||!E||p[0]===E[0]&&p[1]===E[1])}get selectionText(){const p=this._model.finalSelectionStart,E=this._model.finalSelectionEnd;if(!p||!E)return"";const k=this._bufferService.buffer,M=[];if(this._activeSelectionMode===3){if(p[0]===E[0])return"";const D=p[0]<E[0]?p[0]:E[0],O=p[0]<E[0]?E[0]:p[0];for(let W=p[1];W<=E[1];W++){const q=k.translateBufferLineToString(W,!0,D,O);M.push(q)}}else{const D=p[1]===E[1]?E[0]:void 0;M.push(k.translateBufferLineToString(p[1],!0,p[0],D));for(let O=p[1]+1;O<=E[1]-1;O++){const W=k.lines.get(O),q=k.translateBufferLineToString(O,!0);W!=null&&W.isWrapped?M[M.length-1]+=q:M.push(q)}if(p[1]!==E[1]){const O=k.lines.get(E[1]),W=k.translateBufferLineToString(E[1],!0,0,E[0]);O&&O.isWrapped?M[M.length-1]+=W:M.push(W)}}return M.map(D=>D.replace(w," ")).join(a.isWindows?`\r
`:`
`)}clearSelection(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()}refresh(p){this._refreshAnimationFrame||(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._refresh())),a.isLinux&&p&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)}_refresh(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:this._activeSelectionMode===3})}_isClickInSelection(p){const E=this._getMouseBufferCoords(p),k=this._model.finalSelectionStart,M=this._model.finalSelectionEnd;return!!(k&&M&&E)&&this._areCoordsInSelection(E,k,M)}isCellInSelection(p,E){const k=this._model.finalSelectionStart,M=this._model.finalSelectionEnd;return!(!k||!M)&&this._areCoordsInSelection([p,E],k,M)}_areCoordsInSelection(p,E,k){return p[1]>E[1]&&p[1]<k[1]||E[1]===k[1]&&p[1]===E[1]&&p[0]>=E[0]&&p[0]<k[0]||E[1]<k[1]&&p[1]===k[1]&&p[0]<k[0]||E[1]<k[1]&&p[1]===E[1]&&p[0]>=E[0]}_selectWordAtCursor(p,E){var k,M;const D=(M=(k=this._linkifier.currentLink)===null||k===void 0?void 0:k.link)===null||M===void 0?void 0:M.range;if(D)return this._model.selectionStart=[D.start.x-1,D.start.y-1],this._model.selectionStartLength=(0,n.getRangeLength)(D,this._bufferService.cols),this._model.selectionEnd=void 0,!0;const O=this._getMouseBufferCoords(p);return!!O&&(this._selectWordAt(O,E),this._model.selectionEnd=void 0,!0)}selectAll(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()}selectLines(p,E){this._model.clearSelection(),p=Math.max(p,0),E=Math.min(E,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,p],this._model.selectionEnd=[this._bufferService.cols,E],this.refresh(),this._onSelectionChange.fire()}_handleTrim(p){this._model.handleTrim(p)&&this.refresh()}_getMouseBufferCoords(p){const E=this._mouseService.getCoords(p,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(E)return E[0]--,E[1]--,E[1]+=this._bufferService.buffer.ydisp,E}_getMouseEventScrollAmount(p){let E=(0,h.getCoordsRelativeToElement)(this._coreBrowserService.window,p,this._screenElement)[1];const k=this._renderService.dimensions.css.canvas.height;return E>=0&&E<=k?0:(E>k&&(E-=k),E=Math.min(Math.max(E,-50),50),E/=50,E/Math.abs(E)+Math.round(14*E))}shouldForceSelection(p){return a.isMac?p.altKey&&this._optionsService.rawOptions.macOptionClickForcesSelection:p.shiftKey}handleMouseDown(p){if(this._mouseDownTimeStamp=p.timeStamp,(p.button!==2||!this.hasSelection)&&p.button===0){if(!this._enabled){if(!this.shouldForceSelection(p))return;p.stopPropagation()}p.preventDefault(),this._dragScrollAmount=0,this._enabled&&p.shiftKey?this._handleIncrementalClick(p):p.detail===1?this._handleSingleClick(p):p.detail===2?this._handleDoubleClick(p):p.detail===3&&this._handleTripleClick(p),this._addMouseDownListeners(),this.refresh(!0)}}_addMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=this._coreBrowserService.window.setInterval(()=>this._dragScroll(),50)}_removeMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),this._coreBrowserService.window.clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0}_handleIncrementalClick(p){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(p))}_handleSingleClick(p){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(p)?3:0,this._model.selectionStart=this._getMouseBufferCoords(p),!this._model.selectionStart)return;this._model.selectionEnd=void 0;const E=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);E&&E.length!==this._model.selectionStart[0]&&E.hasWidth(this._model.selectionStart[0])===0&&this._model.selectionStart[0]++}_handleDoubleClick(p){this._selectWordAtCursor(p,!0)&&(this._activeSelectionMode=1)}_handleTripleClick(p){const E=this._getMouseBufferCoords(p);E&&(this._activeSelectionMode=2,this._selectLineAt(E[1]))}shouldColumnSelect(p){return p.altKey&&!(a.isMac&&this._optionsService.rawOptions.macOptionClickForcesSelection)}_handleMouseMove(p){if(p.stopImmediatePropagation(),!this._model.selectionStart)return;const E=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(p),!this._model.selectionEnd)return void this.refresh(!0);this._activeSelectionMode===2?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:this._activeSelectionMode===1&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(p),this._activeSelectionMode!==3&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));const k=this._bufferService.buffer;if(this._model.selectionEnd[1]<k.lines.length){const M=k.lines.get(this._model.selectionEnd[1]);M&&M.hasWidth(this._model.selectionEnd[0])===0&&this._model.selectionEnd[0]++}E&&E[0]===this._model.selectionEnd[0]&&E[1]===this._model.selectionEnd[1]||this.refresh(!0)}_dragScroll(){if(this._model.selectionEnd&&this._model.selectionStart&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});const p=this._bufferService.buffer;this._dragScrollAmount>0?(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(p.ydisp+this._bufferService.rows,p.lines.length-1)):(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=p.ydisp),this.refresh()}}_handleMouseUp(p){const E=p.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&E<500&&p.altKey&&this._optionsService.rawOptions.altClickMovesCursor){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){const k=this._mouseService.getCoords(p,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(k&&k[0]!==void 0&&k[1]!==void 0){const M=(0,g.moveToCellSequence)(k[0]-1,k[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(M,!0)}}}else this._fireEventIfSelectionChanged()}_fireEventIfSelectionChanged(){const p=this._model.finalSelectionStart,E=this._model.finalSelectionEnd,k=!(!p||!E||p[0]===E[0]&&p[1]===E[1]);k?p&&E&&(this._oldSelectionStart&&this._oldSelectionEnd&&p[0]===this._oldSelectionStart[0]&&p[1]===this._oldSelectionStart[1]&&E[0]===this._oldSelectionEnd[0]&&E[1]===this._oldSelectionEnd[1]||this._fireOnSelectionChange(p,E,k)):this._oldHasSelection&&this._fireOnSelectionChange(p,E,k)}_fireOnSelectionChange(p,E,k){this._oldSelectionStart=p,this._oldSelectionEnd=E,this._oldHasSelection=k,this._onSelectionChange.fire()}_handleBufferActivate(p){this.clearSelection(),this._trimListener.dispose(),this._trimListener=p.activeBuffer.lines.onTrim(E=>this._handleTrim(E))}_convertViewportColToCharacterIndex(p,E){let k=E;for(let M=0;E>=M;M++){const D=p.loadCell(M,this._workCell).getChars().length;this._workCell.getWidth()===0?k--:D>1&&E!==M&&(k+=D-1)}return k}setSelection(p,E,k){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[p,E],this._model.selectionStartLength=k,this.refresh(),this._fireEventIfSelectionChanged()}rightClickSelect(p){this._isClickInSelection(p)||(this._selectWordAtCursor(p,!1)&&this.refresh(!0),this._fireEventIfSelectionChanged())}_getWordAt(p,E,k=!0,M=!0){if(p[0]>=this._bufferService.cols)return;const D=this._bufferService.buffer,O=D.lines.get(p[1]);if(!O)return;const W=D.translateBufferLineToString(p[1],!1);let q=this._convertViewportColToCharacterIndex(O,p[0]),K=q;const U=p[0]-q;let x=0,T=0,B=0,I=0;if(W.charAt(q)===" "){for(;q>0&&W.charAt(q-1)===" ";)q--;for(;K<W.length&&W.charAt(K+1)===" ";)K++}else{let oe=p[0],re=p[0];O.getWidth(oe)===0&&(x++,oe--),O.getWidth(re)===2&&(T++,re++);const _e=O.getString(re).length;for(_e>1&&(I+=_e-1,K+=_e-1);oe>0&&q>0&&!this._isCharWordSeparator(O.loadCell(oe-1,this._workCell));){O.loadCell(oe-1,this._workCell);const L=this._workCell.getChars().length;this._workCell.getWidth()===0?(x++,oe--):L>1&&(B+=L-1,q-=L-1),q--,oe--}for(;re<O.length&&K+1<W.length&&!this._isCharWordSeparator(O.loadCell(re+1,this._workCell));){O.loadCell(re+1,this._workCell);const L=this._workCell.getChars().length;this._workCell.getWidth()===2?(T++,re++):L>1&&(I+=L-1,K+=L-1),K++,re++}}K++;let G=q+U-x+B,te=Math.min(this._bufferService.cols,K-q+x+T-B-I);if(E||W.slice(q,K).trim()!==""){if(k&&G===0&&O.getCodePoint(0)!==32){const oe=D.lines.get(p[1]-1);if(oe&&O.isWrapped&&oe.getCodePoint(this._bufferService.cols-1)!==32){const re=this._getWordAt([this._bufferService.cols-1,p[1]-1],!1,!0,!1);if(re){const _e=this._bufferService.cols-re.start;G-=_e,te+=_e}}}if(M&&G+te===this._bufferService.cols&&O.getCodePoint(this._bufferService.cols-1)!==32){const oe=D.lines.get(p[1]+1);if(oe!=null&&oe.isWrapped&&oe.getCodePoint(0)!==32){const re=this._getWordAt([0,p[1]+1],!1,!1,!0);re&&(te+=re.length)}}return{start:G,length:te}}}_selectWordAt(p,E){const k=this._getWordAt(p,E);if(k){for(;k.start<0;)k.start+=this._bufferService.cols,p[1]--;this._model.selectionStart=[k.start,p[1]],this._model.selectionStartLength=k.length}}_selectToWordAt(p){const E=this._getWordAt(p,!0);if(E){let k=p[1];for(;E.start<0;)E.start+=this._bufferService.cols,k--;if(!this._model.areSelectionValuesReversed())for(;E.start+E.length>this._bufferService.cols;)E.length-=this._bufferService.cols,k++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?E.start:E.start+E.length,k]}}_isCharWordSeparator(p){return p.getWidth()!==0&&this._optionsService.rawOptions.wordSeparator.indexOf(p.getChars())>=0}_selectLineAt(p){const E=this._bufferService.buffer.getWrappedRangeForLine(p),k={start:{x:0,y:E.first},end:{x:this._bufferService.cols-1,y:E.last}};this._model.selectionStart=[0,E.first],this._model.selectionEnd=void 0,this._model.selectionStartLength=(0,n.getRangeLength)(k,this._bufferService.cols)}};i.SelectionService=R=u([_(3,f.IBufferService),_(4,f.ICoreService),_(5,y.IMouseService),_(6,f.IOptionsService),_(7,y.IRenderService),_(8,y.ICoreBrowserService)],R)},4725:(b,i,l)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.IThemeService=i.ICharacterJoinerService=i.ISelectionService=i.IRenderService=i.IMouseService=i.ICoreBrowserService=i.ICharSizeService=void 0;const u=l(8343);i.ICharSizeService=(0,u.createDecorator)("CharSizeService"),i.ICoreBrowserService=(0,u.createDecorator)("CoreBrowserService"),i.IMouseService=(0,u.createDecorator)("MouseService"),i.IRenderService=(0,u.createDecorator)("RenderService"),i.ISelectionService=(0,u.createDecorator)("SelectionService"),i.ICharacterJoinerService=(0,u.createDecorator)("CharacterJoinerService"),i.IThemeService=(0,u.createDecorator)("ThemeService")},6731:function(b,i,l){var u=this&&this.__decorate||function(R,p,E,k){var M,D=arguments.length,O=D<3?p:k===null?k=Object.getOwnPropertyDescriptor(p,E):k;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")O=Reflect.decorate(R,p,E,k);else for(var W=R.length-1;W>=0;W--)(M=R[W])&&(O=(D<3?M(O):D>3?M(p,E,O):M(p,E))||O);return D>3&&O&&Object.defineProperty(p,E,O),O},_=this&&this.__param||function(R,p){return function(E,k){p(E,k,R)}};Object.defineProperty(i,"__esModule",{value:!0}),i.ThemeService=i.DEFAULT_ANSI_COLORS=void 0;const h=l(7239),g=l(8055),C=l(8460),y=l(844),v=l(2585),s=g.css.toColor("#ffffff"),a=g.css.toColor("#000000"),n=g.css.toColor("#ffffff"),o=g.css.toColor("#000000"),f={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117};i.DEFAULT_ANSI_COLORS=Object.freeze((()=>{const R=[g.css.toColor("#2e3436"),g.css.toColor("#cc0000"),g.css.toColor("#4e9a06"),g.css.toColor("#c4a000"),g.css.toColor("#3465a4"),g.css.toColor("#75507b"),g.css.toColor("#06989a"),g.css.toColor("#d3d7cf"),g.css.toColor("#555753"),g.css.toColor("#ef2929"),g.css.toColor("#8ae234"),g.css.toColor("#fce94f"),g.css.toColor("#729fcf"),g.css.toColor("#ad7fa8"),g.css.toColor("#34e2e2"),g.css.toColor("#eeeeec")],p=[0,95,135,175,215,255];for(let E=0;E<216;E++){const k=p[E/36%6|0],M=p[E/6%6|0],D=p[E%6];R.push({css:g.channels.toCss(k,M,D),rgba:g.channels.toRgba(k,M,D)})}for(let E=0;E<24;E++){const k=8+10*E;R.push({css:g.channels.toCss(k,k,k),rgba:g.channels.toRgba(k,k,k)})}return R})());let m=i.ThemeService=class extends y.Disposable{get colors(){return this._colors}constructor(R){super(),this._optionsService=R,this._contrastCache=new h.ColorContrastCache,this._halfContrastCache=new h.ColorContrastCache,this._onChangeColors=this.register(new C.EventEmitter),this.onChangeColors=this._onChangeColors.event,this._colors={foreground:s,background:a,cursor:n,cursorAccent:o,selectionForeground:void 0,selectionBackgroundTransparent:f,selectionBackgroundOpaque:g.color.blend(a,f),selectionInactiveBackgroundTransparent:f,selectionInactiveBackgroundOpaque:g.color.blend(a,f),ansi:i.DEFAULT_ANSI_COLORS.slice(),contrastCache:this._contrastCache,halfContrastCache:this._halfContrastCache},this._updateRestoreColors(),this._setTheme(this._optionsService.rawOptions.theme),this.register(this._optionsService.onSpecificOptionChange("minimumContrastRatio",()=>this._contrastCache.clear())),this.register(this._optionsService.onSpecificOptionChange("theme",()=>this._setTheme(this._optionsService.rawOptions.theme)))}_setTheme(R={}){const p=this._colors;if(p.foreground=w(R.foreground,s),p.background=w(R.background,a),p.cursor=w(R.cursor,n),p.cursorAccent=w(R.cursorAccent,o),p.selectionBackgroundTransparent=w(R.selectionBackground,f),p.selectionBackgroundOpaque=g.color.blend(p.background,p.selectionBackgroundTransparent),p.selectionInactiveBackgroundTransparent=w(R.selectionInactiveBackground,p.selectionBackgroundTransparent),p.selectionInactiveBackgroundOpaque=g.color.blend(p.background,p.selectionInactiveBackgroundTransparent),p.selectionForeground=R.selectionForeground?w(R.selectionForeground,g.NULL_COLOR):void 0,p.selectionForeground===g.NULL_COLOR&&(p.selectionForeground=void 0),g.color.isOpaque(p.selectionBackgroundTransparent)&&(p.selectionBackgroundTransparent=g.color.opacity(p.selectionBackgroundTransparent,.3)),g.color.isOpaque(p.selectionInactiveBackgroundTransparent)&&(p.selectionInactiveBackgroundTransparent=g.color.opacity(p.selectionInactiveBackgroundTransparent,.3)),p.ansi=i.DEFAULT_ANSI_COLORS.slice(),p.ansi[0]=w(R.black,i.DEFAULT_ANSI_COLORS[0]),p.ansi[1]=w(R.red,i.DEFAULT_ANSI_COLORS[1]),p.ansi[2]=w(R.green,i.DEFAULT_ANSI_COLORS[2]),p.ansi[3]=w(R.yellow,i.DEFAULT_ANSI_COLORS[3]),p.ansi[4]=w(R.blue,i.DEFAULT_ANSI_COLORS[4]),p.ansi[5]=w(R.magenta,i.DEFAULT_ANSI_COLORS[5]),p.ansi[6]=w(R.cyan,i.DEFAULT_ANSI_COLORS[6]),p.ansi[7]=w(R.white,i.DEFAULT_ANSI_COLORS[7]),p.ansi[8]=w(R.brightBlack,i.DEFAULT_ANSI_COLORS[8]),p.ansi[9]=w(R.brightRed,i.DEFAULT_ANSI_COLORS[9]),p.ansi[10]=w(R.brightGreen,i.DEFAULT_ANSI_COLORS[10]),p.ansi[11]=w(R.brightYellow,i.DEFAULT_ANSI_COLORS[11]),p.ansi[12]=w(R.brightBlue,i.DEFAULT_ANSI_COLORS[12]),p.ansi[13]=w(R.brightMagenta,i.DEFAULT_ANSI_COLORS[13]),p.ansi[14]=w(R.brightCyan,i.DEFAULT_ANSI_COLORS[14]),p.ansi[15]=w(R.brightWhite,i.DEFAULT_ANSI_COLORS[15]),R.extendedAnsi){const E=Math.min(p.ansi.length-16,R.extendedAnsi.length);for(let k=0;k<E;k++)p.ansi[k+16]=w(R.extendedAnsi[k],i.DEFAULT_ANSI_COLORS[k+16])}this._contrastCache.clear(),this._halfContrastCache.clear(),this._updateRestoreColors(),this._onChangeColors.fire(this.colors)}restoreColor(R){this._restoreColor(R),this._onChangeColors.fire(this.colors)}_restoreColor(R){if(R!==void 0)switch(R){case 256:this._colors.foreground=this._restoreColors.foreground;break;case 257:this._colors.background=this._restoreColors.background;break;case 258:this._colors.cursor=this._restoreColors.cursor;break;default:this._colors.ansi[R]=this._restoreColors.ansi[R]}else for(let p=0;p<this._restoreColors.ansi.length;++p)this._colors.ansi[p]=this._restoreColors.ansi[p]}modifyColors(R){R(this._colors),this._onChangeColors.fire(this.colors)}_updateRestoreColors(){this._restoreColors={foreground:this._colors.foreground,background:this._colors.background,cursor:this._colors.cursor,ansi:this._colors.ansi.slice()}}};function w(R,p){if(R!==void 0)try{return g.css.toColor(R)}catch{}return p}i.ThemeService=m=u([_(0,v.IOptionsService)],m)},6349:(b,i,l)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CircularList=void 0;const u=l(8460),_=l(844);class h extends _.Disposable{constructor(C){super(),this._maxLength=C,this.onDeleteEmitter=this.register(new u.EventEmitter),this.onDelete=this.onDeleteEmitter.event,this.onInsertEmitter=this.register(new u.EventEmitter),this.onInsert=this.onInsertEmitter.event,this.onTrimEmitter=this.register(new u.EventEmitter),this.onTrim=this.onTrimEmitter.event,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}get maxLength(){return this._maxLength}set maxLength(C){if(this._maxLength===C)return;const y=new Array(C);for(let v=0;v<Math.min(C,this.length);v++)y[v]=this._array[this._getCyclicIndex(v)];this._array=y,this._maxLength=C,this._startIndex=0}get length(){return this._length}set length(C){if(C>this._length)for(let y=this._length;y<C;y++)this._array[y]=void 0;this._length=C}get(C){return this._array[this._getCyclicIndex(C)]}set(C,y){this._array[this._getCyclicIndex(C)]=y}push(C){this._array[this._getCyclicIndex(this._length)]=C,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++}recycle(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]}get isFull(){return this._length===this._maxLength}pop(){return this._array[this._getCyclicIndex(this._length---1)]}splice(C,y,...v){if(y){for(let s=C;s<this._length-y;s++)this._array[this._getCyclicIndex(s)]=this._array[this._getCyclicIndex(s+y)];this._length-=y,this.onDeleteEmitter.fire({index:C,amount:y})}for(let s=this._length-1;s>=C;s--)this._array[this._getCyclicIndex(s+v.length)]=this._array[this._getCyclicIndex(s)];for(let s=0;s<v.length;s++)this._array[this._getCyclicIndex(C+s)]=v[s];if(v.length&&this.onInsertEmitter.fire({index:C,amount:v.length}),this._length+v.length>this._maxLength){const s=this._length+v.length-this._maxLength;this._startIndex+=s,this._length=this._maxLength,this.onTrimEmitter.fire(s)}else this._length+=v.length}trimStart(C){C>this._length&&(C=this._length),this._startIndex+=C,this._length-=C,this.onTrimEmitter.fire(C)}shiftElements(C,y,v){if(!(y<=0)){if(C<0||C>=this._length)throw new Error("start argument out of range");if(C+v<0)throw new Error("Cannot shift elements in list beyond index 0");if(v>0){for(let a=y-1;a>=0;a--)this.set(C+a+v,this.get(C+a));const s=C+y+v-this._length;if(s>0)for(this._length+=s;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(let s=0;s<y;s++)this.set(C+s+v,this.get(C+s))}}_getCyclicIndex(C){return(this._startIndex+C)%this._maxLength}}i.CircularList=h},1439:(b,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.clone=void 0,i.clone=function l(u,_=5){if(typeof u!="object")return u;const h=Array.isArray(u)?[]:{};for(const g in u)h[g]=_<=1?u[g]:u[g]&&l(u[g],_-1);return h}},8055:(b,i,l)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.contrastRatio=i.toPaddedHex=i.rgba=i.rgb=i.css=i.color=i.channels=i.NULL_COLOR=void 0;const u=l(6114);let _=0,h=0,g=0,C=0;var y,v,s,a,n;function o(m){const w=m.toString(16);return w.length<2?"0"+w:w}function f(m,w){return m<w?(w+.05)/(m+.05):(m+.05)/(w+.05)}i.NULL_COLOR={css:"#00000000",rgba:0},function(m){m.toCss=function(w,R,p,E){return E!==void 0?`#${o(w)}${o(R)}${o(p)}${o(E)}`:`#${o(w)}${o(R)}${o(p)}`},m.toRgba=function(w,R,p,E=255){return(w<<24|R<<16|p<<8|E)>>>0}}(y||(i.channels=y={})),function(m){function w(R,p){return C=Math.round(255*p),[_,h,g]=n.toChannels(R.rgba),{css:y.toCss(_,h,g,C),rgba:y.toRgba(_,h,g,C)}}m.blend=function(R,p){if(C=(255&p.rgba)/255,C===1)return{css:p.css,rgba:p.rgba};const E=p.rgba>>24&255,k=p.rgba>>16&255,M=p.rgba>>8&255,D=R.rgba>>24&255,O=R.rgba>>16&255,W=R.rgba>>8&255;return _=D+Math.round((E-D)*C),h=O+Math.round((k-O)*C),g=W+Math.round((M-W)*C),{css:y.toCss(_,h,g),rgba:y.toRgba(_,h,g)}},m.isOpaque=function(R){return(255&R.rgba)==255},m.ensureContrastRatio=function(R,p,E){const k=n.ensureContrastRatio(R.rgba,p.rgba,E);if(k)return n.toColor(k>>24&255,k>>16&255,k>>8&255)},m.opaque=function(R){const p=(255|R.rgba)>>>0;return[_,h,g]=n.toChannels(p),{css:y.toCss(_,h,g),rgba:p}},m.opacity=w,m.multiplyOpacity=function(R,p){return C=255&R.rgba,w(R,C*p/255)},m.toColorRGB=function(R){return[R.rgba>>24&255,R.rgba>>16&255,R.rgba>>8&255]}}(v||(i.color=v={})),function(m){let w,R;if(!u.isNode){const p=document.createElement("canvas");p.width=1,p.height=1;const E=p.getContext("2d",{willReadFrequently:!0});E&&(w=E,w.globalCompositeOperation="copy",R=w.createLinearGradient(0,0,1,1))}m.toColor=function(p){if(p.match(/#[\da-f]{3,8}/i))switch(p.length){case 4:return _=parseInt(p.slice(1,2).repeat(2),16),h=parseInt(p.slice(2,3).repeat(2),16),g=parseInt(p.slice(3,4).repeat(2),16),n.toColor(_,h,g);case 5:return _=parseInt(p.slice(1,2).repeat(2),16),h=parseInt(p.slice(2,3).repeat(2),16),g=parseInt(p.slice(3,4).repeat(2),16),C=parseInt(p.slice(4,5).repeat(2),16),n.toColor(_,h,g,C);case 7:return{css:p,rgba:(parseInt(p.slice(1),16)<<8|255)>>>0};case 9:return{css:p,rgba:parseInt(p.slice(1),16)>>>0}}const E=p.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(E)return _=parseInt(E[1]),h=parseInt(E[2]),g=parseInt(E[3]),C=Math.round(255*(E[5]===void 0?1:parseFloat(E[5]))),n.toColor(_,h,g,C);if(!w||!R)throw new Error("css.toColor: Unsupported css format");if(w.fillStyle=R,w.fillStyle=p,typeof w.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(w.fillRect(0,0,1,1),[_,h,g,C]=w.getImageData(0,0,1,1).data,C!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:y.toRgba(_,h,g,C),css:p}}}(s||(i.css=s={})),function(m){function w(R,p,E){const k=R/255,M=p/255,D=E/255;return .2126*(k<=.03928?k/12.92:Math.pow((k+.055)/1.055,2.4))+.7152*(M<=.03928?M/12.92:Math.pow((M+.055)/1.055,2.4))+.0722*(D<=.03928?D/12.92:Math.pow((D+.055)/1.055,2.4))}m.relativeLuminance=function(R){return w(R>>16&255,R>>8&255,255&R)},m.relativeLuminance2=w}(a||(i.rgb=a={})),function(m){function w(p,E,k){const M=p>>24&255,D=p>>16&255,O=p>>8&255;let W=E>>24&255,q=E>>16&255,K=E>>8&255,U=f(a.relativeLuminance2(W,q,K),a.relativeLuminance2(M,D,O));for(;U<k&&(W>0||q>0||K>0);)W-=Math.max(0,Math.ceil(.1*W)),q-=Math.max(0,Math.ceil(.1*q)),K-=Math.max(0,Math.ceil(.1*K)),U=f(a.relativeLuminance2(W,q,K),a.relativeLuminance2(M,D,O));return(W<<24|q<<16|K<<8|255)>>>0}function R(p,E,k){const M=p>>24&255,D=p>>16&255,O=p>>8&255;let W=E>>24&255,q=E>>16&255,K=E>>8&255,U=f(a.relativeLuminance2(W,q,K),a.relativeLuminance2(M,D,O));for(;U<k&&(W<255||q<255||K<255);)W=Math.min(255,W+Math.ceil(.1*(255-W))),q=Math.min(255,q+Math.ceil(.1*(255-q))),K=Math.min(255,K+Math.ceil(.1*(255-K))),U=f(a.relativeLuminance2(W,q,K),a.relativeLuminance2(M,D,O));return(W<<24|q<<16|K<<8|255)>>>0}m.ensureContrastRatio=function(p,E,k){const M=a.relativeLuminance(p>>8),D=a.relativeLuminance(E>>8);if(f(M,D)<k){if(D<M){const q=w(p,E,k),K=f(M,a.relativeLuminance(q>>8));if(K<k){const U=R(p,E,k);return K>f(M,a.relativeLuminance(U>>8))?q:U}return q}const O=R(p,E,k),W=f(M,a.relativeLuminance(O>>8));if(W<k){const q=w(p,E,k);return W>f(M,a.relativeLuminance(q>>8))?O:q}return O}},m.reduceLuminance=w,m.increaseLuminance=R,m.toChannels=function(p){return[p>>24&255,p>>16&255,p>>8&255,255&p]},m.toColor=function(p,E,k,M){return{css:y.toCss(p,E,k,M),rgba:y.toRgba(p,E,k,M)}}}(n||(i.rgba=n={})),i.toPaddedHex=o,i.contrastRatio=f},8969:(b,i,l)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CoreTerminal=void 0;const u=l(844),_=l(2585),h=l(4348),g=l(7866),C=l(744),y=l(7302),v=l(6975),s=l(8460),a=l(1753),n=l(1480),o=l(7994),f=l(9282),m=l(5435),w=l(5981),R=l(2660);let p=!1;class E extends u.Disposable{get onScroll(){return this._onScrollApi||(this._onScrollApi=this.register(new s.EventEmitter),this._onScroll.event(M=>{var D;(D=this._onScrollApi)===null||D===void 0||D.fire(M.position)})),this._onScrollApi.event}get cols(){return this._bufferService.cols}get rows(){return this._bufferService.rows}get buffers(){return this._bufferService.buffers}get options(){return this.optionsService.options}set options(M){for(const D in M)this.optionsService.options[D]=M[D]}constructor(M){super(),this._windowsWrappingHeuristics=this.register(new u.MutableDisposable),this._onBinary=this.register(new s.EventEmitter),this.onBinary=this._onBinary.event,this._onData=this.register(new s.EventEmitter),this.onData=this._onData.event,this._onLineFeed=this.register(new s.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onResize=this.register(new s.EventEmitter),this.onResize=this._onResize.event,this._onWriteParsed=this.register(new s.EventEmitter),this.onWriteParsed=this._onWriteParsed.event,this._onScroll=this.register(new s.EventEmitter),this._instantiationService=new h.InstantiationService,this.optionsService=this.register(new y.OptionsService(M)),this._instantiationService.setService(_.IOptionsService,this.optionsService),this._bufferService=this.register(this._instantiationService.createInstance(C.BufferService)),this._instantiationService.setService(_.IBufferService,this._bufferService),this._logService=this.register(this._instantiationService.createInstance(g.LogService)),this._instantiationService.setService(_.ILogService,this._logService),this.coreService=this.register(this._instantiationService.createInstance(v.CoreService)),this._instantiationService.setService(_.ICoreService,this.coreService),this.coreMouseService=this.register(this._instantiationService.createInstance(a.CoreMouseService)),this._instantiationService.setService(_.ICoreMouseService,this.coreMouseService),this.unicodeService=this.register(this._instantiationService.createInstance(n.UnicodeService)),this._instantiationService.setService(_.IUnicodeService,this.unicodeService),this._charsetService=this._instantiationService.createInstance(o.CharsetService),this._instantiationService.setService(_.ICharsetService,this._charsetService),this._oscLinkService=this._instantiationService.createInstance(R.OscLinkService),this._instantiationService.setService(_.IOscLinkService,this._oscLinkService),this._inputHandler=this.register(new m.InputHandler(this._bufferService,this._charsetService,this.coreService,this._logService,this.optionsService,this._oscLinkService,this.coreMouseService,this.unicodeService)),this.register((0,s.forwardEvent)(this._inputHandler.onLineFeed,this._onLineFeed)),this.register(this._inputHandler),this.register((0,s.forwardEvent)(this._bufferService.onResize,this._onResize)),this.register((0,s.forwardEvent)(this.coreService.onData,this._onData)),this.register((0,s.forwardEvent)(this.coreService.onBinary,this._onBinary)),this.register(this.coreService.onRequestScrollToBottom(()=>this.scrollToBottom())),this.register(this.coreService.onUserInput(()=>this._writeBuffer.handleUserInput())),this.register(this.optionsService.onMultipleOptionChange(["windowsMode","windowsPty"],()=>this._handleWindowsPtyOptionChange())),this.register(this._bufferService.onScroll(D=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this.register(this._inputHandler.onScroll(D=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this._writeBuffer=this.register(new w.WriteBuffer((D,O)=>this._inputHandler.parse(D,O))),this.register((0,s.forwardEvent)(this._writeBuffer.onWriteParsed,this._onWriteParsed))}write(M,D){this._writeBuffer.write(M,D)}writeSync(M,D){this._logService.logLevel<=_.LogLevelEnum.WARN&&!p&&(this._logService.warn("writeSync is unreliable and will be removed soon."),p=!0),this._writeBuffer.writeSync(M,D)}resize(M,D){isNaN(M)||isNaN(D)||(M=Math.max(M,C.MINIMUM_COLS),D=Math.max(D,C.MINIMUM_ROWS),this._bufferService.resize(M,D))}scroll(M,D=!1){this._bufferService.scroll(M,D)}scrollLines(M,D,O){this._bufferService.scrollLines(M,D,O)}scrollPages(M){this.scrollLines(M*(this.rows-1))}scrollToTop(){this.scrollLines(-this._bufferService.buffer.ydisp)}scrollToBottom(){this.scrollLines(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp)}scrollToLine(M){const D=M-this._bufferService.buffer.ydisp;D!==0&&this.scrollLines(D)}registerEscHandler(M,D){return this._inputHandler.registerEscHandler(M,D)}registerDcsHandler(M,D){return this._inputHandler.registerDcsHandler(M,D)}registerCsiHandler(M,D){return this._inputHandler.registerCsiHandler(M,D)}registerOscHandler(M,D){return this._inputHandler.registerOscHandler(M,D)}_setup(){this._handleWindowsPtyOptionChange()}reset(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this.coreService.reset(),this.coreMouseService.reset()}_handleWindowsPtyOptionChange(){let M=!1;const D=this.optionsService.rawOptions.windowsPty;D&&D.buildNumber!==void 0&&D.buildNumber!==void 0?M=D.backend==="conpty"&&D.buildNumber<21376:this.optionsService.rawOptions.windowsMode&&(M=!0),M?this._enableWindowsWrappingHeuristics():this._windowsWrappingHeuristics.clear()}_enableWindowsWrappingHeuristics(){if(!this._windowsWrappingHeuristics.value){const M=[];M.push(this.onLineFeed(f.updateWindowsModeWrappedState.bind(null,this._bufferService))),M.push(this.registerCsiHandler({final:"H"},()=>((0,f.updateWindowsModeWrappedState)(this._bufferService),!1))),this._windowsWrappingHeuristics.value=(0,u.toDisposable)(()=>{for(const D of M)D.dispose()})}}}i.CoreTerminal=E},8460:(b,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.forwardEvent=i.EventEmitter=void 0,i.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=l=>(this._listeners.push(l),{dispose:()=>{if(!this._disposed){for(let u=0;u<this._listeners.length;u++)if(this._listeners[u]===l)return void this._listeners.splice(u,1)}}})),this._event}fire(l,u){const _=[];for(let h=0;h<this._listeners.length;h++)_.push(this._listeners[h]);for(let h=0;h<_.length;h++)_[h].call(void 0,l,u)}dispose(){this.clearListeners(),this._disposed=!0}clearListeners(){this._listeners&&(this._listeners.length=0)}},i.forwardEvent=function(l,u){return l(_=>u.fire(_))}},5435:function(b,i,l){var u=this&&this.__decorate||function(U,x,T,B){var I,G=arguments.length,te=G<3?x:B===null?B=Object.getOwnPropertyDescriptor(x,T):B;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")te=Reflect.decorate(U,x,T,B);else for(var oe=U.length-1;oe>=0;oe--)(I=U[oe])&&(te=(G<3?I(te):G>3?I(x,T,te):I(x,T))||te);return G>3&&te&&Object.defineProperty(x,T,te),te},_=this&&this.__param||function(U,x){return function(T,B){x(T,B,U)}};Object.defineProperty(i,"__esModule",{value:!0}),i.InputHandler=i.WindowsOptionsReportType=void 0;const h=l(2584),g=l(7116),C=l(2015),y=l(844),v=l(482),s=l(8437),a=l(8460),n=l(643),o=l(511),f=l(3734),m=l(2585),w=l(6242),R=l(6351),p=l(5941),E={"(":0,")":1,"*":2,"+":3,"-":1,".":2},k=131072;function M(U,x){if(U>24)return x.setWinLines||!1;switch(U){case 1:return!!x.restoreWin;case 2:return!!x.minimizeWin;case 3:return!!x.setWinPosition;case 4:return!!x.setWinSizePixels;case 5:return!!x.raiseWin;case 6:return!!x.lowerWin;case 7:return!!x.refreshWin;case 8:return!!x.setWinSizeChars;case 9:return!!x.maximizeWin;case 10:return!!x.fullscreenWin;case 11:return!!x.getWinState;case 13:return!!x.getWinPosition;case 14:return!!x.getWinSizePixels;case 15:return!!x.getScreenSizePixels;case 16:return!!x.getCellSizePixels;case 18:return!!x.getWinSizeChars;case 19:return!!x.getScreenSizeChars;case 20:return!!x.getIconTitle;case 21:return!!x.getWinTitle;case 22:return!!x.pushTitle;case 23:return!!x.popTitle;case 24:return!!x.setWinLines}return!1}var D;(function(U){U[U.GET_WIN_SIZE_PIXELS=0]="GET_WIN_SIZE_PIXELS",U[U.GET_CELL_SIZE_PIXELS=1]="GET_CELL_SIZE_PIXELS"})(D||(i.WindowsOptionsReportType=D={}));let O=0;class W extends y.Disposable{getAttrData(){return this._curAttrData}constructor(x,T,B,I,G,te,oe,re,_e=new C.EscapeSequenceParser){super(),this._bufferService=x,this._charsetService=T,this._coreService=B,this._logService=I,this._optionsService=G,this._oscLinkService=te,this._coreMouseService=oe,this._unicodeService=re,this._parser=_e,this._parseBuffer=new Uint32Array(4096),this._stringDecoder=new v.StringToUtf32,this._utf8Decoder=new v.Utf8ToUtf32,this._workCell=new o.CellData,this._windowTitle="",this._iconName="",this._windowTitleStack=[],this._iconNameStack=[],this._curAttrData=s.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=s.DEFAULT_ATTR_DATA.clone(),this._onRequestBell=this.register(new a.EventEmitter),this.onRequestBell=this._onRequestBell.event,this._onRequestRefreshRows=this.register(new a.EventEmitter),this.onRequestRefreshRows=this._onRequestRefreshRows.event,this._onRequestReset=this.register(new a.EventEmitter),this.onRequestReset=this._onRequestReset.event,this._onRequestSendFocus=this.register(new a.EventEmitter),this.onRequestSendFocus=this._onRequestSendFocus.event,this._onRequestSyncScrollBar=this.register(new a.EventEmitter),this.onRequestSyncScrollBar=this._onRequestSyncScrollBar.event,this._onRequestWindowsOptionsReport=this.register(new a.EventEmitter),this.onRequestWindowsOptionsReport=this._onRequestWindowsOptionsReport.event,this._onA11yChar=this.register(new a.EventEmitter),this.onA11yChar=this._onA11yChar.event,this._onA11yTab=this.register(new a.EventEmitter),this.onA11yTab=this._onA11yTab.event,this._onCursorMove=this.register(new a.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onLineFeed=this.register(new a.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onScroll=this.register(new a.EventEmitter),this.onScroll=this._onScroll.event,this._onTitleChange=this.register(new a.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onColor=this.register(new a.EventEmitter),this.onColor=this._onColor.event,this._parseStack={paused:!1,cursorStartX:0,cursorStartY:0,decodedLength:0,position:0},this._specialColors=[256,257,258],this.register(this._parser),this._dirtyRowTracker=new q(this._bufferService),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(L=>this._activeBuffer=L.activeBuffer)),this._parser.setCsiHandlerFallback((L,H)=>{this._logService.debug("Unknown CSI code: ",{identifier:this._parser.identToString(L),params:H.toArray()})}),this._parser.setEscHandlerFallback(L=>{this._logService.debug("Unknown ESC code: ",{identifier:this._parser.identToString(L)})}),this._parser.setExecuteHandlerFallback(L=>{this._logService.debug("Unknown EXECUTE code: ",{code:L})}),this._parser.setOscHandlerFallback((L,H,$)=>{this._logService.debug("Unknown OSC code: ",{identifier:L,action:H,data:$})}),this._parser.setDcsHandlerFallback((L,H,$)=>{H==="HOOK"&&($=$.toArray()),this._logService.debug("Unknown DCS code: ",{identifier:this._parser.identToString(L),action:H,payload:$})}),this._parser.setPrintHandler((L,H,$)=>this.print(L,H,$)),this._parser.registerCsiHandler({final:"@"},L=>this.insertChars(L)),this._parser.registerCsiHandler({intermediates:" ",final:"@"},L=>this.scrollLeft(L)),this._parser.registerCsiHandler({final:"A"},L=>this.cursorUp(L)),this._parser.registerCsiHandler({intermediates:" ",final:"A"},L=>this.scrollRight(L)),this._parser.registerCsiHandler({final:"B"},L=>this.cursorDown(L)),this._parser.registerCsiHandler({final:"C"},L=>this.cursorForward(L)),this._parser.registerCsiHandler({final:"D"},L=>this.cursorBackward(L)),this._parser.registerCsiHandler({final:"E"},L=>this.cursorNextLine(L)),this._parser.registerCsiHandler({final:"F"},L=>this.cursorPrecedingLine(L)),this._parser.registerCsiHandler({final:"G"},L=>this.cursorCharAbsolute(L)),this._parser.registerCsiHandler({final:"H"},L=>this.cursorPosition(L)),this._parser.registerCsiHandler({final:"I"},L=>this.cursorForwardTab(L)),this._parser.registerCsiHandler({final:"J"},L=>this.eraseInDisplay(L,!1)),this._parser.registerCsiHandler({prefix:"?",final:"J"},L=>this.eraseInDisplay(L,!0)),this._parser.registerCsiHandler({final:"K"},L=>this.eraseInLine(L,!1)),this._parser.registerCsiHandler({prefix:"?",final:"K"},L=>this.eraseInLine(L,!0)),this._parser.registerCsiHandler({final:"L"},L=>this.insertLines(L)),this._parser.registerCsiHandler({final:"M"},L=>this.deleteLines(L)),this._parser.registerCsiHandler({final:"P"},L=>this.deleteChars(L)),this._parser.registerCsiHandler({final:"S"},L=>this.scrollUp(L)),this._parser.registerCsiHandler({final:"T"},L=>this.scrollDown(L)),this._parser.registerCsiHandler({final:"X"},L=>this.eraseChars(L)),this._parser.registerCsiHandler({final:"Z"},L=>this.cursorBackwardTab(L)),this._parser.registerCsiHandler({final:"`"},L=>this.charPosAbsolute(L)),this._parser.registerCsiHandler({final:"a"},L=>this.hPositionRelative(L)),this._parser.registerCsiHandler({final:"b"},L=>this.repeatPrecedingCharacter(L)),this._parser.registerCsiHandler({final:"c"},L=>this.sendDeviceAttributesPrimary(L)),this._parser.registerCsiHandler({prefix:">",final:"c"},L=>this.sendDeviceAttributesSecondary(L)),this._parser.registerCsiHandler({final:"d"},L=>this.linePosAbsolute(L)),this._parser.registerCsiHandler({final:"e"},L=>this.vPositionRelative(L)),this._parser.registerCsiHandler({final:"f"},L=>this.hVPosition(L)),this._parser.registerCsiHandler({final:"g"},L=>this.tabClear(L)),this._parser.registerCsiHandler({final:"h"},L=>this.setMode(L)),this._parser.registerCsiHandler({prefix:"?",final:"h"},L=>this.setModePrivate(L)),this._parser.registerCsiHandler({final:"l"},L=>this.resetMode(L)),this._parser.registerCsiHandler({prefix:"?",final:"l"},L=>this.resetModePrivate(L)),this._parser.registerCsiHandler({final:"m"},L=>this.charAttributes(L)),this._parser.registerCsiHandler({final:"n"},L=>this.deviceStatus(L)),this._parser.registerCsiHandler({prefix:"?",final:"n"},L=>this.deviceStatusPrivate(L)),this._parser.registerCsiHandler({intermediates:"!",final:"p"},L=>this.softReset(L)),this._parser.registerCsiHandler({intermediates:" ",final:"q"},L=>this.setCursorStyle(L)),this._parser.registerCsiHandler({final:"r"},L=>this.setScrollRegion(L)),this._parser.registerCsiHandler({final:"s"},L=>this.saveCursor(L)),this._parser.registerCsiHandler({final:"t"},L=>this.windowOptions(L)),this._parser.registerCsiHandler({final:"u"},L=>this.restoreCursor(L)),this._parser.registerCsiHandler({intermediates:"'",final:"}"},L=>this.insertColumns(L)),this._parser.registerCsiHandler({intermediates:"'",final:"~"},L=>this.deleteColumns(L)),this._parser.registerCsiHandler({intermediates:'"',final:"q"},L=>this.selectProtected(L)),this._parser.registerCsiHandler({intermediates:"$",final:"p"},L=>this.requestMode(L,!0)),this._parser.registerCsiHandler({prefix:"?",intermediates:"$",final:"p"},L=>this.requestMode(L,!1)),this._parser.setExecuteHandler(h.C0.BEL,()=>this.bell()),this._parser.setExecuteHandler(h.C0.LF,()=>this.lineFeed()),this._parser.setExecuteHandler(h.C0.VT,()=>this.lineFeed()),this._parser.setExecuteHandler(h.C0.FF,()=>this.lineFeed()),this._parser.setExecuteHandler(h.C0.CR,()=>this.carriageReturn()),this._parser.setExecuteHandler(h.C0.BS,()=>this.backspace()),this._parser.setExecuteHandler(h.C0.HT,()=>this.tab()),this._parser.setExecuteHandler(h.C0.SO,()=>this.shiftOut()),this._parser.setExecuteHandler(h.C0.SI,()=>this.shiftIn()),this._parser.setExecuteHandler(h.C1.IND,()=>this.index()),this._parser.setExecuteHandler(h.C1.NEL,()=>this.nextLine()),this._parser.setExecuteHandler(h.C1.HTS,()=>this.tabSet()),this._parser.registerOscHandler(0,new w.OscHandler(L=>(this.setTitle(L),this.setIconName(L),!0))),this._parser.registerOscHandler(1,new w.OscHandler(L=>this.setIconName(L))),this._parser.registerOscHandler(2,new w.OscHandler(L=>this.setTitle(L))),this._parser.registerOscHandler(4,new w.OscHandler(L=>this.setOrReportIndexedColor(L))),this._parser.registerOscHandler(8,new w.OscHandler(L=>this.setHyperlink(L))),this._parser.registerOscHandler(10,new w.OscHandler(L=>this.setOrReportFgColor(L))),this._parser.registerOscHandler(11,new w.OscHandler(L=>this.setOrReportBgColor(L))),this._parser.registerOscHandler(12,new w.OscHandler(L=>this.setOrReportCursorColor(L))),this._parser.registerOscHandler(104,new w.OscHandler(L=>this.restoreIndexedColor(L))),this._parser.registerOscHandler(110,new w.OscHandler(L=>this.restoreFgColor(L))),this._parser.registerOscHandler(111,new w.OscHandler(L=>this.restoreBgColor(L))),this._parser.registerOscHandler(112,new w.OscHandler(L=>this.restoreCursorColor(L))),this._parser.registerEscHandler({final:"7"},()=>this.saveCursor()),this._parser.registerEscHandler({final:"8"},()=>this.restoreCursor()),this._parser.registerEscHandler({final:"D"},()=>this.index()),this._parser.registerEscHandler({final:"E"},()=>this.nextLine()),this._parser.registerEscHandler({final:"H"},()=>this.tabSet()),this._parser.registerEscHandler({final:"M"},()=>this.reverseIndex()),this._parser.registerEscHandler({final:"="},()=>this.keypadApplicationMode()),this._parser.registerEscHandler({final:">"},()=>this.keypadNumericMode()),this._parser.registerEscHandler({final:"c"},()=>this.fullReset()),this._parser.registerEscHandler({final:"n"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"o"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"|"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"}"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"~"},()=>this.setgLevel(1)),this._parser.registerEscHandler({intermediates:"%",final:"@"},()=>this.selectDefaultCharset()),this._parser.registerEscHandler({intermediates:"%",final:"G"},()=>this.selectDefaultCharset());for(const L in g.CHARSETS)this._parser.registerEscHandler({intermediates:"(",final:L},()=>this.selectCharset("("+L)),this._parser.registerEscHandler({intermediates:")",final:L},()=>this.selectCharset(")"+L)),this._parser.registerEscHandler({intermediates:"*",final:L},()=>this.selectCharset("*"+L)),this._parser.registerEscHandler({intermediates:"+",final:L},()=>this.selectCharset("+"+L)),this._parser.registerEscHandler({intermediates:"-",final:L},()=>this.selectCharset("-"+L)),this._parser.registerEscHandler({intermediates:".",final:L},()=>this.selectCharset("."+L)),this._parser.registerEscHandler({intermediates:"/",final:L},()=>this.selectCharset("/"+L));this._parser.registerEscHandler({intermediates:"#",final:"8"},()=>this.screenAlignmentPattern()),this._parser.setErrorHandler(L=>(this._logService.error("Parsing error: ",L),L)),this._parser.registerDcsHandler({intermediates:"$",final:"q"},new R.DcsHandler((L,H)=>this.requestStatusString(L,H)))}_preserveStack(x,T,B,I){this._parseStack.paused=!0,this._parseStack.cursorStartX=x,this._parseStack.cursorStartY=T,this._parseStack.decodedLength=B,this._parseStack.position=I}_logSlowResolvingAsync(x){this._logService.logLevel<=m.LogLevelEnum.WARN&&Promise.race([x,new Promise((T,B)=>setTimeout(()=>B("#SLOW_TIMEOUT"),5e3))]).catch(T=>{if(T!=="#SLOW_TIMEOUT")throw T;console.warn("async parser handler taking longer than 5000 ms")})}_getCurrentLinkId(){return this._curAttrData.extended.urlId}parse(x,T){let B,I=this._activeBuffer.x,G=this._activeBuffer.y,te=0;const oe=this._parseStack.paused;if(oe){if(B=this._parser.parse(this._parseBuffer,this._parseStack.decodedLength,T))return this._logSlowResolvingAsync(B),B;I=this._parseStack.cursorStartX,G=this._parseStack.cursorStartY,this._parseStack.paused=!1,x.length>k&&(te=this._parseStack.position+k)}if(this._logService.logLevel<=m.LogLevelEnum.DEBUG&&this._logService.debug("parsing data"+(typeof x=="string"?` "${x}"`:` "${Array.prototype.map.call(x,re=>String.fromCharCode(re)).join("")}"`),typeof x=="string"?x.split("").map(re=>re.charCodeAt(0)):x),this._parseBuffer.length<x.length&&this._parseBuffer.length<k&&(this._parseBuffer=new Uint32Array(Math.min(x.length,k))),oe||this._dirtyRowTracker.clearRange(),x.length>k)for(let re=te;re<x.length;re+=k){const _e=re+k<x.length?re+k:x.length,L=typeof x=="string"?this._stringDecoder.decode(x.substring(re,_e),this._parseBuffer):this._utf8Decoder.decode(x.subarray(re,_e),this._parseBuffer);if(B=this._parser.parse(this._parseBuffer,L))return this._preserveStack(I,G,L,re),this._logSlowResolvingAsync(B),B}else if(!oe){const re=typeof x=="string"?this._stringDecoder.decode(x,this._parseBuffer):this._utf8Decoder.decode(x,this._parseBuffer);if(B=this._parser.parse(this._parseBuffer,re))return this._preserveStack(I,G,re,0),this._logSlowResolvingAsync(B),B}this._activeBuffer.x===I&&this._activeBuffer.y===G||this._onCursorMove.fire(),this._onRequestRefreshRows.fire(this._dirtyRowTracker.start,this._dirtyRowTracker.end)}print(x,T,B){let I,G;const te=this._charsetService.charset,oe=this._optionsService.rawOptions.screenReaderMode,re=this._bufferService.cols,_e=this._coreService.decPrivateModes.wraparound,L=this._coreService.modes.insertMode,H=this._curAttrData;let $=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._activeBuffer.x&&B-T>0&&$.getWidth(this._activeBuffer.x-1)===2&&$.setCellFromCodePoint(this._activeBuffer.x-1,0,1,H.fg,H.bg,H.extended);for(let j=T;j<B;++j){if(I=x[j],G=this._unicodeService.wcwidth(I),I<127&&te){const le=te[String.fromCharCode(I)];le&&(I=le.charCodeAt(0))}if(oe&&this._onA11yChar.fire((0,v.stringFromCodePoint)(I)),this._getCurrentLinkId()&&this._oscLinkService.addLineToLink(this._getCurrentLinkId(),this._activeBuffer.ybase+this._activeBuffer.y),G||!this._activeBuffer.x){if(this._activeBuffer.x+G-1>=re){if(_e){for(;this._activeBuffer.x<re;)$.setCellFromCodePoint(this._activeBuffer.x++,0,1,H.fg,H.bg,H.extended);this._activeBuffer.x=0,this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData(),!0)):(this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!0),$=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y)}else if(this._activeBuffer.x=re-1,G===2)continue}if(L&&($.insertCells(this._activeBuffer.x,G,this._activeBuffer.getNullCell(H),H),$.getWidth(re-1)===2&&$.setCellFromCodePoint(re-1,n.NULL_CELL_CODE,n.NULL_CELL_WIDTH,H.fg,H.bg,H.extended)),$.setCellFromCodePoint(this._activeBuffer.x++,I,G,H.fg,H.bg,H.extended),G>0)for(;--G;)$.setCellFromCodePoint(this._activeBuffer.x++,0,0,H.fg,H.bg,H.extended)}else $.getWidth(this._activeBuffer.x-1)?$.addCodepointToCell(this._activeBuffer.x-1,I):$.addCodepointToCell(this._activeBuffer.x-2,I)}B-T>0&&($.loadCell(this._activeBuffer.x-1,this._workCell),this._workCell.getWidth()===2||this._workCell.getCode()>65535?this._parser.precedingCodepoint=0:this._workCell.isCombined()?this._parser.precedingCodepoint=this._workCell.getChars().charCodeAt(0):this._parser.precedingCodepoint=this._workCell.content),this._activeBuffer.x<re&&B-T>0&&$.getWidth(this._activeBuffer.x)===0&&!$.hasContent(this._activeBuffer.x)&&$.setCellFromCodePoint(this._activeBuffer.x,0,1,H.fg,H.bg,H.extended),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}registerCsiHandler(x,T){return x.final!=="t"||x.prefix||x.intermediates?this._parser.registerCsiHandler(x,T):this._parser.registerCsiHandler(x,B=>!M(B.params[0],this._optionsService.rawOptions.windowOptions)||T(B))}registerDcsHandler(x,T){return this._parser.registerDcsHandler(x,new R.DcsHandler(T))}registerEscHandler(x,T){return this._parser.registerEscHandler(x,T)}registerOscHandler(x,T){return this._parser.registerOscHandler(x,new w.OscHandler(T))}bell(){return this._onRequestBell.fire(),!0}lineFeed(){return this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._optionsService.rawOptions.convertEol&&(this._activeBuffer.x=0),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows?this._activeBuffer.y=this._bufferService.rows-1:this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.x>=this._bufferService.cols&&this._activeBuffer.x--,this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._onLineFeed.fire(),!0}carriageReturn(){return this._activeBuffer.x=0,!0}backspace(){var x;if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),this._activeBuffer.x>0&&this._activeBuffer.x--,!0;if(this._restrictCursor(this._bufferService.cols),this._activeBuffer.x>0)this._activeBuffer.x--;else if(this._activeBuffer.x===0&&this._activeBuffer.y>this._activeBuffer.scrollTop&&this._activeBuffer.y<=this._activeBuffer.scrollBottom&&(!((x=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y))===null||x===void 0)&&x.isWrapped)){this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.y--,this._activeBuffer.x=this._bufferService.cols-1;const T=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);T.hasWidth(this._activeBuffer.x)&&!T.hasContent(this._activeBuffer.x)&&this._activeBuffer.x--}return this._restrictCursor(),!0}tab(){if(this._activeBuffer.x>=this._bufferService.cols)return!0;const x=this._activeBuffer.x;return this._activeBuffer.x=this._activeBuffer.nextStop(),this._optionsService.rawOptions.screenReaderMode&&this._onA11yTab.fire(this._activeBuffer.x-x),!0}shiftOut(){return this._charsetService.setgLevel(1),!0}shiftIn(){return this._charsetService.setgLevel(0),!0}_restrictCursor(x=this._bufferService.cols-1){this._activeBuffer.x=Math.min(x,Math.max(0,this._activeBuffer.x)),this._activeBuffer.y=this._coreService.decPrivateModes.origin?Math.min(this._activeBuffer.scrollBottom,Math.max(this._activeBuffer.scrollTop,this._activeBuffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._activeBuffer.y)),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_setCursor(x,T){this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._coreService.decPrivateModes.origin?(this._activeBuffer.x=x,this._activeBuffer.y=this._activeBuffer.scrollTop+T):(this._activeBuffer.x=x,this._activeBuffer.y=T),this._restrictCursor(),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_moveCursor(x,T){this._restrictCursor(),this._setCursor(this._activeBuffer.x+x,this._activeBuffer.y+T)}cursorUp(x){const T=this._activeBuffer.y-this._activeBuffer.scrollTop;return T>=0?this._moveCursor(0,-Math.min(T,x.params[0]||1)):this._moveCursor(0,-(x.params[0]||1)),!0}cursorDown(x){const T=this._activeBuffer.scrollBottom-this._activeBuffer.y;return T>=0?this._moveCursor(0,Math.min(T,x.params[0]||1)):this._moveCursor(0,x.params[0]||1),!0}cursorForward(x){return this._moveCursor(x.params[0]||1,0),!0}cursorBackward(x){return this._moveCursor(-(x.params[0]||1),0),!0}cursorNextLine(x){return this.cursorDown(x),this._activeBuffer.x=0,!0}cursorPrecedingLine(x){return this.cursorUp(x),this._activeBuffer.x=0,!0}cursorCharAbsolute(x){return this._setCursor((x.params[0]||1)-1,this._activeBuffer.y),!0}cursorPosition(x){return this._setCursor(x.length>=2?(x.params[1]||1)-1:0,(x.params[0]||1)-1),!0}charPosAbsolute(x){return this._setCursor((x.params[0]||1)-1,this._activeBuffer.y),!0}hPositionRelative(x){return this._moveCursor(x.params[0]||1,0),!0}linePosAbsolute(x){return this._setCursor(this._activeBuffer.x,(x.params[0]||1)-1),!0}vPositionRelative(x){return this._moveCursor(0,x.params[0]||1),!0}hVPosition(x){return this.cursorPosition(x),!0}tabClear(x){const T=x.params[0];return T===0?delete this._activeBuffer.tabs[this._activeBuffer.x]:T===3&&(this._activeBuffer.tabs={}),!0}cursorForwardTab(x){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let T=x.params[0]||1;for(;T--;)this._activeBuffer.x=this._activeBuffer.nextStop();return!0}cursorBackwardTab(x){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let T=x.params[0]||1;for(;T--;)this._activeBuffer.x=this._activeBuffer.prevStop();return!0}selectProtected(x){const T=x.params[0];return T===1&&(this._curAttrData.bg|=536870912),T!==2&&T!==0||(this._curAttrData.bg&=-536870913),!0}_eraseInBufferLine(x,T,B,I=!1,G=!1){const te=this._activeBuffer.lines.get(this._activeBuffer.ybase+x);te.replaceCells(T,B,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData(),G),I&&(te.isWrapped=!1)}_resetBufferLine(x,T=!1){const B=this._activeBuffer.lines.get(this._activeBuffer.ybase+x);B&&(B.fill(this._activeBuffer.getNullCell(this._eraseAttrData()),T),this._bufferService.buffer.clearMarkers(this._activeBuffer.ybase+x),B.isWrapped=!1)}eraseInDisplay(x,T=!1){let B;switch(this._restrictCursor(this._bufferService.cols),x.params[0]){case 0:for(B=this._activeBuffer.y,this._dirtyRowTracker.markDirty(B),this._eraseInBufferLine(B++,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,T);B<this._bufferService.rows;B++)this._resetBufferLine(B,T);this._dirtyRowTracker.markDirty(B);break;case 1:for(B=this._activeBuffer.y,this._dirtyRowTracker.markDirty(B),this._eraseInBufferLine(B,0,this._activeBuffer.x+1,!0,T),this._activeBuffer.x+1>=this._bufferService.cols&&(this._activeBuffer.lines.get(B+1).isWrapped=!1);B--;)this._resetBufferLine(B,T);this._dirtyRowTracker.markDirty(0);break;case 2:for(B=this._bufferService.rows,this._dirtyRowTracker.markDirty(B-1);B--;)this._resetBufferLine(B,T);this._dirtyRowTracker.markDirty(0);break;case 3:const I=this._activeBuffer.lines.length-this._bufferService.rows;I>0&&(this._activeBuffer.lines.trimStart(I),this._activeBuffer.ybase=Math.max(this._activeBuffer.ybase-I,0),this._activeBuffer.ydisp=Math.max(this._activeBuffer.ydisp-I,0),this._onScroll.fire(0))}return!0}eraseInLine(x,T=!1){switch(this._restrictCursor(this._bufferService.cols),x.params[0]){case 0:this._eraseInBufferLine(this._activeBuffer.y,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,T);break;case 1:this._eraseInBufferLine(this._activeBuffer.y,0,this._activeBuffer.x+1,!1,T);break;case 2:this._eraseInBufferLine(this._activeBuffer.y,0,this._bufferService.cols,!0,T)}return this._dirtyRowTracker.markDirty(this._activeBuffer.y),!0}insertLines(x){this._restrictCursor();let T=x.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const B=this._activeBuffer.ybase+this._activeBuffer.y,I=this._bufferService.rows-1-this._activeBuffer.scrollBottom,G=this._bufferService.rows-1+this._activeBuffer.ybase-I+1;for(;T--;)this._activeBuffer.lines.splice(G-1,1),this._activeBuffer.lines.splice(B,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}deleteLines(x){this._restrictCursor();let T=x.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const B=this._activeBuffer.ybase+this._activeBuffer.y;let I;for(I=this._bufferService.rows-1-this._activeBuffer.scrollBottom,I=this._bufferService.rows-1+this._activeBuffer.ybase-I;T--;)this._activeBuffer.lines.splice(B,1),this._activeBuffer.lines.splice(I,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}insertChars(x){this._restrictCursor();const T=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return T&&(T.insertCells(this._activeBuffer.x,x.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}deleteChars(x){this._restrictCursor();const T=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return T&&(T.deleteCells(this._activeBuffer.x,x.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}scrollUp(x){let T=x.params[0]||1;for(;T--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollDown(x){let T=x.params[0]||1;for(;T--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,0,this._activeBuffer.getBlankLine(s.DEFAULT_ATTR_DATA));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollLeft(x){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const T=x.params[0]||1;for(let B=this._activeBuffer.scrollTop;B<=this._activeBuffer.scrollBottom;++B){const I=this._activeBuffer.lines.get(this._activeBuffer.ybase+B);I.deleteCells(0,T,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),I.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollRight(x){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const T=x.params[0]||1;for(let B=this._activeBuffer.scrollTop;B<=this._activeBuffer.scrollBottom;++B){const I=this._activeBuffer.lines.get(this._activeBuffer.ybase+B);I.insertCells(0,T,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),I.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}insertColumns(x){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const T=x.params[0]||1;for(let B=this._activeBuffer.scrollTop;B<=this._activeBuffer.scrollBottom;++B){const I=this._activeBuffer.lines.get(this._activeBuffer.ybase+B);I.insertCells(this._activeBuffer.x,T,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),I.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}deleteColumns(x){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const T=x.params[0]||1;for(let B=this._activeBuffer.scrollTop;B<=this._activeBuffer.scrollBottom;++B){const I=this._activeBuffer.lines.get(this._activeBuffer.ybase+B);I.deleteCells(this._activeBuffer.x,T,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),I.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}eraseChars(x){this._restrictCursor();const T=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return T&&(T.replaceCells(this._activeBuffer.x,this._activeBuffer.x+(x.params[0]||1),this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}repeatPrecedingCharacter(x){if(!this._parser.precedingCodepoint)return!0;const T=x.params[0]||1,B=new Uint32Array(T);for(let I=0;I<T;++I)B[I]=this._parser.precedingCodepoint;return this.print(B,0,B.length),!0}sendDeviceAttributesPrimary(x){return x.params[0]>0||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(h.C0.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(h.C0.ESC+"[?6c")),!0}sendDeviceAttributesSecondary(x){return x.params[0]>0||(this._is("xterm")?this._coreService.triggerDataEvent(h.C0.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(h.C0.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(x.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(h.C0.ESC+"[>83;40003;0c")),!0}_is(x){return(this._optionsService.rawOptions.termName+"").indexOf(x)===0}setMode(x){for(let T=0;T<x.length;T++)switch(x.params[T]){case 4:this._coreService.modes.insertMode=!0;break;case 20:this._optionsService.options.convertEol=!0}return!0}setModePrivate(x){for(let T=0;T<x.length;T++)switch(x.params[T]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,g.DEFAULT_CHARSET),this._charsetService.setgCharset(1,g.DEFAULT_CHARSET),this._charsetService.setgCharset(2,g.DEFAULT_CHARSET),this._charsetService.setgCharset(3,g.DEFAULT_CHARSET);break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:this._optionsService.options.cursorBlink=!0;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0,this._onRequestSendFocus.fire();break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 1016:this._coreMouseService.activeEncoding="SGR_PIXELS";break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0}return!0}resetMode(x){for(let T=0;T<x.length;T++)switch(x.params[T]){case 4:this._coreService.modes.insertMode=!1;break;case 20:this._optionsService.options.convertEol=!1}return!0}resetModePrivate(x){for(let T=0;T<x.length;T++)switch(x.params[T]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:this._optionsService.options.cursorBlink=!1;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:case 1016:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),x.params[T]===1049&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1}return!0}requestMode(x,T){const B=this._coreService.decPrivateModes,{activeProtocol:I,activeEncoding:G}=this._coreMouseService,te=this._coreService,{buffers:oe,cols:re}=this._bufferService,{active:_e,alt:L}=oe,H=this._optionsService.rawOptions,$=A=>A?1:2,j=x.params[0];return le=j,ie=T?j===2?4:j===4?$(te.modes.insertMode):j===12?3:j===20?$(H.convertEol):0:j===1?$(B.applicationCursorKeys):j===3?H.windowOptions.setWinLines?re===80?2:re===132?1:0:0:j===6?$(B.origin):j===7?$(B.wraparound):j===8?3:j===9?$(I==="X10"):j===12?$(H.cursorBlink):j===25?$(!te.isCursorHidden):j===45?$(B.reverseWraparound):j===66?$(B.applicationKeypad):j===67?4:j===1e3?$(I==="VT200"):j===1002?$(I==="DRAG"):j===1003?$(I==="ANY"):j===1004?$(B.sendFocus):j===1005?4:j===1006?$(G==="SGR"):j===1015?4:j===1016?$(G==="SGR_PIXELS"):j===1048?1:j===47||j===1047||j===1049?$(_e===L):j===2004?$(B.bracketedPasteMode):0,te.triggerDataEvent(`${h.C0.ESC}[${T?"":"?"}${le};${ie}$y`),!0;var le,ie}_updateAttrColor(x,T,B,I,G){return T===2?(x|=50331648,x&=-16777216,x|=f.AttributeData.fromColorRGB([B,I,G])):T===5&&(x&=-50331904,x|=33554432|255&B),x}_extractColor(x,T,B){const I=[0,0,-1,0,0,0];let G=0,te=0;do{if(I[te+G]=x.params[T+te],x.hasSubParams(T+te)){const oe=x.getSubParams(T+te);let re=0;do I[1]===5&&(G=1),I[te+re+1+G]=oe[re];while(++re<oe.length&&re+te+1+G<I.length);break}if(I[1]===5&&te+G>=2||I[1]===2&&te+G>=5)break;I[1]&&(G=1)}while(++te+T<x.length&&te+G<I.length);for(let oe=2;oe<I.length;++oe)I[oe]===-1&&(I[oe]=0);switch(I[0]){case 38:B.fg=this._updateAttrColor(B.fg,I[1],I[3],I[4],I[5]);break;case 48:B.bg=this._updateAttrColor(B.bg,I[1],I[3],I[4],I[5]);break;case 58:B.extended=B.extended.clone(),B.extended.underlineColor=this._updateAttrColor(B.extended.underlineColor,I[1],I[3],I[4],I[5])}return te}_processUnderline(x,T){T.extended=T.extended.clone(),(!~x||x>5)&&(x=1),T.extended.underlineStyle=x,T.fg|=268435456,x===0&&(T.fg&=-268435457),T.updateExtended()}_processSGR0(x){x.fg=s.DEFAULT_ATTR_DATA.fg,x.bg=s.DEFAULT_ATTR_DATA.bg,x.extended=x.extended.clone(),x.extended.underlineStyle=0,x.extended.underlineColor&=-67108864,x.updateExtended()}charAttributes(x){if(x.length===1&&x.params[0]===0)return this._processSGR0(this._curAttrData),!0;const T=x.length;let B;const I=this._curAttrData;for(let G=0;G<T;G++)B=x.params[G],B>=30&&B<=37?(I.fg&=-50331904,I.fg|=16777216|B-30):B>=40&&B<=47?(I.bg&=-50331904,I.bg|=16777216|B-40):B>=90&&B<=97?(I.fg&=-50331904,I.fg|=16777224|B-90):B>=100&&B<=107?(I.bg&=-50331904,I.bg|=16777224|B-100):B===0?this._processSGR0(I):B===1?I.fg|=134217728:B===3?I.bg|=67108864:B===4?(I.fg|=268435456,this._processUnderline(x.hasSubParams(G)?x.getSubParams(G)[0]:1,I)):B===5?I.fg|=536870912:B===7?I.fg|=67108864:B===8?I.fg|=1073741824:B===9?I.fg|=2147483648:B===2?I.bg|=134217728:B===21?this._processUnderline(2,I):B===22?(I.fg&=-134217729,I.bg&=-134217729):B===23?I.bg&=-67108865:B===24?(I.fg&=-268435457,this._processUnderline(0,I)):B===25?I.fg&=-536870913:B===27?I.fg&=-67108865:B===28?I.fg&=-1073741825:B===29?I.fg&=2147483647:B===39?(I.fg&=-67108864,I.fg|=16777215&s.DEFAULT_ATTR_DATA.fg):B===49?(I.bg&=-67108864,I.bg|=16777215&s.DEFAULT_ATTR_DATA.bg):B===38||B===48||B===58?G+=this._extractColor(x,G,I):B===53?I.bg|=1073741824:B===55?I.bg&=-1073741825:B===59?(I.extended=I.extended.clone(),I.extended.underlineColor=-1,I.updateExtended()):B===100?(I.fg&=-67108864,I.fg|=16777215&s.DEFAULT_ATTR_DATA.fg,I.bg&=-67108864,I.bg|=16777215&s.DEFAULT_ATTR_DATA.bg):this._logService.debug("Unknown SGR attribute: %d.",B);return!0}deviceStatus(x){switch(x.params[0]){case 5:this._coreService.triggerDataEvent(`${h.C0.ESC}[0n`);break;case 6:const T=this._activeBuffer.y+1,B=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${h.C0.ESC}[${T};${B}R`)}return!0}deviceStatusPrivate(x){if(x.params[0]===6){const T=this._activeBuffer.y+1,B=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${h.C0.ESC}[?${T};${B}R`)}return!0}softReset(x){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._activeBuffer.scrollTop=0,this._activeBuffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=s.DEFAULT_ATTR_DATA.clone(),this._coreService.reset(),this._charsetService.reset(),this._activeBuffer.savedX=0,this._activeBuffer.savedY=this._activeBuffer.ybase,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1,!0}setCursorStyle(x){const T=x.params[0]||1;switch(T){case 1:case 2:this._optionsService.options.cursorStyle="block";break;case 3:case 4:this._optionsService.options.cursorStyle="underline";break;case 5:case 6:this._optionsService.options.cursorStyle="bar"}const B=T%2==1;return this._optionsService.options.cursorBlink=B,!0}setScrollRegion(x){const T=x.params[0]||1;let B;return(x.length<2||(B=x.params[1])>this._bufferService.rows||B===0)&&(B=this._bufferService.rows),B>T&&(this._activeBuffer.scrollTop=T-1,this._activeBuffer.scrollBottom=B-1,this._setCursor(0,0)),!0}windowOptions(x){if(!M(x.params[0],this._optionsService.rawOptions.windowOptions))return!0;const T=x.length>1?x.params[1]:0;switch(x.params[0]){case 14:T!==2&&this._onRequestWindowsOptionsReport.fire(D.GET_WIN_SIZE_PIXELS);break;case 16:this._onRequestWindowsOptionsReport.fire(D.GET_CELL_SIZE_PIXELS);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(`${h.C0.ESC}[8;${this._bufferService.rows};${this._bufferService.cols}t`);break;case 22:T!==0&&T!==2||(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>10&&this._windowTitleStack.shift()),T!==0&&T!==1||(this._iconNameStack.push(this._iconName),this._iconNameStack.length>10&&this._iconNameStack.shift());break;case 23:T!==0&&T!==2||this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),T!==0&&T!==1||this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop())}return!0}saveCursor(x){return this._activeBuffer.savedX=this._activeBuffer.x,this._activeBuffer.savedY=this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,!0}restoreCursor(x){return this._activeBuffer.x=this._activeBuffer.savedX||0,this._activeBuffer.y=Math.max(this._activeBuffer.savedY-this._activeBuffer.ybase,0),this._curAttrData.fg=this._activeBuffer.savedCurAttrData.fg,this._curAttrData.bg=this._activeBuffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._activeBuffer.savedCharset&&(this._charsetService.charset=this._activeBuffer.savedCharset),this._restrictCursor(),!0}setTitle(x){return this._windowTitle=x,this._onTitleChange.fire(x),!0}setIconName(x){return this._iconName=x,!0}setOrReportIndexedColor(x){const T=[],B=x.split(";");for(;B.length>1;){const I=B.shift(),G=B.shift();if(/^\d+$/.exec(I)){const te=parseInt(I);if(K(te))if(G==="?")T.push({type:0,index:te});else{const oe=(0,p.parseColor)(G);oe&&T.push({type:1,index:te,color:oe})}}}return T.length&&this._onColor.fire(T),!0}setHyperlink(x){const T=x.split(";");return!(T.length<2)&&(T[1]?this._createHyperlink(T[0],T[1]):!T[0]&&this._finishHyperlink())}_createHyperlink(x,T){this._getCurrentLinkId()&&this._finishHyperlink();const B=x.split(":");let I;const G=B.findIndex(te=>te.startsWith("id="));return G!==-1&&(I=B[G].slice(3)||void 0),this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=this._oscLinkService.registerLink({id:I,uri:T}),this._curAttrData.updateExtended(),!0}_finishHyperlink(){return this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=0,this._curAttrData.updateExtended(),!0}_setOrReportSpecialColor(x,T){const B=x.split(";");for(let I=0;I<B.length&&!(T>=this._specialColors.length);++I,++T)if(B[I]==="?")this._onColor.fire([{type:0,index:this._specialColors[T]}]);else{const G=(0,p.parseColor)(B[I]);G&&this._onColor.fire([{type:1,index:this._specialColors[T],color:G}])}return!0}setOrReportFgColor(x){return this._setOrReportSpecialColor(x,0)}setOrReportBgColor(x){return this._setOrReportSpecialColor(x,1)}setOrReportCursorColor(x){return this._setOrReportSpecialColor(x,2)}restoreIndexedColor(x){if(!x)return this._onColor.fire([{type:2}]),!0;const T=[],B=x.split(";");for(let I=0;I<B.length;++I)if(/^\d+$/.exec(B[I])){const G=parseInt(B[I]);K(G)&&T.push({type:2,index:G})}return T.length&&this._onColor.fire(T),!0}restoreFgColor(x){return this._onColor.fire([{type:2,index:256}]),!0}restoreBgColor(x){return this._onColor.fire([{type:2,index:257}]),!0}restoreCursorColor(x){return this._onColor.fire([{type:2,index:258}]),!0}nextLine(){return this._activeBuffer.x=0,this.index(),!0}keypadApplicationMode(){return this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0}keypadNumericMode(){return this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),!0}selectDefaultCharset(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,g.DEFAULT_CHARSET),!0}selectCharset(x){return x.length!==2?(this.selectDefaultCharset(),!0):(x[0]==="/"||this._charsetService.setgCharset(E[x[0]],g.CHARSETS[x[1]]||g.DEFAULT_CHARSET),!0)}index(){return this._restrictCursor(),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._restrictCursor(),!0}tabSet(){return this._activeBuffer.tabs[this._activeBuffer.x]=!0,!0}reverseIndex(){if(this._restrictCursor(),this._activeBuffer.y===this._activeBuffer.scrollTop){const x=this._activeBuffer.scrollBottom-this._activeBuffer.scrollTop;this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase+this._activeBuffer.y,x,1),this._activeBuffer.lines.set(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.getBlankLine(this._eraseAttrData())),this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom)}else this._activeBuffer.y--,this._restrictCursor();return!0}fullReset(){return this._parser.reset(),this._onRequestReset.fire(),!0}reset(){this._curAttrData=s.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=s.DEFAULT_ATTR_DATA.clone()}_eraseAttrData(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=67108863&this._curAttrData.bg,this._eraseAttrDataInternal}setgLevel(x){return this._charsetService.setgLevel(x),!0}screenAlignmentPattern(){const x=new o.CellData;x.content=4194373,x.fg=this._curAttrData.fg,x.bg=this._curAttrData.bg,this._setCursor(0,0);for(let T=0;T<this._bufferService.rows;++T){const B=this._activeBuffer.ybase+this._activeBuffer.y+T,I=this._activeBuffer.lines.get(B);I&&(I.fill(x),I.isWrapped=!1)}return this._dirtyRowTracker.markAllDirty(),this._setCursor(0,0),!0}requestStatusString(x,T){const B=this._bufferService.buffer,I=this._optionsService.rawOptions;return(G=>(this._coreService.triggerDataEvent(`${h.C0.ESC}${G}${h.C0.ESC}\\`),!0))(x==='"q'?`P1$r${this._curAttrData.isProtected()?1:0}"q`:x==='"p'?'P1$r61;1"p':x==="r"?`P1$r${B.scrollTop+1};${B.scrollBottom+1}r`:x==="m"?"P1$r0m":x===" q"?`P1$r${{block:2,underline:4,bar:6}[I.cursorStyle]-(I.cursorBlink?1:0)} q`:"P0$r")}markRangeDirty(x,T){this._dirtyRowTracker.markRangeDirty(x,T)}}i.InputHandler=W;let q=class{constructor(U){this._bufferService=U,this.clearRange()}clearRange(){this.start=this._bufferService.buffer.y,this.end=this._bufferService.buffer.y}markDirty(U){U<this.start?this.start=U:U>this.end&&(this.end=U)}markRangeDirty(U,x){U>x&&(O=U,U=x,x=O),U<this.start&&(this.start=U),x>this.end&&(this.end=x)}markAllDirty(){this.markRangeDirty(0,this._bufferService.rows-1)}};function K(U){return 0<=U&&U<256}q=u([_(0,m.IBufferService)],q)},844:(b,i)=>{function l(u){for(const _ of u)_.dispose();u.length=0}Object.defineProperty(i,"__esModule",{value:!0}),i.getDisposeArrayDisposable=i.disposeArray=i.toDisposable=i.MutableDisposable=i.Disposable=void 0,i.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(const u of this._disposables)u.dispose();this._disposables.length=0}register(u){return this._disposables.push(u),u}unregister(u){const _=this._disposables.indexOf(u);_!==-1&&this._disposables.splice(_,1)}},i.MutableDisposable=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(u){var _;this._isDisposed||u===this._value||((_=this._value)===null||_===void 0||_.dispose(),this._value=u)}clear(){this.value=void 0}dispose(){var u;this._isDisposed=!0,(u=this._value)===null||u===void 0||u.dispose(),this._value=void 0}},i.toDisposable=function(u){return{dispose:u}},i.disposeArray=l,i.getDisposeArrayDisposable=function(u){return{dispose:()=>l(u)}}},1505:(b,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.FourKeyMap=i.TwoKeyMap=void 0;class l{constructor(){this._data={}}set(_,h,g){this._data[_]||(this._data[_]={}),this._data[_][h]=g}get(_,h){return this._data[_]?this._data[_][h]:void 0}clear(){this._data={}}}i.TwoKeyMap=l,i.FourKeyMap=class{constructor(){this._data=new l}set(u,_,h,g,C){this._data.get(u,_)||this._data.set(u,_,new l),this._data.get(u,_).set(h,g,C)}get(u,_,h,g){var C;return(C=this._data.get(u,_))===null||C===void 0?void 0:C.get(h,g)}clear(){this._data.clear()}}},6114:(b,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.isChromeOS=i.isLinux=i.isWindows=i.isIphone=i.isIpad=i.isMac=i.getSafariVersion=i.isSafari=i.isLegacyEdge=i.isFirefox=i.isNode=void 0,i.isNode=typeof navigator>"u";const l=i.isNode?"node":navigator.userAgent,u=i.isNode?"node":navigator.platform;i.isFirefox=l.includes("Firefox"),i.isLegacyEdge=l.includes("Edge"),i.isSafari=/^((?!chrome|android).)*safari/i.test(l),i.getSafariVersion=function(){if(!i.isSafari)return 0;const _=l.match(/Version\/(\d+)/);return _===null||_.length<2?0:parseInt(_[1])},i.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(u),i.isIpad=u==="iPad",i.isIphone=u==="iPhone",i.isWindows=["Windows","Win16","Win32","WinCE"].includes(u),i.isLinux=u.indexOf("Linux")>=0,i.isChromeOS=/\bCrOS\b/.test(l)},6106:(b,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.SortedList=void 0;let l=0;i.SortedList=class{constructor(u){this._getKey=u,this._array=[]}clear(){this._array.length=0}insert(u){this._array.length!==0?(l=this._search(this._getKey(u)),this._array.splice(l,0,u)):this._array.push(u)}delete(u){if(this._array.length===0)return!1;const _=this._getKey(u);if(_===void 0||(l=this._search(_),l===-1)||this._getKey(this._array[l])!==_)return!1;do if(this._array[l]===u)return this._array.splice(l,1),!0;while(++l<this._array.length&&this._getKey(this._array[l])===_);return!1}*getKeyIterator(u){if(this._array.length!==0&&(l=this._search(u),!(l<0||l>=this._array.length)&&this._getKey(this._array[l])===u))do yield this._array[l];while(++l<this._array.length&&this._getKey(this._array[l])===u)}forEachByKey(u,_){if(this._array.length!==0&&(l=this._search(u),!(l<0||l>=this._array.length)&&this._getKey(this._array[l])===u))do _(this._array[l]);while(++l<this._array.length&&this._getKey(this._array[l])===u)}values(){return[...this._array].values()}_search(u){let _=0,h=this._array.length-1;for(;h>=_;){let g=_+h>>1;const C=this._getKey(this._array[g]);if(C>u)h=g-1;else{if(!(C<u)){for(;g>0&&this._getKey(this._array[g-1])===u;)g--;return g}_=g+1}}return _}}},7226:(b,i,l)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.DebouncedIdleTask=i.IdleTaskQueue=i.PriorityTaskQueue=void 0;const u=l(6114);class _{constructor(){this._tasks=[],this._i=0}enqueue(C){this._tasks.push(C),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(C){this._idleCallback=void 0;let y=0,v=0,s=C.timeRemaining(),a=0;for(;this._i<this._tasks.length;){if(y=Date.now(),this._tasks[this._i]()||this._i++,y=Math.max(1,Date.now()-y),v=Math.max(y,v),a=C.timeRemaining(),1.5*v>a)return s-y<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(s-y))}ms`),void this._start();s=a}this.clear()}}class h extends _{_requestCallback(C){return setTimeout(()=>C(this._createDeadline(16)))}_cancelCallback(C){clearTimeout(C)}_createDeadline(C){const y=Date.now()+C;return{timeRemaining:()=>Math.max(0,y-Date.now())}}}i.PriorityTaskQueue=h,i.IdleTaskQueue=!u.isNode&&"requestIdleCallback"in window?class extends _{_requestCallback(g){return requestIdleCallback(g)}_cancelCallback(g){cancelIdleCallback(g)}}:h,i.DebouncedIdleTask=class{constructor(){this._queue=new i.IdleTaskQueue}set(g){this._queue.clear(),this._queue.enqueue(g)}flush(){this._queue.flush()}}},9282:(b,i,l)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.updateWindowsModeWrappedState=void 0;const u=l(643);i.updateWindowsModeWrappedState=function(_){const h=_.buffer.lines.get(_.buffer.ybase+_.buffer.y-1),g=h==null?void 0:h.get(_.cols-1),C=_.buffer.lines.get(_.buffer.ybase+_.buffer.y);C&&g&&(C.isWrapped=g[u.CHAR_DATA_CODE_INDEX]!==u.NULL_CELL_CODE&&g[u.CHAR_DATA_CODE_INDEX]!==u.WHITESPACE_CELL_CODE)}},3734:(b,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ExtendedAttrs=i.AttributeData=void 0;class l{constructor(){this.fg=0,this.bg=0,this.extended=new u}static toColorRGB(h){return[h>>>16&255,h>>>8&255,255&h]}static fromColorRGB(h){return(255&h[0])<<16|(255&h[1])<<8|255&h[2]}clone(){const h=new l;return h.fg=this.fg,h.bg=this.bg,h.extended=this.extended.clone(),h}isInverse(){return 67108864&this.fg}isBold(){return 134217728&this.fg}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:268435456&this.fg}isBlink(){return 536870912&this.fg}isInvisible(){return 1073741824&this.fg}isItalic(){return 67108864&this.bg}isDim(){return 134217728&this.bg}isStrikethrough(){return 2147483648&this.fg}isProtected(){return 536870912&this.bg}isOverline(){return 1073741824&this.bg}getFgColorMode(){return 50331648&this.fg}getBgColorMode(){return 50331648&this.bg}isFgRGB(){return(50331648&this.fg)==50331648}isBgRGB(){return(50331648&this.bg)==50331648}isFgPalette(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432}isBgPalette(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432}isFgDefault(){return(50331648&this.fg)==0}isBgDefault(){return(50331648&this.bg)==0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}}getBgColor(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}}hasExtendedAttrs(){return 268435456&this.bg}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()}isUnderlineColorRGB(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()}isUnderlineColorPalette(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()}isUnderlineColorDefault(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()}getUnderlineStyle(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0}}i.AttributeData=l;class u{get ext(){return this._urlId?-469762049&this._ext|this.underlineStyle<<26:this._ext}set ext(h){this._ext=h}get underlineStyle(){return this._urlId?5:(469762048&this._ext)>>26}set underlineStyle(h){this._ext&=-469762049,this._ext|=h<<26&469762048}get underlineColor(){return 67108863&this._ext}set underlineColor(h){this._ext&=-67108864,this._ext|=67108863&h}get urlId(){return this._urlId}set urlId(h){this._urlId=h}constructor(h=0,g=0){this._ext=0,this._urlId=0,this._ext=h,this._urlId=g}clone(){return new u(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}}i.ExtendedAttrs=u},9092:(b,i,l)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Buffer=i.MAX_BUFFER_SIZE=void 0;const u=l(6349),_=l(7226),h=l(3734),g=l(8437),C=l(4634),y=l(511),v=l(643),s=l(4863),a=l(7116);i.MAX_BUFFER_SIZE=4294967295,i.Buffer=class{constructor(n,o,f){this._hasScrollback=n,this._optionsService=o,this._bufferService=f,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.tabs={},this.savedY=0,this.savedX=0,this.savedCurAttrData=g.DEFAULT_ATTR_DATA.clone(),this.savedCharset=a.DEFAULT_CHARSET,this.markers=[],this._nullCell=y.CellData.fromCharData([0,v.NULL_CELL_CHAR,v.NULL_CELL_WIDTH,v.NULL_CELL_CODE]),this._whitespaceCell=y.CellData.fromCharData([0,v.WHITESPACE_CELL_CHAR,v.WHITESPACE_CELL_WIDTH,v.WHITESPACE_CELL_CODE]),this._isClearing=!1,this._memoryCleanupQueue=new _.IdleTaskQueue,this._memoryCleanupPosition=0,this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new u.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}getNullCell(n){return n?(this._nullCell.fg=n.fg,this._nullCell.bg=n.bg,this._nullCell.extended=n.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new h.ExtendedAttrs),this._nullCell}getWhitespaceCell(n){return n?(this._whitespaceCell.fg=n.fg,this._whitespaceCell.bg=n.bg,this._whitespaceCell.extended=n.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new h.ExtendedAttrs),this._whitespaceCell}getBlankLine(n,o){return new g.BufferLine(this._bufferService.cols,this.getNullCell(n),o)}get hasScrollback(){return this._hasScrollback&&this.lines.maxLength>this._rows}get isCursorInViewport(){const n=this.ybase+this.y-this.ydisp;return n>=0&&n<this._rows}_getCorrectBufferLength(n){if(!this._hasScrollback)return n;const o=n+this._optionsService.rawOptions.scrollback;return o>i.MAX_BUFFER_SIZE?i.MAX_BUFFER_SIZE:o}fillViewportRows(n){if(this.lines.length===0){n===void 0&&(n=g.DEFAULT_ATTR_DATA);let o=this._rows;for(;o--;)this.lines.push(this.getBlankLine(n))}}clear(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new u.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}resize(n,o){const f=this.getNullCell(g.DEFAULT_ATTR_DATA);let m=0;const w=this._getCorrectBufferLength(o);if(w>this.lines.maxLength&&(this.lines.maxLength=w),this.lines.length>0){if(this._cols<n)for(let p=0;p<this.lines.length;p++)m+=+this.lines.get(p).resize(n,f);let R=0;if(this._rows<o)for(let p=this._rows;p<o;p++)this.lines.length<o+this.ybase&&(this._optionsService.rawOptions.windowsMode||this._optionsService.rawOptions.windowsPty.backend!==void 0||this._optionsService.rawOptions.windowsPty.buildNumber!==void 0?this.lines.push(new g.BufferLine(n,f)):this.ybase>0&&this.lines.length<=this.ybase+this.y+R+1?(this.ybase--,R++,this.ydisp>0&&this.ydisp--):this.lines.push(new g.BufferLine(n,f)));else for(let p=this._rows;p>o;p--)this.lines.length>o+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(w<this.lines.maxLength){const p=this.lines.length-w;p>0&&(this.lines.trimStart(p),this.ybase=Math.max(this.ybase-p,0),this.ydisp=Math.max(this.ydisp-p,0),this.savedY=Math.max(this.savedY-p,0)),this.lines.maxLength=w}this.x=Math.min(this.x,n-1),this.y=Math.min(this.y,o-1),R&&(this.y+=R),this.savedX=Math.min(this.savedX,n-1),this.scrollTop=0}if(this.scrollBottom=o-1,this._isReflowEnabled&&(this._reflow(n,o),this._cols>n))for(let R=0;R<this.lines.length;R++)m+=+this.lines.get(R).resize(n,f);this._cols=n,this._rows=o,this._memoryCleanupQueue.clear(),m>.1*this.lines.length&&(this._memoryCleanupPosition=0,this._memoryCleanupQueue.enqueue(()=>this._batchedMemoryCleanup()))}_batchedMemoryCleanup(){let n=!0;this._memoryCleanupPosition>=this.lines.length&&(this._memoryCleanupPosition=0,n=!1);let o=0;for(;this._memoryCleanupPosition<this.lines.length;)if(o+=this.lines.get(this._memoryCleanupPosition++).cleanupMemory(),o>100)return!0;return n}get _isReflowEnabled(){const n=this._optionsService.rawOptions.windowsPty;return n&&n.buildNumber?this._hasScrollback&&n.backend==="conpty"&&n.buildNumber>=21376:this._hasScrollback&&!this._optionsService.rawOptions.windowsMode}_reflow(n,o){this._cols!==n&&(n>this._cols?this._reflowLarger(n,o):this._reflowSmaller(n,o))}_reflowLarger(n,o){const f=(0,C.reflowLargerGetLinesToRemove)(this.lines,this._cols,n,this.ybase+this.y,this.getNullCell(g.DEFAULT_ATTR_DATA));if(f.length>0){const m=(0,C.reflowLargerCreateNewLayout)(this.lines,f);(0,C.reflowLargerApplyNewLayout)(this.lines,m.layout),this._reflowLargerAdjustViewport(n,o,m.countRemoved)}}_reflowLargerAdjustViewport(n,o,f){const m=this.getNullCell(g.DEFAULT_ATTR_DATA);let w=f;for(;w-- >0;)this.ybase===0?(this.y>0&&this.y--,this.lines.length<o&&this.lines.push(new g.BufferLine(n,m))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-f,0)}_reflowSmaller(n,o){const f=this.getNullCell(g.DEFAULT_ATTR_DATA),m=[];let w=0;for(let R=this.lines.length-1;R>=0;R--){let p=this.lines.get(R);if(!p||!p.isWrapped&&p.getTrimmedLength()<=n)continue;const E=[p];for(;p.isWrapped&&R>0;)p=this.lines.get(--R),E.unshift(p);const k=this.ybase+this.y;if(k>=R&&k<R+E.length)continue;const M=E[E.length-1].getTrimmedLength(),D=(0,C.reflowSmallerGetNewLineLengths)(E,this._cols,n),O=D.length-E.length;let W;W=this.ybase===0&&this.y!==this.lines.length-1?Math.max(0,this.y-this.lines.maxLength+O):Math.max(0,this.lines.length-this.lines.maxLength+O);const q=[];for(let I=0;I<O;I++){const G=this.getBlankLine(g.DEFAULT_ATTR_DATA,!0);q.push(G)}q.length>0&&(m.push({start:R+E.length+w,newLines:q}),w+=q.length),E.push(...q);let K=D.length-1,U=D[K];U===0&&(K--,U=D[K]);let x=E.length-O-1,T=M;for(;x>=0;){const I=Math.min(T,U);if(E[K]===void 0)break;if(E[K].copyCellsFrom(E[x],T-I,U-I,I,!0),U-=I,U===0&&(K--,U=D[K]),T-=I,T===0){x--;const G=Math.max(x,0);T=(0,C.getWrappedLineTrimmedLength)(E,G,this._cols)}}for(let I=0;I<E.length;I++)D[I]<n&&E[I].setCell(D[I],f);let B=O-W;for(;B-- >0;)this.ybase===0?this.y<o-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+w)-o&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+O,this.ybase+o-1)}if(m.length>0){const R=[],p=[];for(let K=0;K<this.lines.length;K++)p.push(this.lines.get(K));const E=this.lines.length;let k=E-1,M=0,D=m[M];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+w);let O=0;for(let K=Math.min(this.lines.maxLength-1,E+w-1);K>=0;K--)if(D&&D.start>k+O){for(let U=D.newLines.length-1;U>=0;U--)this.lines.set(K--,D.newLines[U]);K++,R.push({index:k+1,amount:D.newLines.length}),O+=D.newLines.length,D=m[++M]}else this.lines.set(K,p[k--]);let W=0;for(let K=R.length-1;K>=0;K--)R[K].index+=W,this.lines.onInsertEmitter.fire(R[K]),W+=R[K].amount;const q=Math.max(0,E+w-this.lines.maxLength);q>0&&this.lines.onTrimEmitter.fire(q)}}translateBufferLineToString(n,o,f=0,m){const w=this.lines.get(n);return w?w.translateToString(o,f,m):""}getWrappedRangeForLine(n){let o=n,f=n;for(;o>0&&this.lines.get(o).isWrapped;)o--;for(;f+1<this.lines.length&&this.lines.get(f+1).isWrapped;)f++;return{first:o,last:f}}setupTabStops(n){for(n!=null?this.tabs[n]||(n=this.prevStop(n)):(this.tabs={},n=0);n<this._cols;n+=this._optionsService.rawOptions.tabStopWidth)this.tabs[n]=!0}prevStop(n){for(n==null&&(n=this.x);!this.tabs[--n]&&n>0;);return n>=this._cols?this._cols-1:n<0?0:n}nextStop(n){for(n==null&&(n=this.x);!this.tabs[++n]&&n<this._cols;);return n>=this._cols?this._cols-1:n<0?0:n}clearMarkers(n){this._isClearing=!0;for(let o=0;o<this.markers.length;o++)this.markers[o].line===n&&(this.markers[o].dispose(),this.markers.splice(o--,1));this._isClearing=!1}clearAllMarkers(){this._isClearing=!0;for(let n=0;n<this.markers.length;n++)this.markers[n].dispose(),this.markers.splice(n--,1);this._isClearing=!1}addMarker(n){const o=new s.Marker(n);return this.markers.push(o),o.register(this.lines.onTrim(f=>{o.line-=f,o.line<0&&o.dispose()})),o.register(this.lines.onInsert(f=>{o.line>=f.index&&(o.line+=f.amount)})),o.register(this.lines.onDelete(f=>{o.line>=f.index&&o.line<f.index+f.amount&&o.dispose(),o.line>f.index&&(o.line-=f.amount)})),o.register(o.onDispose(()=>this._removeMarker(o))),o}_removeMarker(n){this._isClearing||this.markers.splice(this.markers.indexOf(n),1)}}},8437:(b,i,l)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferLine=i.DEFAULT_ATTR_DATA=void 0;const u=l(3734),_=l(511),h=l(643),g=l(482);i.DEFAULT_ATTR_DATA=Object.freeze(new u.AttributeData);let C=0;class y{constructor(s,a,n=!1){this.isWrapped=n,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(3*s);const o=a||_.CellData.fromCharData([0,h.NULL_CELL_CHAR,h.NULL_CELL_WIDTH,h.NULL_CELL_CODE]);for(let f=0;f<s;++f)this.setCell(f,o);this.length=s}get(s){const a=this._data[3*s+0],n=2097151&a;return[this._data[3*s+1],2097152&a?this._combined[s]:n?(0,g.stringFromCodePoint)(n):"",a>>22,2097152&a?this._combined[s].charCodeAt(this._combined[s].length-1):n]}set(s,a){this._data[3*s+1]=a[h.CHAR_DATA_ATTR_INDEX],a[h.CHAR_DATA_CHAR_INDEX].length>1?(this._combined[s]=a[1],this._data[3*s+0]=2097152|s|a[h.CHAR_DATA_WIDTH_INDEX]<<22):this._data[3*s+0]=a[h.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|a[h.CHAR_DATA_WIDTH_INDEX]<<22}getWidth(s){return this._data[3*s+0]>>22}hasWidth(s){return 12582912&this._data[3*s+0]}getFg(s){return this._data[3*s+1]}getBg(s){return this._data[3*s+2]}hasContent(s){return 4194303&this._data[3*s+0]}getCodePoint(s){const a=this._data[3*s+0];return 2097152&a?this._combined[s].charCodeAt(this._combined[s].length-1):2097151&a}isCombined(s){return 2097152&this._data[3*s+0]}getString(s){const a=this._data[3*s+0];return 2097152&a?this._combined[s]:2097151&a?(0,g.stringFromCodePoint)(2097151&a):""}isProtected(s){return 536870912&this._data[3*s+2]}loadCell(s,a){return C=3*s,a.content=this._data[C+0],a.fg=this._data[C+1],a.bg=this._data[C+2],2097152&a.content&&(a.combinedData=this._combined[s]),268435456&a.bg&&(a.extended=this._extendedAttrs[s]),a}setCell(s,a){2097152&a.content&&(this._combined[s]=a.combinedData),268435456&a.bg&&(this._extendedAttrs[s]=a.extended),this._data[3*s+0]=a.content,this._data[3*s+1]=a.fg,this._data[3*s+2]=a.bg}setCellFromCodePoint(s,a,n,o,f,m){268435456&f&&(this._extendedAttrs[s]=m),this._data[3*s+0]=a|n<<22,this._data[3*s+1]=o,this._data[3*s+2]=f}addCodepointToCell(s,a){let n=this._data[3*s+0];2097152&n?this._combined[s]+=(0,g.stringFromCodePoint)(a):(2097151&n?(this._combined[s]=(0,g.stringFromCodePoint)(2097151&n)+(0,g.stringFromCodePoint)(a),n&=-2097152,n|=2097152):n=a|4194304,this._data[3*s+0]=n)}insertCells(s,a,n,o){if((s%=this.length)&&this.getWidth(s-1)===2&&this.setCellFromCodePoint(s-1,0,1,(o==null?void 0:o.fg)||0,(o==null?void 0:o.bg)||0,(o==null?void 0:o.extended)||new u.ExtendedAttrs),a<this.length-s){const f=new _.CellData;for(let m=this.length-s-a-1;m>=0;--m)this.setCell(s+a+m,this.loadCell(s+m,f));for(let m=0;m<a;++m)this.setCell(s+m,n)}else for(let f=s;f<this.length;++f)this.setCell(f,n);this.getWidth(this.length-1)===2&&this.setCellFromCodePoint(this.length-1,0,1,(o==null?void 0:o.fg)||0,(o==null?void 0:o.bg)||0,(o==null?void 0:o.extended)||new u.ExtendedAttrs)}deleteCells(s,a,n,o){if(s%=this.length,a<this.length-s){const f=new _.CellData;for(let m=0;m<this.length-s-a;++m)this.setCell(s+m,this.loadCell(s+a+m,f));for(let m=this.length-a;m<this.length;++m)this.setCell(m,n)}else for(let f=s;f<this.length;++f)this.setCell(f,n);s&&this.getWidth(s-1)===2&&this.setCellFromCodePoint(s-1,0,1,(o==null?void 0:o.fg)||0,(o==null?void 0:o.bg)||0,(o==null?void 0:o.extended)||new u.ExtendedAttrs),this.getWidth(s)!==0||this.hasContent(s)||this.setCellFromCodePoint(s,0,1,(o==null?void 0:o.fg)||0,(o==null?void 0:o.bg)||0,(o==null?void 0:o.extended)||new u.ExtendedAttrs)}replaceCells(s,a,n,o,f=!1){if(f)for(s&&this.getWidth(s-1)===2&&!this.isProtected(s-1)&&this.setCellFromCodePoint(s-1,0,1,(o==null?void 0:o.fg)||0,(o==null?void 0:o.bg)||0,(o==null?void 0:o.extended)||new u.ExtendedAttrs),a<this.length&&this.getWidth(a-1)===2&&!this.isProtected(a)&&this.setCellFromCodePoint(a,0,1,(o==null?void 0:o.fg)||0,(o==null?void 0:o.bg)||0,(o==null?void 0:o.extended)||new u.ExtendedAttrs);s<a&&s<this.length;)this.isProtected(s)||this.setCell(s,n),s++;else for(s&&this.getWidth(s-1)===2&&this.setCellFromCodePoint(s-1,0,1,(o==null?void 0:o.fg)||0,(o==null?void 0:o.bg)||0,(o==null?void 0:o.extended)||new u.ExtendedAttrs),a<this.length&&this.getWidth(a-1)===2&&this.setCellFromCodePoint(a,0,1,(o==null?void 0:o.fg)||0,(o==null?void 0:o.bg)||0,(o==null?void 0:o.extended)||new u.ExtendedAttrs);s<a&&s<this.length;)this.setCell(s++,n)}resize(s,a){if(s===this.length)return 4*this._data.length*2<this._data.buffer.byteLength;const n=3*s;if(s>this.length){if(this._data.buffer.byteLength>=4*n)this._data=new Uint32Array(this._data.buffer,0,n);else{const o=new Uint32Array(n);o.set(this._data),this._data=o}for(let o=this.length;o<s;++o)this.setCell(o,a)}else{this._data=this._data.subarray(0,n);const o=Object.keys(this._combined);for(let m=0;m<o.length;m++){const w=parseInt(o[m],10);w>=s&&delete this._combined[w]}const f=Object.keys(this._extendedAttrs);for(let m=0;m<f.length;m++){const w=parseInt(f[m],10);w>=s&&delete this._extendedAttrs[w]}}return this.length=s,4*n*2<this._data.buffer.byteLength}cleanupMemory(){if(4*this._data.length*2<this._data.buffer.byteLength){const s=new Uint32Array(this._data.length);return s.set(this._data),this._data=s,1}return 0}fill(s,a=!1){if(a)for(let n=0;n<this.length;++n)this.isProtected(n)||this.setCell(n,s);else{this._combined={},this._extendedAttrs={};for(let n=0;n<this.length;++n)this.setCell(n,s)}}copyFrom(s){this.length!==s.length?this._data=new Uint32Array(s._data):this._data.set(s._data),this.length=s.length,this._combined={};for(const a in s._combined)this._combined[a]=s._combined[a];this._extendedAttrs={};for(const a in s._extendedAttrs)this._extendedAttrs[a]=s._extendedAttrs[a];this.isWrapped=s.isWrapped}clone(){const s=new y(0);s._data=new Uint32Array(this._data),s.length=this.length;for(const a in this._combined)s._combined[a]=this._combined[a];for(const a in this._extendedAttrs)s._extendedAttrs[a]=this._extendedAttrs[a];return s.isWrapped=this.isWrapped,s}getTrimmedLength(){for(let s=this.length-1;s>=0;--s)if(4194303&this._data[3*s+0])return s+(this._data[3*s+0]>>22);return 0}getNoBgTrimmedLength(){for(let s=this.length-1;s>=0;--s)if(4194303&this._data[3*s+0]||50331648&this._data[3*s+2])return s+(this._data[3*s+0]>>22);return 0}copyCellsFrom(s,a,n,o,f){const m=s._data;if(f)for(let R=o-1;R>=0;R--){for(let p=0;p<3;p++)this._data[3*(n+R)+p]=m[3*(a+R)+p];268435456&m[3*(a+R)+2]&&(this._extendedAttrs[n+R]=s._extendedAttrs[a+R])}else for(let R=0;R<o;R++){for(let p=0;p<3;p++)this._data[3*(n+R)+p]=m[3*(a+R)+p];268435456&m[3*(a+R)+2]&&(this._extendedAttrs[n+R]=s._extendedAttrs[a+R])}const w=Object.keys(s._combined);for(let R=0;R<w.length;R++){const p=parseInt(w[R],10);p>=a&&(this._combined[p-a+n]=s._combined[p])}}translateToString(s=!1,a=0,n=this.length){s&&(n=Math.min(n,this.getTrimmedLength()));let o="";for(;a<n;){const f=this._data[3*a+0],m=2097151&f;o+=2097152&f?this._combined[a]:m?(0,g.stringFromCodePoint)(m):h.WHITESPACE_CELL_CHAR,a+=f>>22||1}return o}}i.BufferLine=y},4841:(b,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.getRangeLength=void 0,i.getRangeLength=function(l,u){if(l.start.y>l.end.y)throw new Error(`Buffer range end (${l.end.x}, ${l.end.y}) cannot be before start (${l.start.x}, ${l.start.y})`);return u*(l.end.y-l.start.y)+(l.end.x-l.start.x+1)}},4634:(b,i)=>{function l(u,_,h){if(_===u.length-1)return u[_].getTrimmedLength();const g=!u[_].hasContent(h-1)&&u[_].getWidth(h-1)===1,C=u[_+1].getWidth(0)===2;return g&&C?h-1:h}Object.defineProperty(i,"__esModule",{value:!0}),i.getWrappedLineTrimmedLength=i.reflowSmallerGetNewLineLengths=i.reflowLargerApplyNewLayout=i.reflowLargerCreateNewLayout=i.reflowLargerGetLinesToRemove=void 0,i.reflowLargerGetLinesToRemove=function(u,_,h,g,C){const y=[];for(let v=0;v<u.length-1;v++){let s=v,a=u.get(++s);if(!a.isWrapped)continue;const n=[u.get(v)];for(;s<u.length&&a.isWrapped;)n.push(a),a=u.get(++s);if(g>=v&&g<s){v+=n.length-1;continue}let o=0,f=l(n,o,_),m=1,w=0;for(;m<n.length;){const p=l(n,m,_),E=p-w,k=h-f,M=Math.min(E,k);n[o].copyCellsFrom(n[m],w,f,M,!1),f+=M,f===h&&(o++,f=0),w+=M,w===p&&(m++,w=0),f===0&&o!==0&&n[o-1].getWidth(h-1)===2&&(n[o].copyCellsFrom(n[o-1],h-1,f++,1,!1),n[o-1].setCell(h-1,C))}n[o].replaceCells(f,h,C);let R=0;for(let p=n.length-1;p>0&&(p>o||n[p].getTrimmedLength()===0);p--)R++;R>0&&(y.push(v+n.length-R),y.push(R)),v+=n.length-1}return y},i.reflowLargerCreateNewLayout=function(u,_){const h=[];let g=0,C=_[g],y=0;for(let v=0;v<u.length;v++)if(C===v){const s=_[++g];u.onDeleteEmitter.fire({index:v-y,amount:s}),v+=s-1,y+=s,C=_[++g]}else h.push(v);return{layout:h,countRemoved:y}},i.reflowLargerApplyNewLayout=function(u,_){const h=[];for(let g=0;g<_.length;g++)h.push(u.get(_[g]));for(let g=0;g<h.length;g++)u.set(g,h[g]);u.length=_.length},i.reflowSmallerGetNewLineLengths=function(u,_,h){const g=[],C=u.map((a,n)=>l(u,n,_)).reduce((a,n)=>a+n);let y=0,v=0,s=0;for(;s<C;){if(C-s<h){g.push(C-s);break}y+=h;const a=l(u,v,_);y>a&&(y-=a,v++);const n=u[v].getWidth(y-1)===2;n&&y--;const o=n?h-1:h;g.push(o),s+=o}return g},i.getWrappedLineTrimmedLength=l},5295:(b,i,l)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferSet=void 0;const u=l(8460),_=l(844),h=l(9092);class g extends _.Disposable{constructor(y,v){super(),this._optionsService=y,this._bufferService=v,this._onBufferActivate=this.register(new u.EventEmitter),this.onBufferActivate=this._onBufferActivate.event,this.reset(),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.resize(this._bufferService.cols,this._bufferService.rows))),this.register(this._optionsService.onSpecificOptionChange("tabStopWidth",()=>this.setupTabStops()))}reset(){this._normal=new h.Buffer(!0,this._optionsService,this._bufferService),this._normal.fillViewportRows(),this._alt=new h.Buffer(!1,this._optionsService,this._bufferService),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}),this.setupTabStops()}get alt(){return this._alt}get active(){return this._activeBuffer}get normal(){return this._normal}activateNormalBuffer(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clearAllMarkers(),this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))}activateAltBuffer(y){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(y),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))}resize(y,v){this._normal.resize(y,v),this._alt.resize(y,v),this.setupTabStops(y)}setupTabStops(y){this._normal.setupTabStops(y),this._alt.setupTabStops(y)}}i.BufferSet=g},511:(b,i,l)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CellData=void 0;const u=l(482),_=l(643),h=l(3734);class g extends h.AttributeData{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new h.ExtendedAttrs,this.combinedData=""}static fromCharData(y){const v=new g;return v.setFromCharData(y),v}isCombined(){return 2097152&this.content}getWidth(){return this.content>>22}getChars(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,u.stringFromCodePoint)(2097151&this.content):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}setFromCharData(y){this.fg=y[_.CHAR_DATA_ATTR_INDEX],this.bg=0;let v=!1;if(y[_.CHAR_DATA_CHAR_INDEX].length>2)v=!0;else if(y[_.CHAR_DATA_CHAR_INDEX].length===2){const s=y[_.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=s&&s<=56319){const a=y[_.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=a&&a<=57343?this.content=1024*(s-55296)+a-56320+65536|y[_.CHAR_DATA_WIDTH_INDEX]<<22:v=!0}else v=!0}else this.content=y[_.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|y[_.CHAR_DATA_WIDTH_INDEX]<<22;v&&(this.combinedData=y[_.CHAR_DATA_CHAR_INDEX],this.content=2097152|y[_.CHAR_DATA_WIDTH_INDEX]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}i.CellData=g},643:(b,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.WHITESPACE_CELL_CODE=i.WHITESPACE_CELL_WIDTH=i.WHITESPACE_CELL_CHAR=i.NULL_CELL_CODE=i.NULL_CELL_WIDTH=i.NULL_CELL_CHAR=i.CHAR_DATA_CODE_INDEX=i.CHAR_DATA_WIDTH_INDEX=i.CHAR_DATA_CHAR_INDEX=i.CHAR_DATA_ATTR_INDEX=i.DEFAULT_EXT=i.DEFAULT_ATTR=i.DEFAULT_COLOR=void 0,i.DEFAULT_COLOR=0,i.DEFAULT_ATTR=256|i.DEFAULT_COLOR<<9,i.DEFAULT_EXT=0,i.CHAR_DATA_ATTR_INDEX=0,i.CHAR_DATA_CHAR_INDEX=1,i.CHAR_DATA_WIDTH_INDEX=2,i.CHAR_DATA_CODE_INDEX=3,i.NULL_CELL_CHAR="",i.NULL_CELL_WIDTH=1,i.NULL_CELL_CODE=0,i.WHITESPACE_CELL_CHAR=" ",i.WHITESPACE_CELL_WIDTH=1,i.WHITESPACE_CELL_CODE=32},4863:(b,i,l)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Marker=void 0;const u=l(8460),_=l(844);class h{get id(){return this._id}constructor(C){this.line=C,this.isDisposed=!1,this._disposables=[],this._id=h._nextId++,this._onDispose=this.register(new u.EventEmitter),this.onDispose=this._onDispose.event}dispose(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),(0,_.disposeArray)(this._disposables),this._disposables.length=0)}register(C){return this._disposables.push(C),C}}i.Marker=h,h._nextId=1},7116:(b,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.DEFAULT_CHARSET=i.CHARSETS=void 0,i.CHARSETS={},i.DEFAULT_CHARSET=i.CHARSETS.B,i.CHARSETS[0]={"`":"◆",a:"▒",b:"␉",c:"␌",d:"␍",e:"␊",f:"°",g:"±",h:"␤",i:"␋",j:"┘",k:"┐",l:"┌",m:"└",n:"┼",o:"⎺",p:"⎻",q:"─",r:"⎼",s:"⎽",t:"├",u:"┤",v:"┴",w:"┬",x:"│",y:"≤",z:"≥","{":"π","|":"≠","}":"£","~":"·"},i.CHARSETS.A={"#":"£"},i.CHARSETS.B=void 0,i.CHARSETS[4]={"#":"£","@":"¾","[":"ij","\\":"½","]":"|","{":"¨","|":"f","}":"¼","~":"´"},i.CHARSETS.C=i.CHARSETS[5]={"[":"Ä","\\":"Ö","]":"Å","^":"Ü","`":"é","{":"ä","|":"ö","}":"å","~":"ü"},i.CHARSETS.R={"#":"£","@":"à","[":"°","\\":"ç","]":"§","{":"é","|":"ù","}":"è","~":"¨"},i.CHARSETS.Q={"@":"à","[":"â","\\":"ç","]":"ê","^":"î","`":"ô","{":"é","|":"ù","}":"è","~":"û"},i.CHARSETS.K={"@":"§","[":"Ä","\\":"Ö","]":"Ü","{":"ä","|":"ö","}":"ü","~":"ß"},i.CHARSETS.Y={"#":"£","@":"§","[":"°","\\":"ç","]":"é","`":"ù","{":"à","|":"ò","}":"è","~":"ì"},i.CHARSETS.E=i.CHARSETS[6]={"@":"Ä","[":"Æ","\\":"Ø","]":"Å","^":"Ü","`":"ä","{":"æ","|":"ø","}":"å","~":"ü"},i.CHARSETS.Z={"#":"£","@":"§","[":"¡","\\":"Ñ","]":"¿","{":"°","|":"ñ","}":"ç"},i.CHARSETS.H=i.CHARSETS[7]={"@":"É","[":"Ä","\\":"Ö","]":"Å","^":"Ü","`":"é","{":"ä","|":"ö","}":"å","~":"ü"},i.CHARSETS["="]={"#":"ù","@":"à","[":"é","\\":"ç","]":"ê","^":"î",_:"è","`":"ô","{":"ä","|":"ö","}":"ü","~":"û"}},2584:(b,i)=>{var l,u,_;Object.defineProperty(i,"__esModule",{value:!0}),i.C1_ESCAPED=i.C1=i.C0=void 0,function(h){h.NUL="\0",h.SOH="",h.STX="",h.ETX="",h.EOT="",h.ENQ="",h.ACK="",h.BEL="\x07",h.BS="\b",h.HT="	",h.LF=`
`,h.VT="\v",h.FF="\f",h.CR="\r",h.SO="",h.SI="",h.DLE="",h.DC1="",h.DC2="",h.DC3="",h.DC4="",h.NAK="",h.SYN="",h.ETB="",h.CAN="",h.EM="",h.SUB="",h.ESC="\x1B",h.FS="",h.GS="",h.RS="",h.US="",h.SP=" ",h.DEL=""}(l||(i.C0=l={})),function(h){h.PAD="",h.HOP="",h.BPH="",h.NBH="",h.IND="",h.NEL="",h.SSA="",h.ESA="",h.HTS="",h.HTJ="",h.VTS="",h.PLD="",h.PLU="",h.RI="",h.SS2="",h.SS3="",h.DCS="",h.PU1="",h.PU2="",h.STS="",h.CCH="",h.MW="",h.SPA="",h.EPA="",h.SOS="",h.SGCI="",h.SCI="",h.CSI="",h.ST="",h.OSC="",h.PM="",h.APC=""}(u||(i.C1=u={})),function(h){h.ST=`${l.ESC}\\`}(_||(i.C1_ESCAPED=_={}))},7399:(b,i,l)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.evaluateKeyboardEvent=void 0;const u=l(2584),_={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};i.evaluateKeyboardEvent=function(h,g,C,y){const v={type:0,cancel:!1,key:void 0},s=(h.shiftKey?1:0)|(h.altKey?2:0)|(h.ctrlKey?4:0)|(h.metaKey?8:0);switch(h.keyCode){case 0:h.key==="UIKeyInputUpArrow"?v.key=g?u.C0.ESC+"OA":u.C0.ESC+"[A":h.key==="UIKeyInputLeftArrow"?v.key=g?u.C0.ESC+"OD":u.C0.ESC+"[D":h.key==="UIKeyInputRightArrow"?v.key=g?u.C0.ESC+"OC":u.C0.ESC+"[C":h.key==="UIKeyInputDownArrow"&&(v.key=g?u.C0.ESC+"OB":u.C0.ESC+"[B");break;case 8:if(h.altKey){v.key=u.C0.ESC+u.C0.DEL;break}v.key=u.C0.DEL;break;case 9:if(h.shiftKey){v.key=u.C0.ESC+"[Z";break}v.key=u.C0.HT,v.cancel=!0;break;case 13:v.key=h.altKey?u.C0.ESC+u.C0.CR:u.C0.CR,v.cancel=!0;break;case 27:v.key=u.C0.ESC,h.altKey&&(v.key=u.C0.ESC+u.C0.ESC),v.cancel=!0;break;case 37:if(h.metaKey)break;s?(v.key=u.C0.ESC+"[1;"+(s+1)+"D",v.key===u.C0.ESC+"[1;3D"&&(v.key=u.C0.ESC+(C?"b":"[1;5D"))):v.key=g?u.C0.ESC+"OD":u.C0.ESC+"[D";break;case 39:if(h.metaKey)break;s?(v.key=u.C0.ESC+"[1;"+(s+1)+"C",v.key===u.C0.ESC+"[1;3C"&&(v.key=u.C0.ESC+(C?"f":"[1;5C"))):v.key=g?u.C0.ESC+"OC":u.C0.ESC+"[C";break;case 38:if(h.metaKey)break;s?(v.key=u.C0.ESC+"[1;"+(s+1)+"A",C||v.key!==u.C0.ESC+"[1;3A"||(v.key=u.C0.ESC+"[1;5A")):v.key=g?u.C0.ESC+"OA":u.C0.ESC+"[A";break;case 40:if(h.metaKey)break;s?(v.key=u.C0.ESC+"[1;"+(s+1)+"B",C||v.key!==u.C0.ESC+"[1;3B"||(v.key=u.C0.ESC+"[1;5B")):v.key=g?u.C0.ESC+"OB":u.C0.ESC+"[B";break;case 45:h.shiftKey||h.ctrlKey||(v.key=u.C0.ESC+"[2~");break;case 46:v.key=s?u.C0.ESC+"[3;"+(s+1)+"~":u.C0.ESC+"[3~";break;case 36:v.key=s?u.C0.ESC+"[1;"+(s+1)+"H":g?u.C0.ESC+"OH":u.C0.ESC+"[H";break;case 35:v.key=s?u.C0.ESC+"[1;"+(s+1)+"F":g?u.C0.ESC+"OF":u.C0.ESC+"[F";break;case 33:h.shiftKey?v.type=2:h.ctrlKey?v.key=u.C0.ESC+"[5;"+(s+1)+"~":v.key=u.C0.ESC+"[5~";break;case 34:h.shiftKey?v.type=3:h.ctrlKey?v.key=u.C0.ESC+"[6;"+(s+1)+"~":v.key=u.C0.ESC+"[6~";break;case 112:v.key=s?u.C0.ESC+"[1;"+(s+1)+"P":u.C0.ESC+"OP";break;case 113:v.key=s?u.C0.ESC+"[1;"+(s+1)+"Q":u.C0.ESC+"OQ";break;case 114:v.key=s?u.C0.ESC+"[1;"+(s+1)+"R":u.C0.ESC+"OR";break;case 115:v.key=s?u.C0.ESC+"[1;"+(s+1)+"S":u.C0.ESC+"OS";break;case 116:v.key=s?u.C0.ESC+"[15;"+(s+1)+"~":u.C0.ESC+"[15~";break;case 117:v.key=s?u.C0.ESC+"[17;"+(s+1)+"~":u.C0.ESC+"[17~";break;case 118:v.key=s?u.C0.ESC+"[18;"+(s+1)+"~":u.C0.ESC+"[18~";break;case 119:v.key=s?u.C0.ESC+"[19;"+(s+1)+"~":u.C0.ESC+"[19~";break;case 120:v.key=s?u.C0.ESC+"[20;"+(s+1)+"~":u.C0.ESC+"[20~";break;case 121:v.key=s?u.C0.ESC+"[21;"+(s+1)+"~":u.C0.ESC+"[21~";break;case 122:v.key=s?u.C0.ESC+"[23;"+(s+1)+"~":u.C0.ESC+"[23~";break;case 123:v.key=s?u.C0.ESC+"[24;"+(s+1)+"~":u.C0.ESC+"[24~";break;default:if(!h.ctrlKey||h.shiftKey||h.altKey||h.metaKey)if(C&&!y||!h.altKey||h.metaKey)!C||h.altKey||h.ctrlKey||h.shiftKey||!h.metaKey?h.key&&!h.ctrlKey&&!h.altKey&&!h.metaKey&&h.keyCode>=48&&h.key.length===1?v.key=h.key:h.key&&h.ctrlKey&&(h.key==="_"&&(v.key=u.C0.US),h.key==="@"&&(v.key=u.C0.NUL)):h.keyCode===65&&(v.type=1);else{const a=_[h.keyCode],n=a==null?void 0:a[h.shiftKey?1:0];if(n)v.key=u.C0.ESC+n;else if(h.keyCode>=65&&h.keyCode<=90){const o=h.ctrlKey?h.keyCode-64:h.keyCode+32;let f=String.fromCharCode(o);h.shiftKey&&(f=f.toUpperCase()),v.key=u.C0.ESC+f}else if(h.keyCode===32)v.key=u.C0.ESC+(h.ctrlKey?u.C0.NUL:" ");else if(h.key==="Dead"&&h.code.startsWith("Key")){let o=h.code.slice(3,4);h.shiftKey||(o=o.toLowerCase()),v.key=u.C0.ESC+o,v.cancel=!0}}else h.keyCode>=65&&h.keyCode<=90?v.key=String.fromCharCode(h.keyCode-64):h.keyCode===32?v.key=u.C0.NUL:h.keyCode>=51&&h.keyCode<=55?v.key=String.fromCharCode(h.keyCode-51+27):h.keyCode===56?v.key=u.C0.DEL:h.keyCode===219?v.key=u.C0.ESC:h.keyCode===220?v.key=u.C0.FS:h.keyCode===221&&(v.key=u.C0.GS)}return v}},482:(b,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Utf8ToUtf32=i.StringToUtf32=i.utf32ToString=i.stringFromCodePoint=void 0,i.stringFromCodePoint=function(l){return l>65535?(l-=65536,String.fromCharCode(55296+(l>>10))+String.fromCharCode(l%1024+56320)):String.fromCharCode(l)},i.utf32ToString=function(l,u=0,_=l.length){let h="";for(let g=u;g<_;++g){let C=l[g];C>65535?(C-=65536,h+=String.fromCharCode(55296+(C>>10))+String.fromCharCode(C%1024+56320)):h+=String.fromCharCode(C)}return h},i.StringToUtf32=class{constructor(){this._interim=0}clear(){this._interim=0}decode(l,u){const _=l.length;if(!_)return 0;let h=0,g=0;if(this._interim){const C=l.charCodeAt(g++);56320<=C&&C<=57343?u[h++]=1024*(this._interim-55296)+C-56320+65536:(u[h++]=this._interim,u[h++]=C),this._interim=0}for(let C=g;C<_;++C){const y=l.charCodeAt(C);if(55296<=y&&y<=56319){if(++C>=_)return this._interim=y,h;const v=l.charCodeAt(C);56320<=v&&v<=57343?u[h++]=1024*(y-55296)+v-56320+65536:(u[h++]=y,u[h++]=v)}else y!==65279&&(u[h++]=y)}return h}},i.Utf8ToUtf32=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(l,u){const _=l.length;if(!_)return 0;let h,g,C,y,v=0,s=0,a=0;if(this.interim[0]){let f=!1,m=this.interim[0];m&=(224&m)==192?31:(240&m)==224?15:7;let w,R=0;for(;(w=63&this.interim[++R])&&R<4;)m<<=6,m|=w;const p=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,E=p-R;for(;a<E;){if(a>=_)return 0;if(w=l[a++],(192&w)!=128){a--,f=!0;break}this.interim[R++]=w,m<<=6,m|=63&w}f||(p===2?m<128?a--:u[v++]=m:p===3?m<2048||m>=55296&&m<=57343||m===65279||(u[v++]=m):m<65536||m>1114111||(u[v++]=m)),this.interim.fill(0)}const n=_-4;let o=a;for(;o<_;){for(;!(!(o<n)||128&(h=l[o])||128&(g=l[o+1])||128&(C=l[o+2])||128&(y=l[o+3]));)u[v++]=h,u[v++]=g,u[v++]=C,u[v++]=y,o+=4;if(h=l[o++],h<128)u[v++]=h;else if((224&h)==192){if(o>=_)return this.interim[0]=h,v;if(g=l[o++],(192&g)!=128){o--;continue}if(s=(31&h)<<6|63&g,s<128){o--;continue}u[v++]=s}else if((240&h)==224){if(o>=_)return this.interim[0]=h,v;if(g=l[o++],(192&g)!=128){o--;continue}if(o>=_)return this.interim[0]=h,this.interim[1]=g,v;if(C=l[o++],(192&C)!=128){o--;continue}if(s=(15&h)<<12|(63&g)<<6|63&C,s<2048||s>=55296&&s<=57343||s===65279)continue;u[v++]=s}else if((248&h)==240){if(o>=_)return this.interim[0]=h,v;if(g=l[o++],(192&g)!=128){o--;continue}if(o>=_)return this.interim[0]=h,this.interim[1]=g,v;if(C=l[o++],(192&C)!=128){o--;continue}if(o>=_)return this.interim[0]=h,this.interim[1]=g,this.interim[2]=C,v;if(y=l[o++],(192&y)!=128){o--;continue}if(s=(7&h)<<18|(63&g)<<12|(63&C)<<6|63&y,s<65536||s>1114111)continue;u[v++]=s}}return v}}},225:(b,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.UnicodeV6=void 0;const l=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],u=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]];let _;i.UnicodeV6=class{constructor(){if(this.version="6",!_){_=new Uint8Array(65536),_.fill(1),_[0]=0,_.fill(0,1,32),_.fill(0,127,160),_.fill(2,4352,4448),_[9001]=2,_[9002]=2,_.fill(2,11904,42192),_[12351]=1,_.fill(2,44032,55204),_.fill(2,63744,64256),_.fill(2,65040,65050),_.fill(2,65072,65136),_.fill(2,65280,65377),_.fill(2,65504,65511);for(let h=0;h<l.length;++h)_.fill(0,l[h][0],l[h][1]+1)}}wcwidth(h){return h<32?0:h<127?1:h<65536?_[h]:function(g,C){let y,v=0,s=C.length-1;if(g<C[0][0]||g>C[s][1])return!1;for(;s>=v;)if(y=v+s>>1,g>C[y][1])v=y+1;else{if(!(g<C[y][0]))return!0;s=y-1}return!1}(h,u)?0:h>=131072&&h<=196605||h>=196608&&h<=262141?2:1}}},5981:(b,i,l)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.WriteBuffer=void 0;const u=l(8460),_=l(844);class h extends _.Disposable{constructor(C){super(),this._action=C,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0,this._isSyncWriting=!1,this._syncCalls=0,this._didUserInput=!1,this._onWriteParsed=this.register(new u.EventEmitter),this.onWriteParsed=this._onWriteParsed.event}handleUserInput(){this._didUserInput=!0}writeSync(C,y){if(y!==void 0&&this._syncCalls>y)return void(this._syncCalls=0);if(this._pendingData+=C.length,this._writeBuffer.push(C),this._callbacks.push(void 0),this._syncCalls++,this._isSyncWriting)return;let v;for(this._isSyncWriting=!0;v=this._writeBuffer.shift();){this._action(v);const s=this._callbacks.shift();s&&s()}this._pendingData=0,this._bufferOffset=2147483647,this._isSyncWriting=!1,this._syncCalls=0}write(C,y){if(this._pendingData>5e7)throw new Error("write data discarded, use flow control to avoid losing data");if(!this._writeBuffer.length){if(this._bufferOffset=0,this._didUserInput)return this._didUserInput=!1,this._pendingData+=C.length,this._writeBuffer.push(C),this._callbacks.push(y),void this._innerWrite();setTimeout(()=>this._innerWrite())}this._pendingData+=C.length,this._writeBuffer.push(C),this._callbacks.push(y)}_innerWrite(C=0,y=!0){const v=C||Date.now();for(;this._writeBuffer.length>this._bufferOffset;){const s=this._writeBuffer[this._bufferOffset],a=this._action(s,y);if(a){const o=f=>Date.now()-v>=12?setTimeout(()=>this._innerWrite(0,f)):this._innerWrite(v,f);return void a.catch(f=>(queueMicrotask(()=>{throw f}),Promise.resolve(!1))).then(o)}const n=this._callbacks[this._bufferOffset];if(n&&n(),this._bufferOffset++,this._pendingData-=s.length,Date.now()-v>=12)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>50&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout(()=>this._innerWrite())):(this._writeBuffer.length=0,this._callbacks.length=0,this._pendingData=0,this._bufferOffset=0),this._onWriteParsed.fire()}}i.WriteBuffer=h},5941:(b,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.toRgbString=i.parseColor=void 0;const l=/^([\da-f])\/([\da-f])\/([\da-f])$|^([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})$|^([\da-f]{3})\/([\da-f]{3})\/([\da-f]{3})$|^([\da-f]{4})\/([\da-f]{4})\/([\da-f]{4})$/,u=/^[\da-f]+$/;function _(h,g){const C=h.toString(16),y=C.length<2?"0"+C:C;switch(g){case 4:return C[0];case 8:return y;case 12:return(y+y).slice(0,3);default:return y+y}}i.parseColor=function(h){if(!h)return;let g=h.toLowerCase();if(g.indexOf("rgb:")===0){g=g.slice(4);const C=l.exec(g);if(C){const y=C[1]?15:C[4]?255:C[7]?4095:65535;return[Math.round(parseInt(C[1]||C[4]||C[7]||C[10],16)/y*255),Math.round(parseInt(C[2]||C[5]||C[8]||C[11],16)/y*255),Math.round(parseInt(C[3]||C[6]||C[9]||C[12],16)/y*255)]}}else if(g.indexOf("#")===0&&(g=g.slice(1),u.exec(g)&&[3,6,9,12].includes(g.length))){const C=g.length/3,y=[0,0,0];for(let v=0;v<3;++v){const s=parseInt(g.slice(C*v,C*v+C),16);y[v]=C===1?s<<4:C===2?s:C===3?s>>4:s>>8}return y}},i.toRgbString=function(h,g=16){const[C,y,v]=h;return`rgb:${_(C,g)}/${_(y,g)}/${_(v,g)}`}},5770:(b,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.PAYLOAD_LIMIT=void 0,i.PAYLOAD_LIMIT=1e7},6351:(b,i,l)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.DcsHandler=i.DcsParser=void 0;const u=l(482),_=l(8742),h=l(5770),g=[];i.DcsParser=class{constructor(){this._handlers=Object.create(null),this._active=g,this._ident=0,this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=g}registerHandler(y,v){this._handlers[y]===void 0&&(this._handlers[y]=[]);const s=this._handlers[y];return s.push(v),{dispose:()=>{const a=s.indexOf(v);a!==-1&&s.splice(a,1)}}}clearHandler(y){this._handlers[y]&&delete this._handlers[y]}setHandlerFallback(y){this._handlerFb=y}reset(){if(this._active.length)for(let y=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;y>=0;--y)this._active[y].unhook(!1);this._stack.paused=!1,this._active=g,this._ident=0}hook(y,v){if(this.reset(),this._ident=y,this._active=this._handlers[y]||g,this._active.length)for(let s=this._active.length-1;s>=0;s--)this._active[s].hook(v);else this._handlerFb(this._ident,"HOOK",v)}put(y,v,s){if(this._active.length)for(let a=this._active.length-1;a>=0;a--)this._active[a].put(y,v,s);else this._handlerFb(this._ident,"PUT",(0,u.utf32ToString)(y,v,s))}unhook(y,v=!0){if(this._active.length){let s=!1,a=this._active.length-1,n=!1;if(this._stack.paused&&(a=this._stack.loopPosition-1,s=v,n=this._stack.fallThrough,this._stack.paused=!1),!n&&s===!1){for(;a>=0&&(s=this._active[a].unhook(y),s!==!0);a--)if(s instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=a,this._stack.fallThrough=!1,s;a--}for(;a>=0;a--)if(s=this._active[a].unhook(!1),s instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=a,this._stack.fallThrough=!0,s}else this._handlerFb(this._ident,"UNHOOK",y);this._active=g,this._ident=0}};const C=new _.Params;C.addParam(0),i.DcsHandler=class{constructor(y){this._handler=y,this._data="",this._params=C,this._hitLimit=!1}hook(y){this._params=y.length>1||y.params[0]?y.clone():C,this._data="",this._hitLimit=!1}put(y,v,s){this._hitLimit||(this._data+=(0,u.utf32ToString)(y,v,s),this._data.length>h.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}unhook(y){let v=!1;if(this._hitLimit)v=!1;else if(y&&(v=this._handler(this._data,this._params),v instanceof Promise))return v.then(s=>(this._params=C,this._data="",this._hitLimit=!1,s));return this._params=C,this._data="",this._hitLimit=!1,v}}},2015:(b,i,l)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.EscapeSequenceParser=i.VT500_TRANSITION_TABLE=i.TransitionTable=void 0;const u=l(844),_=l(8742),h=l(6242),g=l(6351);class C{constructor(a){this.table=new Uint8Array(a)}setDefault(a,n){this.table.fill(a<<4|n)}add(a,n,o,f){this.table[n<<8|a]=o<<4|f}addMany(a,n,o,f){for(let m=0;m<a.length;m++)this.table[n<<8|a[m]]=o<<4|f}}i.TransitionTable=C;const y=160;i.VT500_TRANSITION_TABLE=function(){const s=new C(4095),a=Array.apply(null,Array(256)).map((R,p)=>p),n=(R,p)=>a.slice(R,p),o=n(32,127),f=n(0,24);f.push(25),f.push.apply(f,n(28,32));const m=n(0,14);let w;for(w in s.setDefault(1,0),s.addMany(o,0,2,0),m)s.addMany([24,26,153,154],w,3,0),s.addMany(n(128,144),w,3,0),s.addMany(n(144,152),w,3,0),s.add(156,w,0,0),s.add(27,w,11,1),s.add(157,w,4,8),s.addMany([152,158,159],w,0,7),s.add(155,w,11,3),s.add(144,w,11,9);return s.addMany(f,0,3,0),s.addMany(f,1,3,1),s.add(127,1,0,1),s.addMany(f,8,0,8),s.addMany(f,3,3,3),s.add(127,3,0,3),s.addMany(f,4,3,4),s.add(127,4,0,4),s.addMany(f,6,3,6),s.addMany(f,5,3,5),s.add(127,5,0,5),s.addMany(f,2,3,2),s.add(127,2,0,2),s.add(93,1,4,8),s.addMany(o,8,5,8),s.add(127,8,5,8),s.addMany([156,27,24,26,7],8,6,0),s.addMany(n(28,32),8,0,8),s.addMany([88,94,95],1,0,7),s.addMany(o,7,0,7),s.addMany(f,7,0,7),s.add(156,7,0,0),s.add(127,7,0,7),s.add(91,1,11,3),s.addMany(n(64,127),3,7,0),s.addMany(n(48,60),3,8,4),s.addMany([60,61,62,63],3,9,4),s.addMany(n(48,60),4,8,4),s.addMany(n(64,127),4,7,0),s.addMany([60,61,62,63],4,0,6),s.addMany(n(32,64),6,0,6),s.add(127,6,0,6),s.addMany(n(64,127),6,0,0),s.addMany(n(32,48),3,9,5),s.addMany(n(32,48),5,9,5),s.addMany(n(48,64),5,0,6),s.addMany(n(64,127),5,7,0),s.addMany(n(32,48),4,9,5),s.addMany(n(32,48),1,9,2),s.addMany(n(32,48),2,9,2),s.addMany(n(48,127),2,10,0),s.addMany(n(48,80),1,10,0),s.addMany(n(81,88),1,10,0),s.addMany([89,90,92],1,10,0),s.addMany(n(96,127),1,10,0),s.add(80,1,11,9),s.addMany(f,9,0,9),s.add(127,9,0,9),s.addMany(n(28,32),9,0,9),s.addMany(n(32,48),9,9,12),s.addMany(n(48,60),9,8,10),s.addMany([60,61,62,63],9,9,10),s.addMany(f,11,0,11),s.addMany(n(32,128),11,0,11),s.addMany(n(28,32),11,0,11),s.addMany(f,10,0,10),s.add(127,10,0,10),s.addMany(n(28,32),10,0,10),s.addMany(n(48,60),10,8,10),s.addMany([60,61,62,63],10,0,11),s.addMany(n(32,48),10,9,12),s.addMany(f,12,0,12),s.add(127,12,0,12),s.addMany(n(28,32),12,0,12),s.addMany(n(32,48),12,9,12),s.addMany(n(48,64),12,0,11),s.addMany(n(64,127),12,12,13),s.addMany(n(64,127),10,12,13),s.addMany(n(64,127),9,12,13),s.addMany(f,13,13,13),s.addMany(o,13,13,13),s.add(127,13,0,13),s.addMany([27,156,24,26],13,14,0),s.add(y,0,2,0),s.add(y,8,5,8),s.add(y,6,0,6),s.add(y,11,0,11),s.add(y,13,13,13),s}();class v extends u.Disposable{constructor(a=i.VT500_TRANSITION_TABLE){super(),this._transitions=a,this._parseStack={state:0,handlers:[],handlerPos:0,transition:0,chunkPos:0},this.initialState=0,this.currentState=this.initialState,this._params=new _.Params,this._params.addParam(0),this._collect=0,this.precedingCodepoint=0,this._printHandlerFb=(n,o,f)=>{},this._executeHandlerFb=n=>{},this._csiHandlerFb=(n,o)=>{},this._escHandlerFb=n=>{},this._errorHandlerFb=n=>n,this._printHandler=this._printHandlerFb,this._executeHandlers=Object.create(null),this._csiHandlers=Object.create(null),this._escHandlers=Object.create(null),this.register((0,u.toDisposable)(()=>{this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null)})),this._oscParser=this.register(new h.OscParser),this._dcsParser=this.register(new g.DcsParser),this._errorHandler=this._errorHandlerFb,this.registerEscHandler({final:"\\"},()=>!0)}_identifier(a,n=[64,126]){let o=0;if(a.prefix){if(a.prefix.length>1)throw new Error("only one byte as prefix supported");if(o=a.prefix.charCodeAt(0),o&&60>o||o>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(a.intermediates){if(a.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(let m=0;m<a.intermediates.length;++m){const w=a.intermediates.charCodeAt(m);if(32>w||w>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");o<<=8,o|=w}}if(a.final.length!==1)throw new Error("final must be a single byte");const f=a.final.charCodeAt(0);if(n[0]>f||f>n[1])throw new Error(`final must be in range ${n[0]} .. ${n[1]}`);return o<<=8,o|=f,o}identToString(a){const n=[];for(;a;)n.push(String.fromCharCode(255&a)),a>>=8;return n.reverse().join("")}setPrintHandler(a){this._printHandler=a}clearPrintHandler(){this._printHandler=this._printHandlerFb}registerEscHandler(a,n){const o=this._identifier(a,[48,126]);this._escHandlers[o]===void 0&&(this._escHandlers[o]=[]);const f=this._escHandlers[o];return f.push(n),{dispose:()=>{const m=f.indexOf(n);m!==-1&&f.splice(m,1)}}}clearEscHandler(a){this._escHandlers[this._identifier(a,[48,126])]&&delete this._escHandlers[this._identifier(a,[48,126])]}setEscHandlerFallback(a){this._escHandlerFb=a}setExecuteHandler(a,n){this._executeHandlers[a.charCodeAt(0)]=n}clearExecuteHandler(a){this._executeHandlers[a.charCodeAt(0)]&&delete this._executeHandlers[a.charCodeAt(0)]}setExecuteHandlerFallback(a){this._executeHandlerFb=a}registerCsiHandler(a,n){const o=this._identifier(a);this._csiHandlers[o]===void 0&&(this._csiHandlers[o]=[]);const f=this._csiHandlers[o];return f.push(n),{dispose:()=>{const m=f.indexOf(n);m!==-1&&f.splice(m,1)}}}clearCsiHandler(a){this._csiHandlers[this._identifier(a)]&&delete this._csiHandlers[this._identifier(a)]}setCsiHandlerFallback(a){this._csiHandlerFb=a}registerDcsHandler(a,n){return this._dcsParser.registerHandler(this._identifier(a),n)}clearDcsHandler(a){this._dcsParser.clearHandler(this._identifier(a))}setDcsHandlerFallback(a){this._dcsParser.setHandlerFallback(a)}registerOscHandler(a,n){return this._oscParser.registerHandler(a,n)}clearOscHandler(a){this._oscParser.clearHandler(a)}setOscHandlerFallback(a){this._oscParser.setHandlerFallback(a)}setErrorHandler(a){this._errorHandler=a}clearErrorHandler(){this._errorHandler=this._errorHandlerFb}reset(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0,this._parseStack.state!==0&&(this._parseStack.state=2,this._parseStack.handlers=[])}_preserveStack(a,n,o,f,m){this._parseStack.state=a,this._parseStack.handlers=n,this._parseStack.handlerPos=o,this._parseStack.transition=f,this._parseStack.chunkPos=m}parse(a,n,o){let f,m=0,w=0,R=0;if(this._parseStack.state)if(this._parseStack.state===2)this._parseStack.state=0,R=this._parseStack.chunkPos+1;else{if(o===void 0||this._parseStack.state===1)throw this._parseStack.state=1,new Error("improper continuation due to previous async handler, giving up parsing");const p=this._parseStack.handlers;let E=this._parseStack.handlerPos-1;switch(this._parseStack.state){case 3:if(o===!1&&E>-1){for(;E>=0&&(f=p[E](this._params),f!==!0);E--)if(f instanceof Promise)return this._parseStack.handlerPos=E,f}this._parseStack.handlers=[];break;case 4:if(o===!1&&E>-1){for(;E>=0&&(f=p[E](),f!==!0);E--)if(f instanceof Promise)return this._parseStack.handlerPos=E,f}this._parseStack.handlers=[];break;case 6:if(m=a[this._parseStack.chunkPos],f=this._dcsParser.unhook(m!==24&&m!==26,o),f)return f;m===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break;case 5:if(m=a[this._parseStack.chunkPos],f=this._oscParser.end(m!==24&&m!==26,o),f)return f;m===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0}this._parseStack.state=0,R=this._parseStack.chunkPos+1,this.precedingCodepoint=0,this.currentState=15&this._parseStack.transition}for(let p=R;p<n;++p){switch(m=a[p],w=this._transitions.table[this.currentState<<8|(m<160?m:y)],w>>4){case 2:for(let O=p+1;;++O){if(O>=n||(m=a[O])<32||m>126&&m<y){this._printHandler(a,p,O),p=O-1;break}if(++O>=n||(m=a[O])<32||m>126&&m<y){this._printHandler(a,p,O),p=O-1;break}if(++O>=n||(m=a[O])<32||m>126&&m<y){this._printHandler(a,p,O),p=O-1;break}if(++O>=n||(m=a[O])<32||m>126&&m<y){this._printHandler(a,p,O),p=O-1;break}}break;case 3:this._executeHandlers[m]?this._executeHandlers[m]():this._executeHandlerFb(m),this.precedingCodepoint=0;break;case 0:break;case 1:if(this._errorHandler({position:p,code:m,currentState:this.currentState,collect:this._collect,params:this._params,abort:!1}).abort)return;break;case 7:const E=this._csiHandlers[this._collect<<8|m];let k=E?E.length-1:-1;for(;k>=0&&(f=E[k](this._params),f!==!0);k--)if(f instanceof Promise)return this._preserveStack(3,E,k,w,p),f;k<0&&this._csiHandlerFb(this._collect<<8|m,this._params),this.precedingCodepoint=0;break;case 8:do switch(m){case 59:this._params.addParam(0);break;case 58:this._params.addSubParam(-1);break;default:this._params.addDigit(m-48)}while(++p<n&&(m=a[p])>47&&m<60);p--;break;case 9:this._collect<<=8,this._collect|=m;break;case 10:const M=this._escHandlers[this._collect<<8|m];let D=M?M.length-1:-1;for(;D>=0&&(f=M[D](),f!==!0);D--)if(f instanceof Promise)return this._preserveStack(4,M,D,w,p),f;D<0&&this._escHandlerFb(this._collect<<8|m),this.precedingCodepoint=0;break;case 11:this._params.reset(),this._params.addParam(0),this._collect=0;break;case 12:this._dcsParser.hook(this._collect<<8|m,this._params);break;case 13:for(let O=p+1;;++O)if(O>=n||(m=a[O])===24||m===26||m===27||m>127&&m<y){this._dcsParser.put(a,p,O),p=O-1;break}break;case 14:if(f=this._dcsParser.unhook(m!==24&&m!==26),f)return this._preserveStack(6,[],0,w,p),f;m===27&&(w|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0;break;case 4:this._oscParser.start();break;case 5:for(let O=p+1;;O++)if(O>=n||(m=a[O])<32||m>127&&m<y){this._oscParser.put(a,p,O),p=O-1;break}break;case 6:if(f=this._oscParser.end(m!==24&&m!==26),f)return this._preserveStack(5,[],0,w,p),f;m===27&&(w|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0}this.currentState=15&w}}}i.EscapeSequenceParser=v},6242:(b,i,l)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.OscHandler=i.OscParser=void 0;const u=l(5770),_=l(482),h=[];i.OscParser=class{constructor(){this._state=0,this._active=h,this._id=-1,this._handlers=Object.create(null),this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}registerHandler(g,C){this._handlers[g]===void 0&&(this._handlers[g]=[]);const y=this._handlers[g];return y.push(C),{dispose:()=>{const v=y.indexOf(C);v!==-1&&y.splice(v,1)}}}clearHandler(g){this._handlers[g]&&delete this._handlers[g]}setHandlerFallback(g){this._handlerFb=g}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=h}reset(){if(this._state===2)for(let g=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;g>=0;--g)this._active[g].end(!1);this._stack.paused=!1,this._active=h,this._id=-1,this._state=0}_start(){if(this._active=this._handlers[this._id]||h,this._active.length)for(let g=this._active.length-1;g>=0;g--)this._active[g].start();else this._handlerFb(this._id,"START")}_put(g,C,y){if(this._active.length)for(let v=this._active.length-1;v>=0;v--)this._active[v].put(g,C,y);else this._handlerFb(this._id,"PUT",(0,_.utf32ToString)(g,C,y))}start(){this.reset(),this._state=1}put(g,C,y){if(this._state!==3){if(this._state===1)for(;C<y;){const v=g[C++];if(v===59){this._state=2,this._start();break}if(v<48||57<v)return void(this._state=3);this._id===-1&&(this._id=0),this._id=10*this._id+v-48}this._state===2&&y-C>0&&this._put(g,C,y)}}end(g,C=!0){if(this._state!==0){if(this._state!==3)if(this._state===1&&this._start(),this._active.length){let y=!1,v=this._active.length-1,s=!1;if(this._stack.paused&&(v=this._stack.loopPosition-1,y=C,s=this._stack.fallThrough,this._stack.paused=!1),!s&&y===!1){for(;v>=0&&(y=this._active[v].end(g),y!==!0);v--)if(y instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=v,this._stack.fallThrough=!1,y;v--}for(;v>=0;v--)if(y=this._active[v].end(!1),y instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=v,this._stack.fallThrough=!0,y}else this._handlerFb(this._id,"END",g);this._active=h,this._id=-1,this._state=0}}},i.OscHandler=class{constructor(g){this._handler=g,this._data="",this._hitLimit=!1}start(){this._data="",this._hitLimit=!1}put(g,C,y){this._hitLimit||(this._data+=(0,_.utf32ToString)(g,C,y),this._data.length>u.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}end(g){let C=!1;if(this._hitLimit)C=!1;else if(g&&(C=this._handler(this._data),C instanceof Promise))return C.then(y=>(this._data="",this._hitLimit=!1,y));return this._data="",this._hitLimit=!1,C}}},8742:(b,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Params=void 0;const l=2147483647;class u{static fromArray(h){const g=new u;if(!h.length)return g;for(let C=Array.isArray(h[0])?1:0;C<h.length;++C){const y=h[C];if(Array.isArray(y))for(let v=0;v<y.length;++v)g.addSubParam(y[v]);else g.addParam(y)}return g}constructor(h=32,g=32){if(this.maxLength=h,this.maxSubParamsLength=g,g>256)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(h),this.length=0,this._subParams=new Int32Array(g),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(h),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}clone(){const h=new u(this.maxLength,this.maxSubParamsLength);return h.params.set(this.params),h.length=this.length,h._subParams.set(this._subParams),h._subParamsLength=this._subParamsLength,h._subParamsIdx.set(this._subParamsIdx),h._rejectDigits=this._rejectDigits,h._rejectSubDigits=this._rejectSubDigits,h._digitIsSub=this._digitIsSub,h}toArray(){const h=[];for(let g=0;g<this.length;++g){h.push(this.params[g]);const C=this._subParamsIdx[g]>>8,y=255&this._subParamsIdx[g];y-C>0&&h.push(Array.prototype.slice.call(this._subParams,C,y))}return h}reset(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}addParam(h){if(this._digitIsSub=!1,this.length>=this.maxLength)this._rejectDigits=!0;else{if(h<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=h>l?l:h}}addSubParam(h){if(this._digitIsSub=!0,this.length)if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength)this._rejectSubDigits=!0;else{if(h<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=h>l?l:h,this._subParamsIdx[this.length-1]++}}hasSubParams(h){return(255&this._subParamsIdx[h])-(this._subParamsIdx[h]>>8)>0}getSubParams(h){const g=this._subParamsIdx[h]>>8,C=255&this._subParamsIdx[h];return C-g>0?this._subParams.subarray(g,C):null}getSubParamsAll(){const h={};for(let g=0;g<this.length;++g){const C=this._subParamsIdx[g]>>8,y=255&this._subParamsIdx[g];y-C>0&&(h[g]=this._subParams.slice(C,y))}return h}addDigit(h){let g;if(this._rejectDigits||!(g=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)return;const C=this._digitIsSub?this._subParams:this.params,y=C[g-1];C[g-1]=~y?Math.min(10*y+h,l):h}}i.Params=u},5741:(b,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.AddonManager=void 0,i.AddonManager=class{constructor(){this._addons=[]}dispose(){for(let l=this._addons.length-1;l>=0;l--)this._addons[l].instance.dispose()}loadAddon(l,u){const _={instance:u,dispose:u.dispose,isDisposed:!1};this._addons.push(_),u.dispose=()=>this._wrappedAddonDispose(_),u.activate(l)}_wrappedAddonDispose(l){if(l.isDisposed)return;let u=-1;for(let _=0;_<this._addons.length;_++)if(this._addons[_]===l){u=_;break}if(u===-1)throw new Error("Could not dispose an addon that has not been loaded");l.isDisposed=!0,l.dispose.apply(l.instance),this._addons.splice(u,1)}}},8771:(b,i,l)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferApiView=void 0;const u=l(3785),_=l(511);i.BufferApiView=class{constructor(h,g){this._buffer=h,this.type=g}init(h){return this._buffer=h,this}get cursorY(){return this._buffer.y}get cursorX(){return this._buffer.x}get viewportY(){return this._buffer.ydisp}get baseY(){return this._buffer.ybase}get length(){return this._buffer.lines.length}getLine(h){const g=this._buffer.lines.get(h);if(g)return new u.BufferLineApiView(g)}getNullCell(){return new _.CellData}}},3785:(b,i,l)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferLineApiView=void 0;const u=l(511);i.BufferLineApiView=class{constructor(_){this._line=_}get isWrapped(){return this._line.isWrapped}get length(){return this._line.length}getCell(_,h){if(!(_<0||_>=this._line.length))return h?(this._line.loadCell(_,h),h):this._line.loadCell(_,new u.CellData)}translateToString(_,h,g){return this._line.translateToString(_,h,g)}}},8285:(b,i,l)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferNamespaceApi=void 0;const u=l(8771),_=l(8460),h=l(844);class g extends h.Disposable{constructor(y){super(),this._core=y,this._onBufferChange=this.register(new _.EventEmitter),this.onBufferChange=this._onBufferChange.event,this._normal=new u.BufferApiView(this._core.buffers.normal,"normal"),this._alternate=new u.BufferApiView(this._core.buffers.alt,"alternate"),this._core.buffers.onBufferActivate(()=>this._onBufferChange.fire(this.active))}get active(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")}get normal(){return this._normal.init(this._core.buffers.normal)}get alternate(){return this._alternate.init(this._core.buffers.alt)}}i.BufferNamespaceApi=g},7975:(b,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ParserApi=void 0,i.ParserApi=class{constructor(l){this._core=l}registerCsiHandler(l,u){return this._core.registerCsiHandler(l,_=>u(_.toArray()))}addCsiHandler(l,u){return this.registerCsiHandler(l,u)}registerDcsHandler(l,u){return this._core.registerDcsHandler(l,(_,h)=>u(_,h.toArray()))}addDcsHandler(l,u){return this.registerDcsHandler(l,u)}registerEscHandler(l,u){return this._core.registerEscHandler(l,u)}addEscHandler(l,u){return this.registerEscHandler(l,u)}registerOscHandler(l,u){return this._core.registerOscHandler(l,u)}addOscHandler(l,u){return this.registerOscHandler(l,u)}}},7090:(b,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.UnicodeApi=void 0,i.UnicodeApi=class{constructor(l){this._core=l}register(l){this._core.unicodeService.register(l)}get versions(){return this._core.unicodeService.versions}get activeVersion(){return this._core.unicodeService.activeVersion}set activeVersion(l){this._core.unicodeService.activeVersion=l}}},744:function(b,i,l){var u=this&&this.__decorate||function(s,a,n,o){var f,m=arguments.length,w=m<3?a:o===null?o=Object.getOwnPropertyDescriptor(a,n):o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")w=Reflect.decorate(s,a,n,o);else for(var R=s.length-1;R>=0;R--)(f=s[R])&&(w=(m<3?f(w):m>3?f(a,n,w):f(a,n))||w);return m>3&&w&&Object.defineProperty(a,n,w),w},_=this&&this.__param||function(s,a){return function(n,o){a(n,o,s)}};Object.defineProperty(i,"__esModule",{value:!0}),i.BufferService=i.MINIMUM_ROWS=i.MINIMUM_COLS=void 0;const h=l(8460),g=l(844),C=l(5295),y=l(2585);i.MINIMUM_COLS=2,i.MINIMUM_ROWS=1;let v=i.BufferService=class extends g.Disposable{get buffer(){return this.buffers.active}constructor(s){super(),this.isUserScrolling=!1,this._onResize=this.register(new h.EventEmitter),this.onResize=this._onResize.event,this._onScroll=this.register(new h.EventEmitter),this.onScroll=this._onScroll.event,this.cols=Math.max(s.rawOptions.cols||0,i.MINIMUM_COLS),this.rows=Math.max(s.rawOptions.rows||0,i.MINIMUM_ROWS),this.buffers=this.register(new C.BufferSet(s,this))}resize(s,a){this.cols=s,this.rows=a,this.buffers.resize(s,a),this._onResize.fire({cols:s,rows:a})}reset(){this.buffers.reset(),this.isUserScrolling=!1}scroll(s,a=!1){const n=this.buffer;let o;o=this._cachedBlankLine,o&&o.length===this.cols&&o.getFg(0)===s.fg&&o.getBg(0)===s.bg||(o=n.getBlankLine(s,a),this._cachedBlankLine=o),o.isWrapped=a;const f=n.ybase+n.scrollTop,m=n.ybase+n.scrollBottom;if(n.scrollTop===0){const w=n.lines.isFull;m===n.lines.length-1?w?n.lines.recycle().copyFrom(o):n.lines.push(o.clone()):n.lines.splice(m+1,0,o.clone()),w?this.isUserScrolling&&(n.ydisp=Math.max(n.ydisp-1,0)):(n.ybase++,this.isUserScrolling||n.ydisp++)}else{const w=m-f+1;n.lines.shiftElements(f+1,w-1,-1),n.lines.set(m,o.clone())}this.isUserScrolling||(n.ydisp=n.ybase),this._onScroll.fire(n.ydisp)}scrollLines(s,a,n){const o=this.buffer;if(s<0){if(o.ydisp===0)return;this.isUserScrolling=!0}else s+o.ydisp>=o.ybase&&(this.isUserScrolling=!1);const f=o.ydisp;o.ydisp=Math.max(Math.min(o.ydisp+s,o.ybase),0),f!==o.ydisp&&(a||this._onScroll.fire(o.ydisp))}};i.BufferService=v=u([_(0,y.IOptionsService)],v)},7994:(b,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CharsetService=void 0,i.CharsetService=class{constructor(){this.glevel=0,this._charsets=[]}reset(){this.charset=void 0,this._charsets=[],this.glevel=0}setgLevel(l){this.glevel=l,this.charset=this._charsets[l]}setgCharset(l,u){this._charsets[l]=u,this.glevel===l&&(this.charset=u)}}},1753:function(b,i,l){var u=this&&this.__decorate||function(o,f,m,w){var R,p=arguments.length,E=p<3?f:w===null?w=Object.getOwnPropertyDescriptor(f,m):w;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(o,f,m,w);else for(var k=o.length-1;k>=0;k--)(R=o[k])&&(E=(p<3?R(E):p>3?R(f,m,E):R(f,m))||E);return p>3&&E&&Object.defineProperty(f,m,E),E},_=this&&this.__param||function(o,f){return function(m,w){f(m,w,o)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CoreMouseService=void 0;const h=l(2585),g=l(8460),C=l(844),y={NONE:{events:0,restrict:()=>!1},X10:{events:1,restrict:o=>o.button!==4&&o.action===1&&(o.ctrl=!1,o.alt=!1,o.shift=!1,!0)},VT200:{events:19,restrict:o=>o.action!==32},DRAG:{events:23,restrict:o=>o.action!==32||o.button!==3},ANY:{events:31,restrict:o=>!0}};function v(o,f){let m=(o.ctrl?16:0)|(o.shift?4:0)|(o.alt?8:0);return o.button===4?(m|=64,m|=o.action):(m|=3&o.button,4&o.button&&(m|=64),8&o.button&&(m|=128),o.action===32?m|=32:o.action!==0||f||(m|=3)),m}const s=String.fromCharCode,a={DEFAULT:o=>{const f=[v(o,!1)+32,o.col+32,o.row+32];return f[0]>255||f[1]>255||f[2]>255?"":`\x1B[M${s(f[0])}${s(f[1])}${s(f[2])}`},SGR:o=>{const f=o.action===0&&o.button!==4?"m":"M";return`\x1B[<${v(o,!0)};${o.col};${o.row}${f}`},SGR_PIXELS:o=>{const f=o.action===0&&o.button!==4?"m":"M";return`\x1B[<${v(o,!0)};${o.x};${o.y}${f}`}};let n=i.CoreMouseService=class extends C.Disposable{constructor(o,f){super(),this._bufferService=o,this._coreService=f,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._lastEvent=null,this._onProtocolChange=this.register(new g.EventEmitter),this.onProtocolChange=this._onProtocolChange.event;for(const m of Object.keys(y))this.addProtocol(m,y[m]);for(const m of Object.keys(a))this.addEncoding(m,a[m]);this.reset()}addProtocol(o,f){this._protocols[o]=f}addEncoding(o,f){this._encodings[o]=f}get activeProtocol(){return this._activeProtocol}get areMouseEventsActive(){return this._protocols[this._activeProtocol].events!==0}set activeProtocol(o){if(!this._protocols[o])throw new Error(`unknown protocol "${o}"`);this._activeProtocol=o,this._onProtocolChange.fire(this._protocols[o].events)}get activeEncoding(){return this._activeEncoding}set activeEncoding(o){if(!this._encodings[o])throw new Error(`unknown encoding "${o}"`);this._activeEncoding=o}reset(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null}triggerMouseEvent(o){if(o.col<0||o.col>=this._bufferService.cols||o.row<0||o.row>=this._bufferService.rows||o.button===4&&o.action===32||o.button===3&&o.action!==32||o.button!==4&&(o.action===2||o.action===3)||(o.col++,o.row++,o.action===32&&this._lastEvent&&this._equalEvents(this._lastEvent,o,this._activeEncoding==="SGR_PIXELS"))||!this._protocols[this._activeProtocol].restrict(o))return!1;const f=this._encodings[this._activeEncoding](o);return f&&(this._activeEncoding==="DEFAULT"?this._coreService.triggerBinaryEvent(f):this._coreService.triggerDataEvent(f,!0)),this._lastEvent=o,!0}explainEvents(o){return{down:!!(1&o),up:!!(2&o),drag:!!(4&o),move:!!(8&o),wheel:!!(16&o)}}_equalEvents(o,f,m){if(m){if(o.x!==f.x||o.y!==f.y)return!1}else if(o.col!==f.col||o.row!==f.row)return!1;return o.button===f.button&&o.action===f.action&&o.ctrl===f.ctrl&&o.alt===f.alt&&o.shift===f.shift}};i.CoreMouseService=n=u([_(0,h.IBufferService),_(1,h.ICoreService)],n)},6975:function(b,i,l){var u=this&&this.__decorate||function(n,o,f,m){var w,R=arguments.length,p=R<3?o:m===null?m=Object.getOwnPropertyDescriptor(o,f):m;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")p=Reflect.decorate(n,o,f,m);else for(var E=n.length-1;E>=0;E--)(w=n[E])&&(p=(R<3?w(p):R>3?w(o,f,p):w(o,f))||p);return R>3&&p&&Object.defineProperty(o,f,p),p},_=this&&this.__param||function(n,o){return function(f,m){o(f,m,n)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CoreService=void 0;const h=l(1439),g=l(8460),C=l(844),y=l(2585),v=Object.freeze({insertMode:!1}),s=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,origin:!1,reverseWraparound:!1,sendFocus:!1,wraparound:!0});let a=i.CoreService=class extends C.Disposable{constructor(n,o,f){super(),this._bufferService=n,this._logService=o,this._optionsService=f,this.isCursorInitialized=!1,this.isCursorHidden=!1,this._onData=this.register(new g.EventEmitter),this.onData=this._onData.event,this._onUserInput=this.register(new g.EventEmitter),this.onUserInput=this._onUserInput.event,this._onBinary=this.register(new g.EventEmitter),this.onBinary=this._onBinary.event,this._onRequestScrollToBottom=this.register(new g.EventEmitter),this.onRequestScrollToBottom=this._onRequestScrollToBottom.event,this.modes=(0,h.clone)(v),this.decPrivateModes=(0,h.clone)(s)}reset(){this.modes=(0,h.clone)(v),this.decPrivateModes=(0,h.clone)(s)}triggerDataEvent(n,o=!1){if(this._optionsService.rawOptions.disableStdin)return;const f=this._bufferService.buffer;o&&this._optionsService.rawOptions.scrollOnUserInput&&f.ybase!==f.ydisp&&this._onRequestScrollToBottom.fire(),o&&this._onUserInput.fire(),this._logService.debug(`sending data "${n}"`,()=>n.split("").map(m=>m.charCodeAt(0))),this._onData.fire(n)}triggerBinaryEvent(n){this._optionsService.rawOptions.disableStdin||(this._logService.debug(`sending binary "${n}"`,()=>n.split("").map(o=>o.charCodeAt(0))),this._onBinary.fire(n))}};i.CoreService=a=u([_(0,y.IBufferService),_(1,y.ILogService),_(2,y.IOptionsService)],a)},9074:(b,i,l)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.DecorationService=void 0;const u=l(8055),_=l(8460),h=l(844),g=l(6106);let C=0,y=0;class v extends h.Disposable{get decorations(){return this._decorations.values()}constructor(){super(),this._decorations=new g.SortedList(n=>n==null?void 0:n.marker.line),this._onDecorationRegistered=this.register(new _.EventEmitter),this.onDecorationRegistered=this._onDecorationRegistered.event,this._onDecorationRemoved=this.register(new _.EventEmitter),this.onDecorationRemoved=this._onDecorationRemoved.event,this.register((0,h.toDisposable)(()=>this.reset()))}registerDecoration(n){if(n.marker.isDisposed)return;const o=new s(n);if(o){const f=o.marker.onDispose(()=>o.dispose());o.onDispose(()=>{o&&(this._decorations.delete(o)&&this._onDecorationRemoved.fire(o),f.dispose())}),this._decorations.insert(o),this._onDecorationRegistered.fire(o)}return o}reset(){for(const n of this._decorations.values())n.dispose();this._decorations.clear()}*getDecorationsAtCell(n,o,f){var m,w,R;let p=0,E=0;for(const k of this._decorations.getKeyIterator(o))p=(m=k.options.x)!==null&&m!==void 0?m:0,E=p+((w=k.options.width)!==null&&w!==void 0?w:1),n>=p&&n<E&&(!f||((R=k.options.layer)!==null&&R!==void 0?R:"bottom")===f)&&(yield k)}forEachDecorationAtCell(n,o,f,m){this._decorations.forEachByKey(o,w=>{var R,p,E;C=(R=w.options.x)!==null&&R!==void 0?R:0,y=C+((p=w.options.width)!==null&&p!==void 0?p:1),n>=C&&n<y&&(!f||((E=w.options.layer)!==null&&E!==void 0?E:"bottom")===f)&&m(w)})}}i.DecorationService=v;class s extends h.Disposable{get isDisposed(){return this._isDisposed}get backgroundColorRGB(){return this._cachedBg===null&&(this.options.backgroundColor?this._cachedBg=u.css.toColor(this.options.backgroundColor):this._cachedBg=void 0),this._cachedBg}get foregroundColorRGB(){return this._cachedFg===null&&(this.options.foregroundColor?this._cachedFg=u.css.toColor(this.options.foregroundColor):this._cachedFg=void 0),this._cachedFg}constructor(n){super(),this.options=n,this.onRenderEmitter=this.register(new _.EventEmitter),this.onRender=this.onRenderEmitter.event,this._onDispose=this.register(new _.EventEmitter),this.onDispose=this._onDispose.event,this._cachedBg=null,this._cachedFg=null,this.marker=n.marker,this.options.overviewRulerOptions&&!this.options.overviewRulerOptions.position&&(this.options.overviewRulerOptions.position="full")}dispose(){this._onDispose.fire(),super.dispose()}}},4348:(b,i,l)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.InstantiationService=i.ServiceCollection=void 0;const u=l(2585),_=l(8343);class h{constructor(...C){this._entries=new Map;for(const[y,v]of C)this.set(y,v)}set(C,y){const v=this._entries.get(C);return this._entries.set(C,y),v}forEach(C){for(const[y,v]of this._entries.entries())C(y,v)}has(C){return this._entries.has(C)}get(C){return this._entries.get(C)}}i.ServiceCollection=h,i.InstantiationService=class{constructor(){this._services=new h,this._services.set(u.IInstantiationService,this)}setService(g,C){this._services.set(g,C)}getService(g){return this._services.get(g)}createInstance(g,...C){const y=(0,_.getServiceDependencies)(g).sort((a,n)=>a.index-n.index),v=[];for(const a of y){const n=this._services.get(a.id);if(!n)throw new Error(`[createInstance] ${g.name} depends on UNKNOWN service ${a.id}.`);v.push(n)}const s=y.length>0?y[0].index:C.length;if(C.length!==s)throw new Error(`[createInstance] First service dependency of ${g.name} at position ${s+1} conflicts with ${C.length} static arguments`);return new g(...C,...v)}}},7866:function(b,i,l){var u=this&&this.__decorate||function(s,a,n,o){var f,m=arguments.length,w=m<3?a:o===null?o=Object.getOwnPropertyDescriptor(a,n):o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")w=Reflect.decorate(s,a,n,o);else for(var R=s.length-1;R>=0;R--)(f=s[R])&&(w=(m<3?f(w):m>3?f(a,n,w):f(a,n))||w);return m>3&&w&&Object.defineProperty(a,n,w),w},_=this&&this.__param||function(s,a){return function(n,o){a(n,o,s)}};Object.defineProperty(i,"__esModule",{value:!0}),i.traceCall=i.setTraceLogger=i.LogService=void 0;const h=l(844),g=l(2585),C={trace:g.LogLevelEnum.TRACE,debug:g.LogLevelEnum.DEBUG,info:g.LogLevelEnum.INFO,warn:g.LogLevelEnum.WARN,error:g.LogLevelEnum.ERROR,off:g.LogLevelEnum.OFF};let y,v=i.LogService=class extends h.Disposable{get logLevel(){return this._logLevel}constructor(s){super(),this._optionsService=s,this._logLevel=g.LogLevelEnum.OFF,this._updateLogLevel(),this.register(this._optionsService.onSpecificOptionChange("logLevel",()=>this._updateLogLevel())),y=this}_updateLogLevel(){this._logLevel=C[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(s){for(let a=0;a<s.length;a++)typeof s[a]=="function"&&(s[a]=s[a]())}_log(s,a,n){this._evalLazyOptionalParams(n),s.call(console,(this._optionsService.options.logger?"":"xterm.js: ")+a,...n)}trace(s,...a){var n,o;this._logLevel<=g.LogLevelEnum.TRACE&&this._log((o=(n=this._optionsService.options.logger)===null||n===void 0?void 0:n.trace.bind(this._optionsService.options.logger))!==null&&o!==void 0?o:console.log,s,a)}debug(s,...a){var n,o;this._logLevel<=g.LogLevelEnum.DEBUG&&this._log((o=(n=this._optionsService.options.logger)===null||n===void 0?void 0:n.debug.bind(this._optionsService.options.logger))!==null&&o!==void 0?o:console.log,s,a)}info(s,...a){var n,o;this._logLevel<=g.LogLevelEnum.INFO&&this._log((o=(n=this._optionsService.options.logger)===null||n===void 0?void 0:n.info.bind(this._optionsService.options.logger))!==null&&o!==void 0?o:console.info,s,a)}warn(s,...a){var n,o;this._logLevel<=g.LogLevelEnum.WARN&&this._log((o=(n=this._optionsService.options.logger)===null||n===void 0?void 0:n.warn.bind(this._optionsService.options.logger))!==null&&o!==void 0?o:console.warn,s,a)}error(s,...a){var n,o;this._logLevel<=g.LogLevelEnum.ERROR&&this._log((o=(n=this._optionsService.options.logger)===null||n===void 0?void 0:n.error.bind(this._optionsService.options.logger))!==null&&o!==void 0?o:console.error,s,a)}};i.LogService=v=u([_(0,g.IOptionsService)],v),i.setTraceLogger=function(s){y=s},i.traceCall=function(s,a,n){if(typeof n.value!="function")throw new Error("not supported");const o=n.value;n.value=function(...f){if(y.logLevel!==g.LogLevelEnum.TRACE)return o.apply(this,f);y.trace(`GlyphRenderer#${o.name}(${f.map(w=>JSON.stringify(w)).join(", ")})`);const m=o.apply(this,f);return y.trace(`GlyphRenderer#${o.name} return`,m),m}}},7302:(b,i,l)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.OptionsService=i.DEFAULT_OPTIONS=void 0;const u=l(8460),_=l(844),h=l(6114);i.DEFAULT_OPTIONS={cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,cursorInactiveStyle:"outline",customGlyphs:!0,drawBoldTextInBrightColors:!0,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"courier-new, courier, monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",ignoreBracketedPasteMode:!1,lineHeight:1,letterSpacing:0,linkHandler:null,logLevel:"info",logger:null,scrollback:1e3,scrollOnUserInput:!0,scrollSensitivity:1,screenReaderMode:!1,smoothScrollDuration:0,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!1,allowTransparency:!1,tabStopWidth:8,theme:{},rightClickSelectsWord:h.isMac,windowOptions:{},windowsMode:!1,windowsPty:{},wordSeparator:" ()[]{}',\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1,overviewRulerWidth:0};const g=["normal","bold","100","200","300","400","500","600","700","800","900"];class C extends _.Disposable{constructor(v){super(),this._onOptionChange=this.register(new u.EventEmitter),this.onOptionChange=this._onOptionChange.event;const s=Object.assign({},i.DEFAULT_OPTIONS);for(const a in v)if(a in s)try{const n=v[a];s[a]=this._sanitizeAndValidateOption(a,n)}catch(n){console.error(n)}this.rawOptions=s,this.options=Object.assign({},s),this._setupOptions()}onSpecificOptionChange(v,s){return this.onOptionChange(a=>{a===v&&s(this.rawOptions[v])})}onMultipleOptionChange(v,s){return this.onOptionChange(a=>{v.indexOf(a)!==-1&&s()})}_setupOptions(){const v=a=>{if(!(a in i.DEFAULT_OPTIONS))throw new Error(`No option with key "${a}"`);return this.rawOptions[a]},s=(a,n)=>{if(!(a in i.DEFAULT_OPTIONS))throw new Error(`No option with key "${a}"`);n=this._sanitizeAndValidateOption(a,n),this.rawOptions[a]!==n&&(this.rawOptions[a]=n,this._onOptionChange.fire(a))};for(const a in this.rawOptions){const n={get:v.bind(this,a),set:s.bind(this,a)};Object.defineProperty(this.options,a,n)}}_sanitizeAndValidateOption(v,s){switch(v){case"cursorStyle":if(s||(s=i.DEFAULT_OPTIONS[v]),!function(a){return a==="block"||a==="underline"||a==="bar"}(s))throw new Error(`"${s}" is not a valid value for ${v}`);break;case"wordSeparator":s||(s=i.DEFAULT_OPTIONS[v]);break;case"fontWeight":case"fontWeightBold":if(typeof s=="number"&&1<=s&&s<=1e3)break;s=g.includes(s)?s:i.DEFAULT_OPTIONS[v];break;case"cursorWidth":s=Math.floor(s);case"lineHeight":case"tabStopWidth":if(s<1)throw new Error(`${v} cannot be less than 1, value: ${s}`);break;case"minimumContrastRatio":s=Math.max(1,Math.min(21,Math.round(10*s)/10));break;case"scrollback":if((s=Math.min(s,4294967295))<0)throw new Error(`${v} cannot be less than 0, value: ${s}`);break;case"fastScrollSensitivity":case"scrollSensitivity":if(s<=0)throw new Error(`${v} cannot be less than or equal to 0, value: ${s}`);break;case"rows":case"cols":if(!s&&s!==0)throw new Error(`${v} must be numeric, value: ${s}`);break;case"windowsPty":s=s??{}}return s}}i.OptionsService=C},2660:function(b,i,l){var u=this&&this.__decorate||function(C,y,v,s){var a,n=arguments.length,o=n<3?y:s===null?s=Object.getOwnPropertyDescriptor(y,v):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(C,y,v,s);else for(var f=C.length-1;f>=0;f--)(a=C[f])&&(o=(n<3?a(o):n>3?a(y,v,o):a(y,v))||o);return n>3&&o&&Object.defineProperty(y,v,o),o},_=this&&this.__param||function(C,y){return function(v,s){y(v,s,C)}};Object.defineProperty(i,"__esModule",{value:!0}),i.OscLinkService=void 0;const h=l(2585);let g=i.OscLinkService=class{constructor(C){this._bufferService=C,this._nextId=1,this._entriesWithId=new Map,this._dataByLinkId=new Map}registerLink(C){const y=this._bufferService.buffer;if(C.id===void 0){const f=y.addMarker(y.ybase+y.y),m={data:C,id:this._nextId++,lines:[f]};return f.onDispose(()=>this._removeMarkerFromLink(m,f)),this._dataByLinkId.set(m.id,m),m.id}const v=C,s=this._getEntryIdKey(v),a=this._entriesWithId.get(s);if(a)return this.addLineToLink(a.id,y.ybase+y.y),a.id;const n=y.addMarker(y.ybase+y.y),o={id:this._nextId++,key:this._getEntryIdKey(v),data:v,lines:[n]};return n.onDispose(()=>this._removeMarkerFromLink(o,n)),this._entriesWithId.set(o.key,o),this._dataByLinkId.set(o.id,o),o.id}addLineToLink(C,y){const v=this._dataByLinkId.get(C);if(v&&v.lines.every(s=>s.line!==y)){const s=this._bufferService.buffer.addMarker(y);v.lines.push(s),s.onDispose(()=>this._removeMarkerFromLink(v,s))}}getLinkData(C){var y;return(y=this._dataByLinkId.get(C))===null||y===void 0?void 0:y.data}_getEntryIdKey(C){return`${C.id};;${C.uri}`}_removeMarkerFromLink(C,y){const v=C.lines.indexOf(y);v!==-1&&(C.lines.splice(v,1),C.lines.length===0&&(C.data.id!==void 0&&this._entriesWithId.delete(C.key),this._dataByLinkId.delete(C.id)))}};i.OscLinkService=g=u([_(0,h.IBufferService)],g)},8343:(b,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.createDecorator=i.getServiceDependencies=i.serviceRegistry=void 0;const l="di$target",u="di$dependencies";i.serviceRegistry=new Map,i.getServiceDependencies=function(_){return _[u]||[]},i.createDecorator=function(_){if(i.serviceRegistry.has(_))return i.serviceRegistry.get(_);const h=function(g,C,y){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");(function(v,s,a){s[l]===s?s[u].push({id:v,index:a}):(s[u]=[{id:v,index:a}],s[l]=s)})(h,g,y)};return h.toString=()=>_,i.serviceRegistry.set(_,h),h}},2585:(b,i,l)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.IDecorationService=i.IUnicodeService=i.IOscLinkService=i.IOptionsService=i.ILogService=i.LogLevelEnum=i.IInstantiationService=i.ICharsetService=i.ICoreService=i.ICoreMouseService=i.IBufferService=void 0;const u=l(8343);var _;i.IBufferService=(0,u.createDecorator)("BufferService"),i.ICoreMouseService=(0,u.createDecorator)("CoreMouseService"),i.ICoreService=(0,u.createDecorator)("CoreService"),i.ICharsetService=(0,u.createDecorator)("CharsetService"),i.IInstantiationService=(0,u.createDecorator)("InstantiationService"),function(h){h[h.TRACE=0]="TRACE",h[h.DEBUG=1]="DEBUG",h[h.INFO=2]="INFO",h[h.WARN=3]="WARN",h[h.ERROR=4]="ERROR",h[h.OFF=5]="OFF"}(_||(i.LogLevelEnum=_={})),i.ILogService=(0,u.createDecorator)("LogService"),i.IOptionsService=(0,u.createDecorator)("OptionsService"),i.IOscLinkService=(0,u.createDecorator)("OscLinkService"),i.IUnicodeService=(0,u.createDecorator)("UnicodeService"),i.IDecorationService=(0,u.createDecorator)("DecorationService")},1480:(b,i,l)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.UnicodeService=void 0;const u=l(8460),_=l(225);i.UnicodeService=class{constructor(){this._providers=Object.create(null),this._active="",this._onChange=new u.EventEmitter,this.onChange=this._onChange.event;const h=new _.UnicodeV6;this.register(h),this._active=h.version,this._activeProvider=h}dispose(){this._onChange.dispose()}get versions(){return Object.keys(this._providers)}get activeVersion(){return this._active}set activeVersion(h){if(!this._providers[h])throw new Error(`unknown Unicode version "${h}"`);this._active=h,this._activeProvider=this._providers[h],this._onChange.fire(h)}register(h){this._providers[h.version]=h}wcwidth(h){return this._activeProvider.wcwidth(h)}getStringCellWidth(h){let g=0;const C=h.length;for(let y=0;y<C;++y){let v=h.charCodeAt(y);if(55296<=v&&v<=56319){if(++y>=C)return g+this.wcwidth(v);const s=h.charCodeAt(y);56320<=s&&s<=57343?v=1024*(v-55296)+s-56320+65536:g+=this.wcwidth(s)}g+=this.wcwidth(v)}return g}}}},c={};function d(b){var i=c[b];if(i!==void 0)return i.exports;var l=c[b]={exports:{}};return r[b].call(l.exports,l,l.exports,d),l.exports}var S={};return(()=>{var b=S;Object.defineProperty(b,"__esModule",{value:!0}),b.Terminal=void 0;const i=d(9042),l=d(3236),u=d(844),_=d(5741),h=d(8285),g=d(7975),C=d(7090),y=["cols","rows"];class v extends u.Disposable{constructor(a){super(),this._core=this.register(new l.Terminal(a)),this._addonManager=this.register(new _.AddonManager),this._publicOptions=Object.assign({},this._core.options);const n=f=>this._core.options[f],o=(f,m)=>{this._checkReadonlyOptions(f),this._core.options[f]=m};for(const f in this._core.options){const m={get:n.bind(this,f),set:o.bind(this,f)};Object.defineProperty(this._publicOptions,f,m)}}_checkReadonlyOptions(a){if(y.includes(a))throw new Error(`Option "${a}" can only be set in the constructor`)}_checkProposedApi(){if(!this._core.optionsService.rawOptions.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")}get onBell(){return this._core.onBell}get onBinary(){return this._core.onBinary}get onCursorMove(){return this._core.onCursorMove}get onData(){return this._core.onData}get onKey(){return this._core.onKey}get onLineFeed(){return this._core.onLineFeed}get onRender(){return this._core.onRender}get onResize(){return this._core.onResize}get onScroll(){return this._core.onScroll}get onSelectionChange(){return this._core.onSelectionChange}get onTitleChange(){return this._core.onTitleChange}get onWriteParsed(){return this._core.onWriteParsed}get element(){return this._core.element}get parser(){return this._parser||(this._parser=new g.ParserApi(this._core)),this._parser}get unicode(){return this._checkProposedApi(),new C.UnicodeApi(this._core)}get textarea(){return this._core.textarea}get rows(){return this._core.rows}get cols(){return this._core.cols}get buffer(){return this._buffer||(this._buffer=this.register(new h.BufferNamespaceApi(this._core))),this._buffer}get markers(){return this._checkProposedApi(),this._core.markers}get modes(){const a=this._core.coreService.decPrivateModes;let n="none";switch(this._core.coreMouseService.activeProtocol){case"X10":n="x10";break;case"VT200":n="vt200";break;case"DRAG":n="drag";break;case"ANY":n="any"}return{applicationCursorKeysMode:a.applicationCursorKeys,applicationKeypadMode:a.applicationKeypad,bracketedPasteMode:a.bracketedPasteMode,insertMode:this._core.coreService.modes.insertMode,mouseTrackingMode:n,originMode:a.origin,reverseWraparoundMode:a.reverseWraparound,sendFocusMode:a.sendFocus,wraparoundMode:a.wraparound}}get options(){return this._publicOptions}set options(a){for(const n in a)this._publicOptions[n]=a[n]}blur(){this._core.blur()}focus(){this._core.focus()}resize(a,n){this._verifyIntegers(a,n),this._core.resize(a,n)}open(a){this._core.open(a)}attachCustomKeyEventHandler(a){this._core.attachCustomKeyEventHandler(a)}registerLinkProvider(a){return this._core.registerLinkProvider(a)}registerCharacterJoiner(a){return this._checkProposedApi(),this._core.registerCharacterJoiner(a)}deregisterCharacterJoiner(a){this._checkProposedApi(),this._core.deregisterCharacterJoiner(a)}registerMarker(a=0){return this._verifyIntegers(a),this._core.registerMarker(a)}registerDecoration(a){var n,o,f;return this._checkProposedApi(),this._verifyPositiveIntegers((n=a.x)!==null&&n!==void 0?n:0,(o=a.width)!==null&&o!==void 0?o:0,(f=a.height)!==null&&f!==void 0?f:0),this._core.registerDecoration(a)}hasSelection(){return this._core.hasSelection()}select(a,n,o){this._verifyIntegers(a,n,o),this._core.select(a,n,o)}getSelection(){return this._core.getSelection()}getSelectionPosition(){return this._core.getSelectionPosition()}clearSelection(){this._core.clearSelection()}selectAll(){this._core.selectAll()}selectLines(a,n){this._verifyIntegers(a,n),this._core.selectLines(a,n)}dispose(){super.dispose()}scrollLines(a){this._verifyIntegers(a),this._core.scrollLines(a)}scrollPages(a){this._verifyIntegers(a),this._core.scrollPages(a)}scrollToTop(){this._core.scrollToTop()}scrollToBottom(){this._core.scrollToBottom()}scrollToLine(a){this._verifyIntegers(a),this._core.scrollToLine(a)}clear(){this._core.clear()}write(a,n){this._core.write(a,n)}writeln(a,n){this._core.write(a),this._core.write(`\r
`,n)}paste(a){this._core.paste(a)}refresh(a,n){this._verifyIntegers(a,n),this._core.refresh(a,n)}reset(){this._core.reset()}clearTextureAtlas(){this._core.clearTextureAtlas()}loadAddon(a){this._addonManager.loadAddon(this,a)}static get strings(){return i}_verifyIntegers(...a){for(const n of a)if(n===1/0||isNaN(n)||n%1!=0)throw new Error("This API only accepts integers")}_verifyPositiveIntegers(...a){for(const n of a)if(n&&(n===1/0||isNaN(n)||n%1!=0||n<0))throw new Error("This API only accepts positive integers")}}b.Terminal=v})(),S})())})(fn);var cl=fn.exports;function pn(e,t){return function(){return e.apply(t,arguments)}}const{toString:hl}=Object.prototype,{getPrototypeOf:Cs}=Object,vi=(e=>t=>{const r=hl.call(t);return e[r]||(e[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),Ke=e=>(e=e.toLowerCase(),t=>vi(t)===e),mi=e=>t=>typeof t===e,{isArray:Ct}=Array,It=mi("undefined");function ul(e){return e!==null&&!It(e)&&e.constructor!==null&&!It(e.constructor)&&Pe(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const gn=Ke("ArrayBuffer");function dl(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&gn(e.buffer),t}const fl=mi("string"),Pe=mi("function"),vn=mi("number"),Si=e=>e!==null&&typeof e=="object",_l=e=>e===!0||e===!1,Yt=e=>{if(vi(e)!=="object")return!1;const t=Cs(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},pl=Ke("Date"),gl=Ke("File"),vl=Ke("Blob"),ml=Ke("FileList"),Sl=e=>Si(e)&&Pe(e.pipe),bl=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||Pe(e.append)&&((t=vi(e))==="formdata"||t==="object"&&Pe(e.toString)&&e.toString()==="[object FormData]"))},Cl=Ke("URLSearchParams"),yl=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Ft(e,t,{allOwnKeys:r=!1}={}){if(e===null||typeof e>"u")return;let c,d;if(typeof e!="object"&&(e=[e]),Ct(e))for(c=0,d=e.length;c<d;c++)t.call(null,e[c],c,e);else{const S=r?Object.getOwnPropertyNames(e):Object.keys(e),b=S.length;let i;for(c=0;c<b;c++)i=S[c],t.call(null,e[i],i,e)}}function mn(e,t){t=t.toLowerCase();const r=Object.keys(e);let c=r.length,d;for(;c-- >0;)if(d=r[c],t===d.toLowerCase())return d;return null}const Sn=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,bn=e=>!It(e)&&e!==Sn;function Ji(){const{caseless:e}=bn(this)&&this||{},t={},r=(c,d)=>{const S=e&&mn(t,d)||d;Yt(t[S])&&Yt(c)?t[S]=Ji(t[S],c):Yt(c)?t[S]=Ji({},c):Ct(c)?t[S]=c.slice():t[S]=c};for(let c=0,d=arguments.length;c<d;c++)arguments[c]&&Ft(arguments[c],r);return t}const wl=(e,t,r,{allOwnKeys:c}={})=>(Ft(t,(d,S)=>{r&&Pe(d)?e[S]=pn(d,r):e[S]=d},{allOwnKeys:c}),e),El=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),xl=(e,t,r,c)=>{e.prototype=Object.create(t.prototype,c),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),r&&Object.assign(e.prototype,r)},Rl=(e,t,r,c)=>{let d,S,b;const i={};if(t=t||{},e==null)return t;do{for(d=Object.getOwnPropertyNames(e),S=d.length;S-- >0;)b=d[S],(!c||c(b,e,t))&&!i[b]&&(t[b]=e[b],i[b]=!0);e=r!==!1&&Cs(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype);return t},Ll=(e,t,r)=>{e=String(e),(r===void 0||r>e.length)&&(r=e.length),r-=t.length;const c=e.indexOf(t,r);return c!==-1&&c===r},kl=e=>{if(!e)return null;if(Ct(e))return e;let t=e.length;if(!vn(t))return null;const r=new Array(t);for(;t-- >0;)r[t]=e[t];return r},Al=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&Cs(Uint8Array)),Dl=(e,t)=>{const c=(e&&e[Symbol.iterator]).call(e);let d;for(;(d=c.next())&&!d.done;){const S=d.value;t.call(e,S[0],S[1])}},Tl=(e,t)=>{let r;const c=[];for(;(r=e.exec(t))!==null;)c.push(r);return c},Bl=Ke("HTMLFormElement"),Ol=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,c,d){return c.toUpperCase()+d}),hr=(({hasOwnProperty:e})=>(t,r)=>e.call(t,r))(Object.prototype),Ml=Ke("RegExp"),Cn=(e,t)=>{const r=Object.getOwnPropertyDescriptors(e),c={};Ft(r,(d,S)=>{let b;(b=t(d,S,e))!==!1&&(c[S]=b||d)}),Object.defineProperties(e,c)},Pl=e=>{Cn(e,(t,r)=>{if(Pe(e)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const c=e[r];if(Pe(c)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},Il=(e,t)=>{const r={},c=d=>{d.forEach(S=>{r[S]=!0})};return Ct(e)?c(e):c(String(e).split(t)),r},Hl=()=>{},Fl=(e,t)=>(e=+e,Number.isFinite(e)?e:t),Bi="abcdefghijklmnopqrstuvwxyz",ur="0123456789",yn={DIGIT:ur,ALPHA:Bi,ALPHA_DIGIT:Bi+Bi.toUpperCase()+ur},Nl=(e=16,t=yn.ALPHA_DIGIT)=>{let r="";const{length:c}=t;for(;e--;)r+=t[Math.random()*c|0];return r};function Ul(e){return!!(e&&Pe(e.append)&&e[Symbol.toStringTag]==="FormData"&&e[Symbol.iterator])}const Wl=e=>{const t=new Array(10),r=(c,d)=>{if(Si(c)){if(t.indexOf(c)>=0)return;if(!("toJSON"in c)){t[d]=c;const S=Ct(c)?[]:{};return Ft(c,(b,i)=>{const l=r(b,d+1);!It(l)&&(S[i]=l)}),t[d]=void 0,S}}return c};return r(e,0)},jl=Ke("AsyncFunction"),$l=e=>e&&(Si(e)||Pe(e))&&Pe(e.then)&&Pe(e.catch),z={isArray:Ct,isArrayBuffer:gn,isBuffer:ul,isFormData:bl,isArrayBufferView:dl,isString:fl,isNumber:vn,isBoolean:_l,isObject:Si,isPlainObject:Yt,isUndefined:It,isDate:pl,isFile:gl,isBlob:vl,isRegExp:Ml,isFunction:Pe,isStream:Sl,isURLSearchParams:Cl,isTypedArray:Al,isFileList:ml,forEach:Ft,merge:Ji,extend:wl,trim:yl,stripBOM:El,inherits:xl,toFlatObject:Rl,kindOf:vi,kindOfTest:Ke,endsWith:Ll,toArray:kl,forEachEntry:Dl,matchAll:Tl,isHTMLForm:Bl,hasOwnProperty:hr,hasOwnProp:hr,reduceDescriptors:Cn,freezeMethods:Pl,toObjectSet:Il,toCamelCase:Ol,noop:Hl,toFiniteNumber:Fl,findKey:mn,global:Sn,isContextDefined:bn,ALPHABET:yn,generateString:Nl,isSpecCompliantForm:Ul,toJSONObject:Wl,isAsyncFn:jl,isThenable:$l};function fe(e,t,r,c,d){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),r&&(this.config=r),c&&(this.request=c),d&&(this.response=d)}z.inherits(fe,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:z.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const wn=fe.prototype,En={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{En[e]={value:e}});Object.defineProperties(fe,En);Object.defineProperty(wn,"isAxiosError",{value:!0});fe.from=(e,t,r,c,d,S)=>{const b=Object.create(wn);return z.toFlatObject(e,b,function(l){return l!==Error.prototype},i=>i!=="isAxiosError"),fe.call(b,e.message,t,r,c,d),b.cause=e,b.name=e.name,S&&Object.assign(b,S),b};const zl=null;function Yi(e){return z.isPlainObject(e)||z.isArray(e)}function xn(e){return z.endsWith(e,"[]")?e.slice(0,-2):e}function dr(e,t,r){return e?e.concat(t).map(function(d,S){return d=xn(d),!r&&S?"["+d+"]":d}).join(r?".":""):t}function Kl(e){return z.isArray(e)&&!e.some(Yi)}const ql=z.toFlatObject(z,{},null,function(t){return/^is[A-Z]/.test(t)});function bi(e,t,r){if(!z.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,r=z.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(v,s){return!z.isUndefined(s[v])});const c=r.metaTokens,d=r.visitor||_,S=r.dots,b=r.indexes,l=(r.Blob||typeof Blob<"u"&&Blob)&&z.isSpecCompliantForm(t);if(!z.isFunction(d))throw new TypeError("visitor must be a function");function u(y){if(y===null)return"";if(z.isDate(y))return y.toISOString();if(!l&&z.isBlob(y))throw new fe("Blob is not supported. Use a Buffer instead.");return z.isArrayBuffer(y)||z.isTypedArray(y)?l&&typeof Blob=="function"?new Blob([y]):Buffer.from(y):y}function _(y,v,s){let a=y;if(y&&!s&&typeof y=="object"){if(z.endsWith(v,"{}"))v=c?v:v.slice(0,-2),y=JSON.stringify(y);else if(z.isArray(y)&&Kl(y)||(z.isFileList(y)||z.endsWith(v,"[]"))&&(a=z.toArray(y)))return v=xn(v),a.forEach(function(o,f){!(z.isUndefined(o)||o===null)&&t.append(b===!0?dr([v],f,S):b===null?v:v+"[]",u(o))}),!1}return Yi(y)?!0:(t.append(dr(s,v,S),u(y)),!1)}const h=[],g=Object.assign(ql,{defaultVisitor:_,convertValue:u,isVisitable:Yi});function C(y,v){if(!z.isUndefined(y)){if(h.indexOf(y)!==-1)throw Error("Circular reference detected in "+v.join("."));h.push(y),z.forEach(y,function(a,n){(!(z.isUndefined(a)||a===null)&&d.call(t,a,z.isString(n)?n.trim():n,v,g))===!0&&C(a,v?v.concat(n):[n])}),h.pop()}}if(!z.isObject(e))throw new TypeError("data must be an object");return C(e),t}function fr(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(c){return t[c]})}function ys(e,t){this._pairs=[],e&&bi(e,this,t)}const Rn=ys.prototype;Rn.append=function(t,r){this._pairs.push([t,r])};Rn.toString=function(t){const r=t?function(c){return t.call(this,c,fr)}:fr;return this._pairs.map(function(d){return r(d[0])+"="+r(d[1])},"").join("&")};function Vl(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Ln(e,t,r){if(!t)return e;const c=r&&r.encode||Vl,d=r&&r.serialize;let S;if(d?S=d(t,r):S=z.isURLSearchParams(t)?t.toString():new ys(t,r).toString(c),S){const b=e.indexOf("#");b!==-1&&(e=e.slice(0,b)),e+=(e.indexOf("?")===-1?"?":"&")+S}return e}class _r{constructor(){this.handlers=[]}use(t,r,c){return this.handlers.push({fulfilled:t,rejected:r,synchronous:c?c.synchronous:!1,runWhen:c?c.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){z.forEach(this.handlers,function(c){c!==null&&t(c)})}}const kn={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Gl=typeof URLSearchParams<"u"?URLSearchParams:ys,Xl=typeof FormData<"u"?FormData:null,Jl=typeof Blob<"u"?Blob:null,Yl={isBrowser:!0,classes:{URLSearchParams:Gl,FormData:Xl,Blob:Jl},protocols:["http","https","file","blob","url","data"]},An=typeof window<"u"&&typeof document<"u",Zl=(e=>An&&["ReactNative","NativeScript","NS"].indexOf(e)<0)(typeof navigator<"u"&&navigator.product),Ql=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",ec=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:An,hasStandardBrowserEnv:Zl,hasStandardBrowserWebWorkerEnv:Ql},Symbol.toStringTag,{value:"Module"})),ze={...ec,...Yl};function tc(e,t){return bi(e,new ze.classes.URLSearchParams,Object.assign({visitor:function(r,c,d,S){return ze.isNode&&z.isBuffer(r)?(this.append(c,r.toString("base64")),!1):S.defaultVisitor.apply(this,arguments)}},t))}function ic(e){return z.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function sc(e){const t={},r=Object.keys(e);let c;const d=r.length;let S;for(c=0;c<d;c++)S=r[c],t[S]=e[S];return t}function Dn(e){function t(r,c,d,S){let b=r[S++];if(b==="__proto__")return!0;const i=Number.isFinite(+b),l=S>=r.length;return b=!b&&z.isArray(d)?d.length:b,l?(z.hasOwnProp(d,b)?d[b]=[d[b],c]:d[b]=c,!i):((!d[b]||!z.isObject(d[b]))&&(d[b]=[]),t(r,c,d[b],S)&&z.isArray(d[b])&&(d[b]=sc(d[b])),!i)}if(z.isFormData(e)&&z.isFunction(e.entries)){const r={};return z.forEachEntry(e,(c,d)=>{t(ic(c),d,r,0)}),r}return null}function rc(e,t,r){if(z.isString(e))try{return(t||JSON.parse)(e),z.trim(e)}catch(c){if(c.name!=="SyntaxError")throw c}return(r||JSON.stringify)(e)}const ws={transitional:kn,adapter:["xhr","http"],transformRequest:[function(t,r){const c=r.getContentType()||"",d=c.indexOf("application/json")>-1,S=z.isObject(t);if(S&&z.isHTMLForm(t)&&(t=new FormData(t)),z.isFormData(t))return d?JSON.stringify(Dn(t)):t;if(z.isArrayBuffer(t)||z.isBuffer(t)||z.isStream(t)||z.isFile(t)||z.isBlob(t))return t;if(z.isArrayBufferView(t))return t.buffer;if(z.isURLSearchParams(t))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let i;if(S){if(c.indexOf("application/x-www-form-urlencoded")>-1)return tc(t,this.formSerializer).toString();if((i=z.isFileList(t))||c.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return bi(i?{"files[]":t}:t,l&&new l,this.formSerializer)}}return S||d?(r.setContentType("application/json",!1),rc(t)):t}],transformResponse:[function(t){const r=this.transitional||ws.transitional,c=r&&r.forcedJSONParsing,d=this.responseType==="json";if(t&&z.isString(t)&&(c&&!this.responseType||d)){const b=!(r&&r.silentJSONParsing)&&d;try{return JSON.parse(t)}catch(i){if(b)throw i.name==="SyntaxError"?fe.from(i,fe.ERR_BAD_RESPONSE,this,null,this.response):i}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:ze.classes.FormData,Blob:ze.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};z.forEach(["delete","get","head","post","put","patch"],e=>{ws.headers[e]={}});const Es=ws,nc=z.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),oc=e=>{const t={};let r,c,d;return e&&e.split(`
`).forEach(function(b){d=b.indexOf(":"),r=b.substring(0,d).trim().toLowerCase(),c=b.substring(d+1).trim(),!(!r||t[r]&&nc[r])&&(r==="set-cookie"?t[r]?t[r].push(c):t[r]=[c]:t[r]=t[r]?t[r]+", "+c:c)}),t},pr=Symbol("internals");function Et(e){return e&&String(e).trim().toLowerCase()}function Zt(e){return e===!1||e==null?e:z.isArray(e)?e.map(Zt):String(e)}function ac(e){const t=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let c;for(;c=r.exec(e);)t[c[1]]=c[2];return t}const lc=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function Oi(e,t,r,c,d){if(z.isFunction(c))return c.call(this,t,r);if(d&&(t=r),!!z.isString(t)){if(z.isString(c))return t.indexOf(c)!==-1;if(z.isRegExp(c))return c.test(t)}}function cc(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,r,c)=>r.toUpperCase()+c)}function hc(e,t){const r=z.toCamelCase(" "+t);["get","set","has"].forEach(c=>{Object.defineProperty(e,c+r,{value:function(d,S,b){return this[c].call(this,t,d,S,b)},configurable:!0})})}class Ci{constructor(t){t&&this.set(t)}set(t,r,c){const d=this;function S(i,l,u){const _=Et(l);if(!_)throw new Error("header name must be a non-empty string");const h=z.findKey(d,_);(!h||d[h]===void 0||u===!0||u===void 0&&d[h]!==!1)&&(d[h||l]=Zt(i))}const b=(i,l)=>z.forEach(i,(u,_)=>S(u,_,l));return z.isPlainObject(t)||t instanceof this.constructor?b(t,r):z.isString(t)&&(t=t.trim())&&!lc(t)?b(oc(t),r):t!=null&&S(r,t,c),this}get(t,r){if(t=Et(t),t){const c=z.findKey(this,t);if(c){const d=this[c];if(!r)return d;if(r===!0)return ac(d);if(z.isFunction(r))return r.call(this,d,c);if(z.isRegExp(r))return r.exec(d);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,r){if(t=Et(t),t){const c=z.findKey(this,t);return!!(c&&this[c]!==void 0&&(!r||Oi(this,this[c],c,r)))}return!1}delete(t,r){const c=this;let d=!1;function S(b){if(b=Et(b),b){const i=z.findKey(c,b);i&&(!r||Oi(c,c[i],i,r))&&(delete c[i],d=!0)}}return z.isArray(t)?t.forEach(S):S(t),d}clear(t){const r=Object.keys(this);let c=r.length,d=!1;for(;c--;){const S=r[c];(!t||Oi(this,this[S],S,t,!0))&&(delete this[S],d=!0)}return d}normalize(t){const r=this,c={};return z.forEach(this,(d,S)=>{const b=z.findKey(c,S);if(b){r[b]=Zt(d),delete r[S];return}const i=t?cc(S):String(S).trim();i!==S&&delete r[S],r[i]=Zt(d),c[i]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const r=Object.create(null);return z.forEach(this,(c,d)=>{c!=null&&c!==!1&&(r[d]=t&&z.isArray(c)?c.join(", "):c)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,r])=>t+": "+r).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...r){const c=new this(t);return r.forEach(d=>c.set(d)),c}static accessor(t){const c=(this[pr]=this[pr]={accessors:{}}).accessors,d=this.prototype;function S(b){const i=Et(b);c[i]||(hc(d,b),c[i]=!0)}return z.isArray(t)?t.forEach(S):S(t),this}}Ci.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);z.reduceDescriptors(Ci.prototype,({value:e},t)=>{let r=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(c){this[r]=c}}});z.freezeMethods(Ci);const Ve=Ci;function Mi(e,t){const r=this||Es,c=t||r,d=Ve.from(c.headers);let S=c.data;return z.forEach(e,function(i){S=i.call(r,S,d.normalize(),t?t.status:void 0)}),d.normalize(),S}function Tn(e){return!!(e&&e.__CANCEL__)}function Nt(e,t,r){fe.call(this,e??"canceled",fe.ERR_CANCELED,t,r),this.name="CanceledError"}z.inherits(Nt,fe,{__CANCEL__:!0});function uc(e,t,r){const c=r.config.validateStatus;!r.status||!c||c(r.status)?e(r):t(new fe("Request failed with status code "+r.status,[fe.ERR_BAD_REQUEST,fe.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}const dc=ze.hasStandardBrowserEnv?{write(e,t,r,c,d,S){const b=[e+"="+encodeURIComponent(t)];z.isNumber(r)&&b.push("expires="+new Date(r).toGMTString()),z.isString(c)&&b.push("path="+c),z.isString(d)&&b.push("domain="+d),S===!0&&b.push("secure"),document.cookie=b.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function fc(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function _c(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function Bn(e,t){return e&&!fc(t)?_c(e,t):t}const pc=ze.hasStandardBrowserEnv?function(){const t=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a");let c;function d(S){let b=S;return t&&(r.setAttribute("href",b),b=r.href),r.setAttribute("href",b),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:r.pathname.charAt(0)==="/"?r.pathname:"/"+r.pathname}}return c=d(window.location.href),function(b){const i=z.isString(b)?d(b):b;return i.protocol===c.protocol&&i.host===c.host}}():function(){return function(){return!0}}();function gc(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function vc(e,t){e=e||10;const r=new Array(e),c=new Array(e);let d=0,S=0,b;return t=t!==void 0?t:1e3,function(l){const u=Date.now(),_=c[S];b||(b=u),r[d]=l,c[d]=u;let h=S,g=0;for(;h!==d;)g+=r[h++],h=h%e;if(d=(d+1)%e,d===S&&(S=(S+1)%e),u-b<t)return;const C=_&&u-_;return C?Math.round(g*1e3/C):void 0}}function gr(e,t){let r=0;const c=vc(50,250);return d=>{const S=d.loaded,b=d.lengthComputable?d.total:void 0,i=S-r,l=c(i),u=S<=b;r=S;const _={loaded:S,total:b,progress:b?S/b:void 0,bytes:i,rate:l||void 0,estimated:l&&b&&u?(b-S)/l:void 0,event:d};_[t?"download":"upload"]=!0,e(_)}}const mc=typeof XMLHttpRequest<"u",Sc=mc&&function(e){return new Promise(function(r,c){let d=e.data;const S=Ve.from(e.headers).normalize();let{responseType:b,withXSRFToken:i}=e,l;function u(){e.cancelToken&&e.cancelToken.unsubscribe(l),e.signal&&e.signal.removeEventListener("abort",l)}let _;if(z.isFormData(d)){if(ze.hasStandardBrowserEnv||ze.hasStandardBrowserWebWorkerEnv)S.setContentType(!1);else if((_=S.getContentType())!==!1){const[v,...s]=_?_.split(";").map(a=>a.trim()).filter(Boolean):[];S.setContentType([v||"multipart/form-data",...s].join("; "))}}let h=new XMLHttpRequest;if(e.auth){const v=e.auth.username||"",s=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";S.set("Authorization","Basic "+btoa(v+":"+s))}const g=Bn(e.baseURL,e.url);h.open(e.method.toUpperCase(),Ln(g,e.params,e.paramsSerializer),!0),h.timeout=e.timeout;function C(){if(!h)return;const v=Ve.from("getAllResponseHeaders"in h&&h.getAllResponseHeaders()),a={data:!b||b==="text"||b==="json"?h.responseText:h.response,status:h.status,statusText:h.statusText,headers:v,config:e,request:h};uc(function(o){r(o),u()},function(o){c(o),u()},a),h=null}if("onloadend"in h?h.onloadend=C:h.onreadystatechange=function(){!h||h.readyState!==4||h.status===0&&!(h.responseURL&&h.responseURL.indexOf("file:")===0)||setTimeout(C)},h.onabort=function(){h&&(c(new fe("Request aborted",fe.ECONNABORTED,e,h)),h=null)},h.onerror=function(){c(new fe("Network Error",fe.ERR_NETWORK,e,h)),h=null},h.ontimeout=function(){let s=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded";const a=e.transitional||kn;e.timeoutErrorMessage&&(s=e.timeoutErrorMessage),c(new fe(s,a.clarifyTimeoutError?fe.ETIMEDOUT:fe.ECONNABORTED,e,h)),h=null},ze.hasStandardBrowserEnv&&(i&&z.isFunction(i)&&(i=i(e)),i||i!==!1&&pc(g))){const v=e.xsrfHeaderName&&e.xsrfCookieName&&dc.read(e.xsrfCookieName);v&&S.set(e.xsrfHeaderName,v)}d===void 0&&S.setContentType(null),"setRequestHeader"in h&&z.forEach(S.toJSON(),function(s,a){h.setRequestHeader(a,s)}),z.isUndefined(e.withCredentials)||(h.withCredentials=!!e.withCredentials),b&&b!=="json"&&(h.responseType=e.responseType),typeof e.onDownloadProgress=="function"&&h.addEventListener("progress",gr(e.onDownloadProgress,!0)),typeof e.onUploadProgress=="function"&&h.upload&&h.upload.addEventListener("progress",gr(e.onUploadProgress)),(e.cancelToken||e.signal)&&(l=v=>{h&&(c(!v||v.type?new Nt(null,e,h):v),h.abort(),h=null)},e.cancelToken&&e.cancelToken.subscribe(l),e.signal&&(e.signal.aborted?l():e.signal.addEventListener("abort",l)));const y=gc(g);if(y&&ze.protocols.indexOf(y)===-1){c(new fe("Unsupported protocol "+y+":",fe.ERR_BAD_REQUEST,e));return}h.send(d||null)})},Zi={http:zl,xhr:Sc};z.forEach(Zi,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const vr=e=>`- ${e}`,bc=e=>z.isFunction(e)||e===null||e===!1,On={getAdapter:e=>{e=z.isArray(e)?e:[e];const{length:t}=e;let r,c;const d={};for(let S=0;S<t;S++){r=e[S];let b;if(c=r,!bc(r)&&(c=Zi[(b=String(r)).toLowerCase()],c===void 0))throw new fe(`Unknown adapter '${b}'`);if(c)break;d[b||"#"+S]=c}if(!c){const S=Object.entries(d).map(([i,l])=>`adapter ${i} `+(l===!1?"is not supported by the environment":"is not available in the build"));let b=t?S.length>1?`since :
`+S.map(vr).join(`
`):" "+vr(S[0]):"as no adapter specified";throw new fe("There is no suitable adapter to dispatch the request "+b,"ERR_NOT_SUPPORT")}return c},adapters:Zi};function Pi(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Nt(null,e)}function mr(e){return Pi(e),e.headers=Ve.from(e.headers),e.data=Mi.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),On.getAdapter(e.adapter||Es.adapter)(e).then(function(c){return Pi(e),c.data=Mi.call(e,e.transformResponse,c),c.headers=Ve.from(c.headers),c},function(c){return Tn(c)||(Pi(e),c&&c.response&&(c.response.data=Mi.call(e,e.transformResponse,c.response),c.response.headers=Ve.from(c.response.headers))),Promise.reject(c)})}const Sr=e=>e instanceof Ve?e.toJSON():e;function St(e,t){t=t||{};const r={};function c(u,_,h){return z.isPlainObject(u)&&z.isPlainObject(_)?z.merge.call({caseless:h},u,_):z.isPlainObject(_)?z.merge({},_):z.isArray(_)?_.slice():_}function d(u,_,h){if(z.isUndefined(_)){if(!z.isUndefined(u))return c(void 0,u,h)}else return c(u,_,h)}function S(u,_){if(!z.isUndefined(_))return c(void 0,_)}function b(u,_){if(z.isUndefined(_)){if(!z.isUndefined(u))return c(void 0,u)}else return c(void 0,_)}function i(u,_,h){if(h in t)return c(u,_);if(h in e)return c(void 0,u)}const l={url:S,method:S,data:S,baseURL:b,transformRequest:b,transformResponse:b,paramsSerializer:b,timeout:b,timeoutMessage:b,withCredentials:b,withXSRFToken:b,adapter:b,responseType:b,xsrfCookieName:b,xsrfHeaderName:b,onUploadProgress:b,onDownloadProgress:b,decompress:b,maxContentLength:b,maxBodyLength:b,beforeRedirect:b,transport:b,httpAgent:b,httpsAgent:b,cancelToken:b,socketPath:b,responseEncoding:b,validateStatus:i,headers:(u,_)=>d(Sr(u),Sr(_),!0)};return z.forEach(Object.keys(Object.assign({},e,t)),function(_){const h=l[_]||d,g=h(e[_],t[_],_);z.isUndefined(g)&&h!==i||(r[_]=g)}),r}const Mn="1.6.7",xs={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{xs[e]=function(c){return typeof c===e||"a"+(t<1?"n ":" ")+e}});const br={};xs.transitional=function(t,r,c){function d(S,b){return"[Axios v"+Mn+"] Transitional option '"+S+"'"+b+(c?". "+c:"")}return(S,b,i)=>{if(t===!1)throw new fe(d(b," has been removed"+(r?" in "+r:"")),fe.ERR_DEPRECATED);return r&&!br[b]&&(br[b]=!0,console.warn(d(b," has been deprecated since v"+r+" and will be removed in the near future"))),t?t(S,b,i):!0}};function Cc(e,t,r){if(typeof e!="object")throw new fe("options must be an object",fe.ERR_BAD_OPTION_VALUE);const c=Object.keys(e);let d=c.length;for(;d-- >0;){const S=c[d],b=t[S];if(b){const i=e[S],l=i===void 0||b(i,S,e);if(l!==!0)throw new fe("option "+S+" must be "+l,fe.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new fe("Unknown option "+S,fe.ERR_BAD_OPTION)}}const Qi={assertOptions:Cc,validators:xs},Je=Qi.validators;class ri{constructor(t){this.defaults=t,this.interceptors={request:new _r,response:new _r}}async request(t,r){try{return await this._request(t,r)}catch(c){if(c instanceof Error){let d;Error.captureStackTrace?Error.captureStackTrace(d={}):d=new Error;const S=d.stack?d.stack.replace(/^.+\n/,""):"";c.stack?S&&!String(c.stack).endsWith(S.replace(/^.+\n.+\n/,""))&&(c.stack+=`
`+S):c.stack=S}throw c}}_request(t,r){typeof t=="string"?(r=r||{},r.url=t):r=t||{},r=St(this.defaults,r);const{transitional:c,paramsSerializer:d,headers:S}=r;c!==void 0&&Qi.assertOptions(c,{silentJSONParsing:Je.transitional(Je.boolean),forcedJSONParsing:Je.transitional(Je.boolean),clarifyTimeoutError:Je.transitional(Je.boolean)},!1),d!=null&&(z.isFunction(d)?r.paramsSerializer={serialize:d}:Qi.assertOptions(d,{encode:Je.function,serialize:Je.function},!0)),r.method=(r.method||this.defaults.method||"get").toLowerCase();let b=S&&z.merge(S.common,S[r.method]);S&&z.forEach(["delete","get","head","post","put","patch","common"],y=>{delete S[y]}),r.headers=Ve.concat(b,S);const i=[];let l=!0;this.interceptors.request.forEach(function(v){typeof v.runWhen=="function"&&v.runWhen(r)===!1||(l=l&&v.synchronous,i.unshift(v.fulfilled,v.rejected))});const u=[];this.interceptors.response.forEach(function(v){u.push(v.fulfilled,v.rejected)});let _,h=0,g;if(!l){const y=[mr.bind(this),void 0];for(y.unshift.apply(y,i),y.push.apply(y,u),g=y.length,_=Promise.resolve(r);h<g;)_=_.then(y[h++],y[h++]);return _}g=i.length;let C=r;for(h=0;h<g;){const y=i[h++],v=i[h++];try{C=y(C)}catch(s){v.call(this,s);break}}try{_=mr.call(this,C)}catch(y){return Promise.reject(y)}for(h=0,g=u.length;h<g;)_=_.then(u[h++],u[h++]);return _}getUri(t){t=St(this.defaults,t);const r=Bn(t.baseURL,t.url);return Ln(r,t.params,t.paramsSerializer)}}z.forEach(["delete","get","head","options"],function(t){ri.prototype[t]=function(r,c){return this.request(St(c||{},{method:t,url:r,data:(c||{}).data}))}});z.forEach(["post","put","patch"],function(t){function r(c){return function(S,b,i){return this.request(St(i||{},{method:t,headers:c?{"Content-Type":"multipart/form-data"}:{},url:S,data:b}))}}ri.prototype[t]=r(),ri.prototype[t+"Form"]=r(!0)});const Qt=ri;class Rs{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(S){r=S});const c=this;this.promise.then(d=>{if(!c._listeners)return;let S=c._listeners.length;for(;S-- >0;)c._listeners[S](d);c._listeners=null}),this.promise.then=d=>{let S;const b=new Promise(i=>{c.subscribe(i),S=i}).then(d);return b.cancel=function(){c.unsubscribe(S)},b},t(function(S,b,i){c.reason||(c.reason=new Nt(S,b,i),r(c.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const r=this._listeners.indexOf(t);r!==-1&&this._listeners.splice(r,1)}static source(){let t;return{token:new Rs(function(d){t=d}),cancel:t}}}const yc=Rs;function wc(e){return function(r){return e.apply(null,r)}}function Ec(e){return z.isObject(e)&&e.isAxiosError===!0}const es={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(es).forEach(([e,t])=>{es[t]=e});const xc=es;function Pn(e){const t=new Qt(e),r=pn(Qt.prototype.request,t);return z.extend(r,Qt.prototype,t,{allOwnKeys:!0}),z.extend(r,t,null,{allOwnKeys:!0}),r.create=function(d){return Pn(St(e,d))},r}const ye=Pn(Es);ye.Axios=Qt;ye.CanceledError=Nt;ye.CancelToken=yc;ye.isCancel=Tn;ye.VERSION=Mn;ye.toFormData=bi;ye.AxiosError=fe;ye.Cancel=ye.CanceledError;ye.all=function(t){return Promise.all(t)};ye.spread=wc;ye.isAxiosError=Ec;ye.mergeConfig=St;ye.AxiosHeaders=Ve;ye.formToJSON=e=>Dn(z.isHTMLForm(e)?new FormData(e):e);ye.getAdapter=On.getAdapter;ye.HttpStatusCode=xc;ye.default=ye;const Rc=(e,t)=>{const r=e.__vccOpts||e;for(const[c,d]of t)r[c]=d;return r},Lc={name:"Xterm",props:{host:{type:String,default:window.location.host}},data(){return{wsid:null,username:null,port:null,buffer:""}},mounted(){},beforeDestroy(){this.socket.close(),this.term.dispose()},methods:{createListener(){console.log(this.$props.host),ye.get("http://"+this.$props.host+"/create").then(e=>{console.log(e.data.ID),this.wsid=e.data.ID})},initTerm(){const e=new cl.Terminal({cursorBlink:!0,cursorStyle:"underline"});document.getElementById("xterm").innerHTML="",e.open(document.getElementById("xterm")),e.focus(),e.attachCustomKeyEventHandler(t=>{if(t.key=="Backspace"&&t.type=="keydown")return this.buffer=this.buffer.slice(0,-1),this.term.write("\b \b"),console.log(buffer),!1;if(t.key=="Backspace"&&t.type=="keyup")return!1;if(t.key=="Enter"&&t.type=="keydown")return this.term.writeln(""),this.buffer.startsWith("\r")&&(this.buffer=this.buffer.slice(1)),console.log(btoa(this.buffer+`
`)),this.socket.send(this.buffer+`
`),this.buffer="",!1;if(t.key=="Enter"&&t.type=="keyup")return!1}),e.onData(t=>{console.log(t),this.buffer+=t,this.term.write(t)}),this.socket.onmessage=t=>{for(var r=t.data.toString().split(`
`),c=0;c<r.length;c++)this.term.writeln(r[c]);console.log(t.data)},this.term=e},initSocket(){this.socket=new WebSocket("ws://"+this.$props.host+"/wstotcp/"+this.wsid+"?username="+this.username),this.openSocket(),this.closeSocket(),this.errorSocket()},openSocket(){this.socket.onopen=()=>{this.initTerm()}},closeSocket(){this.socket.onclose=()=>{}},errorSocket(){this.socket.onerror=()=>{this.$message.error("websoket连接失败，请刷新！")}}}},kc={id:"inputlist"},Ac=et("div",{id:"xterm",class:"xterm"},null,-1);function Dc(e,t,r,c,d,S){return ln(),ba(We,null,[et("div",kc,[et("button",{onClick:t[0]||(t[0]=(...b)=>S.createListener&&S.createListener(...b))},"创建监听"),Ns(et("input",{id:"wsid","onUpdate:modelValue":t[1]||(t[1]=b=>d.wsid=b),placeholder:"请输入WSID"},null,512),[[lr,d.wsid]]),Ns(et("input",{id:"username","onUpdate:modelValue":t[2]||(t[2]=b=>d.username=b),placeholder:"请输入昵称"},null,512),[[lr,d.username]]),et("button",{onClick:t[3]||(t[3]=(...b)=>S.initSocket&&S.initSocket(...b))},"加入shell")]),Ac],64)}const Tc=Rc(Lc,[["render",Dc]]),Bc={__name:"App",setup(e){return(t,r)=>(ln(),Ca(Tc))}};ol(Bc).mount("#app");
