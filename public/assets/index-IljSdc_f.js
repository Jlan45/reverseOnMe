(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const C of document.querySelectorAll('link[rel="modulepreload"]'))v(C);new MutationObserver(C=>{for(const x of C)if(x.type==="childList")for(const L of x.addedNodes)L.tagName==="LINK"&&L.rel==="modulepreload"&&v(L)}).observe(document,{childList:!0,subtree:!0});function d(C){const x={};return C.integrity&&(x.integrity=C.integrity),C.referrerPolicy&&(x.referrerPolicy=C.referrerPolicy),C.crossOrigin==="use-credentials"?x.credentials="include":C.crossOrigin==="anonymous"?x.credentials="omit":x.credentials="same-origin",x}function v(C){if(C.ep)return;C.ep=!0;const x=d(C);fetch(C.href,x)}})();/**
* @vue/shared v3.4.19
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function mi(e,s){const d=new Set(e.split(","));return s?v=>d.has(v.toLowerCase()):v=>d.has(v)}const me={},rt=[],Ae=()=>{},pr=()=>!1,Ft=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),Si=e=>e.startsWith("onUpdate:"),we=Object.assign,Ci=(e,s)=>{const d=e.indexOf(s);d>-1&&e.splice(d,1)},vr=Object.prototype.hasOwnProperty,fe=(e,s)=>vr.call(e,s),he=Array.isArray,ft=e=>Ut(e)==="[object Map]",gr=e=>Ut(e)==="[object Set]",ce=e=>typeof e=="function",be=e=>typeof e=="string",Wt=e=>typeof e=="symbol",Se=e=>e!==null&&typeof e=="object",ms=e=>(Se(e)||ce(e))&&ce(e.then)&&ce(e.catch),mr=Object.prototype.toString,Ut=e=>mr.call(e),Sr=e=>Ut(e).slice(8,-1),Cr=e=>Ut(e)==="[object Object]",bi=e=>be(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,_t=mi(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Nt=e=>{const s=Object.create(null);return d=>s[d]||(s[d]=e(d))},br=/-(\w)/g,at=Nt(e=>e.replace(br,(s,d)=>d?d.toUpperCase():"")),yr=/\B([A-Z])/g,ht=Nt(e=>e.replace(yr,"-$1").toLowerCase()),Ss=Nt(e=>e.charAt(0).toUpperCase()+e.slice(1)),Xt=Nt(e=>e?`on${Ss(e)}`:""),et=(e,s)=>!Object.is(e,s),Jt=(e,s)=>{for(let d=0;d<e.length;d++)e[d](s)},Ot=(e,s,d)=>{Object.defineProperty(e,s,{configurable:!0,enumerable:!1,value:d})},wr=e=>{const s=parseFloat(e);return isNaN(s)?e:s};let Ni;const Cs=()=>Ni||(Ni=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function yi(e){if(he(e)){const s={};for(let d=0;d<e.length;d++){const v=e[d],C=be(v)?Lr(v):yi(v);if(C)for(const x in C)s[x]=C[x]}return s}else if(be(e)||Se(e))return e}const Er=/;(?![^(]*\))/g,xr=/:([^]+)/,kr=/\/\*[^]*?\*\//g;function Lr(e){const s={};return e.replace(kr,"").split(Er).forEach(d=>{if(d){const v=d.split(xr);v.length>1&&(s[v[0].trim()]=v[1].trim())}}),s}function wi(e){let s="";if(be(e))s=e;else if(he(e))for(let d=0;d<e.length;d++){const v=wi(e[d]);v&&(s+=v+" ")}else if(Se(e))for(const d in e)e[d]&&(s+=d+" ");return s.trim()}const Rr="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Dr=mi(Rr);function bs(e){return!!e||e===""}/**
* @vue/reactivity v3.4.19
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Te;class Ar{constructor(s=!1){this.detached=s,this._active=!0,this.effects=[],this.cleanups=[],this.parent=Te,!s&&Te&&(this.index=(Te.scopes||(Te.scopes=[])).push(this)-1)}get active(){return this._active}run(s){if(this._active){const d=Te;try{return Te=this,s()}finally{Te=d}}}on(){Te=this}off(){Te=this.parent}stop(s){if(this._active){let d,v;for(d=0,v=this.effects.length;d<v;d++)this.effects[d].stop();for(d=0,v=this.cleanups.length;d<v;d++)this.cleanups[d]();if(this.scopes)for(d=0,v=this.scopes.length;d<v;d++)this.scopes[d].stop(!0);if(!this.detached&&this.parent&&!s){const C=this.parent.scopes.pop();C&&C!==this&&(this.parent.scopes[this.index]=C,C.index=this.index)}this.parent=void 0,this._active=!1}}}function Tr(e,s=Te){s&&s.active&&s.effects.push(e)}function Br(){return Te}let Ze;class Ei{constructor(s,d,v,C){this.fn=s,this.trigger=d,this.scheduler=v,this.active=!0,this.deps=[],this._dirtyLevel=4,this._trackId=0,this._runnings=0,this._shouldSchedule=!1,this._depsLength=0,Tr(this,C)}get dirty(){if(this._dirtyLevel===2||this._dirtyLevel===3){this._dirtyLevel=1,tt();for(let s=0;s<this._depsLength;s++){const d=this.deps[s];if(d.computed&&(Mr(d.computed),this._dirtyLevel>=4))break}this._dirtyLevel===1&&(this._dirtyLevel=0),it()}return this._dirtyLevel>=4}set dirty(s){this._dirtyLevel=s?4:0}run(){if(this._dirtyLevel=0,!this.active)return this.fn();let s=qe,d=Ze;try{return qe=!0,Ze=this,this._runnings++,$i(this),this.fn()}finally{ji(this),this._runnings--,Ze=d,qe=s}}stop(){var s;this.active&&($i(this),ji(this),(s=this.onStop)==null||s.call(this),this.active=!1)}}function Mr(e){return e.value}function $i(e){e._trackId++,e._depsLength=0}function ji(e){if(e.deps.length>e._depsLength){for(let s=e._depsLength;s<e.deps.length;s++)ys(e.deps[s],e);e.deps.length=e._depsLength}}function ys(e,s){const d=e.get(s);d!==void 0&&s._trackId!==d&&(e.delete(s),e.size===0&&e.cleanup())}let qe=!0,ni=0;const ws=[];function tt(){ws.push(qe),qe=!1}function it(){const e=ws.pop();qe=e===void 0?!0:e}function xi(){ni++}function ki(){for(ni--;!ni&&oi.length;)oi.shift()()}function Es(e,s,d){if(s.get(e)!==e._trackId){s.set(e,e._trackId);const v=e.deps[e._depsLength];v!==s?(v&&ys(v,e),e.deps[e._depsLength++]=s):e._depsLength++}}const oi=[];function xs(e,s,d){xi();for(const v of e.keys()){let C;v._dirtyLevel<s&&(C??(C=e.get(v)===v._trackId))&&(v._shouldSchedule||(v._shouldSchedule=v._dirtyLevel===0),v._dirtyLevel=s),v._shouldSchedule&&(C??(C=e.get(v)===v._trackId))&&(v.trigger(),(!v._runnings||v.allowRecurse)&&v._dirtyLevel!==2&&(v._shouldSchedule=!1,v.scheduler&&oi.push(v.scheduler)))}ki()}const ks=(e,s)=>{const d=new Map;return d.cleanup=e,d.computed=s,d},ai=new WeakMap,Qe=Symbol(""),li=Symbol("");function Le(e,s,d){if(qe&&Ze){let v=ai.get(e);v||ai.set(e,v=new Map);let C=v.get(d);C||v.set(d,C=ks(()=>v.delete(d))),Es(Ze,C)}}function Ue(e,s,d,v,C,x){const L=ai.get(e);if(!L)return;let i=[];if(s==="clear")i=[...L.values()];else if(d==="length"&&he(e)){const a=Number(v);L.forEach((h,_)=>{(_==="length"||!Wt(_)&&_>=a)&&i.push(h)})}else switch(d!==void 0&&i.push(L.get(d)),s){case"add":he(e)?bi(d)&&i.push(L.get("length")):(i.push(L.get(Qe)),ft(e)&&i.push(L.get(li)));break;case"delete":he(e)||(i.push(L.get(Qe)),ft(e)&&i.push(L.get(li)));break;case"set":ft(e)&&i.push(L.get(Qe));break}xi();for(const a of i)a&&xs(a,4);ki()}const Or=mi("__proto__,__v_isRef,__isVue"),Ls=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Wt)),zi=Pr();function Pr(){const e={};return["includes","indexOf","lastIndexOf"].forEach(s=>{e[s]=function(...d){const v=pe(this);for(let x=0,L=this.length;x<L;x++)Le(v,"get",x+"");const C=v[s](...d);return C===-1||C===!1?v[s](...d.map(pe)):C}}),["push","pop","shift","unshift","splice"].forEach(s=>{e[s]=function(...d){tt(),xi();const v=pe(this)[s].apply(this,d);return ki(),it(),v}}),e}function Ir(e){const s=pe(this);return Le(s,"has",e),s.hasOwnProperty(e)}class Rs{constructor(s=!1,d=!1){this._isReadonly=s,this._shallow=d}get(s,d,v){const C=this._isReadonly,x=this._shallow;if(d==="__v_isReactive")return!C;if(d==="__v_isReadonly")return C;if(d==="__v_isShallow")return x;if(d==="__v_raw")return v===(C?x?Xr:Bs:x?Ts:As).get(s)||Object.getPrototypeOf(s)===Object.getPrototypeOf(v)?s:void 0;const L=he(s);if(!C){if(L&&fe(zi,d))return Reflect.get(zi,d,v);if(d==="hasOwnProperty")return Ir}const i=Reflect.get(s,d,v);return(Wt(d)?Ls.has(d):Or(d))||(C||Le(s,"get",d),x)?i:De(i)?L&&bi(d)?i:i.value:Se(i)?C?Ms(i):Di(i):i}}class Ds extends Rs{constructor(s=!1){super(!1,s)}set(s,d,v,C){let x=s[d];if(!this._shallow){const a=mt(x);if(!hi(v)&&!mt(v)&&(x=pe(x),v=pe(v)),!he(s)&&De(x)&&!De(v))return a?!1:(x.value=v,!0)}const L=he(s)&&bi(d)?Number(d)<s.length:fe(s,d),i=Reflect.set(s,d,v,C);return s===pe(C)&&(L?et(v,x)&&Ue(s,"set",d,v):Ue(s,"add",d,v)),i}deleteProperty(s,d){const v=fe(s,d);s[d];const C=Reflect.deleteProperty(s,d);return C&&v&&Ue(s,"delete",d,void 0),C}has(s,d){const v=Reflect.has(s,d);return(!Wt(d)||!Ls.has(d))&&Le(s,"has",d),v}ownKeys(s){return Le(s,"iterate",he(s)?"length":Qe),Reflect.ownKeys(s)}}class Hr extends Rs{constructor(s=!1){super(!0,s)}set(s,d){return!0}deleteProperty(s,d){return!0}}const Fr=new Ds,Wr=new Hr,Ur=new Ds(!0),Li=e=>e,$t=e=>Reflect.getPrototypeOf(e);function xt(e,s,d=!1,v=!1){e=e.__v_raw;const C=pe(e),x=pe(s);d||(et(s,x)&&Le(C,"get",s),Le(C,"get",x));const{has:L}=$t(C),i=v?Li:d?Bi:Ti;if(L.call(C,s))return i(e.get(s));if(L.call(C,x))return i(e.get(x));e!==C&&e.get(s)}function kt(e,s=!1){const d=this.__v_raw,v=pe(d),C=pe(e);return s||(et(e,C)&&Le(v,"has",e),Le(v,"has",C)),e===C?d.has(e):d.has(e)||d.has(C)}function Lt(e,s=!1){return e=e.__v_raw,!s&&Le(pe(e),"iterate",Qe),Reflect.get(e,"size",e)}function Ki(e){e=pe(e);const s=pe(this);return $t(s).has.call(s,e)||(s.add(e),Ue(s,"add",e,e)),this}function qi(e,s){s=pe(s);const d=pe(this),{has:v,get:C}=$t(d);let x=v.call(d,e);x||(e=pe(e),x=v.call(d,e));const L=C.call(d,e);return d.set(e,s),x?et(s,L)&&Ue(d,"set",e,s):Ue(d,"add",e,s),this}function Vi(e){const s=pe(this),{has:d,get:v}=$t(s);let C=d.call(s,e);C||(e=pe(e),C=d.call(s,e)),v&&v.call(s,e);const x=s.delete(e);return C&&Ue(s,"delete",e,void 0),x}function Gi(){const e=pe(this),s=e.size!==0,d=e.clear();return s&&Ue(e,"clear",void 0,void 0),d}function Rt(e,s){return function(v,C){const x=this,L=x.__v_raw,i=pe(L),a=s?Li:e?Bi:Ti;return!e&&Le(i,"iterate",Qe),L.forEach((h,_)=>v.call(C,a(h),a(_),x))}}function Dt(e,s,d){return function(...v){const C=this.__v_raw,x=pe(C),L=ft(x),i=e==="entries"||e===Symbol.iterator&&L,a=e==="keys"&&L,h=C[e](...v),_=d?Li:s?Bi:Ti;return!s&&Le(x,"iterate",a?li:Qe),{next(){const{value:l,done:p}=h.next();return p?{value:l,done:p}:{value:i?[_(l[0]),_(l[1])]:_(l),done:p}},[Symbol.iterator](){return this}}}}function $e(e){return function(...s){return e==="delete"?!1:e==="clear"?void 0:this}}function Nr(){const e={get(x){return xt(this,x)},get size(){return Lt(this)},has:kt,add:Ki,set:qi,delete:Vi,clear:Gi,forEach:Rt(!1,!1)},s={get(x){return xt(this,x,!1,!0)},get size(){return Lt(this)},has:kt,add:Ki,set:qi,delete:Vi,clear:Gi,forEach:Rt(!1,!0)},d={get(x){return xt(this,x,!0)},get size(){return Lt(this,!0)},has(x){return kt.call(this,x,!0)},add:$e("add"),set:$e("set"),delete:$e("delete"),clear:$e("clear"),forEach:Rt(!0,!1)},v={get(x){return xt(this,x,!0,!0)},get size(){return Lt(this,!0)},has(x){return kt.call(this,x,!0)},add:$e("add"),set:$e("set"),delete:$e("delete"),clear:$e("clear"),forEach:Rt(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(x=>{e[x]=Dt(x,!1,!1),d[x]=Dt(x,!0,!1),s[x]=Dt(x,!1,!0),v[x]=Dt(x,!0,!0)}),[e,d,s,v]}const[$r,jr,zr,Kr]=Nr();function Ri(e,s){const d=s?e?Kr:zr:e?jr:$r;return(v,C,x)=>C==="__v_isReactive"?!e:C==="__v_isReadonly"?e:C==="__v_raw"?v:Reflect.get(fe(d,C)&&C in v?d:v,C,x)}const qr={get:Ri(!1,!1)},Vr={get:Ri(!1,!0)},Gr={get:Ri(!0,!1)},As=new WeakMap,Ts=new WeakMap,Bs=new WeakMap,Xr=new WeakMap;function Jr(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Yr(e){return e.__v_skip||!Object.isExtensible(e)?0:Jr(Sr(e))}function Di(e){return mt(e)?e:Ai(e,!1,Fr,qr,As)}function Zr(e){return Ai(e,!1,Ur,Vr,Ts)}function Ms(e){return Ai(e,!0,Wr,Gr,Bs)}function Ai(e,s,d,v,C){if(!Se(e)||e.__v_raw&&!(s&&e.__v_isReactive))return e;const x=C.get(e);if(x)return x;const L=Yr(e);if(L===0)return e;const i=new Proxy(e,L===2?v:d);return C.set(e,i),i}function nt(e){return mt(e)?nt(e.__v_raw):!!(e&&e.__v_isReactive)}function mt(e){return!!(e&&e.__v_isReadonly)}function hi(e){return!!(e&&e.__v_isShallow)}function Os(e){return nt(e)||mt(e)}function pe(e){const s=e&&e.__v_raw;return s?pe(s):e}function Ps(e){return Object.isExtensible(e)&&Ot(e,"__v_skip",!0),e}const Ti=e=>Se(e)?Di(e):e,Bi=e=>Se(e)?Ms(e):e;class Is{constructor(s,d,v,C){this._setter=d,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this.effect=new Ei(()=>s(this._value),()=>Yt(this,this.effect._dirtyLevel===2?2:3)),this.effect.computed=this,this.effect.active=this._cacheable=!C,this.__v_isReadonly=v}get value(){const s=pe(this);return(!s._cacheable||s.effect.dirty)&&et(s._value,s._value=s.effect.run())&&Yt(s,4),en(s),s.effect._dirtyLevel>=2&&Yt(s,2),s._value}set value(s){this._setter(s)}get _dirty(){return this.effect.dirty}set _dirty(s){this.effect.dirty=s}}function Qr(e,s,d=!1){let v,C;const x=ce(e);return x?(v=e,C=Ae):(v=e.get,C=e.set),new Is(v,C,x||!C,d)}function en(e){var s;qe&&Ze&&(e=pe(e),Es(Ze,(s=e.dep)!=null?s:e.dep=ks(()=>e.dep=void 0,e instanceof Is?e:void 0)))}function Yt(e,s=4,d){e=pe(e);const v=e.dep;v&&xs(v,s)}function De(e){return!!(e&&e.__v_isRef===!0)}function tn(e){return De(e)?e.value:e}const sn={get:(e,s,d)=>tn(Reflect.get(e,s,d)),set:(e,s,d,v)=>{const C=e[s];return De(C)&&!De(d)?(C.value=d,!0):Reflect.set(e,s,d,v)}};function Hs(e){return nt(e)?e:new Proxy(e,sn)}/**
* @vue/runtime-core v3.4.19
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Ve(e,s,d,v){try{return v?e(...v):e()}catch(C){jt(C,s,d)}}function Me(e,s,d,v){if(ce(e)){const x=Ve(e,s,d,v);return x&&ms(x)&&x.catch(L=>{jt(L,s,d)}),x}const C=[];for(let x=0;x<e.length;x++)C.push(Me(e[x],s,d,v));return C}function jt(e,s,d,v=!0){const C=s?s.vnode:null;if(s){let x=s.parent;const L=s.proxy,i=`https://vuejs.org/error-reference/#runtime-${d}`;for(;x;){const h=x.ec;if(h){for(let _=0;_<h.length;_++)if(h[_](e,L,i)===!1)return}x=x.parent}const a=s.appContext.config.errorHandler;if(a){Ve(a,null,10,[e,L,i]);return}}rn(e,d,C,v)}function rn(e,s,d,v=!0){console.error(e)}let St=!1,ci=!1;const ye=[];let He=0;const ot=[];let je=null,Ye=0;const Fs=Promise.resolve();let Mi=null;function nn(e){const s=Mi||Fs;return e?s.then(this?e.bind(this):e):s}function on(e){let s=He+1,d=ye.length;for(;s<d;){const v=s+d>>>1,C=ye[v],x=Ct(C);x<e||x===e&&C.pre?s=v+1:d=v}return s}function Oi(e){(!ye.length||!ye.includes(e,St&&e.allowRecurse?He+1:He))&&(e.id==null?ye.push(e):ye.splice(on(e.id),0,e),Ws())}function Ws(){!St&&!ci&&(ci=!0,Mi=Fs.then(Ns))}function an(e){const s=ye.indexOf(e);s>He&&ye.splice(s,1)}function ln(e){he(e)?ot.push(...e):(!je||!je.includes(e,e.allowRecurse?Ye+1:Ye))&&ot.push(e),Ws()}function Xi(e,s,d=St?He+1:0){for(;d<ye.length;d++){const v=ye[d];if(v&&v.pre){if(e&&v.id!==e.uid)continue;ye.splice(d,1),d--,v()}}}function Us(e){if(ot.length){const s=[...new Set(ot)].sort((d,v)=>Ct(d)-Ct(v));if(ot.length=0,je){je.push(...s);return}for(je=s,Ye=0;Ye<je.length;Ye++)je[Ye]();je=null,Ye=0}}const Ct=e=>e.id==null?1/0:e.id,hn=(e,s)=>{const d=Ct(e)-Ct(s);if(d===0){if(e.pre&&!s.pre)return-1;if(s.pre&&!e.pre)return 1}return d};function Ns(e){ci=!1,St=!0,ye.sort(hn);try{for(He=0;He<ye.length;He++){const s=ye[He];s&&s.active!==!1&&Ve(s,null,14)}}finally{He=0,ye.length=0,Us(),St=!1,Mi=null,(ye.length||ot.length)&&Ns()}}function cn(e,s,...d){if(e.isUnmounted)return;const v=e.vnode.props||me;let C=d;const x=s.startsWith("update:"),L=x&&s.slice(7);if(L&&L in v){const _=`${L==="modelValue"?"model":L}Modifiers`,{number:l,trim:p}=v[_]||me;p&&(C=d.map(m=>be(m)?m.trim():m)),l&&(C=d.map(wr))}let i,a=v[i=Xt(s)]||v[i=Xt(at(s))];!a&&x&&(a=v[i=Xt(ht(s))]),a&&Me(a,e,6,C);const h=v[i+"Once"];if(h){if(!e.emitted)e.emitted={};else if(e.emitted[i])return;e.emitted[i]=!0,Me(h,e,6,C)}}function $s(e,s,d=!1){const v=s.emitsCache,C=v.get(e);if(C!==void 0)return C;const x=e.emits;let L={},i=!1;if(!ce(e)){const a=h=>{const _=$s(h,s,!0);_&&(i=!0,we(L,_))};!d&&s.mixins.length&&s.mixins.forEach(a),e.extends&&a(e.extends),e.mixins&&e.mixins.forEach(a)}return!x&&!i?(Se(e)&&v.set(e,null),null):(he(x)?x.forEach(a=>L[a]=null):we(L,x),Se(e)&&v.set(e,L),L)}function zt(e,s){return!e||!Ft(s)?!1:(s=s.slice(2).replace(/Once$/,""),fe(e,s[0].toLowerCase()+s.slice(1))||fe(e,ht(s))||fe(e,s))}let Fe=null,js=null;function Pt(e){const s=Fe;return Fe=e,js=e&&e.type.__scopeId||null,s}function dn(e,s=Fe,d){if(!s||e._n)return e;const v=(...C)=>{v._d&&ns(-1);const x=Pt(s);let L;try{L=e(...C)}finally{Pt(x),v._d&&ns(1)}return L};return v._n=!0,v._c=!0,v._d=!0,v}function Zt(e){const{type:s,vnode:d,proxy:v,withProxy:C,props:x,propsOptions:[L],slots:i,attrs:a,emit:h,render:_,renderCache:l,data:p,setupState:m,ctx:b,inheritAttrs:g}=e;let t,o;const r=Pt(e);try{if(d.shapeFlag&4){const c=C||v,f=c;t=Ie(_.call(f,c,l,x,m,p,b)),o=a}else{const c=s;t=Ie(c.length>1?c(x,{attrs:a,slots:i,emit:h}):c(x,null)),o=s.props?a:un(a)}}catch(c){gt.length=0,jt(c,e,1),t=Ge(bt)}let n=t;if(o&&g!==!1){const c=Object.keys(o),{shapeFlag:f}=n;c.length&&f&7&&(L&&c.some(Si)&&(o=fn(o,L)),n=lt(n,o))}return d.dirs&&(n=lt(n),n.dirs=n.dirs?n.dirs.concat(d.dirs):d.dirs),d.transition&&(n.transition=d.transition),t=n,Pt(r),t}const un=e=>{let s;for(const d in e)(d==="class"||d==="style"||Ft(d))&&((s||(s={}))[d]=e[d]);return s},fn=(e,s)=>{const d={};for(const v in e)(!Si(v)||!(v.slice(9)in s))&&(d[v]=e[v]);return d};function _n(e,s,d){const{props:v,children:C,component:x}=e,{props:L,children:i,patchFlag:a}=s,h=x.emitsOptions;if(s.dirs||s.transition)return!0;if(d&&a>=0){if(a&1024)return!0;if(a&16)return v?Ji(v,L,h):!!L;if(a&8){const _=s.dynamicProps;for(let l=0;l<_.length;l++){const p=_[l];if(L[p]!==v[p]&&!zt(h,p))return!0}}}else return(C||i)&&(!i||!i.$stable)?!0:v===L?!1:v?L?Ji(v,L,h):!0:!!L;return!1}function Ji(e,s,d){const v=Object.keys(s);if(v.length!==Object.keys(e).length)return!0;for(let C=0;C<v.length;C++){const x=v[C];if(s[x]!==e[x]&&!zt(d,x))return!0}return!1}function pn({vnode:e,parent:s},d){for(;s;){const v=s.subTree;if(v.suspense&&v.suspense.activeBranch===e&&(v.el=e.el),v===e)(e=s.vnode).el=d,s=s.parent;else break}}const vn=Symbol.for("v-ndc"),gn=e=>e.__isSuspense;function mn(e,s){s&&s.pendingBranch?he(e)?s.effects.push(...e):s.effects.push(e):ln(e)}const Sn=Symbol.for("v-scx"),Cn=()=>Bt(Sn),At={};function Qt(e,s,d){return zs(e,s,d)}function zs(e,s,{immediate:d,deep:v,flush:C,once:x,onTrack:L,onTrigger:i}=me){if(s&&x){const S=s;s=(...E)=>{S(...E),f()}}const a=xe,h=S=>v===!0?S:st(S,v===!1?1:void 0);let _,l=!1,p=!1;if(De(e)?(_=()=>e.value,l=hi(e)):nt(e)?(_=()=>h(e),l=!0):he(e)?(p=!0,l=e.some(S=>nt(S)||hi(S)),_=()=>e.map(S=>{if(De(S))return S.value;if(nt(S))return h(S);if(ce(S))return Ve(S,a,2)})):ce(e)?s?_=()=>Ve(e,a,2):_=()=>(m&&m(),Me(e,a,3,[b])):_=Ae,s&&v){const S=_;_=()=>st(S())}let m,b=S=>{m=n.onStop=()=>{Ve(S,a,4),m=n.onStop=void 0}},g;if(Gt)if(b=Ae,s?d&&Me(s,a,3,[_(),p?[]:void 0,b]):_(),C==="sync"){const S=Cn();g=S.__watcherHandles||(S.__watcherHandles=[])}else return Ae;let t=p?new Array(e.length).fill(At):At;const o=()=>{if(!(!n.active||!n.dirty))if(s){const S=n.run();(v||l||(p?S.some((E,u)=>et(E,t[u])):et(S,t)))&&(m&&m(),Me(s,a,3,[S,t===At?void 0:p&&t[0]===At?[]:t,b]),t=S)}else n.run()};o.allowRecurse=!!s;let r;C==="sync"?r=o:C==="post"?r=()=>ke(o,a&&a.suspense):(o.pre=!0,a&&(o.id=a.uid),r=()=>Oi(o));const n=new Ei(_,Ae,r),c=Br(),f=()=>{n.stop(),c&&Ci(c.effects,n)};return s?d?o():t=n.run():C==="post"?ke(n.run.bind(n),a&&a.suspense):n.run(),g&&g.push(f),f}function bn(e,s,d){const v=this.proxy,C=be(e)?e.includes(".")?Ks(v,e):()=>v[e]:e.bind(v,v);let x;ce(s)?x=s:(x=s.handler,d=s);const L=wt(this),i=zs(C,x.bind(v),d);return L(),i}function Ks(e,s){const d=s.split(".");return()=>{let v=e;for(let C=0;C<d.length&&v;C++)v=v[d[C]];return v}}function st(e,s,d=0,v){if(!Se(e)||e.__v_skip)return e;if(s&&s>0){if(d>=s)return e;d++}if(v=v||new Set,v.has(e))return e;if(v.add(e),De(e))st(e.value,s,d,v);else if(he(e))for(let C=0;C<e.length;C++)st(e[C],s,d,v);else if(gr(e)||ft(e))e.forEach(C=>{st(C,s,d,v)});else if(Cr(e))for(const C in e)st(e[C],s,d,v);return e}function Xe(e,s,d,v){const C=e.dirs,x=s&&s.dirs;for(let L=0;L<C.length;L++){const i=C[L];x&&(i.oldValue=x[L].value);let a=i.dir[v];a&&(tt(),Me(a,d,8,[e.el,i,e,s]),it())}}const Tt=e=>!!e.type.__asyncLoader,qs=e=>e.type.__isKeepAlive;function yn(e,s){Vs(e,"a",s)}function wn(e,s){Vs(e,"da",s)}function Vs(e,s,d=xe){const v=e.__wdc||(e.__wdc=()=>{let C=d;for(;C;){if(C.isDeactivated)return;C=C.parent}return e()});if(Kt(s,v,d),d){let C=d.parent;for(;C&&C.parent;)qs(C.parent.vnode)&&En(v,s,d,C),C=C.parent}}function En(e,s,d,v){const C=Kt(s,e,v,!0);Gs(()=>{Ci(v[s],C)},d)}function Kt(e,s,d=xe,v=!1){if(d){const C=d[e]||(d[e]=[]),x=s.__weh||(s.__weh=(...L)=>{if(d.isUnmounted)return;tt();const i=wt(d),a=Me(s,d,e,L);return i(),it(),a});return v?C.unshift(x):C.push(x),x}}const Ne=e=>(s,d=xe)=>(!Gt||e==="sp")&&Kt(e,(...v)=>s(...v),d),xn=Ne("bm"),kn=Ne("m"),Ln=Ne("bu"),Rn=Ne("u"),Dn=Ne("bum"),Gs=Ne("um"),An=Ne("sp"),Tn=Ne("rtg"),Bn=Ne("rtc");function Mn(e,s=xe){Kt("ec",e,s)}const di=e=>e?lr(e)?Fi(e)||e.proxy:di(e.parent):null,pt=we(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>di(e.parent),$root:e=>di(e.root),$emit:e=>e.emit,$options:e=>Pi(e),$forceUpdate:e=>e.f||(e.f=()=>{e.effect.dirty=!0,Oi(e.update)}),$nextTick:e=>e.n||(e.n=nn.bind(e.proxy)),$watch:e=>bn.bind(e)}),ei=(e,s)=>e!==me&&!e.__isScriptSetup&&fe(e,s),On={get({_:e},s){const{ctx:d,setupState:v,data:C,props:x,accessCache:L,type:i,appContext:a}=e;let h;if(s[0]!=="$"){const m=L[s];if(m!==void 0)switch(m){case 1:return v[s];case 2:return C[s];case 4:return d[s];case 3:return x[s]}else{if(ei(v,s))return L[s]=1,v[s];if(C!==me&&fe(C,s))return L[s]=2,C[s];if((h=e.propsOptions[0])&&fe(h,s))return L[s]=3,x[s];if(d!==me&&fe(d,s))return L[s]=4,d[s];ui&&(L[s]=0)}}const _=pt[s];let l,p;if(_)return s==="$attrs"&&Le(e,"get",s),_(e);if((l=i.__cssModules)&&(l=l[s]))return l;if(d!==me&&fe(d,s))return L[s]=4,d[s];if(p=a.config.globalProperties,fe(p,s))return p[s]},set({_:e},s,d){const{data:v,setupState:C,ctx:x}=e;return ei(C,s)?(C[s]=d,!0):v!==me&&fe(v,s)?(v[s]=d,!0):fe(e.props,s)||s[0]==="$"&&s.slice(1)in e?!1:(x[s]=d,!0)},has({_:{data:e,setupState:s,accessCache:d,ctx:v,appContext:C,propsOptions:x}},L){let i;return!!d[L]||e!==me&&fe(e,L)||ei(s,L)||(i=x[0])&&fe(i,L)||fe(v,L)||fe(pt,L)||fe(C.config.globalProperties,L)},defineProperty(e,s,d){return d.get!=null?e._.accessCache[s]=0:fe(d,"value")&&this.set(e,s,d.value,null),Reflect.defineProperty(e,s,d)}};function Yi(e){return he(e)?e.reduce((s,d)=>(s[d]=null,s),{}):e}let ui=!0;function Pn(e){const s=Pi(e),d=e.proxy,v=e.ctx;ui=!1,s.beforeCreate&&Zi(s.beforeCreate,e,"bc");const{data:C,computed:x,methods:L,watch:i,provide:a,inject:h,created:_,beforeMount:l,mounted:p,beforeUpdate:m,updated:b,activated:g,deactivated:t,beforeDestroy:o,beforeUnmount:r,destroyed:n,unmounted:c,render:f,renderTracked:S,renderTriggered:E,errorCaptured:u,serverPrefetch:y,expose:R,inheritAttrs:O,components:A,directives:M,filters:N}=s;if(h&&In(h,v,null),L)for(const U in L){const w=L[U];ce(w)&&(v[U]=w.bind(d))}if(C){const U=C.call(d,d);Se(U)&&(e.data=Di(U))}if(ui=!0,x)for(const U in x){const w=x[U],T=ce(w)?w.bind(d,d):ce(w.get)?w.get.bind(d,d):Ae,B=!ce(w)&&ce(w.set)?w.set.bind(d):Ae,I=vo({get:T,set:B});Object.defineProperty(v,U,{enumerable:!0,configurable:!0,get:()=>I.value,set:V=>I.value=V})}if(i)for(const U in i)Xs(i[U],v,d,U);if(a){const U=ce(a)?a.call(d):a;Reflect.ownKeys(U).forEach(w=>{$n(w,U[w])})}_&&Zi(_,e,"c");function z(U,w){he(w)?w.forEach(T=>U(T.bind(d))):w&&U(w.bind(d))}if(z(xn,l),z(kn,p),z(Ln,m),z(Rn,b),z(yn,g),z(wn,t),z(Mn,u),z(Bn,S),z(Tn,E),z(Dn,r),z(Gs,c),z(An,y),he(R))if(R.length){const U=e.exposed||(e.exposed={});R.forEach(w=>{Object.defineProperty(U,w,{get:()=>d[w],set:T=>d[w]=T})})}else e.exposed||(e.exposed={});f&&e.render===Ae&&(e.render=f),O!=null&&(e.inheritAttrs=O),A&&(e.components=A),M&&(e.directives=M)}function In(e,s,d=Ae){he(e)&&(e=fi(e));for(const v in e){const C=e[v];let x;Se(C)?"default"in C?x=Bt(C.from||v,C.default,!0):x=Bt(C.from||v):x=Bt(C),De(x)?Object.defineProperty(s,v,{enumerable:!0,configurable:!0,get:()=>x.value,set:L=>x.value=L}):s[v]=x}}function Zi(e,s,d){Me(he(e)?e.map(v=>v.bind(s.proxy)):e.bind(s.proxy),s,d)}function Xs(e,s,d,v){const C=v.includes(".")?Ks(d,v):()=>d[v];if(be(e)){const x=s[e];ce(x)&&Qt(C,x)}else if(ce(e))Qt(C,e.bind(d));else if(Se(e))if(he(e))e.forEach(x=>Xs(x,s,d,v));else{const x=ce(e.handler)?e.handler.bind(d):s[e.handler];ce(x)&&Qt(C,x,e)}}function Pi(e){const s=e.type,{mixins:d,extends:v}=s,{mixins:C,optionsCache:x,config:{optionMergeStrategies:L}}=e.appContext,i=x.get(s);let a;return i?a=i:!C.length&&!d&&!v?a=s:(a={},C.length&&C.forEach(h=>It(a,h,L,!0)),It(a,s,L)),Se(s)&&x.set(s,a),a}function It(e,s,d,v=!1){const{mixins:C,extends:x}=s;x&&It(e,x,d,!0),C&&C.forEach(L=>It(e,L,d,!0));for(const L in s)if(!(v&&L==="expose")){const i=Hn[L]||d&&d[L];e[L]=i?i(e[L],s[L]):s[L]}return e}const Hn={data:Qi,props:es,emits:es,methods:ut,computed:ut,beforeCreate:Ee,created:Ee,beforeMount:Ee,mounted:Ee,beforeUpdate:Ee,updated:Ee,beforeDestroy:Ee,beforeUnmount:Ee,destroyed:Ee,unmounted:Ee,activated:Ee,deactivated:Ee,errorCaptured:Ee,serverPrefetch:Ee,components:ut,directives:ut,watch:Wn,provide:Qi,inject:Fn};function Qi(e,s){return s?e?function(){return we(ce(e)?e.call(this,this):e,ce(s)?s.call(this,this):s)}:s:e}function Fn(e,s){return ut(fi(e),fi(s))}function fi(e){if(he(e)){const s={};for(let d=0;d<e.length;d++)s[e[d]]=e[d];return s}return e}function Ee(e,s){return e?[...new Set([].concat(e,s))]:s}function ut(e,s){return e?we(Object.create(null),e,s):s}function es(e,s){return e?he(e)&&he(s)?[...new Set([...e,...s])]:we(Object.create(null),Yi(e),Yi(s??{})):s}function Wn(e,s){if(!e)return s;if(!s)return e;const d=we(Object.create(null),e);for(const v in s)d[v]=Ee(e[v],s[v]);return d}function Js(){return{app:null,config:{isNativeTag:pr,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Un=0;function Nn(e,s){return function(v,C=null){ce(v)||(v=we({},v)),C!=null&&!Se(C)&&(C=null);const x=Js(),L=new WeakSet;let i=!1;const a=x.app={_uid:Un++,_component:v,_props:C,_container:null,_context:x,_instance:null,version:go,get config(){return x.config},set config(h){},use(h,..._){return L.has(h)||(h&&ce(h.install)?(L.add(h),h.install(a,..._)):ce(h)&&(L.add(h),h(a,..._))),a},mixin(h){return x.mixins.includes(h)||x.mixins.push(h),a},component(h,_){return _?(x.components[h]=_,a):x.components[h]},directive(h,_){return _?(x.directives[h]=_,a):x.directives[h]},mount(h,_,l){if(!i){const p=Ge(v,C);return p.appContext=x,l===!0?l="svg":l===!1&&(l=void 0),_&&s?s(p,h):e(p,h,l),i=!0,a._container=h,h.__vue_app__=a,Fi(p.component)||p.component.proxy}},unmount(){i&&(e(null,a._container),delete a._container.__vue_app__)},provide(h,_){return x.provides[h]=_,a},runWithContext(h){const _=vt;vt=a;try{return h()}finally{vt=_}}};return a}}let vt=null;function $n(e,s){if(xe){let d=xe.provides;const v=xe.parent&&xe.parent.provides;v===d&&(d=xe.provides=Object.create(v)),d[e]=s}}function Bt(e,s,d=!1){const v=xe||Fe;if(v||vt){const C=v?v.parent==null?v.vnode.appContext&&v.vnode.appContext.provides:v.parent.provides:vt._context.provides;if(C&&e in C)return C[e];if(arguments.length>1)return d&&ce(s)?s.call(v&&v.proxy):s}}function jn(e,s,d,v=!1){const C={},x={};Ot(x,Vt,1),e.propsDefaults=Object.create(null),Ys(e,s,C,x);for(const L in e.propsOptions[0])L in C||(C[L]=void 0);d?e.props=v?C:Zr(C):e.type.props?e.props=C:e.props=x,e.attrs=x}function zn(e,s,d,v){const{props:C,attrs:x,vnode:{patchFlag:L}}=e,i=pe(C),[a]=e.propsOptions;let h=!1;if((v||L>0)&&!(L&16)){if(L&8){const _=e.vnode.dynamicProps;for(let l=0;l<_.length;l++){let p=_[l];if(zt(e.emitsOptions,p))continue;const m=s[p];if(a)if(fe(x,p))m!==x[p]&&(x[p]=m,h=!0);else{const b=at(p);C[b]=_i(a,i,b,m,e,!1)}else m!==x[p]&&(x[p]=m,h=!0)}}}else{Ys(e,s,C,x)&&(h=!0);let _;for(const l in i)(!s||!fe(s,l)&&((_=ht(l))===l||!fe(s,_)))&&(a?d&&(d[l]!==void 0||d[_]!==void 0)&&(C[l]=_i(a,i,l,void 0,e,!0)):delete C[l]);if(x!==i)for(const l in x)(!s||!fe(s,l))&&(delete x[l],h=!0)}h&&Ue(e,"set","$attrs")}function Ys(e,s,d,v){const[C,x]=e.propsOptions;let L=!1,i;if(s)for(let a in s){if(_t(a))continue;const h=s[a];let _;C&&fe(C,_=at(a))?!x||!x.includes(_)?d[_]=h:(i||(i={}))[_]=h:zt(e.emitsOptions,a)||(!(a in v)||h!==v[a])&&(v[a]=h,L=!0)}if(x){const a=pe(d),h=i||me;for(let _=0;_<x.length;_++){const l=x[_];d[l]=_i(C,a,l,h[l],e,!fe(h,l))}}return L}function _i(e,s,d,v,C,x){const L=e[d];if(L!=null){const i=fe(L,"default");if(i&&v===void 0){const a=L.default;if(L.type!==Function&&!L.skipFactory&&ce(a)){const{propsDefaults:h}=C;if(d in h)v=h[d];else{const _=wt(C);v=h[d]=a.call(null,s),_()}}else v=a}L[0]&&(x&&!i?v=!1:L[1]&&(v===""||v===ht(d))&&(v=!0))}return v}function Zs(e,s,d=!1){const v=s.propsCache,C=v.get(e);if(C)return C;const x=e.props,L={},i=[];let a=!1;if(!ce(e)){const _=l=>{a=!0;const[p,m]=Zs(l,s,!0);we(L,p),m&&i.push(...m)};!d&&s.mixins.length&&s.mixins.forEach(_),e.extends&&_(e.extends),e.mixins&&e.mixins.forEach(_)}if(!x&&!a)return Se(e)&&v.set(e,rt),rt;if(he(x))for(let _=0;_<x.length;_++){const l=at(x[_]);ts(l)&&(L[l]=me)}else if(x)for(const _ in x){const l=at(_);if(ts(l)){const p=x[_],m=L[l]=he(p)||ce(p)?{type:p}:we({},p);if(m){const b=rs(Boolean,m.type),g=rs(String,m.type);m[0]=b>-1,m[1]=g<0||b<g,(b>-1||fe(m,"default"))&&i.push(l)}}}const h=[L,i];return Se(e)&&v.set(e,h),h}function ts(e){return e[0]!=="$"&&!_t(e)}function is(e){return e===null?"null":typeof e=="function"?e.name||"":typeof e=="object"&&e.constructor&&e.constructor.name||""}function ss(e,s){return is(e)===is(s)}function rs(e,s){return he(s)?s.findIndex(d=>ss(d,e)):ce(s)&&ss(s,e)?0:-1}const Qs=e=>e[0]==="_"||e==="$stable",Ii=e=>he(e)?e.map(Ie):[Ie(e)],Kn=(e,s,d)=>{if(s._n)return s;const v=dn((...C)=>Ii(s(...C)),d);return v._c=!1,v},er=(e,s,d)=>{const v=e._ctx;for(const C in e){if(Qs(C))continue;const x=e[C];if(ce(x))s[C]=Kn(C,x,v);else if(x!=null){const L=Ii(x);s[C]=()=>L}}},tr=(e,s)=>{const d=Ii(s);e.slots.default=()=>d},qn=(e,s)=>{if(e.vnode.shapeFlag&32){const d=s._;d?(e.slots=pe(s),Ot(s,"_",d)):er(s,e.slots={})}else e.slots={},s&&tr(e,s);Ot(e.slots,Vt,1)},Vn=(e,s,d)=>{const{vnode:v,slots:C}=e;let x=!0,L=me;if(v.shapeFlag&32){const i=s._;i?d&&i===1?x=!1:(we(C,s),!d&&i===1&&delete C._):(x=!s.$stable,er(s,C)),L=s}else s&&(tr(e,s),L={default:1});if(x)for(const i in C)!Qs(i)&&L[i]==null&&delete C[i]};function pi(e,s,d,v,C=!1){if(he(e)){e.forEach((p,m)=>pi(p,s&&(he(s)?s[m]:s),d,v,C));return}if(Tt(v)&&!C)return;const x=v.shapeFlag&4?Fi(v.component)||v.component.proxy:v.el,L=C?null:x,{i,r:a}=e,h=s&&s.r,_=i.refs===me?i.refs={}:i.refs,l=i.setupState;if(h!=null&&h!==a&&(be(h)?(_[h]=null,fe(l,h)&&(l[h]=null)):De(h)&&(h.value=null)),ce(a))Ve(a,i,12,[L,_]);else{const p=be(a),m=De(a);if(p||m){const b=()=>{if(e.f){const g=p?fe(l,a)?l[a]:_[a]:a.value;C?he(g)&&Ci(g,x):he(g)?g.includes(x)||g.push(x):p?(_[a]=[x],fe(l,a)&&(l[a]=_[a])):(a.value=[x],e.k&&(_[e.k]=a.value))}else p?(_[a]=L,fe(l,a)&&(l[a]=L)):m&&(a.value=L,e.k&&(_[e.k]=L))};L?(b.id=-1,ke(b,d)):b()}}}const ke=mn;function Gn(e){return Xn(e)}function Xn(e,s){const d=Cs();d.__VUE__=!0;const{insert:v,remove:C,patchProp:x,createElement:L,createText:i,createComment:a,setText:h,setElementText:_,parentNode:l,nextSibling:p,setScopeId:m=Ae,insertStaticContent:b}=e,g=(D,P,W,q=null,F=null,X=null,Q=void 0,J=null,Y=!!P.dynamicChildren)=>{if(D===P)return;D&&!dt(D,P)&&(q=k(D),V(D,F,X,!0),D=null),P.patchFlag===-2&&(Y=!1,P.dynamicChildren=null);const{type:G,ref:Z,shapeFlag:re}=P;switch(G){case qt:t(D,P,W,q);break;case bt:o(D,P,W,q);break;case ii:D==null&&r(P,W,q,Q);break;case We:A(D,P,W,q,F,X,Q,J,Y);break;default:re&1?f(D,P,W,q,F,X,Q,J,Y):re&6?M(D,P,W,q,F,X,Q,J,Y):(re&64||re&128)&&G.process(D,P,W,q,F,X,Q,J,Y,$)}Z!=null&&F&&pi(Z,D&&D.ref,X,P||D,!P)},t=(D,P,W,q)=>{if(D==null)v(P.el=i(P.children),W,q);else{const F=P.el=D.el;P.children!==D.children&&h(F,P.children)}},o=(D,P,W,q)=>{D==null?v(P.el=a(P.children||""),W,q):P.el=D.el},r=(D,P,W,q)=>{[D.el,D.anchor]=b(D.children,P,W,q,D.el,D.anchor)},n=({el:D,anchor:P},W,q)=>{let F;for(;D&&D!==P;)F=p(D),v(D,W,q),D=F;v(P,W,q)},c=({el:D,anchor:P})=>{let W;for(;D&&D!==P;)W=p(D),C(D),D=W;C(P)},f=(D,P,W,q,F,X,Q,J,Y)=>{P.type==="svg"?Q="svg":P.type==="math"&&(Q="mathml"),D==null?S(P,W,q,F,X,Q,J,Y):y(D,P,F,X,Q,J,Y)},S=(D,P,W,q,F,X,Q,J)=>{let Y,G;const{props:Z,shapeFlag:re,transition:ie,dirs:oe}=D;if(Y=D.el=L(D.type,X,Z&&Z.is,Z),re&8?_(Y,D.children):re&16&&u(D.children,Y,null,q,F,ti(D,X),Q,J),oe&&Xe(D,null,q,"created"),E(Y,D,D.scopeId,Q,q),Z){for(const de in Z)de!=="value"&&!_t(de)&&x(Y,de,null,Z[de],X,D.children,q,F,ue);"value"in Z&&x(Y,"value",null,Z.value,X),(G=Z.onVnodeBeforeMount)&&Pe(G,q,D)}oe&&Xe(D,null,q,"beforeMount");const le=Jn(F,ie);le&&ie.beforeEnter(Y),v(Y,P,W),((G=Z&&Z.onVnodeMounted)||le||oe)&&ke(()=>{G&&Pe(G,q,D),le&&ie.enter(Y),oe&&Xe(D,null,q,"mounted")},F)},E=(D,P,W,q,F)=>{if(W&&m(D,W),q)for(let X=0;X<q.length;X++)m(D,q[X]);if(F){let X=F.subTree;if(P===X){const Q=F.vnode;E(D,Q,Q.scopeId,Q.slotScopeIds,F.parent)}}},u=(D,P,W,q,F,X,Q,J,Y=0)=>{for(let G=Y;G<D.length;G++){const Z=D[G]=J?ze(D[G]):Ie(D[G]);g(null,Z,P,W,q,F,X,Q,J)}},y=(D,P,W,q,F,X,Q)=>{const J=P.el=D.el;let{patchFlag:Y,dynamicChildren:G,dirs:Z}=P;Y|=D.patchFlag&16;const re=D.props||me,ie=P.props||me;let oe;if(W&&Je(W,!1),(oe=ie.onVnodeBeforeUpdate)&&Pe(oe,W,P,D),Z&&Xe(P,D,W,"beforeUpdate"),W&&Je(W,!0),G?R(D.dynamicChildren,G,J,W,q,ti(P,F),X):Q||w(D,P,J,null,W,q,ti(P,F),X,!1),Y>0){if(Y&16)O(J,P,re,ie,W,q,F);else if(Y&2&&re.class!==ie.class&&x(J,"class",null,ie.class,F),Y&4&&x(J,"style",re.style,ie.style,F),Y&8){const le=P.dynamicProps;for(let de=0;de<le.length;de++){const ve=le[de],ge=re[ve],Ce=ie[ve];(Ce!==ge||ve==="value")&&x(J,ve,ge,Ce,F,D.children,W,q,ue)}}Y&1&&D.children!==P.children&&_(J,P.children)}else!Q&&G==null&&O(J,P,re,ie,W,q,F);((oe=ie.onVnodeUpdated)||Z)&&ke(()=>{oe&&Pe(oe,W,P,D),Z&&Xe(P,D,W,"updated")},q)},R=(D,P,W,q,F,X,Q)=>{for(let J=0;J<P.length;J++){const Y=D[J],G=P[J],Z=Y.el&&(Y.type===We||!dt(Y,G)||Y.shapeFlag&70)?l(Y.el):W;g(Y,G,Z,null,q,F,X,Q,!0)}},O=(D,P,W,q,F,X,Q)=>{if(W!==q){if(W!==me)for(const J in W)!_t(J)&&!(J in q)&&x(D,J,W[J],null,Q,P.children,F,X,ue);for(const J in q){if(_t(J))continue;const Y=q[J],G=W[J];Y!==G&&J!=="value"&&x(D,J,G,Y,Q,P.children,F,X,ue)}"value"in q&&x(D,"value",W.value,q.value,Q)}},A=(D,P,W,q,F,X,Q,J,Y)=>{const G=P.el=D?D.el:i(""),Z=P.anchor=D?D.anchor:i("");let{patchFlag:re,dynamicChildren:ie,slotScopeIds:oe}=P;oe&&(J=J?J.concat(oe):oe),D==null?(v(G,W,q),v(Z,W,q),u(P.children||[],W,Z,F,X,Q,J,Y)):re>0&&re&64&&ie&&D.dynamicChildren?(R(D.dynamicChildren,ie,W,F,X,Q,J),(P.key!=null||F&&P===F.subTree)&&ir(D,P,!0)):w(D,P,W,Z,F,X,Q,J,Y)},M=(D,P,W,q,F,X,Q,J,Y)=>{P.slotScopeIds=J,D==null?P.shapeFlag&512?F.ctx.activate(P,W,q,Q,Y):N(P,W,q,F,X,Q,Y):K(D,P,Y)},N=(D,P,W,q,F,X,Q)=>{const J=D.component=ho(D,q,F);if(qs(D)&&(J.ctx.renderer=$),co(J),J.asyncDep){if(F&&F.registerDep(J,z),!D.el){const Y=J.subTree=Ge(bt);o(null,Y,P,W)}}else z(J,D,P,W,F,X,Q)},K=(D,P,W)=>{const q=P.component=D.component;if(_n(D,P,W))if(q.asyncDep&&!q.asyncResolved){U(q,P,W);return}else q.next=P,an(q.update),q.effect.dirty=!0,q.update();else P.el=D.el,q.vnode=P},z=(D,P,W,q,F,X,Q)=>{const J=()=>{if(D.isMounted){let{next:Z,bu:re,u:ie,parent:oe,vnode:le}=D;{const _e=sr(D);if(_e){Z&&(Z.el=le.el,U(D,Z,Q)),_e.asyncDep.then(()=>{D.isUnmounted||J()});return}}let de=Z,ve;Je(D,!1),Z?(Z.el=le.el,U(D,Z,Q)):Z=le,re&&Jt(re),(ve=Z.props&&Z.props.onVnodeBeforeUpdate)&&Pe(ve,oe,Z,le),Je(D,!0);const ge=Zt(D),Ce=D.subTree;D.subTree=ge,g(Ce,ge,l(Ce.el),k(Ce),D,F,X),Z.el=ge.el,de===null&&pn(D,ge.el),ie&&ke(ie,F),(ve=Z.props&&Z.props.onVnodeUpdated)&&ke(()=>Pe(ve,oe,Z,le),F)}else{let Z;const{el:re,props:ie}=P,{bm:oe,m:le,parent:de}=D,ve=Tt(P);if(Je(D,!1),oe&&Jt(oe),!ve&&(Z=ie&&ie.onVnodeBeforeMount)&&Pe(Z,de,P),Je(D,!0),re&&te){const ge=()=>{D.subTree=Zt(D),te(re,D.subTree,D,F,null)};ve?P.type.__asyncLoader().then(()=>!D.isUnmounted&&ge()):ge()}else{const ge=D.subTree=Zt(D);g(null,ge,W,q,D,F,X),P.el=ge.el}if(le&&ke(le,F),!ve&&(Z=ie&&ie.onVnodeMounted)){const ge=P;ke(()=>Pe(Z,de,ge),F)}(P.shapeFlag&256||de&&Tt(de.vnode)&&de.vnode.shapeFlag&256)&&D.a&&ke(D.a,F),D.isMounted=!0,P=W=q=null}},Y=D.effect=new Ei(J,Ae,()=>Oi(G),D.scope),G=D.update=()=>{Y.dirty&&Y.run()};G.id=D.uid,Je(D,!0),G()},U=(D,P,W)=>{P.component=D;const q=D.vnode.props;D.vnode=P,D.next=null,zn(D,P.props,q,W),Vn(D,P.children,W),tt(),Xi(D),it()},w=(D,P,W,q,F,X,Q,J,Y=!1)=>{const G=D&&D.children,Z=D?D.shapeFlag:0,re=P.children,{patchFlag:ie,shapeFlag:oe}=P;if(ie>0){if(ie&128){B(G,re,W,q,F,X,Q,J,Y);return}else if(ie&256){T(G,re,W,q,F,X,Q,J,Y);return}}oe&8?(Z&16&&ue(G,F,X),re!==G&&_(W,re)):Z&16?oe&16?B(G,re,W,q,F,X,Q,J,Y):ue(G,F,X,!0):(Z&8&&_(W,""),oe&16&&u(re,W,q,F,X,Q,J,Y))},T=(D,P,W,q,F,X,Q,J,Y)=>{D=D||rt,P=P||rt;const G=D.length,Z=P.length,re=Math.min(G,Z);let ie;for(ie=0;ie<re;ie++){const oe=P[ie]=Y?ze(P[ie]):Ie(P[ie]);g(D[ie],oe,W,null,F,X,Q,J,Y)}G>Z?ue(D,F,X,!0,!1,re):u(P,W,q,F,X,Q,J,Y,re)},B=(D,P,W,q,F,X,Q,J,Y)=>{let G=0;const Z=P.length;let re=D.length-1,ie=Z-1;for(;G<=re&&G<=ie;){const oe=D[G],le=P[G]=Y?ze(P[G]):Ie(P[G]);if(dt(oe,le))g(oe,le,W,null,F,X,Q,J,Y);else break;G++}for(;G<=re&&G<=ie;){const oe=D[re],le=P[ie]=Y?ze(P[ie]):Ie(P[ie]);if(dt(oe,le))g(oe,le,W,null,F,X,Q,J,Y);else break;re--,ie--}if(G>re){if(G<=ie){const oe=ie+1,le=oe<Z?P[oe].el:q;for(;G<=ie;)g(null,P[G]=Y?ze(P[G]):Ie(P[G]),W,le,F,X,Q,J,Y),G++}}else if(G>ie)for(;G<=re;)V(D[G],F,X,!0),G++;else{const oe=G,le=G,de=new Map;for(G=le;G<=ie;G++){const Re=P[G]=Y?ze(P[G]):Ie(P[G]);Re.key!=null&&de.set(Re.key,G)}let ve,ge=0;const Ce=ie-le+1;let _e=!1,Et=0;const ct=new Array(Ce);for(G=0;G<Ce;G++)ct[G]=0;for(G=oe;G<=re;G++){const Re=D[G];if(ge>=Ce){V(Re,F,X,!0);continue}let Oe;if(Re.key!=null)Oe=de.get(Re.key);else for(ve=le;ve<=ie;ve++)if(ct[ve-le]===0&&dt(Re,P[ve])){Oe=ve;break}Oe===void 0?V(Re,F,X,!0):(ct[Oe-le]=G+1,Oe>=Et?Et=Oe:_e=!0,g(Re,P[Oe],W,null,F,X,Q,J,Y),ge++)}const Wi=_e?Yn(ct):rt;for(ve=Wi.length-1,G=Ce-1;G>=0;G--){const Re=le+G,Oe=P[Re],Ui=Re+1<Z?P[Re+1].el:q;ct[G]===0?g(null,Oe,W,Ui,F,X,Q,J,Y):_e&&(ve<0||G!==Wi[ve]?I(Oe,W,Ui,2):ve--)}}},I=(D,P,W,q,F=null)=>{const{el:X,type:Q,transition:J,children:Y,shapeFlag:G}=D;if(G&6){I(D.component.subTree,P,W,q);return}if(G&128){D.suspense.move(P,W,q);return}if(G&64){Q.move(D,P,W,$);return}if(Q===We){v(X,P,W);for(let re=0;re<Y.length;re++)I(Y[re],P,W,q);v(D.anchor,P,W);return}if(Q===ii){n(D,P,W);return}if(q!==2&&G&1&&J)if(q===0)J.beforeEnter(X),v(X,P,W),ke(()=>J.enter(X),F);else{const{leave:re,delayLeave:ie,afterLeave:oe}=J,le=()=>v(X,P,W),de=()=>{re(X,()=>{le(),oe&&oe()})};ie?ie(X,le,de):de()}else v(X,P,W)},V=(D,P,W,q=!1,F=!1)=>{const{type:X,props:Q,ref:J,children:Y,dynamicChildren:G,shapeFlag:Z,patchFlag:re,dirs:ie}=D;if(J!=null&&pi(J,null,W,D,!0),Z&256){P.ctx.deactivate(D);return}const oe=Z&1&&ie,le=!Tt(D);let de;if(le&&(de=Q&&Q.onVnodeBeforeUnmount)&&Pe(de,P,D),Z&6)se(D.component,W,q);else{if(Z&128){D.suspense.unmount(W,q);return}oe&&Xe(D,null,P,"beforeUnmount"),Z&64?D.type.remove(D,P,W,F,$,q):G&&(X!==We||re>0&&re&64)?ue(G,P,W,!1,!0):(X===We&&re&384||!F&&Z&16)&&ue(Y,P,W),q&&ee(D)}(le&&(de=Q&&Q.onVnodeUnmounted)||oe)&&ke(()=>{de&&Pe(de,P,D),oe&&Xe(D,null,P,"unmounted")},W)},ee=D=>{const{type:P,el:W,anchor:q,transition:F}=D;if(P===We){ne(W,q);return}if(P===ii){c(D);return}const X=()=>{C(W),F&&!F.persisted&&F.afterLeave&&F.afterLeave()};if(D.shapeFlag&1&&F&&!F.persisted){const{leave:Q,delayLeave:J}=F,Y=()=>Q(W,X);J?J(D.el,X,Y):Y()}else X()},ne=(D,P)=>{let W;for(;D!==P;)W=p(D),C(D),D=W;C(P)},se=(D,P,W)=>{const{bum:q,scope:F,update:X,subTree:Q,um:J}=D;q&&Jt(q),F.stop(),X&&(X.active=!1,V(Q,D,P,W)),J&&ke(J,P),ke(()=>{D.isUnmounted=!0},P),P&&P.pendingBranch&&!P.isUnmounted&&D.asyncDep&&!D.asyncResolved&&D.suspenseId===P.pendingId&&(P.deps--,P.deps===0&&P.resolve())},ue=(D,P,W,q=!1,F=!1,X=0)=>{for(let Q=X;Q<D.length;Q++)V(D[Q],P,W,q,F)},k=D=>D.shapeFlag&6?k(D.component.subTree):D.shapeFlag&128?D.suspense.next():p(D.anchor||D.el);let H=!1;const j=(D,P,W)=>{D==null?P._vnode&&V(P._vnode,null,null,!0):g(P._vnode||null,D,P,null,null,null,W),H||(H=!0,Xi(),Us(),H=!1),P._vnode=D},$={p:g,um:V,m:I,r:ee,mt:N,mc:u,pc:w,pbc:R,n:k,o:e};let ae,te;return s&&([ae,te]=s($)),{render:j,hydrate:ae,createApp:Nn(j,ae)}}function ti({type:e,props:s},d){return d==="svg"&&e==="foreignObject"||d==="mathml"&&e==="annotation-xml"&&s&&s.encoding&&s.encoding.includes("html")?void 0:d}function Je({effect:e,update:s},d){e.allowRecurse=s.allowRecurse=d}function Jn(e,s){return(!e||e&&!e.pendingBranch)&&s&&!s.persisted}function ir(e,s,d=!1){const v=e.children,C=s.children;if(he(v)&&he(C))for(let x=0;x<v.length;x++){const L=v[x];let i=C[x];i.shapeFlag&1&&!i.dynamicChildren&&((i.patchFlag<=0||i.patchFlag===32)&&(i=C[x]=ze(C[x]),i.el=L.el),d||ir(L,i)),i.type===qt&&(i.el=L.el)}}function Yn(e){const s=e.slice(),d=[0];let v,C,x,L,i;const a=e.length;for(v=0;v<a;v++){const h=e[v];if(h!==0){if(C=d[d.length-1],e[C]<h){s[v]=C,d.push(v);continue}for(x=0,L=d.length-1;x<L;)i=x+L>>1,e[d[i]]<h?x=i+1:L=i;h<e[d[x]]&&(x>0&&(s[v]=d[x-1]),d[x]=v)}}for(x=d.length,L=d[x-1];x-- >0;)d[x]=L,L=s[L];return d}function sr(e){const s=e.subTree.component;if(s)return s.asyncDep&&!s.asyncResolved?s:sr(s)}const Zn=e=>e.__isTeleport,We=Symbol.for("v-fgt"),qt=Symbol.for("v-txt"),bt=Symbol.for("v-cmt"),ii=Symbol.for("v-stc"),gt=[];let Be=null;function rr(e=!1){gt.push(Be=e?null:[])}function Qn(){gt.pop(),Be=gt[gt.length-1]||null}let yt=1;function ns(e){yt+=e}function nr(e){return e.dynamicChildren=yt>0?Be||rt:null,Qn(),yt>0&&Be&&Be.push(e),e}function eo(e,s,d,v,C,x){return nr(ar(e,s,d,v,C,x,!0))}function to(e,s,d,v,C){return nr(Ge(e,s,d,v,C,!0))}function io(e){return e?e.__v_isVNode===!0:!1}function dt(e,s){return e.type===s.type&&e.key===s.key}const Vt="__vInternal",or=({key:e})=>e??null,Mt=({ref:e,ref_key:s,ref_for:d})=>(typeof e=="number"&&(e=""+e),e!=null?be(e)||De(e)||ce(e)?{i:Fe,r:e,k:s,f:!!d}:e:null);function ar(e,s=null,d=null,v=0,C=null,x=e===We?0:1,L=!1,i=!1){const a={__v_isVNode:!0,__v_skip:!0,type:e,props:s,key:s&&or(s),ref:s&&Mt(s),scopeId:js,slotScopeIds:null,children:d,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:x,patchFlag:v,dynamicProps:C,dynamicChildren:null,appContext:null,ctx:Fe};return i?(Hi(a,d),x&128&&e.normalize(a)):d&&(a.shapeFlag|=be(d)?8:16),yt>0&&!L&&Be&&(a.patchFlag>0||x&6)&&a.patchFlag!==32&&Be.push(a),a}const Ge=so;function so(e,s=null,d=null,v=0,C=null,x=!1){if((!e||e===vn)&&(e=bt),io(e)){const i=lt(e,s,!0);return d&&Hi(i,d),yt>0&&!x&&Be&&(i.shapeFlag&6?Be[Be.indexOf(e)]=i:Be.push(i)),i.patchFlag|=-2,i}if(po(e)&&(e=e.__vccOpts),s){s=ro(s);let{class:i,style:a}=s;i&&!be(i)&&(s.class=wi(i)),Se(a)&&(Os(a)&&!he(a)&&(a=we({},a)),s.style=yi(a))}const L=be(e)?1:gn(e)?128:Zn(e)?64:Se(e)?4:ce(e)?2:0;return ar(e,s,d,v,C,L,x,!0)}function ro(e){return e?Os(e)||Vt in e?we({},e):e:null}function lt(e,s,d=!1){const{props:v,ref:C,patchFlag:x,children:L}=e,i=s?oo(v||{},s):v;return{__v_isVNode:!0,__v_skip:!0,type:e.type,props:i,key:i&&or(i),ref:s&&s.ref?d&&C?he(C)?C.concat(Mt(s)):[C,Mt(s)]:Mt(s):C,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:L,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:s&&e.type!==We?x===-1?16:x|16:x,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&lt(e.ssContent),ssFallback:e.ssFallback&&lt(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce}}function no(e=" ",s=0){return Ge(qt,null,e,s)}function Ie(e){return e==null||typeof e=="boolean"?Ge(bt):he(e)?Ge(We,null,e.slice()):typeof e=="object"?ze(e):Ge(qt,null,String(e))}function ze(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:lt(e)}function Hi(e,s){let d=0;const{shapeFlag:v}=e;if(s==null)s=null;else if(he(s))d=16;else if(typeof s=="object")if(v&65){const C=s.default;C&&(C._c&&(C._d=!1),Hi(e,C()),C._c&&(C._d=!0));return}else{d=32;const C=s._;!C&&!(Vt in s)?s._ctx=Fe:C===3&&Fe&&(Fe.slots._===1?s._=1:(s._=2,e.patchFlag|=1024))}else ce(s)?(s={default:s,_ctx:Fe},d=32):(s=String(s),v&64?(d=16,s=[no(s)]):d=8);e.children=s,e.shapeFlag|=d}function oo(...e){const s={};for(let d=0;d<e.length;d++){const v=e[d];for(const C in v)if(C==="class")s.class!==v.class&&(s.class=wi([s.class,v.class]));else if(C==="style")s.style=yi([s.style,v.style]);else if(Ft(C)){const x=s[C],L=v[C];L&&x!==L&&!(he(x)&&x.includes(L))&&(s[C]=x?[].concat(x,L):L)}else C!==""&&(s[C]=v[C])}return s}function Pe(e,s,d,v=null){Me(e,s,7,[d,v])}const ao=Js();let lo=0;function ho(e,s,d){const v=e.type,C=(s?s.appContext:e.appContext)||ao,x={uid:lo++,vnode:e,type:v,parent:s,appContext:C,root:null,next:null,subTree:null,effect:null,update:null,scope:new Ar(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:s?s.provides:Object.create(C.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Zs(v,C),emitsOptions:$s(v,C),emit:null,emitted:null,propsDefaults:me,inheritAttrs:v.inheritAttrs,ctx:me,data:me,props:me,attrs:me,slots:me,refs:me,setupState:me,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:d,suspenseId:d?d.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return x.ctx={_:x},x.root=s?s.root:x,x.emit=cn.bind(null,x),e.ce&&e.ce(x),x}let xe=null,Ht,vi;{const e=Cs(),s=(d,v)=>{let C;return(C=e[d])||(C=e[d]=[]),C.push(v),x=>{C.length>1?C.forEach(L=>L(x)):C[0](x)}};Ht=s("__VUE_INSTANCE_SETTERS__",d=>xe=d),vi=s("__VUE_SSR_SETTERS__",d=>Gt=d)}const wt=e=>{const s=xe;return Ht(e),e.scope.on(),()=>{e.scope.off(),Ht(s)}},os=()=>{xe&&xe.scope.off(),Ht(null)};function lr(e){return e.vnode.shapeFlag&4}let Gt=!1;function co(e,s=!1){s&&vi(s);const{props:d,children:v}=e.vnode,C=lr(e);jn(e,d,C,s),qn(e,v);const x=C?uo(e,s):void 0;return s&&vi(!1),x}function uo(e,s){const d=e.type;e.accessCache=Object.create(null),e.proxy=Ps(new Proxy(e.ctx,On));const{setup:v}=d;if(v){const C=e.setupContext=v.length>1?_o(e):null,x=wt(e);tt();const L=Ve(v,e,0,[e.props,C]);if(it(),x(),ms(L)){if(L.then(os,os),s)return L.then(i=>{as(e,i,s)}).catch(i=>{jt(i,e,0)});e.asyncDep=L}else as(e,L,s)}else hr(e,s)}function as(e,s,d){ce(s)?e.type.__ssrInlineRender?e.ssrRender=s:e.render=s:Se(s)&&(e.setupState=Hs(s)),hr(e,d)}let ls;function hr(e,s,d){const v=e.type;if(!e.render){if(!s&&ls&&!v.render){const C=v.template||Pi(e).template;if(C){const{isCustomElement:x,compilerOptions:L}=e.appContext.config,{delimiters:i,compilerOptions:a}=v,h=we(we({isCustomElement:x,delimiters:i},L),a);v.render=ls(C,h)}}e.render=v.render||Ae}{const C=wt(e);tt();try{Pn(e)}finally{it(),C()}}}function fo(e){return e.attrsProxy||(e.attrsProxy=new Proxy(e.attrs,{get(s,d){return Le(e,"get","$attrs"),s[d]}}))}function _o(e){const s=d=>{e.exposed=d||{}};return{get attrs(){return fo(e)},slots:e.slots,emit:e.emit,expose:s}}function Fi(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy(Hs(Ps(e.exposed)),{get(s,d){if(d in s)return s[d];if(d in pt)return pt[d](e)},has(s,d){return d in s||d in pt}}))}function po(e){return ce(e)&&"__vccOpts"in e}const vo=(e,s)=>Qr(e,s,Gt),go="3.4.19";/**
* @vue/runtime-dom v3.4.19
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const mo="http://www.w3.org/2000/svg",So="http://www.w3.org/1998/Math/MathML",Ke=typeof document<"u"?document:null,hs=Ke&&Ke.createElement("template"),Co={insert:(e,s,d)=>{s.insertBefore(e,d||null)},remove:e=>{const s=e.parentNode;s&&s.removeChild(e)},createElement:(e,s,d,v)=>{const C=s==="svg"?Ke.createElementNS(mo,e):s==="mathml"?Ke.createElementNS(So,e):Ke.createElement(e,d?{is:d}:void 0);return e==="select"&&v&&v.multiple!=null&&C.setAttribute("multiple",v.multiple),C},createText:e=>Ke.createTextNode(e),createComment:e=>Ke.createComment(e),setText:(e,s)=>{e.nodeValue=s},setElementText:(e,s)=>{e.textContent=s},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Ke.querySelector(e),setScopeId(e,s){e.setAttribute(s,"")},insertStaticContent(e,s,d,v,C,x){const L=d?d.previousSibling:s.lastChild;if(C&&(C===x||C.nextSibling))for(;s.insertBefore(C.cloneNode(!0),d),!(C===x||!(C=C.nextSibling)););else{hs.innerHTML=v==="svg"?`<svg>${e}</svg>`:v==="mathml"?`<math>${e}</math>`:e;const i=hs.content;if(v==="svg"||v==="mathml"){const a=i.firstChild;for(;a.firstChild;)i.appendChild(a.firstChild);i.removeChild(a)}s.insertBefore(i,d)}return[L?L.nextSibling:s.firstChild,d?d.previousSibling:s.lastChild]}},bo=Symbol("_vtc");function yo(e,s,d){const v=e[bo];v&&(s=(s?[s,...v]:[...v]).join(" ")),s==null?e.removeAttribute("class"):d?e.setAttribute("class",s):e.className=s}const cs=Symbol("_vod"),wo=Symbol(""),Eo=/(^|;)\s*display\s*:/;function xo(e,s,d){const v=e.style,C=be(d),x=v.display;let L=!1;if(d&&!C){if(s&&!be(s))for(const i in s)d[i]==null&&gi(v,i,"");for(const i in d)i==="display"&&(L=!0),gi(v,i,d[i])}else if(C){if(s!==d){const i=v[wo];i&&(d+=";"+i),v.cssText=d,L=Eo.test(d)}}else s&&e.removeAttribute("style");cs in e&&(e[cs]=L?v.display:"",v.display=x)}const ds=/\s*!important$/;function gi(e,s,d){if(he(d))d.forEach(v=>gi(e,s,v));else if(d==null&&(d=""),s.startsWith("--"))e.setProperty(s,d);else{const v=ko(e,s);ds.test(d)?e.setProperty(ht(v),d.replace(ds,""),"important"):e[v]=d}}const us=["Webkit","Moz","ms"],si={};function ko(e,s){const d=si[s];if(d)return d;let v=at(s);if(v!=="filter"&&v in e)return si[s]=v;v=Ss(v);for(let C=0;C<us.length;C++){const x=us[C]+v;if(x in e)return si[s]=x}return s}const fs="http://www.w3.org/1999/xlink";function Lo(e,s,d,v,C){if(v&&s.startsWith("xlink:"))d==null?e.removeAttributeNS(fs,s.slice(6,s.length)):e.setAttributeNS(fs,s,d);else{const x=Dr(s);d==null||x&&!bs(d)?e.removeAttribute(s):e.setAttribute(s,x?"":d)}}function Ro(e,s,d,v,C,x,L){if(s==="innerHTML"||s==="textContent"){v&&L(v,C,x),e[s]=d??"";return}const i=e.tagName;if(s==="value"&&i!=="PROGRESS"&&!i.includes("-")){e._value=d;const h=i==="OPTION"?e.getAttribute("value"):e.value,_=d??"";h!==_&&(e.value=_),d==null&&e.removeAttribute(s);return}let a=!1;if(d===""||d==null){const h=typeof e[s];h==="boolean"?d=bs(d):d==null&&h==="string"?(d="",a=!0):h==="number"&&(d=0,a=!0)}try{e[s]=d}catch{}a&&e.removeAttribute(s)}function Do(e,s,d,v){e.addEventListener(s,d,v)}function Ao(e,s,d,v){e.removeEventListener(s,d,v)}const _s=Symbol("_vei");function To(e,s,d,v,C=null){const x=e[_s]||(e[_s]={}),L=x[s];if(v&&L)L.value=v;else{const[i,a]=Bo(s);if(v){const h=x[s]=Po(v,C);Do(e,i,h,a)}else L&&(Ao(e,i,L,a),x[s]=void 0)}}const ps=/(?:Once|Passive|Capture)$/;function Bo(e){let s;if(ps.test(e)){s={};let v;for(;v=e.match(ps);)e=e.slice(0,e.length-v[0].length),s[v[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):ht(e.slice(2)),s]}let ri=0;const Mo=Promise.resolve(),Oo=()=>ri||(Mo.then(()=>ri=0),ri=Date.now());function Po(e,s){const d=v=>{if(!v._vts)v._vts=Date.now();else if(v._vts<=d.attached)return;Me(Io(v,d.value),s,5,[v])};return d.value=e,d.attached=Oo(),d}function Io(e,s){if(he(s)){const d=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{d.call(e),e._stopped=!0},s.map(v=>C=>!C._stopped&&v&&v(C))}else return s}const vs=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,Ho=(e,s,d,v,C,x,L,i,a)=>{const h=C==="svg";s==="class"?yo(e,v,h):s==="style"?xo(e,d,v):Ft(s)?Si(s)||To(e,s,d,v,L):(s[0]==="."?(s=s.slice(1),!0):s[0]==="^"?(s=s.slice(1),!1):Fo(e,s,v,h))?Ro(e,s,v,x,L,i,a):(s==="true-value"?e._trueValue=v:s==="false-value"&&(e._falseValue=v),Lo(e,s,v,h))};function Fo(e,s,d,v){if(v)return!!(s==="innerHTML"||s==="textContent"||s in e&&vs(s)&&ce(d));if(s==="spellcheck"||s==="draggable"||s==="translate"||s==="form"||s==="list"&&e.tagName==="INPUT"||s==="type"&&e.tagName==="TEXTAREA")return!1;if(s==="width"||s==="height"){const C=e.tagName;if(C==="IMG"||C==="VIDEO"||C==="CANVAS"||C==="SOURCE")return!1}return vs(s)&&be(d)?!1:s in e}const Wo=we({patchProp:Ho},Co);let gs;function Uo(){return gs||(gs=Gn(Wo))}const No=(...e)=>{const s=Uo().createApp(...e),{mount:d}=s;return s.mount=v=>{const C=jo(v);if(!C)return;const x=s._component;!ce(x)&&!x.render&&!x.template&&(x.template=C.innerHTML),C.innerHTML="";const L=d(C,!1,$o(C));return C instanceof Element&&(C.removeAttribute("v-cloak"),C.setAttribute("data-v-app","")),L},s};function $o(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function jo(e){return be(e)?document.querySelector(e):e}var cr={exports:{}};(function(e,s){(function(d,v){e.exports=v()})(self,()=>(()=>{var d={4567:function(L,i,a){var h=this&&this.__decorate||function(n,c,f,S){var E,u=arguments.length,y=u<3?c:S===null?S=Object.getOwnPropertyDescriptor(c,f):S;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(n,c,f,S);else for(var R=n.length-1;R>=0;R--)(E=n[R])&&(y=(u<3?E(y):u>3?E(c,f,y):E(c,f))||y);return u>3&&y&&Object.defineProperty(c,f,y),y},_=this&&this.__param||function(n,c){return function(f,S){c(f,S,n)}};Object.defineProperty(i,"__esModule",{value:!0}),i.AccessibilityManager=void 0;const l=a(9042),p=a(6114),m=a(9924),b=a(844),g=a(5596),t=a(4725),o=a(3656);let r=i.AccessibilityManager=class extends b.Disposable{constructor(n,c){super(),this._terminal=n,this._renderService=c,this._liveRegionLineCount=0,this._charsToConsume=[],this._charsToAnnounce="",this._accessibilityContainer=document.createElement("div"),this._accessibilityContainer.classList.add("xterm-accessibility"),this._rowContainer=document.createElement("div"),this._rowContainer.setAttribute("role","list"),this._rowContainer.classList.add("xterm-accessibility-tree"),this._rowElements=[];for(let f=0;f<this._terminal.rows;f++)this._rowElements[f]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[f]);if(this._topBoundaryFocusListener=f=>this._handleBoundaryFocus(f,0),this._bottomBoundaryFocusListener=f=>this._handleBoundaryFocus(f,1),this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions(),this._accessibilityContainer.appendChild(this._rowContainer),this._liveRegion=document.createElement("div"),this._liveRegion.classList.add("live-region"),this._liveRegion.setAttribute("aria-live","assertive"),this._accessibilityContainer.appendChild(this._liveRegion),this._liveRegionDebouncer=this.register(new m.TimeBasedDebouncer(this._renderRows.bind(this))),!this._terminal.element)throw new Error("Cannot enable accessibility before Terminal.open");this._terminal.element.insertAdjacentElement("afterbegin",this._accessibilityContainer),this.register(this._terminal.onResize(f=>this._handleResize(f.rows))),this.register(this._terminal.onRender(f=>this._refreshRows(f.start,f.end))),this.register(this._terminal.onScroll(()=>this._refreshRows())),this.register(this._terminal.onA11yChar(f=>this._handleChar(f))),this.register(this._terminal.onLineFeed(()=>this._handleChar(`
`))),this.register(this._terminal.onA11yTab(f=>this._handleTab(f))),this.register(this._terminal.onKey(f=>this._handleKey(f.key))),this.register(this._terminal.onBlur(()=>this._clearLiveRegion())),this.register(this._renderService.onDimensionsChange(()=>this._refreshRowsDimensions())),this._screenDprMonitor=new g.ScreenDprMonitor(window),this.register(this._screenDprMonitor),this._screenDprMonitor.setListener(()=>this._refreshRowsDimensions()),this.register((0,o.addDisposableDomListener)(window,"resize",()=>this._refreshRowsDimensions())),this._refreshRows(),this.register((0,b.toDisposable)(()=>{this._accessibilityContainer.remove(),this._rowElements.length=0}))}_handleTab(n){for(let c=0;c<n;c++)this._handleChar(" ")}_handleChar(n){this._liveRegionLineCount<21&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==n&&(this._charsToAnnounce+=n):this._charsToAnnounce+=n,n===`
`&&(this._liveRegionLineCount++,this._liveRegionLineCount===21&&(this._liveRegion.textContent+=l.tooMuchOutput)),p.isMac&&this._liveRegion.textContent&&this._liveRegion.textContent.length>0&&!this._liveRegion.parentNode&&setTimeout(()=>{this._accessibilityContainer.appendChild(this._liveRegion)},0))}_clearLiveRegion(){this._liveRegion.textContent="",this._liveRegionLineCount=0,p.isMac&&this._liveRegion.remove()}_handleKey(n){this._clearLiveRegion(),new RegExp("\\p{Control}","u").test(n)||this._charsToConsume.push(n)}_refreshRows(n,c){this._liveRegionDebouncer.refresh(n,c,this._terminal.rows)}_renderRows(n,c){const f=this._terminal.buffer,S=f.lines.length.toString();for(let E=n;E<=c;E++){const u=f.translateBufferLineToString(f.ydisp+E,!0),y=(f.ydisp+E+1).toString(),R=this._rowElements[E];R&&(u.length===0?R.innerText=" ":R.textContent=u,R.setAttribute("aria-posinset",y),R.setAttribute("aria-setsize",S))}this._announceCharacters()}_announceCharacters(){this._charsToAnnounce.length!==0&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")}_handleBoundaryFocus(n,c){const f=n.target,S=this._rowElements[c===0?1:this._rowElements.length-2];if(f.getAttribute("aria-posinset")===(c===0?"1":`${this._terminal.buffer.lines.length}`)||n.relatedTarget!==S)return;let E,u;if(c===0?(E=f,u=this._rowElements.pop(),this._rowContainer.removeChild(u)):(E=this._rowElements.shift(),u=f,this._rowContainer.removeChild(E)),E.removeEventListener("focus",this._topBoundaryFocusListener),u.removeEventListener("focus",this._bottomBoundaryFocusListener),c===0){const y=this._createAccessibilityTreeNode();this._rowElements.unshift(y),this._rowContainer.insertAdjacentElement("afterbegin",y)}else{const y=this._createAccessibilityTreeNode();this._rowElements.push(y),this._rowContainer.appendChild(y)}this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(c===0?-1:1),this._rowElements[c===0?1:this._rowElements.length-2].focus(),n.preventDefault(),n.stopImmediatePropagation()}_handleResize(n){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(let c=this._rowContainer.children.length;c<this._terminal.rows;c++)this._rowElements[c]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[c]);for(;this._rowElements.length>n;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()}_createAccessibilityTreeNode(){const n=document.createElement("div");return n.setAttribute("role","listitem"),n.tabIndex=-1,this._refreshRowDimensions(n),n}_refreshRowsDimensions(){if(this._renderService.dimensions.css.cell.height){this._accessibilityContainer.style.width=`${this._renderService.dimensions.css.canvas.width}px`,this._rowElements.length!==this._terminal.rows&&this._handleResize(this._terminal.rows);for(let n=0;n<this._terminal.rows;n++)this._refreshRowDimensions(this._rowElements[n])}}_refreshRowDimensions(n){n.style.height=`${this._renderService.dimensions.css.cell.height}px`}};i.AccessibilityManager=r=h([_(1,t.IRenderService)],r)},3614:(L,i)=>{function a(p){return p.replace(/\r?\n/g,"\r")}function h(p,m){return m?"\x1B[200~"+p+"\x1B[201~":p}function _(p,m,b,g){p=h(p=a(p),b.decPrivateModes.bracketedPasteMode&&g.rawOptions.ignoreBracketedPasteMode!==!0),b.triggerDataEvent(p,!0),m.value=""}function l(p,m,b){const g=b.getBoundingClientRect(),t=p.clientX-g.left-10,o=p.clientY-g.top-10;m.style.width="20px",m.style.height="20px",m.style.left=`${t}px`,m.style.top=`${o}px`,m.style.zIndex="1000",m.focus()}Object.defineProperty(i,"__esModule",{value:!0}),i.rightClickHandler=i.moveTextAreaUnderMouseCursor=i.paste=i.handlePasteEvent=i.copyHandler=i.bracketTextForPaste=i.prepareTextForTerminal=void 0,i.prepareTextForTerminal=a,i.bracketTextForPaste=h,i.copyHandler=function(p,m){p.clipboardData&&p.clipboardData.setData("text/plain",m.selectionText),p.preventDefault()},i.handlePasteEvent=function(p,m,b,g){p.stopPropagation(),p.clipboardData&&_(p.clipboardData.getData("text/plain"),m,b,g)},i.paste=_,i.moveTextAreaUnderMouseCursor=l,i.rightClickHandler=function(p,m,b,g,t){l(p,m,b),t&&g.rightClickSelect(p),m.value=g.selectionText,m.select()}},7239:(L,i,a)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ColorContrastCache=void 0;const h=a(1505);i.ColorContrastCache=class{constructor(){this._color=new h.TwoKeyMap,this._css=new h.TwoKeyMap}setCss(_,l,p){this._css.set(_,l,p)}getCss(_,l){return this._css.get(_,l)}setColor(_,l,p){this._color.set(_,l,p)}getColor(_,l){return this._color.get(_,l)}clear(){this._color.clear(),this._css.clear()}}},3656:(L,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.addDisposableDomListener=void 0,i.addDisposableDomListener=function(a,h,_,l){a.addEventListener(h,_,l);let p=!1;return{dispose:()=>{p||(p=!0,a.removeEventListener(h,_,l))}}}},6465:function(L,i,a){var h=this&&this.__decorate||function(t,o,r,n){var c,f=arguments.length,S=f<3?o:n===null?n=Object.getOwnPropertyDescriptor(o,r):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(t,o,r,n);else for(var E=t.length-1;E>=0;E--)(c=t[E])&&(S=(f<3?c(S):f>3?c(o,r,S):c(o,r))||S);return f>3&&S&&Object.defineProperty(o,r,S),S},_=this&&this.__param||function(t,o){return function(r,n){o(r,n,t)}};Object.defineProperty(i,"__esModule",{value:!0}),i.Linkifier2=void 0;const l=a(3656),p=a(8460),m=a(844),b=a(2585);let g=i.Linkifier2=class extends m.Disposable{get currentLink(){return this._currentLink}constructor(t){super(),this._bufferService=t,this._linkProviders=[],this._linkCacheDisposables=[],this._isMouseOut=!0,this._wasResized=!1,this._activeLine=-1,this._onShowLinkUnderline=this.register(new p.EventEmitter),this.onShowLinkUnderline=this._onShowLinkUnderline.event,this._onHideLinkUnderline=this.register(new p.EventEmitter),this.onHideLinkUnderline=this._onHideLinkUnderline.event,this.register((0,m.getDisposeArrayDisposable)(this._linkCacheDisposables)),this.register((0,m.toDisposable)(()=>{this._lastMouseEvent=void 0})),this.register(this._bufferService.onResize(()=>{this._clearCurrentLink(),this._wasResized=!0}))}registerLinkProvider(t){return this._linkProviders.push(t),{dispose:()=>{const o=this._linkProviders.indexOf(t);o!==-1&&this._linkProviders.splice(o,1)}}}attachToDom(t,o,r){this._element=t,this._mouseService=o,this._renderService=r,this.register((0,l.addDisposableDomListener)(this._element,"mouseleave",()=>{this._isMouseOut=!0,this._clearCurrentLink()})),this.register((0,l.addDisposableDomListener)(this._element,"mousemove",this._handleMouseMove.bind(this))),this.register((0,l.addDisposableDomListener)(this._element,"mousedown",this._handleMouseDown.bind(this))),this.register((0,l.addDisposableDomListener)(this._element,"mouseup",this._handleMouseUp.bind(this)))}_handleMouseMove(t){if(this._lastMouseEvent=t,!this._element||!this._mouseService)return;const o=this._positionFromMouseEvent(t,this._element,this._mouseService);if(!o)return;this._isMouseOut=!1;const r=t.composedPath();for(let n=0;n<r.length;n++){const c=r[n];if(c.classList.contains("xterm"))break;if(c.classList.contains("xterm-hover"))return}this._lastBufferCell&&o.x===this._lastBufferCell.x&&o.y===this._lastBufferCell.y||(this._handleHover(o),this._lastBufferCell=o)}_handleHover(t){if(this._activeLine!==t.y||this._wasResized)return this._clearCurrentLink(),this._askForLink(t,!1),void(this._wasResized=!1);this._currentLink&&this._linkAtPosition(this._currentLink.link,t)||(this._clearCurrentLink(),this._askForLink(t,!0))}_askForLink(t,o){var r,n;this._activeProviderReplies&&o||((r=this._activeProviderReplies)===null||r===void 0||r.forEach(f=>{f==null||f.forEach(S=>{S.link.dispose&&S.link.dispose()})}),this._activeProviderReplies=new Map,this._activeLine=t.y);let c=!1;for(const[f,S]of this._linkProviders.entries())o?!((n=this._activeProviderReplies)===null||n===void 0)&&n.get(f)&&(c=this._checkLinkProviderResult(f,t,c)):S.provideLinks(t.y,E=>{var u,y;if(this._isMouseOut)return;const R=E==null?void 0:E.map(O=>({link:O}));(u=this._activeProviderReplies)===null||u===void 0||u.set(f,R),c=this._checkLinkProviderResult(f,t,c),((y=this._activeProviderReplies)===null||y===void 0?void 0:y.size)===this._linkProviders.length&&this._removeIntersectingLinks(t.y,this._activeProviderReplies)})}_removeIntersectingLinks(t,o){const r=new Set;for(let n=0;n<o.size;n++){const c=o.get(n);if(c)for(let f=0;f<c.length;f++){const S=c[f],E=S.link.range.start.y<t?0:S.link.range.start.x,u=S.link.range.end.y>t?this._bufferService.cols:S.link.range.end.x;for(let y=E;y<=u;y++){if(r.has(y)){c.splice(f--,1);break}r.add(y)}}}}_checkLinkProviderResult(t,o,r){var n;if(!this._activeProviderReplies)return r;const c=this._activeProviderReplies.get(t);let f=!1;for(let S=0;S<t;S++)this._activeProviderReplies.has(S)&&!this._activeProviderReplies.get(S)||(f=!0);if(!f&&c){const S=c.find(E=>this._linkAtPosition(E.link,o));S&&(r=!0,this._handleNewLink(S))}if(this._activeProviderReplies.size===this._linkProviders.length&&!r)for(let S=0;S<this._activeProviderReplies.size;S++){const E=(n=this._activeProviderReplies.get(S))===null||n===void 0?void 0:n.find(u=>this._linkAtPosition(u.link,o));if(E){r=!0,this._handleNewLink(E);break}}return r}_handleMouseDown(){this._mouseDownLink=this._currentLink}_handleMouseUp(t){if(!this._element||!this._mouseService||!this._currentLink)return;const o=this._positionFromMouseEvent(t,this._element,this._mouseService);o&&this._mouseDownLink===this._currentLink&&this._linkAtPosition(this._currentLink.link,o)&&this._currentLink.link.activate(t,this._currentLink.link.text)}_clearCurrentLink(t,o){this._element&&this._currentLink&&this._lastMouseEvent&&(!t||!o||this._currentLink.link.range.start.y>=t&&this._currentLink.link.range.end.y<=o)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,(0,m.disposeArray)(this._linkCacheDisposables))}_handleNewLink(t){if(!this._element||!this._lastMouseEvent||!this._mouseService)return;const o=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);o&&this._linkAtPosition(t.link,o)&&(this._currentLink=t,this._currentLink.state={decorations:{underline:t.link.decorations===void 0||t.link.decorations.underline,pointerCursor:t.link.decorations===void 0||t.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,t.link,this._lastMouseEvent),t.link.decorations={},Object.defineProperties(t.link.decorations,{pointerCursor:{get:()=>{var r,n;return(n=(r=this._currentLink)===null||r===void 0?void 0:r.state)===null||n===void 0?void 0:n.decorations.pointerCursor},set:r=>{var n,c;!((n=this._currentLink)===null||n===void 0)&&n.state&&this._currentLink.state.decorations.pointerCursor!==r&&(this._currentLink.state.decorations.pointerCursor=r,this._currentLink.state.isHovered&&((c=this._element)===null||c===void 0||c.classList.toggle("xterm-cursor-pointer",r)))}},underline:{get:()=>{var r,n;return(n=(r=this._currentLink)===null||r===void 0?void 0:r.state)===null||n===void 0?void 0:n.decorations.underline},set:r=>{var n,c,f;!((n=this._currentLink)===null||n===void 0)&&n.state&&((f=(c=this._currentLink)===null||c===void 0?void 0:c.state)===null||f===void 0?void 0:f.decorations.underline)!==r&&(this._currentLink.state.decorations.underline=r,this._currentLink.state.isHovered&&this._fireUnderlineEvent(t.link,r))}}}),this._renderService&&this._linkCacheDisposables.push(this._renderService.onRenderedViewportChange(r=>{if(!this._currentLink)return;const n=r.start===0?0:r.start+1+this._bufferService.buffer.ydisp,c=this._bufferService.buffer.ydisp+1+r.end;if(this._currentLink.link.range.start.y>=n&&this._currentLink.link.range.end.y<=c&&(this._clearCurrentLink(n,c),this._lastMouseEvent&&this._element)){const f=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);f&&this._askForLink(f,!1)}})))}_linkHover(t,o,r){var n;!((n=this._currentLink)===null||n===void 0)&&n.state&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(o,!0),this._currentLink.state.decorations.pointerCursor&&t.classList.add("xterm-cursor-pointer")),o.hover&&o.hover(r,o.text)}_fireUnderlineEvent(t,o){const r=t.range,n=this._bufferService.buffer.ydisp,c=this._createLinkUnderlineEvent(r.start.x-1,r.start.y-n-1,r.end.x,r.end.y-n-1,void 0);(o?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(c)}_linkLeave(t,o,r){var n;!((n=this._currentLink)===null||n===void 0)&&n.state&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(o,!1),this._currentLink.state.decorations.pointerCursor&&t.classList.remove("xterm-cursor-pointer")),o.leave&&o.leave(r,o.text)}_linkAtPosition(t,o){const r=t.range.start.y*this._bufferService.cols+t.range.start.x,n=t.range.end.y*this._bufferService.cols+t.range.end.x,c=o.y*this._bufferService.cols+o.x;return r<=c&&c<=n}_positionFromMouseEvent(t,o,r){const n=r.getCoords(t,o,this._bufferService.cols,this._bufferService.rows);if(n)return{x:n[0],y:n[1]+this._bufferService.buffer.ydisp}}_createLinkUnderlineEvent(t,o,r,n,c){return{x1:t,y1:o,x2:r,y2:n,cols:this._bufferService.cols,fg:c}}};i.Linkifier2=g=h([_(0,b.IBufferService)],g)},9042:(L,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.tooMuchOutput=i.promptLabel=void 0,i.promptLabel="Terminal input",i.tooMuchOutput="Too much output to announce, navigate to rows manually to read"},3730:function(L,i,a){var h=this&&this.__decorate||function(g,t,o,r){var n,c=arguments.length,f=c<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,o):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")f=Reflect.decorate(g,t,o,r);else for(var S=g.length-1;S>=0;S--)(n=g[S])&&(f=(c<3?n(f):c>3?n(t,o,f):n(t,o))||f);return c>3&&f&&Object.defineProperty(t,o,f),f},_=this&&this.__param||function(g,t){return function(o,r){t(o,r,g)}};Object.defineProperty(i,"__esModule",{value:!0}),i.OscLinkProvider=void 0;const l=a(511),p=a(2585);let m=i.OscLinkProvider=class{constructor(g,t,o){this._bufferService=g,this._optionsService=t,this._oscLinkService=o}provideLinks(g,t){var o;const r=this._bufferService.buffer.lines.get(g-1);if(!r)return void t(void 0);const n=[],c=this._optionsService.rawOptions.linkHandler,f=new l.CellData,S=r.getTrimmedLength();let E=-1,u=-1,y=!1;for(let R=0;R<S;R++)if(u!==-1||r.hasContent(R)){if(r.loadCell(R,f),f.hasExtendedAttrs()&&f.extended.urlId){if(u===-1){u=R,E=f.extended.urlId;continue}y=f.extended.urlId!==E}else u!==-1&&(y=!0);if(y||u!==-1&&R===S-1){const O=(o=this._oscLinkService.getLinkData(E))===null||o===void 0?void 0:o.uri;if(O){const A={start:{x:u+1,y:g},end:{x:R+(y||R!==S-1?0:1),y:g}};let M=!1;if(!(c!=null&&c.allowNonHttpProtocols))try{const N=new URL(O);["http:","https:"].includes(N.protocol)||(M=!0)}catch{M=!0}M||n.push({text:O,range:A,activate:(N,K)=>c?c.activate(N,K,A):b(0,K),hover:(N,K)=>{var z;return(z=c==null?void 0:c.hover)===null||z===void 0?void 0:z.call(c,N,K,A)},leave:(N,K)=>{var z;return(z=c==null?void 0:c.leave)===null||z===void 0?void 0:z.call(c,N,K,A)}})}y=!1,f.hasExtendedAttrs()&&f.extended.urlId?(u=R,E=f.extended.urlId):(u=-1,E=-1)}}t(n)}};function b(g,t){if(confirm(`Do you want to navigate to ${t}?

WARNING: This link could potentially be dangerous`)){const o=window.open();if(o){try{o.opener=null}catch{}o.location.href=t}else console.warn("Opening link blocked as opener could not be cleared")}}i.OscLinkProvider=m=h([_(0,p.IBufferService),_(1,p.IOptionsService),_(2,p.IOscLinkService)],m)},6193:(L,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.RenderDebouncer=void 0,i.RenderDebouncer=class{constructor(a,h){this._parentWindow=a,this._renderCallback=h,this._refreshCallbacks=[]}dispose(){this._animationFrame&&(this._parentWindow.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}addRefreshCallback(a){return this._refreshCallbacks.push(a),this._animationFrame||(this._animationFrame=this._parentWindow.requestAnimationFrame(()=>this._innerRefresh())),this._animationFrame}refresh(a,h,_){this._rowCount=_,a=a!==void 0?a:0,h=h!==void 0?h:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,a):a,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,h):h,this._animationFrame||(this._animationFrame=this._parentWindow.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._animationFrame=void 0,this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return void this._runRefreshCallbacks();const a=Math.max(this._rowStart,0),h=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(a,h),this._runRefreshCallbacks()}_runRefreshCallbacks(){for(const a of this._refreshCallbacks)a(0);this._refreshCallbacks=[]}}},5596:(L,i,a)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ScreenDprMonitor=void 0;const h=a(844);class _ extends h.Disposable{constructor(p){super(),this._parentWindow=p,this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this.register((0,h.toDisposable)(()=>{this.clearListener()}))}setListener(p){this._listener&&this.clearListener(),this._listener=p,this._outerListener=()=>{this._listener&&(this._listener(this._parentWindow.devicePixelRatio,this._currentDevicePixelRatio),this._updateDpr())},this._updateDpr()}_updateDpr(){var p;this._outerListener&&((p=this._resolutionMediaMatchList)===null||p===void 0||p.removeListener(this._outerListener),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._resolutionMediaMatchList=this._parentWindow.matchMedia(`screen and (resolution: ${this._parentWindow.devicePixelRatio}dppx)`),this._resolutionMediaMatchList.addListener(this._outerListener))}clearListener(){this._resolutionMediaMatchList&&this._listener&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._listener=void 0,this._outerListener=void 0)}}i.ScreenDprMonitor=_},3236:(L,i,a)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Terminal=void 0;const h=a(3614),_=a(3656),l=a(6465),p=a(9042),m=a(3730),b=a(1680),g=a(3107),t=a(5744),o=a(2950),r=a(1296),n=a(428),c=a(4269),f=a(5114),S=a(8934),E=a(3230),u=a(9312),y=a(4725),R=a(6731),O=a(8055),A=a(8969),M=a(8460),N=a(844),K=a(6114),z=a(8437),U=a(2584),w=a(7399),T=a(5941),B=a(9074),I=a(2585),V=a(5435),ee=a(4567),ne=typeof window<"u"?window.document:null;class se extends A.CoreTerminal{get onFocus(){return this._onFocus.event}get onBlur(){return this._onBlur.event}get onA11yChar(){return this._onA11yCharEmitter.event}get onA11yTab(){return this._onA11yTabEmitter.event}get onWillOpen(){return this._onWillOpen.event}constructor(k={}){super(k),this.browser=K,this._keyDownHandled=!1,this._keyDownSeen=!1,this._keyPressHandled=!1,this._unprocessedDeadKey=!1,this._accessibilityManager=this.register(new N.MutableDisposable),this._onCursorMove=this.register(new M.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onKey=this.register(new M.EventEmitter),this.onKey=this._onKey.event,this._onRender=this.register(new M.EventEmitter),this.onRender=this._onRender.event,this._onSelectionChange=this.register(new M.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onTitleChange=this.register(new M.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onBell=this.register(new M.EventEmitter),this.onBell=this._onBell.event,this._onFocus=this.register(new M.EventEmitter),this._onBlur=this.register(new M.EventEmitter),this._onA11yCharEmitter=this.register(new M.EventEmitter),this._onA11yTabEmitter=this.register(new M.EventEmitter),this._onWillOpen=this.register(new M.EventEmitter),this._setup(),this.linkifier2=this.register(this._instantiationService.createInstance(l.Linkifier2)),this.linkifier2.registerLinkProvider(this._instantiationService.createInstance(m.OscLinkProvider)),this._decorationService=this._instantiationService.createInstance(B.DecorationService),this._instantiationService.setService(I.IDecorationService,this._decorationService),this.register(this._inputHandler.onRequestBell(()=>this._onBell.fire())),this.register(this._inputHandler.onRequestRefreshRows((H,j)=>this.refresh(H,j))),this.register(this._inputHandler.onRequestSendFocus(()=>this._reportFocus())),this.register(this._inputHandler.onRequestReset(()=>this.reset())),this.register(this._inputHandler.onRequestWindowsOptionsReport(H=>this._reportWindowsOptions(H))),this.register(this._inputHandler.onColor(H=>this._handleColorEvent(H))),this.register((0,M.forwardEvent)(this._inputHandler.onCursorMove,this._onCursorMove)),this.register((0,M.forwardEvent)(this._inputHandler.onTitleChange,this._onTitleChange)),this.register((0,M.forwardEvent)(this._inputHandler.onA11yChar,this._onA11yCharEmitter)),this.register((0,M.forwardEvent)(this._inputHandler.onA11yTab,this._onA11yTabEmitter)),this.register(this._bufferService.onResize(H=>this._afterResize(H.cols,H.rows))),this.register((0,N.toDisposable)(()=>{var H,j;this._customKeyEventHandler=void 0,(j=(H=this.element)===null||H===void 0?void 0:H.parentNode)===null||j===void 0||j.removeChild(this.element)}))}_handleColorEvent(k){if(this._themeService)for(const H of k){let j,$="";switch(H.index){case 256:j="foreground",$="10";break;case 257:j="background",$="11";break;case 258:j="cursor",$="12";break;default:j="ansi",$="4;"+H.index}switch(H.type){case 0:const ae=O.color.toColorRGB(j==="ansi"?this._themeService.colors.ansi[H.index]:this._themeService.colors[j]);this.coreService.triggerDataEvent(`${U.C0.ESC}]${$};${(0,T.toRgbString)(ae)}${U.C1_ESCAPED.ST}`);break;case 1:if(j==="ansi")this._themeService.modifyColors(te=>te.ansi[H.index]=O.rgba.toColor(...H.color));else{const te=j;this._themeService.modifyColors(D=>D[te]=O.rgba.toColor(...H.color))}break;case 2:this._themeService.restoreColor(H.index)}}}_setup(){super._setup(),this._customKeyEventHandler=void 0}get buffer(){return this.buffers.active}focus(){this.textarea&&this.textarea.focus({preventScroll:!0})}_handleScreenReaderModeOptionChange(k){k?!this._accessibilityManager.value&&this._renderService&&(this._accessibilityManager.value=this._instantiationService.createInstance(ee.AccessibilityManager,this)):this._accessibilityManager.clear()}_handleTextAreaFocus(k){this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(U.C0.ESC+"[I"),this.updateCursorStyle(k),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()}blur(){var k;return(k=this.textarea)===null||k===void 0?void 0:k.blur()}_handleTextAreaBlur(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(U.C0.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()}_syncTextArea(){if(!this.textarea||!this.buffer.isCursorInViewport||this._compositionHelper.isComposing||!this._renderService)return;const k=this.buffer.ybase+this.buffer.y,H=this.buffer.lines.get(k);if(!H)return;const j=Math.min(this.buffer.x,this.cols-1),$=this._renderService.dimensions.css.cell.height,ae=H.getWidth(j),te=this._renderService.dimensions.css.cell.width*ae,D=this.buffer.y*this._renderService.dimensions.css.cell.height,P=j*this._renderService.dimensions.css.cell.width;this.textarea.style.left=P+"px",this.textarea.style.top=D+"px",this.textarea.style.width=te+"px",this.textarea.style.height=$+"px",this.textarea.style.lineHeight=$+"px",this.textarea.style.zIndex="-5"}_initGlobal(){this._bindKeys(),this.register((0,_.addDisposableDomListener)(this.element,"copy",H=>{this.hasSelection()&&(0,h.copyHandler)(H,this._selectionService)}));const k=H=>(0,h.handlePasteEvent)(H,this.textarea,this.coreService,this.optionsService);this.register((0,_.addDisposableDomListener)(this.textarea,"paste",k)),this.register((0,_.addDisposableDomListener)(this.element,"paste",k)),K.isFirefox?this.register((0,_.addDisposableDomListener)(this.element,"mousedown",H=>{H.button===2&&(0,h.rightClickHandler)(H,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})):this.register((0,_.addDisposableDomListener)(this.element,"contextmenu",H=>{(0,h.rightClickHandler)(H,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})),K.isLinux&&this.register((0,_.addDisposableDomListener)(this.element,"auxclick",H=>{H.button===1&&(0,h.moveTextAreaUnderMouseCursor)(H,this.textarea,this.screenElement)}))}_bindKeys(){this.register((0,_.addDisposableDomListener)(this.textarea,"keyup",k=>this._keyUp(k),!0)),this.register((0,_.addDisposableDomListener)(this.textarea,"keydown",k=>this._keyDown(k),!0)),this.register((0,_.addDisposableDomListener)(this.textarea,"keypress",k=>this._keyPress(k),!0)),this.register((0,_.addDisposableDomListener)(this.textarea,"compositionstart",()=>this._compositionHelper.compositionstart())),this.register((0,_.addDisposableDomListener)(this.textarea,"compositionupdate",k=>this._compositionHelper.compositionupdate(k))),this.register((0,_.addDisposableDomListener)(this.textarea,"compositionend",()=>this._compositionHelper.compositionend())),this.register((0,_.addDisposableDomListener)(this.textarea,"input",k=>this._inputEvent(k),!0)),this.register(this.onRender(()=>this._compositionHelper.updateCompositionElements()))}open(k){var H;if(!k)throw new Error("Terminal requires a parent element.");k.isConnected||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),this._document=k.ownerDocument,this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),k.appendChild(this.element);const j=ne.createDocumentFragment();this._viewportElement=ne.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),j.appendChild(this._viewportElement),this._viewportScrollArea=ne.createElement("div"),this._viewportScrollArea.classList.add("xterm-scroll-area"),this._viewportElement.appendChild(this._viewportScrollArea),this.screenElement=ne.createElement("div"),this.screenElement.classList.add("xterm-screen"),this._helperContainer=ne.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),j.appendChild(this.screenElement),this.textarea=ne.createElement("textarea"),this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",p.promptLabel),K.isChromeOS||this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this._coreBrowserService=this._instantiationService.createInstance(f.CoreBrowserService,this.textarea,(H=this._document.defaultView)!==null&&H!==void 0?H:window),this._instantiationService.setService(y.ICoreBrowserService,this._coreBrowserService),this.register((0,_.addDisposableDomListener)(this.textarea,"focus",$=>this._handleTextAreaFocus($))),this.register((0,_.addDisposableDomListener)(this.textarea,"blur",()=>this._handleTextAreaBlur())),this._helperContainer.appendChild(this.textarea),this._charSizeService=this._instantiationService.createInstance(n.CharSizeService,this._document,this._helperContainer),this._instantiationService.setService(y.ICharSizeService,this._charSizeService),this._themeService=this._instantiationService.createInstance(R.ThemeService),this._instantiationService.setService(y.IThemeService,this._themeService),this._characterJoinerService=this._instantiationService.createInstance(c.CharacterJoinerService),this._instantiationService.setService(y.ICharacterJoinerService,this._characterJoinerService),this._renderService=this.register(this._instantiationService.createInstance(E.RenderService,this.rows,this.screenElement)),this._instantiationService.setService(y.IRenderService,this._renderService),this.register(this._renderService.onRenderedViewportChange($=>this._onRender.fire($))),this.onResize($=>this._renderService.resize($.cols,$.rows)),this._compositionView=ne.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(o.CompositionHelper,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this.element.appendChild(j);try{this._onWillOpen.fire(this.element)}catch{}this._renderService.hasRenderer()||this._renderService.setRenderer(this._createRenderer()),this._mouseService=this._instantiationService.createInstance(S.MouseService),this._instantiationService.setService(y.IMouseService,this._mouseService),this.viewport=this._instantiationService.createInstance(b.Viewport,this._viewportElement,this._viewportScrollArea),this.viewport.onRequestScrollLines($=>this.scrollLines($.amount,$.suppressScrollEvent,1)),this.register(this._inputHandler.onRequestSyncScrollBar(()=>this.viewport.syncScrollArea())),this.register(this.viewport),this.register(this.onCursorMove(()=>{this._renderService.handleCursorMove(),this._syncTextArea()})),this.register(this.onResize(()=>this._renderService.handleResize(this.cols,this.rows))),this.register(this.onBlur(()=>this._renderService.handleBlur())),this.register(this.onFocus(()=>this._renderService.handleFocus())),this.register(this._renderService.onDimensionsChange(()=>this.viewport.syncScrollArea())),this._selectionService=this.register(this._instantiationService.createInstance(u.SelectionService,this.element,this.screenElement,this.linkifier2)),this._instantiationService.setService(y.ISelectionService,this._selectionService),this.register(this._selectionService.onRequestScrollLines($=>this.scrollLines($.amount,$.suppressScrollEvent))),this.register(this._selectionService.onSelectionChange(()=>this._onSelectionChange.fire())),this.register(this._selectionService.onRequestRedraw($=>this._renderService.handleSelectionChanged($.start,$.end,$.columnSelectMode))),this.register(this._selectionService.onLinuxMouseSelection($=>{this.textarea.value=$,this.textarea.focus(),this.textarea.select()})),this.register(this._onScroll.event($=>{this.viewport.syncScrollArea(),this._selectionService.refresh()})),this.register((0,_.addDisposableDomListener)(this._viewportElement,"scroll",()=>this._selectionService.refresh())),this.linkifier2.attachToDom(this.screenElement,this._mouseService,this._renderService),this.register(this._instantiationService.createInstance(g.BufferDecorationRenderer,this.screenElement)),this.register((0,_.addDisposableDomListener)(this.element,"mousedown",$=>this._selectionService.handleMouseDown($))),this.coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager.value=this._instantiationService.createInstance(ee.AccessibilityManager,this)),this.register(this.optionsService.onSpecificOptionChange("screenReaderMode",$=>this._handleScreenReaderModeOptionChange($))),this.options.overviewRulerWidth&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(t.OverviewRulerRenderer,this._viewportElement,this.screenElement))),this.optionsService.onSpecificOptionChange("overviewRulerWidth",$=>{!this._overviewRulerRenderer&&$&&this._viewportElement&&this.screenElement&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(t.OverviewRulerRenderer,this._viewportElement,this.screenElement)))}),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()}_createRenderer(){return this._instantiationService.createInstance(r.DomRenderer,this.element,this.screenElement,this._viewportElement,this.linkifier2)}bindMouse(){const k=this,H=this.element;function j(te){const D=k._mouseService.getMouseReportCoords(te,k.screenElement);if(!D)return!1;let P,W;switch(te.overrideType||te.type){case"mousemove":W=32,te.buttons===void 0?(P=3,te.button!==void 0&&(P=te.button<3?te.button:3)):P=1&te.buttons?0:4&te.buttons?1:2&te.buttons?2:3;break;case"mouseup":W=0,P=te.button<3?te.button:3;break;case"mousedown":W=1,P=te.button<3?te.button:3;break;case"wheel":if(k.viewport.getLinesScrolled(te)===0)return!1;W=te.deltaY<0?0:1,P=4;break;default:return!1}return!(W===void 0||P===void 0||P>4)&&k.coreMouseService.triggerMouseEvent({col:D.col,row:D.row,x:D.x,y:D.y,button:P,action:W,ctrl:te.ctrlKey,alt:te.altKey,shift:te.shiftKey})}const $={mouseup:null,wheel:null,mousedrag:null,mousemove:null},ae={mouseup:te=>(j(te),te.buttons||(this._document.removeEventListener("mouseup",$.mouseup),$.mousedrag&&this._document.removeEventListener("mousemove",$.mousedrag)),this.cancel(te)),wheel:te=>(j(te),this.cancel(te,!0)),mousedrag:te=>{te.buttons&&j(te)},mousemove:te=>{te.buttons||j(te)}};this.register(this.coreMouseService.onProtocolChange(te=>{te?(this.optionsService.rawOptions.logLevel==="debug"&&this._logService.debug("Binding to mouse events:",this.coreMouseService.explainEvents(te)),this.element.classList.add("enable-mouse-events"),this._selectionService.disable()):(this._logService.debug("Unbinding from mouse events."),this.element.classList.remove("enable-mouse-events"),this._selectionService.enable()),8&te?$.mousemove||(H.addEventListener("mousemove",ae.mousemove),$.mousemove=ae.mousemove):(H.removeEventListener("mousemove",$.mousemove),$.mousemove=null),16&te?$.wheel||(H.addEventListener("wheel",ae.wheel,{passive:!1}),$.wheel=ae.wheel):(H.removeEventListener("wheel",$.wheel),$.wheel=null),2&te?$.mouseup||(H.addEventListener("mouseup",ae.mouseup),$.mouseup=ae.mouseup):(this._document.removeEventListener("mouseup",$.mouseup),H.removeEventListener("mouseup",$.mouseup),$.mouseup=null),4&te?$.mousedrag||($.mousedrag=ae.mousedrag):(this._document.removeEventListener("mousemove",$.mousedrag),$.mousedrag=null)})),this.coreMouseService.activeProtocol=this.coreMouseService.activeProtocol,this.register((0,_.addDisposableDomListener)(H,"mousedown",te=>{if(te.preventDefault(),this.focus(),this.coreMouseService.areMouseEventsActive&&!this._selectionService.shouldForceSelection(te))return j(te),$.mouseup&&this._document.addEventListener("mouseup",$.mouseup),$.mousedrag&&this._document.addEventListener("mousemove",$.mousedrag),this.cancel(te)})),this.register((0,_.addDisposableDomListener)(H,"wheel",te=>{if(!$.wheel){if(!this.buffer.hasScrollback){const D=this.viewport.getLinesScrolled(te);if(D===0)return;const P=U.C0.ESC+(this.coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(te.deltaY<0?"A":"B");let W="";for(let q=0;q<Math.abs(D);q++)W+=P;return this.coreService.triggerDataEvent(W,!0),this.cancel(te,!0)}return this.viewport.handleWheel(te)?this.cancel(te):void 0}},{passive:!1})),this.register((0,_.addDisposableDomListener)(H,"touchstart",te=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchStart(te),this.cancel(te)},{passive:!0})),this.register((0,_.addDisposableDomListener)(H,"touchmove",te=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchMove(te)?void 0:this.cancel(te)},{passive:!1}))}refresh(k,H){var j;(j=this._renderService)===null||j===void 0||j.refreshRows(k,H)}updateCursorStyle(k){var H;!((H=this._selectionService)===null||H===void 0)&&H.shouldColumnSelect(k)?this.element.classList.add("column-select"):this.element.classList.remove("column-select")}_showCursor(){this.coreService.isCursorInitialized||(this.coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))}scrollLines(k,H,j=0){var $;j===1?(super.scrollLines(k,H,j),this.refresh(0,this.rows-1)):($=this.viewport)===null||$===void 0||$.scrollLines(k)}paste(k){(0,h.paste)(k,this.textarea,this.coreService,this.optionsService)}attachCustomKeyEventHandler(k){this._customKeyEventHandler=k}registerLinkProvider(k){return this.linkifier2.registerLinkProvider(k)}registerCharacterJoiner(k){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");const H=this._characterJoinerService.register(k);return this.refresh(0,this.rows-1),H}deregisterCharacterJoiner(k){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");this._characterJoinerService.deregister(k)&&this.refresh(0,this.rows-1)}get markers(){return this.buffer.markers}registerMarker(k){return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+k)}registerDecoration(k){return this._decorationService.registerDecoration(k)}hasSelection(){return!!this._selectionService&&this._selectionService.hasSelection}select(k,H,j){this._selectionService.setSelection(k,H,j)}getSelection(){return this._selectionService?this._selectionService.selectionText:""}getSelectionPosition(){if(this._selectionService&&this._selectionService.hasSelection)return{start:{x:this._selectionService.selectionStart[0],y:this._selectionService.selectionStart[1]},end:{x:this._selectionService.selectionEnd[0],y:this._selectionService.selectionEnd[1]}}}clearSelection(){var k;(k=this._selectionService)===null||k===void 0||k.clearSelection()}selectAll(){var k;(k=this._selectionService)===null||k===void 0||k.selectAll()}selectLines(k,H){var j;(j=this._selectionService)===null||j===void 0||j.selectLines(k,H)}_keyDown(k){if(this._keyDownHandled=!1,this._keyDownSeen=!0,this._customKeyEventHandler&&this._customKeyEventHandler(k)===!1)return!1;const H=this.browser.isMac&&this.options.macOptionIsMeta&&k.altKey;if(!H&&!this._compositionHelper.keydown(k))return this.options.scrollOnUserInput&&this.buffer.ybase!==this.buffer.ydisp&&this.scrollToBottom(),!1;H||k.key!=="Dead"&&k.key!=="AltGraph"||(this._unprocessedDeadKey=!0);const j=(0,w.evaluateKeyboardEvent)(k,this.coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(k),j.type===3||j.type===2){const $=this.rows-1;return this.scrollLines(j.type===2?-$:$),this.cancel(k,!0)}return j.type===1&&this.selectAll(),!!this._isThirdLevelShift(this.browser,k)||(j.cancel&&this.cancel(k,!0),!j.key||!!(k.key&&!k.ctrlKey&&!k.altKey&&!k.metaKey&&k.key.length===1&&k.key.charCodeAt(0)>=65&&k.key.charCodeAt(0)<=90)||(this._unprocessedDeadKey?(this._unprocessedDeadKey=!1,!0):(j.key!==U.C0.ETX&&j.key!==U.C0.CR||(this.textarea.value=""),this._onKey.fire({key:j.key,domEvent:k}),this._showCursor(),this.coreService.triggerDataEvent(j.key,!0),!this.optionsService.rawOptions.screenReaderMode||k.altKey||k.ctrlKey?this.cancel(k,!0):void(this._keyDownHandled=!0))))}_isThirdLevelShift(k,H){const j=k.isMac&&!this.options.macOptionIsMeta&&H.altKey&&!H.ctrlKey&&!H.metaKey||k.isWindows&&H.altKey&&H.ctrlKey&&!H.metaKey||k.isWindows&&H.getModifierState("AltGraph");return H.type==="keypress"?j:j&&(!H.keyCode||H.keyCode>47)}_keyUp(k){this._keyDownSeen=!1,this._customKeyEventHandler&&this._customKeyEventHandler(k)===!1||(function(H){return H.keyCode===16||H.keyCode===17||H.keyCode===18}(k)||this.focus(),this.updateCursorStyle(k),this._keyPressHandled=!1)}_keyPress(k){let H;if(this._keyPressHandled=!1,this._keyDownHandled||this._customKeyEventHandler&&this._customKeyEventHandler(k)===!1)return!1;if(this.cancel(k),k.charCode)H=k.charCode;else if(k.which===null||k.which===void 0)H=k.keyCode;else{if(k.which===0||k.charCode===0)return!1;H=k.which}return!(!H||(k.altKey||k.ctrlKey||k.metaKey)&&!this._isThirdLevelShift(this.browser,k)||(H=String.fromCharCode(H),this._onKey.fire({key:H,domEvent:k}),this._showCursor(),this.coreService.triggerDataEvent(H,!0),this._keyPressHandled=!0,this._unprocessedDeadKey=!1,0))}_inputEvent(k){if(k.data&&k.inputType==="insertText"&&(!k.composed||!this._keyDownSeen)&&!this.optionsService.rawOptions.screenReaderMode){if(this._keyPressHandled)return!1;this._unprocessedDeadKey=!1;const H=k.data;return this.coreService.triggerDataEvent(H,!0),this.cancel(k),!0}return!1}resize(k,H){k!==this.cols||H!==this.rows?super.resize(k,H):this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure()}_afterResize(k,H){var j,$;(j=this._charSizeService)===null||j===void 0||j.measure(),($=this.viewport)===null||$===void 0||$.syncScrollArea(!0)}clear(){var k;if(this.buffer.ybase!==0||this.buffer.y!==0){this.buffer.clearAllMarkers(),this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(let H=1;H<this.rows;H++)this.buffer.lines.push(this.buffer.getBlankLine(z.DEFAULT_ATTR_DATA));this._onScroll.fire({position:this.buffer.ydisp,source:0}),(k=this.viewport)===null||k===void 0||k.reset(),this.refresh(0,this.rows-1)}}reset(){var k,H;this.options.rows=this.rows,this.options.cols=this.cols;const j=this._customKeyEventHandler;this._setup(),super.reset(),(k=this._selectionService)===null||k===void 0||k.reset(),this._decorationService.reset(),(H=this.viewport)===null||H===void 0||H.reset(),this._customKeyEventHandler=j,this.refresh(0,this.rows-1)}clearTextureAtlas(){var k;(k=this._renderService)===null||k===void 0||k.clearTextureAtlas()}_reportFocus(){var k;!((k=this.element)===null||k===void 0)&&k.classList.contains("focus")?this.coreService.triggerDataEvent(U.C0.ESC+"[I"):this.coreService.triggerDataEvent(U.C0.ESC+"[O")}_reportWindowsOptions(k){if(this._renderService)switch(k){case V.WindowsOptionsReportType.GET_WIN_SIZE_PIXELS:const H=this._renderService.dimensions.css.canvas.width.toFixed(0),j=this._renderService.dimensions.css.canvas.height.toFixed(0);this.coreService.triggerDataEvent(`${U.C0.ESC}[4;${j};${H}t`);break;case V.WindowsOptionsReportType.GET_CELL_SIZE_PIXELS:const $=this._renderService.dimensions.css.cell.width.toFixed(0),ae=this._renderService.dimensions.css.cell.height.toFixed(0);this.coreService.triggerDataEvent(`${U.C0.ESC}[6;${ae};${$}t`)}}cancel(k,H){if(this.options.cancelEvents||H)return k.preventDefault(),k.stopPropagation(),!1}}i.Terminal=se},9924:(L,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.TimeBasedDebouncer=void 0,i.TimeBasedDebouncer=class{constructor(a,h=1e3){this._renderCallback=a,this._debounceThresholdMS=h,this._lastRefreshMs=0,this._additionalRefreshRequested=!1}dispose(){this._refreshTimeoutID&&clearTimeout(this._refreshTimeoutID)}refresh(a,h,_){this._rowCount=_,a=a!==void 0?a:0,h=h!==void 0?h:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,a):a,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,h):h;const l=Date.now();if(l-this._lastRefreshMs>=this._debounceThresholdMS)this._lastRefreshMs=l,this._innerRefresh();else if(!this._additionalRefreshRequested){const p=l-this._lastRefreshMs,m=this._debounceThresholdMS-p;this._additionalRefreshRequested=!0,this._refreshTimeoutID=window.setTimeout(()=>{this._lastRefreshMs=Date.now(),this._innerRefresh(),this._additionalRefreshRequested=!1,this._refreshTimeoutID=void 0},m)}}_innerRefresh(){if(this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return;const a=Math.max(this._rowStart,0),h=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(a,h)}}},1680:function(L,i,a){var h=this&&this.__decorate||function(o,r,n,c){var f,S=arguments.length,E=S<3?r:c===null?c=Object.getOwnPropertyDescriptor(r,n):c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(o,r,n,c);else for(var u=o.length-1;u>=0;u--)(f=o[u])&&(E=(S<3?f(E):S>3?f(r,n,E):f(r,n))||E);return S>3&&E&&Object.defineProperty(r,n,E),E},_=this&&this.__param||function(o,r){return function(n,c){r(n,c,o)}};Object.defineProperty(i,"__esModule",{value:!0}),i.Viewport=void 0;const l=a(3656),p=a(4725),m=a(8460),b=a(844),g=a(2585);let t=i.Viewport=class extends b.Disposable{constructor(o,r,n,c,f,S,E,u){super(),this._viewportElement=o,this._scrollArea=r,this._bufferService=n,this._optionsService=c,this._charSizeService=f,this._renderService=S,this._coreBrowserService=E,this.scrollBarWidth=0,this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._wheelPartialScroll=0,this._refreshAnimationFrame=null,this._ignoreNextScrollEvent=!1,this._smoothScrollState={startTime:0,origin:-1,target:-1},this._onRequestScrollLines=this.register(new m.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this.scrollBarWidth=this._viewportElement.offsetWidth-this._scrollArea.offsetWidth||15,this.register((0,l.addDisposableDomListener)(this._viewportElement,"scroll",this._handleScroll.bind(this))),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(y=>this._activeBuffer=y.activeBuffer)),this._renderDimensions=this._renderService.dimensions,this.register(this._renderService.onDimensionsChange(y=>this._renderDimensions=y)),this._handleThemeChange(u.colors),this.register(u.onChangeColors(y=>this._handleThemeChange(y))),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.syncScrollArea())),setTimeout(()=>this.syncScrollArea())}_handleThemeChange(o){this._viewportElement.style.backgroundColor=o.background.css}reset(){this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._coreBrowserService.window.requestAnimationFrame(()=>this.syncScrollArea())}_refresh(o){if(o)return this._innerRefresh(),void(this._refreshAnimationFrame!==null&&this._coreBrowserService.window.cancelAnimationFrame(this._refreshAnimationFrame));this._refreshAnimationFrame===null&&(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._charSizeService.height>0){this._currentRowHeight=this._renderService.dimensions.device.cell.height/this._coreBrowserService.dpr,this._currentDeviceCellHeight=this._renderService.dimensions.device.cell.height,this._lastRecordedViewportHeight=this._viewportElement.offsetHeight;const r=Math.round(this._currentRowHeight*this._lastRecordedBufferLength)+(this._lastRecordedViewportHeight-this._renderService.dimensions.css.canvas.height);this._lastRecordedBufferHeight!==r&&(this._lastRecordedBufferHeight=r,this._scrollArea.style.height=this._lastRecordedBufferHeight+"px")}const o=this._bufferService.buffer.ydisp*this._currentRowHeight;this._viewportElement.scrollTop!==o&&(this._ignoreNextScrollEvent=!0,this._viewportElement.scrollTop=o),this._refreshAnimationFrame=null}syncScrollArea(o=!1){if(this._lastRecordedBufferLength!==this._bufferService.buffer.lines.length)return this._lastRecordedBufferLength=this._bufferService.buffer.lines.length,void this._refresh(o);this._lastRecordedViewportHeight===this._renderService.dimensions.css.canvas.height&&this._lastScrollTop===this._activeBuffer.ydisp*this._currentRowHeight&&this._renderDimensions.device.cell.height===this._currentDeviceCellHeight||this._refresh(o)}_handleScroll(o){if(this._lastScrollTop=this._viewportElement.scrollTop,!this._viewportElement.offsetParent)return;if(this._ignoreNextScrollEvent)return this._ignoreNextScrollEvent=!1,void this._onRequestScrollLines.fire({amount:0,suppressScrollEvent:!0});const r=Math.round(this._lastScrollTop/this._currentRowHeight)-this._bufferService.buffer.ydisp;this._onRequestScrollLines.fire({amount:r,suppressScrollEvent:!0})}_smoothScroll(){if(this._isDisposed||this._smoothScrollState.origin===-1||this._smoothScrollState.target===-1)return;const o=this._smoothScrollPercent();this._viewportElement.scrollTop=this._smoothScrollState.origin+Math.round(o*(this._smoothScrollState.target-this._smoothScrollState.origin)),o<1?this._coreBrowserService.window.requestAnimationFrame(()=>this._smoothScroll()):this._clearSmoothScrollState()}_smoothScrollPercent(){return this._optionsService.rawOptions.smoothScrollDuration&&this._smoothScrollState.startTime?Math.max(Math.min((Date.now()-this._smoothScrollState.startTime)/this._optionsService.rawOptions.smoothScrollDuration,1),0):1}_clearSmoothScrollState(){this._smoothScrollState.startTime=0,this._smoothScrollState.origin=-1,this._smoothScrollState.target=-1}_bubbleScroll(o,r){const n=this._viewportElement.scrollTop+this._lastRecordedViewportHeight;return!(r<0&&this._viewportElement.scrollTop!==0||r>0&&n<this._lastRecordedBufferHeight)||(o.cancelable&&o.preventDefault(),!1)}handleWheel(o){const r=this._getPixelsScrolled(o);return r!==0&&(this._optionsService.rawOptions.smoothScrollDuration?(this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target===-1?this._smoothScrollState.target=this._viewportElement.scrollTop+r:this._smoothScrollState.target+=r,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()):this._viewportElement.scrollTop+=r,this._bubbleScroll(o,r))}scrollLines(o){if(o!==0)if(this._optionsService.rawOptions.smoothScrollDuration){const r=o*this._currentRowHeight;this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target=this._smoothScrollState.origin+r,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()}else this._onRequestScrollLines.fire({amount:o,suppressScrollEvent:!1})}_getPixelsScrolled(o){if(o.deltaY===0||o.shiftKey)return 0;let r=this._applyScrollModifier(o.deltaY,o);return o.deltaMode===WheelEvent.DOM_DELTA_LINE?r*=this._currentRowHeight:o.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(r*=this._currentRowHeight*this._bufferService.rows),r}getBufferElements(o,r){var n;let c,f="";const S=[],E=r??this._bufferService.buffer.lines.length,u=this._bufferService.buffer.lines;for(let y=o;y<E;y++){const R=u.get(y);if(!R)continue;const O=(n=u.get(y+1))===null||n===void 0?void 0:n.isWrapped;if(f+=R.translateToString(!O),!O||y===u.length-1){const A=document.createElement("div");A.textContent=f,S.push(A),f.length>0&&(c=A),f=""}}return{bufferElements:S,cursorElement:c}}getLinesScrolled(o){if(o.deltaY===0||o.shiftKey)return 0;let r=this._applyScrollModifier(o.deltaY,o);return o.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(r/=this._currentRowHeight+0,this._wheelPartialScroll+=r,r=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):o.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(r*=this._bufferService.rows),r}_applyScrollModifier(o,r){const n=this._optionsService.rawOptions.fastScrollModifier;return n==="alt"&&r.altKey||n==="ctrl"&&r.ctrlKey||n==="shift"&&r.shiftKey?o*this._optionsService.rawOptions.fastScrollSensitivity*this._optionsService.rawOptions.scrollSensitivity:o*this._optionsService.rawOptions.scrollSensitivity}handleTouchStart(o){this._lastTouchY=o.touches[0].pageY}handleTouchMove(o){const r=this._lastTouchY-o.touches[0].pageY;return this._lastTouchY=o.touches[0].pageY,r!==0&&(this._viewportElement.scrollTop+=r,this._bubbleScroll(o,r))}};i.Viewport=t=h([_(2,g.IBufferService),_(3,g.IOptionsService),_(4,p.ICharSizeService),_(5,p.IRenderService),_(6,p.ICoreBrowserService),_(7,p.IThemeService)],t)},3107:function(L,i,a){var h=this&&this.__decorate||function(t,o,r,n){var c,f=arguments.length,S=f<3?o:n===null?n=Object.getOwnPropertyDescriptor(o,r):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(t,o,r,n);else for(var E=t.length-1;E>=0;E--)(c=t[E])&&(S=(f<3?c(S):f>3?c(o,r,S):c(o,r))||S);return f>3&&S&&Object.defineProperty(o,r,S),S},_=this&&this.__param||function(t,o){return function(r,n){o(r,n,t)}};Object.defineProperty(i,"__esModule",{value:!0}),i.BufferDecorationRenderer=void 0;const l=a(3656),p=a(4725),m=a(844),b=a(2585);let g=i.BufferDecorationRenderer=class extends m.Disposable{constructor(t,o,r,n){super(),this._screenElement=t,this._bufferService=o,this._decorationService=r,this._renderService=n,this._decorationElements=new Map,this._altBufferIsActive=!1,this._dimensionsChanged=!1,this._container=document.createElement("div"),this._container.classList.add("xterm-decoration-container"),this._screenElement.appendChild(this._container),this.register(this._renderService.onRenderedViewportChange(()=>this._doRefreshDecorations())),this.register(this._renderService.onDimensionsChange(()=>{this._dimensionsChanged=!0,this._queueRefresh()})),this.register((0,l.addDisposableDomListener)(window,"resize",()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._altBufferIsActive=this._bufferService.buffer===this._bufferService.buffers.alt})),this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh())),this.register(this._decorationService.onDecorationRemoved(c=>this._removeDecoration(c))),this.register((0,m.toDisposable)(()=>{this._container.remove(),this._decorationElements.clear()}))}_queueRefresh(){this._animationFrame===void 0&&(this._animationFrame=this._renderService.addRefreshCallback(()=>{this._doRefreshDecorations(),this._animationFrame=void 0}))}_doRefreshDecorations(){for(const t of this._decorationService.decorations)this._renderDecoration(t);this._dimensionsChanged=!1}_renderDecoration(t){this._refreshStyle(t),this._dimensionsChanged&&this._refreshXPosition(t)}_createElement(t){var o,r;const n=document.createElement("div");n.classList.add("xterm-decoration"),n.classList.toggle("xterm-decoration-top-layer",((o=t==null?void 0:t.options)===null||o===void 0?void 0:o.layer)==="top"),n.style.width=`${Math.round((t.options.width||1)*this._renderService.dimensions.css.cell.width)}px`,n.style.height=(t.options.height||1)*this._renderService.dimensions.css.cell.height+"px",n.style.top=(t.marker.line-this._bufferService.buffers.active.ydisp)*this._renderService.dimensions.css.cell.height+"px",n.style.lineHeight=`${this._renderService.dimensions.css.cell.height}px`;const c=(r=t.options.x)!==null&&r!==void 0?r:0;return c&&c>this._bufferService.cols&&(n.style.display="none"),this._refreshXPosition(t,n),n}_refreshStyle(t){const o=t.marker.line-this._bufferService.buffers.active.ydisp;if(o<0||o>=this._bufferService.rows)t.element&&(t.element.style.display="none",t.onRenderEmitter.fire(t.element));else{let r=this._decorationElements.get(t);r||(r=this._createElement(t),t.element=r,this._decorationElements.set(t,r),this._container.appendChild(r),t.onDispose(()=>{this._decorationElements.delete(t),r.remove()})),r.style.top=o*this._renderService.dimensions.css.cell.height+"px",r.style.display=this._altBufferIsActive?"none":"block",t.onRenderEmitter.fire(r)}}_refreshXPosition(t,o=t.element){var r;if(!o)return;const n=(r=t.options.x)!==null&&r!==void 0?r:0;(t.options.anchor||"left")==="right"?o.style.right=n?n*this._renderService.dimensions.css.cell.width+"px":"":o.style.left=n?n*this._renderService.dimensions.css.cell.width+"px":""}_removeDecoration(t){var o;(o=this._decorationElements.get(t))===null||o===void 0||o.remove(),this._decorationElements.delete(t),t.dispose()}};i.BufferDecorationRenderer=g=h([_(1,b.IBufferService),_(2,b.IDecorationService),_(3,p.IRenderService)],g)},5871:(L,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ColorZoneStore=void 0,i.ColorZoneStore=class{constructor(){this._zones=[],this._zonePool=[],this._zonePoolIndex=0,this._linePadding={full:0,left:0,center:0,right:0}}get zones(){return this._zonePool.length=Math.min(this._zonePool.length,this._zones.length),this._zones}clear(){this._zones.length=0,this._zonePoolIndex=0}addDecoration(a){if(a.options.overviewRulerOptions){for(const h of this._zones)if(h.color===a.options.overviewRulerOptions.color&&h.position===a.options.overviewRulerOptions.position){if(this._lineIntersectsZone(h,a.marker.line))return;if(this._lineAdjacentToZone(h,a.marker.line,a.options.overviewRulerOptions.position))return void this._addLineToZone(h,a.marker.line)}if(this._zonePoolIndex<this._zonePool.length)return this._zonePool[this._zonePoolIndex].color=a.options.overviewRulerOptions.color,this._zonePool[this._zonePoolIndex].position=a.options.overviewRulerOptions.position,this._zonePool[this._zonePoolIndex].startBufferLine=a.marker.line,this._zonePool[this._zonePoolIndex].endBufferLine=a.marker.line,void this._zones.push(this._zonePool[this._zonePoolIndex++]);this._zones.push({color:a.options.overviewRulerOptions.color,position:a.options.overviewRulerOptions.position,startBufferLine:a.marker.line,endBufferLine:a.marker.line}),this._zonePool.push(this._zones[this._zones.length-1]),this._zonePoolIndex++}}setPadding(a){this._linePadding=a}_lineIntersectsZone(a,h){return h>=a.startBufferLine&&h<=a.endBufferLine}_lineAdjacentToZone(a,h,_){return h>=a.startBufferLine-this._linePadding[_||"full"]&&h<=a.endBufferLine+this._linePadding[_||"full"]}_addLineToZone(a,h){a.startBufferLine=Math.min(a.startBufferLine,h),a.endBufferLine=Math.max(a.endBufferLine,h)}}},5744:function(L,i,a){var h=this&&this.__decorate||function(c,f,S,E){var u,y=arguments.length,R=y<3?f:E===null?E=Object.getOwnPropertyDescriptor(f,S):E;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")R=Reflect.decorate(c,f,S,E);else for(var O=c.length-1;O>=0;O--)(u=c[O])&&(R=(y<3?u(R):y>3?u(f,S,R):u(f,S))||R);return y>3&&R&&Object.defineProperty(f,S,R),R},_=this&&this.__param||function(c,f){return function(S,E){f(S,E,c)}};Object.defineProperty(i,"__esModule",{value:!0}),i.OverviewRulerRenderer=void 0;const l=a(5871),p=a(3656),m=a(4725),b=a(844),g=a(2585),t={full:0,left:0,center:0,right:0},o={full:0,left:0,center:0,right:0},r={full:0,left:0,center:0,right:0};let n=i.OverviewRulerRenderer=class extends b.Disposable{get _width(){return this._optionsService.options.overviewRulerWidth||0}constructor(c,f,S,E,u,y,R){var O;super(),this._viewportElement=c,this._screenElement=f,this._bufferService=S,this._decorationService=E,this._renderService=u,this._optionsService=y,this._coreBrowseService=R,this._colorZoneStore=new l.ColorZoneStore,this._shouldUpdateDimensions=!0,this._shouldUpdateAnchor=!0,this._lastKnownBufferLength=0,this._canvas=document.createElement("canvas"),this._canvas.classList.add("xterm-decoration-overview-ruler"),this._refreshCanvasDimensions(),(O=this._viewportElement.parentElement)===null||O===void 0||O.insertBefore(this._canvas,this._viewportElement);const A=this._canvas.getContext("2d");if(!A)throw new Error("Ctx cannot be null");this._ctx=A,this._registerDecorationListeners(),this._registerBufferChangeListeners(),this._registerDimensionChangeListeners(),this.register((0,b.toDisposable)(()=>{var M;(M=this._canvas)===null||M===void 0||M.remove()}))}_registerDecorationListeners(){this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh(void 0,!0))),this.register(this._decorationService.onDecorationRemoved(()=>this._queueRefresh(void 0,!0)))}_registerBufferChangeListeners(){this.register(this._renderService.onRenderedViewportChange(()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._canvas.style.display=this._bufferService.buffer===this._bufferService.buffers.alt?"none":"block"})),this.register(this._bufferService.onScroll(()=>{this._lastKnownBufferLength!==this._bufferService.buffers.normal.lines.length&&(this._refreshDrawHeightConstants(),this._refreshColorZonePadding())}))}_registerDimensionChangeListeners(){this.register(this._renderService.onRender(()=>{this._containerHeight&&this._containerHeight===this._screenElement.clientHeight||(this._queueRefresh(!0),this._containerHeight=this._screenElement.clientHeight)})),this.register(this._optionsService.onSpecificOptionChange("overviewRulerWidth",()=>this._queueRefresh(!0))),this.register((0,p.addDisposableDomListener)(this._coreBrowseService.window,"resize",()=>this._queueRefresh(!0))),this._queueRefresh(!0)}_refreshDrawConstants(){const c=Math.floor(this._canvas.width/3),f=Math.ceil(this._canvas.width/3);o.full=this._canvas.width,o.left=c,o.center=f,o.right=c,this._refreshDrawHeightConstants(),r.full=0,r.left=0,r.center=o.left,r.right=o.left+o.center}_refreshDrawHeightConstants(){t.full=Math.round(2*this._coreBrowseService.dpr);const c=this._canvas.height/this._bufferService.buffer.lines.length,f=Math.round(Math.max(Math.min(c,12),6)*this._coreBrowseService.dpr);t.left=f,t.center=f,t.right=f}_refreshColorZonePadding(){this._colorZoneStore.setPadding({full:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*t.full),left:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*t.left),center:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*t.center),right:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*t.right)}),this._lastKnownBufferLength=this._bufferService.buffers.normal.lines.length}_refreshCanvasDimensions(){this._canvas.style.width=`${this._width}px`,this._canvas.width=Math.round(this._width*this._coreBrowseService.dpr),this._canvas.style.height=`${this._screenElement.clientHeight}px`,this._canvas.height=Math.round(this._screenElement.clientHeight*this._coreBrowseService.dpr),this._refreshDrawConstants(),this._refreshColorZonePadding()}_refreshDecorations(){this._shouldUpdateDimensions&&this._refreshCanvasDimensions(),this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._colorZoneStore.clear();for(const f of this._decorationService.decorations)this._colorZoneStore.addDecoration(f);this._ctx.lineWidth=1;const c=this._colorZoneStore.zones;for(const f of c)f.position!=="full"&&this._renderColorZone(f);for(const f of c)f.position==="full"&&this._renderColorZone(f);this._shouldUpdateDimensions=!1,this._shouldUpdateAnchor=!1}_renderColorZone(c){this._ctx.fillStyle=c.color,this._ctx.fillRect(r[c.position||"full"],Math.round((this._canvas.height-1)*(c.startBufferLine/this._bufferService.buffers.active.lines.length)-t[c.position||"full"]/2),o[c.position||"full"],Math.round((this._canvas.height-1)*((c.endBufferLine-c.startBufferLine)/this._bufferService.buffers.active.lines.length)+t[c.position||"full"]))}_queueRefresh(c,f){this._shouldUpdateDimensions=c||this._shouldUpdateDimensions,this._shouldUpdateAnchor=f||this._shouldUpdateAnchor,this._animationFrame===void 0&&(this._animationFrame=this._coreBrowseService.window.requestAnimationFrame(()=>{this._refreshDecorations(),this._animationFrame=void 0}))}};i.OverviewRulerRenderer=n=h([_(2,g.IBufferService),_(3,g.IDecorationService),_(4,m.IRenderService),_(5,g.IOptionsService),_(6,m.ICoreBrowserService)],n)},2950:function(L,i,a){var h=this&&this.__decorate||function(g,t,o,r){var n,c=arguments.length,f=c<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,o):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")f=Reflect.decorate(g,t,o,r);else for(var S=g.length-1;S>=0;S--)(n=g[S])&&(f=(c<3?n(f):c>3?n(t,o,f):n(t,o))||f);return c>3&&f&&Object.defineProperty(t,o,f),f},_=this&&this.__param||function(g,t){return function(o,r){t(o,r,g)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CompositionHelper=void 0;const l=a(4725),p=a(2585),m=a(2584);let b=i.CompositionHelper=class{get isComposing(){return this._isComposing}constructor(g,t,o,r,n,c){this._textarea=g,this._compositionView=t,this._bufferService=o,this._optionsService=r,this._coreService=n,this._renderService=c,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0},this._dataAlreadySent=""}compositionstart(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._dataAlreadySent="",this._compositionView.classList.add("active")}compositionupdate(g){this._compositionView.textContent=g.data,this.updateCompositionElements(),setTimeout(()=>{this._compositionPosition.end=this._textarea.value.length},0)}compositionend(){this._finalizeComposition(!0)}keydown(g){if(this._isComposing||this._isSendingComposition){if(g.keyCode===229||g.keyCode===16||g.keyCode===17||g.keyCode===18)return!1;this._finalizeComposition(!1)}return g.keyCode!==229||(this._handleAnyTextareaChanges(),!1)}_finalizeComposition(g){if(this._compositionView.classList.remove("active"),this._isComposing=!1,g){const t={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout(()=>{if(this._isSendingComposition){let o;this._isSendingComposition=!1,t.start+=this._dataAlreadySent.length,o=this._isComposing?this._textarea.value.substring(t.start,t.end):this._textarea.value.substring(t.start),o.length>0&&this._coreService.triggerDataEvent(o,!0)}},0)}else{this._isSendingComposition=!1;const t=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(t,!0)}}_handleAnyTextareaChanges(){const g=this._textarea.value;setTimeout(()=>{if(!this._isComposing){const t=this._textarea.value,o=t.replace(g,"");this._dataAlreadySent=o,t.length>g.length?this._coreService.triggerDataEvent(o,!0):t.length<g.length?this._coreService.triggerDataEvent(`${m.C0.DEL}`,!0):t.length===g.length&&t!==g&&this._coreService.triggerDataEvent(t,!0)}},0)}updateCompositionElements(g){if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){const t=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),o=this._renderService.dimensions.css.cell.height,r=this._bufferService.buffer.y*this._renderService.dimensions.css.cell.height,n=t*this._renderService.dimensions.css.cell.width;this._compositionView.style.left=n+"px",this._compositionView.style.top=r+"px",this._compositionView.style.height=o+"px",this._compositionView.style.lineHeight=o+"px",this._compositionView.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._compositionView.style.fontSize=this._optionsService.rawOptions.fontSize+"px";const c=this._compositionView.getBoundingClientRect();this._textarea.style.left=n+"px",this._textarea.style.top=r+"px",this._textarea.style.width=Math.max(c.width,1)+"px",this._textarea.style.height=Math.max(c.height,1)+"px",this._textarea.style.lineHeight=c.height+"px"}g||setTimeout(()=>this.updateCompositionElements(!0),0)}}};i.CompositionHelper=b=h([_(2,p.IBufferService),_(3,p.IOptionsService),_(4,p.ICoreService),_(5,l.IRenderService)],b)},9806:(L,i)=>{function a(h,_,l){const p=l.getBoundingClientRect(),m=h.getComputedStyle(l),b=parseInt(m.getPropertyValue("padding-left")),g=parseInt(m.getPropertyValue("padding-top"));return[_.clientX-p.left-b,_.clientY-p.top-g]}Object.defineProperty(i,"__esModule",{value:!0}),i.getCoords=i.getCoordsRelativeToElement=void 0,i.getCoordsRelativeToElement=a,i.getCoords=function(h,_,l,p,m,b,g,t,o){if(!b)return;const r=a(h,_,l);return r?(r[0]=Math.ceil((r[0]+(o?g/2:0))/g),r[1]=Math.ceil(r[1]/t),r[0]=Math.min(Math.max(r[0],1),p+(o?1:0)),r[1]=Math.min(Math.max(r[1],1),m),r):void 0}},9504:(L,i,a)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.moveToCellSequence=void 0;const h=a(2584);function _(t,o,r,n){const c=t-l(t,r),f=o-l(o,r),S=Math.abs(c-f)-function(E,u,y){let R=0;const O=E-l(E,y),A=u-l(u,y);for(let M=0;M<Math.abs(O-A);M++){const N=p(E,u)==="A"?-1:1,K=y.buffer.lines.get(O+N*M);K!=null&&K.isWrapped&&R++}return R}(t,o,r);return g(S,b(p(t,o),n))}function l(t,o){let r=0,n=o.buffer.lines.get(t),c=n==null?void 0:n.isWrapped;for(;c&&t>=0&&t<o.rows;)r++,n=o.buffer.lines.get(--t),c=n==null?void 0:n.isWrapped;return r}function p(t,o){return t>o?"A":"B"}function m(t,o,r,n,c,f){let S=t,E=o,u="";for(;S!==r||E!==n;)S+=c?1:-1,c&&S>f.cols-1?(u+=f.buffer.translateBufferLineToString(E,!1,t,S),S=0,t=0,E++):!c&&S<0&&(u+=f.buffer.translateBufferLineToString(E,!1,0,t+1),S=f.cols-1,t=S,E--);return u+f.buffer.translateBufferLineToString(E,!1,t,S)}function b(t,o){const r=o?"O":"[";return h.C0.ESC+r+t}function g(t,o){t=Math.floor(t);let r="";for(let n=0;n<t;n++)r+=o;return r}i.moveToCellSequence=function(t,o,r,n){const c=r.buffer.x,f=r.buffer.y;if(!r.buffer.hasScrollback)return function(u,y,R,O,A,M){return _(y,O,A,M).length===0?"":g(m(u,y,u,y-l(y,A),!1,A).length,b("D",M))}(c,f,0,o,r,n)+_(f,o,r,n)+function(u,y,R,O,A,M){let N;N=_(y,O,A,M).length>0?O-l(O,A):y;const K=O,z=function(U,w,T,B,I,V){let ee;return ee=_(T,B,I,V).length>0?B-l(B,I):w,U<T&&ee<=B||U>=T&&ee<B?"C":"D"}(u,y,R,O,A,M);return g(m(u,N,R,K,z==="C",A).length,b(z,M))}(c,f,t,o,r,n);let S;if(f===o)return S=c>t?"D":"C",g(Math.abs(c-t),b(S,n));S=f>o?"D":"C";const E=Math.abs(f-o);return g(function(u,y){return y.cols-u}(f>o?t:c,r)+(E-1)*r.cols+1+((f>o?c:t)-1),b(S,n))}},1296:function(L,i,a){var h=this&&this.__decorate||function(A,M,N,K){var z,U=arguments.length,w=U<3?M:K===null?K=Object.getOwnPropertyDescriptor(M,N):K;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")w=Reflect.decorate(A,M,N,K);else for(var T=A.length-1;T>=0;T--)(z=A[T])&&(w=(U<3?z(w):U>3?z(M,N,w):z(M,N))||w);return U>3&&w&&Object.defineProperty(M,N,w),w},_=this&&this.__param||function(A,M){return function(N,K){M(N,K,A)}};Object.defineProperty(i,"__esModule",{value:!0}),i.DomRenderer=void 0;const l=a(3787),p=a(2550),m=a(2223),b=a(6171),g=a(4725),t=a(8055),o=a(8460),r=a(844),n=a(2585),c="xterm-dom-renderer-owner-",f="xterm-rows",S="xterm-fg-",E="xterm-bg-",u="xterm-focus",y="xterm-selection";let R=1,O=i.DomRenderer=class extends r.Disposable{constructor(A,M,N,K,z,U,w,T,B,I){super(),this._element=A,this._screenElement=M,this._viewportElement=N,this._linkifier2=K,this._charSizeService=U,this._optionsService=w,this._bufferService=T,this._coreBrowserService=B,this._themeService=I,this._terminalClass=R++,this._rowElements=[],this.onRequestRedraw=this.register(new o.EventEmitter).event,this._rowContainer=document.createElement("div"),this._rowContainer.classList.add(f),this._rowContainer.style.lineHeight="normal",this._rowContainer.setAttribute("aria-hidden","true"),this._refreshRowElements(this._bufferService.cols,this._bufferService.rows),this._selectionContainer=document.createElement("div"),this._selectionContainer.classList.add(y),this._selectionContainer.setAttribute("aria-hidden","true"),this.dimensions=(0,b.createRenderDimensions)(),this._updateDimensions(),this.register(this._optionsService.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._themeService.onChangeColors(V=>this._injectCss(V))),this._injectCss(this._themeService.colors),this._rowFactory=z.createInstance(l.DomRendererRowFactory,document),this._element.classList.add(c+this._terminalClass),this._screenElement.appendChild(this._rowContainer),this._screenElement.appendChild(this._selectionContainer),this.register(this._linkifier2.onShowLinkUnderline(V=>this._handleLinkHover(V))),this.register(this._linkifier2.onHideLinkUnderline(V=>this._handleLinkLeave(V))),this.register((0,r.toDisposable)(()=>{this._element.classList.remove(c+this._terminalClass),this._rowContainer.remove(),this._selectionContainer.remove(),this._widthCache.dispose(),this._themeStyleElement.remove(),this._dimensionsStyleElement.remove()})),this._widthCache=new p.WidthCache(document),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}_updateDimensions(){const A=this._coreBrowserService.dpr;this.dimensions.device.char.width=this._charSizeService.width*A,this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*A),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.left=0,this.dimensions.device.char.top=0,this.dimensions.device.canvas.width=this.dimensions.device.cell.width*this._bufferService.cols,this.dimensions.device.canvas.height=this.dimensions.device.cell.height*this._bufferService.rows,this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/A),this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/A),this.dimensions.css.cell.width=this.dimensions.css.canvas.width/this._bufferService.cols,this.dimensions.css.cell.height=this.dimensions.css.canvas.height/this._bufferService.rows;for(const N of this._rowElements)N.style.width=`${this.dimensions.css.canvas.width}px`,N.style.height=`${this.dimensions.css.cell.height}px`,N.style.lineHeight=`${this.dimensions.css.cell.height}px`,N.style.overflow="hidden";this._dimensionsStyleElement||(this._dimensionsStyleElement=document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement));const M=`${this._terminalSelector} .${f} span { display: inline-block; height: 100%; vertical-align: top;}`;this._dimensionsStyleElement.textContent=M,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._screenElement.style.height=`${this.dimensions.css.canvas.height}px`}_injectCss(A){this._themeStyleElement||(this._themeStyleElement=document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));let M=`${this._terminalSelector} .${f} { color: ${A.foreground.css}; font-family: ${this._optionsService.rawOptions.fontFamily}; font-size: ${this._optionsService.rawOptions.fontSize}px; font-kerning: none; white-space: pre}`;M+=`${this._terminalSelector} .${f} .xterm-dim { color: ${t.color.multiplyOpacity(A.foreground,.5).css};}`,M+=`${this._terminalSelector} span:not(.xterm-bold) { font-weight: ${this._optionsService.rawOptions.fontWeight};}${this._terminalSelector} span.xterm-bold { font-weight: ${this._optionsService.rawOptions.fontWeightBold};}${this._terminalSelector} span.xterm-italic { font-style: italic;}`,M+="@keyframes blink_box_shadow_"+this._terminalClass+" { 50% {  border-bottom-style: hidden; }}",M+="@keyframes blink_block_"+this._terminalClass+` { 0% {  background-color: ${A.cursor.css};  color: ${A.cursorAccent.css}; } 50% {  background-color: inherit;  color: ${A.cursor.css}; }}`,M+=`${this._terminalSelector} .${f}.${u} .xterm-cursor.xterm-cursor-blink:not(.xterm-cursor-block) { animation: blink_box_shadow_`+this._terminalClass+` 1s step-end infinite;}${this._terminalSelector} .${f}.${u} .xterm-cursor.xterm-cursor-blink.xterm-cursor-block { animation: blink_block_`+this._terminalClass+` 1s step-end infinite;}${this._terminalSelector} .${f} .xterm-cursor.xterm-cursor-block { background-color: ${A.cursor.css}; color: ${A.cursorAccent.css};}${this._terminalSelector} .${f} .xterm-cursor.xterm-cursor-outline { outline: 1px solid ${A.cursor.css}; outline-offset: -1px;}${this._terminalSelector} .${f} .xterm-cursor.xterm-cursor-bar { box-shadow: ${this._optionsService.rawOptions.cursorWidth}px 0 0 ${A.cursor.css} inset;}${this._terminalSelector} .${f} .xterm-cursor.xterm-cursor-underline { border-bottom: 1px ${A.cursor.css}; border-bottom-style: solid; height: calc(100% - 1px);}`,M+=`${this._terminalSelector} .${y} { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}${this._terminalSelector}.focus .${y} div { position: absolute; background-color: ${A.selectionBackgroundOpaque.css};}${this._terminalSelector} .${y} div { position: absolute; background-color: ${A.selectionInactiveBackgroundOpaque.css};}`;for(const[N,K]of A.ansi.entries())M+=`${this._terminalSelector} .${S}${N} { color: ${K.css}; }${this._terminalSelector} .${S}${N}.xterm-dim { color: ${t.color.multiplyOpacity(K,.5).css}; }${this._terminalSelector} .${E}${N} { background-color: ${K.css}; }`;M+=`${this._terminalSelector} .${S}${m.INVERTED_DEFAULT_COLOR} { color: ${t.color.opaque(A.background).css}; }${this._terminalSelector} .${S}${m.INVERTED_DEFAULT_COLOR}.xterm-dim { color: ${t.color.multiplyOpacity(t.color.opaque(A.background),.5).css}; }${this._terminalSelector} .${E}${m.INVERTED_DEFAULT_COLOR} { background-color: ${A.foreground.css}; }`,this._themeStyleElement.textContent=M}_setDefaultSpacing(){const A=this.dimensions.css.cell.width-this._widthCache.get("W",!1,!1);this._rowContainer.style.letterSpacing=`${A}px`,this._rowFactory.defaultSpacing=A}handleDevicePixelRatioChange(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}_refreshRowElements(A,M){for(let N=this._rowElements.length;N<=M;N++){const K=document.createElement("div");this._rowContainer.appendChild(K),this._rowElements.push(K)}for(;this._rowElements.length>M;)this._rowContainer.removeChild(this._rowElements.pop())}handleResize(A,M){this._refreshRowElements(A,M),this._updateDimensions()}handleCharSizeChanged(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}handleBlur(){this._rowContainer.classList.remove(u)}handleFocus(){this._rowContainer.classList.add(u),this.renderRows(this._bufferService.buffer.y,this._bufferService.buffer.y)}handleSelectionChanged(A,M,N){if(this._selectionContainer.replaceChildren(),this._rowFactory.handleSelectionChanged(A,M,N),this.renderRows(0,this._bufferService.rows-1),!A||!M)return;const K=A[1]-this._bufferService.buffer.ydisp,z=M[1]-this._bufferService.buffer.ydisp,U=Math.max(K,0),w=Math.min(z,this._bufferService.rows-1);if(U>=this._bufferService.rows||w<0)return;const T=document.createDocumentFragment();if(N){const B=A[0]>M[0];T.appendChild(this._createSelectionElement(U,B?M[0]:A[0],B?A[0]:M[0],w-U+1))}else{const B=K===U?A[0]:0,I=U===z?M[0]:this._bufferService.cols;T.appendChild(this._createSelectionElement(U,B,I));const V=w-U-1;if(T.appendChild(this._createSelectionElement(U+1,0,this._bufferService.cols,V)),U!==w){const ee=z===w?M[0]:this._bufferService.cols;T.appendChild(this._createSelectionElement(w,0,ee))}}this._selectionContainer.appendChild(T)}_createSelectionElement(A,M,N,K=1){const z=document.createElement("div");return z.style.height=K*this.dimensions.css.cell.height+"px",z.style.top=A*this.dimensions.css.cell.height+"px",z.style.left=M*this.dimensions.css.cell.width+"px",z.style.width=this.dimensions.css.cell.width*(N-M)+"px",z}handleCursorMove(){}_handleOptionsChanged(){this._updateDimensions(),this._injectCss(this._themeService.colors),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}clear(){for(const A of this._rowElements)A.replaceChildren()}renderRows(A,M){const N=this._bufferService.buffer,K=N.ybase+N.y,z=Math.min(N.x,this._bufferService.cols-1),U=this._optionsService.rawOptions.cursorBlink,w=this._optionsService.rawOptions.cursorStyle,T=this._optionsService.rawOptions.cursorInactiveStyle;for(let B=A;B<=M;B++){const I=B+N.ydisp,V=this._rowElements[B],ee=N.lines.get(I);if(!V||!ee)break;V.replaceChildren(...this._rowFactory.createRow(ee,I,I===K,w,T,z,U,this.dimensions.css.cell.width,this._widthCache,-1,-1))}}get _terminalSelector(){return`.${c}${this._terminalClass}`}_handleLinkHover(A){this._setCellUnderline(A.x1,A.x2,A.y1,A.y2,A.cols,!0)}_handleLinkLeave(A){this._setCellUnderline(A.x1,A.x2,A.y1,A.y2,A.cols,!1)}_setCellUnderline(A,M,N,K,z,U){N<0&&(A=0),K<0&&(M=0);const w=this._bufferService.rows-1;N=Math.max(Math.min(N,w),0),K=Math.max(Math.min(K,w),0),z=Math.min(z,this._bufferService.cols);const T=this._bufferService.buffer,B=T.ybase+T.y,I=Math.min(T.x,z-1),V=this._optionsService.rawOptions.cursorBlink,ee=this._optionsService.rawOptions.cursorStyle,ne=this._optionsService.rawOptions.cursorInactiveStyle;for(let se=N;se<=K;++se){const ue=se+T.ydisp,k=this._rowElements[se],H=T.lines.get(ue);if(!k||!H)break;k.replaceChildren(...this._rowFactory.createRow(H,ue,ue===B,ee,ne,I,V,this.dimensions.css.cell.width,this._widthCache,U?se===N?A:0:-1,U?(se===K?M:z)-1:-1))}}};i.DomRenderer=O=h([_(4,n.IInstantiationService),_(5,g.ICharSizeService),_(6,n.IOptionsService),_(7,n.IBufferService),_(8,g.ICoreBrowserService),_(9,g.IThemeService)],O)},3787:function(L,i,a){var h=this&&this.__decorate||function(S,E,u,y){var R,O=arguments.length,A=O<3?E:y===null?y=Object.getOwnPropertyDescriptor(E,u):y;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")A=Reflect.decorate(S,E,u,y);else for(var M=S.length-1;M>=0;M--)(R=S[M])&&(A=(O<3?R(A):O>3?R(E,u,A):R(E,u))||A);return O>3&&A&&Object.defineProperty(E,u,A),A},_=this&&this.__param||function(S,E){return function(u,y){E(u,y,S)}};Object.defineProperty(i,"__esModule",{value:!0}),i.DomRendererRowFactory=void 0;const l=a(2223),p=a(643),m=a(511),b=a(2585),g=a(8055),t=a(4725),o=a(4269),r=a(6171),n=a(3734);let c=i.DomRendererRowFactory=class{constructor(S,E,u,y,R,O,A){this._document=S,this._characterJoinerService=E,this._optionsService=u,this._coreBrowserService=y,this._coreService=R,this._decorationService=O,this._themeService=A,this._workCell=new m.CellData,this._columnSelectMode=!1,this.defaultSpacing=0}handleSelectionChanged(S,E,u){this._selectionStart=S,this._selectionEnd=E,this._columnSelectMode=u}createRow(S,E,u,y,R,O,A,M,N,K,z){const U=[],w=this._characterJoinerService.getJoinedCharacters(E),T=this._themeService.colors;let B,I=S.getNoBgTrimmedLength();u&&I<O+1&&(I=O+1);let V=0,ee="",ne=0,se=0,ue=0,k=!1,H=0,j=!1,$=0;const ae=[],te=K!==-1&&z!==-1;for(let D=0;D<I;D++){S.loadCell(D,this._workCell);let P=this._workCell.getWidth();if(P===0)continue;let W=!1,q=D,F=this._workCell;if(w.length>0&&D===w[0][0]){W=!0;const _e=w.shift();F=new o.JoinedCellData(this._workCell,S.translateToString(!0,_e[0],_e[1]),_e[1]-_e[0]),q=_e[1]-1,P=F.getWidth()}const X=this._isCellInSelection(D,E),Q=u&&D===O,J=te&&D>=K&&D<=z;let Y=!1;this._decorationService.forEachDecorationAtCell(D,E,void 0,_e=>{Y=!0});let G=F.getChars()||p.WHITESPACE_CELL_CHAR;if(G===" "&&(F.isUnderline()||F.isOverline())&&(G=" "),$=P*M-N.get(G,F.isBold(),F.isItalic()),B){if(V&&(X&&j||!X&&!j&&F.bg===ne)&&(X&&j&&T.selectionForeground||F.fg===se)&&F.extended.ext===ue&&J===k&&$===H&&!Q&&!W&&!Y){ee+=G,V++;continue}V&&(B.textContent=ee),B=this._document.createElement("span"),V=0,ee=""}else B=this._document.createElement("span");if(ne=F.bg,se=F.fg,ue=F.extended.ext,k=J,H=$,j=X,W&&O>=D&&O<=q&&(O=D),!this._coreService.isCursorHidden&&Q){if(ae.push("xterm-cursor"),this._coreBrowserService.isFocused)A&&ae.push("xterm-cursor-blink"),ae.push(y==="bar"?"xterm-cursor-bar":y==="underline"?"xterm-cursor-underline":"xterm-cursor-block");else if(R)switch(R){case"outline":ae.push("xterm-cursor-outline");break;case"block":ae.push("xterm-cursor-block");break;case"bar":ae.push("xterm-cursor-bar");break;case"underline":ae.push("xterm-cursor-underline")}}if(F.isBold()&&ae.push("xterm-bold"),F.isItalic()&&ae.push("xterm-italic"),F.isDim()&&ae.push("xterm-dim"),ee=F.isInvisible()?p.WHITESPACE_CELL_CHAR:F.getChars()||p.WHITESPACE_CELL_CHAR,F.isUnderline()&&(ae.push(`xterm-underline-${F.extended.underlineStyle}`),ee===" "&&(ee=" "),!F.isUnderlineColorDefault()))if(F.isUnderlineColorRGB())B.style.textDecorationColor=`rgb(${n.AttributeData.toColorRGB(F.getUnderlineColor()).join(",")})`;else{let _e=F.getUnderlineColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&F.isBold()&&_e<8&&(_e+=8),B.style.textDecorationColor=T.ansi[_e].css}F.isOverline()&&(ae.push("xterm-overline"),ee===" "&&(ee=" ")),F.isStrikethrough()&&ae.push("xterm-strikethrough"),J&&(B.style.textDecoration="underline");let Z=F.getFgColor(),re=F.getFgColorMode(),ie=F.getBgColor(),oe=F.getBgColorMode();const le=!!F.isInverse();if(le){const _e=Z;Z=ie,ie=_e;const Et=re;re=oe,oe=Et}let de,ve,ge,Ce=!1;switch(this._decorationService.forEachDecorationAtCell(D,E,void 0,_e=>{_e.options.layer!=="top"&&Ce||(_e.backgroundColorRGB&&(oe=50331648,ie=_e.backgroundColorRGB.rgba>>8&16777215,de=_e.backgroundColorRGB),_e.foregroundColorRGB&&(re=50331648,Z=_e.foregroundColorRGB.rgba>>8&16777215,ve=_e.foregroundColorRGB),Ce=_e.options.layer==="top")}),!Ce&&X&&(de=this._coreBrowserService.isFocused?T.selectionBackgroundOpaque:T.selectionInactiveBackgroundOpaque,ie=de.rgba>>8&16777215,oe=50331648,Ce=!0,T.selectionForeground&&(re=50331648,Z=T.selectionForeground.rgba>>8&16777215,ve=T.selectionForeground)),Ce&&ae.push("xterm-decoration-top"),oe){case 16777216:case 33554432:ge=T.ansi[ie],ae.push(`xterm-bg-${ie}`);break;case 50331648:ge=g.rgba.toColor(ie>>16,ie>>8&255,255&ie),this._addStyle(B,`background-color:#${f((ie>>>0).toString(16),"0",6)}`);break;default:le?(ge=T.foreground,ae.push(`xterm-bg-${l.INVERTED_DEFAULT_COLOR}`)):ge=T.background}switch(de||F.isDim()&&(de=g.color.multiplyOpacity(ge,.5)),re){case 16777216:case 33554432:F.isBold()&&Z<8&&this._optionsService.rawOptions.drawBoldTextInBrightColors&&(Z+=8),this._applyMinimumContrast(B,ge,T.ansi[Z],F,de,void 0)||ae.push(`xterm-fg-${Z}`);break;case 50331648:const _e=g.rgba.toColor(Z>>16&255,Z>>8&255,255&Z);this._applyMinimumContrast(B,ge,_e,F,de,ve)||this._addStyle(B,`color:#${f(Z.toString(16),"0",6)}`);break;default:this._applyMinimumContrast(B,ge,T.foreground,F,de,void 0)||le&&ae.push(`xterm-fg-${l.INVERTED_DEFAULT_COLOR}`)}ae.length&&(B.className=ae.join(" "),ae.length=0),Q||W||Y?B.textContent=ee:V++,$!==this.defaultSpacing&&(B.style.letterSpacing=`${$}px`),U.push(B),D=q}return B&&V&&(B.textContent=ee),U}_applyMinimumContrast(S,E,u,y,R,O){if(this._optionsService.rawOptions.minimumContrastRatio===1||(0,r.excludeFromContrastRatioDemands)(y.getCode()))return!1;const A=this._getContrastCache(y);let M;if(R||O||(M=A.getColor(E.rgba,u.rgba)),M===void 0){const N=this._optionsService.rawOptions.minimumContrastRatio/(y.isDim()?2:1);M=g.color.ensureContrastRatio(R||E,O||u,N),A.setColor((R||E).rgba,(O||u).rgba,M??null)}return!!M&&(this._addStyle(S,`color:${M.css}`),!0)}_getContrastCache(S){return S.isDim()?this._themeService.colors.halfContrastCache:this._themeService.colors.contrastCache}_addStyle(S,E){S.setAttribute("style",`${S.getAttribute("style")||""}${E};`)}_isCellInSelection(S,E){const u=this._selectionStart,y=this._selectionEnd;return!(!u||!y)&&(this._columnSelectMode?u[0]<=y[0]?S>=u[0]&&E>=u[1]&&S<y[0]&&E<=y[1]:S<u[0]&&E>=u[1]&&S>=y[0]&&E<=y[1]:E>u[1]&&E<y[1]||u[1]===y[1]&&E===u[1]&&S>=u[0]&&S<y[0]||u[1]<y[1]&&E===y[1]&&S<y[0]||u[1]<y[1]&&E===u[1]&&S>=u[0])}};function f(S,E,u){for(;S.length<u;)S=E+S;return S}i.DomRendererRowFactory=c=h([_(1,t.ICharacterJoinerService),_(2,b.IOptionsService),_(3,t.ICoreBrowserService),_(4,b.ICoreService),_(5,b.IDecorationService),_(6,t.IThemeService)],c)},2550:(L,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.WidthCache=void 0,i.WidthCache=class{constructor(a){this._flat=new Float32Array(256),this._font="",this._fontSize=0,this._weight="normal",this._weightBold="bold",this._measureElements=[],this._container=a.createElement("div"),this._container.style.position="absolute",this._container.style.top="-50000px",this._container.style.width="50000px",this._container.style.whiteSpace="pre",this._container.style.fontKerning="none";const h=a.createElement("span"),_=a.createElement("span");_.style.fontWeight="bold";const l=a.createElement("span");l.style.fontStyle="italic";const p=a.createElement("span");p.style.fontWeight="bold",p.style.fontStyle="italic",this._measureElements=[h,_,l,p],this._container.appendChild(h),this._container.appendChild(_),this._container.appendChild(l),this._container.appendChild(p),a.body.appendChild(this._container),this.clear()}dispose(){this._container.remove(),this._measureElements.length=0,this._holey=void 0}clear(){this._flat.fill(-9999),this._holey=new Map}setFont(a,h,_,l){a===this._font&&h===this._fontSize&&_===this._weight&&l===this._weightBold||(this._font=a,this._fontSize=h,this._weight=_,this._weightBold=l,this._container.style.fontFamily=this._font,this._container.style.fontSize=`${this._fontSize}px`,this._measureElements[0].style.fontWeight=`${_}`,this._measureElements[1].style.fontWeight=`${l}`,this._measureElements[2].style.fontWeight=`${_}`,this._measureElements[3].style.fontWeight=`${l}`,this.clear())}get(a,h,_){let l=0;if(!h&&!_&&a.length===1&&(l=a.charCodeAt(0))<256)return this._flat[l]!==-9999?this._flat[l]:this._flat[l]=this._measure(a,0);let p=a;h&&(p+="B"),_&&(p+="I");let m=this._holey.get(p);if(m===void 0){let b=0;h&&(b|=1),_&&(b|=2),m=this._measure(a,b),this._holey.set(p,m)}return m}_measure(a,h){const _=this._measureElements[h];return _.textContent=a.repeat(32),_.offsetWidth/32}}},2223:(L,i,a)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.TEXT_BASELINE=i.DIM_OPACITY=i.INVERTED_DEFAULT_COLOR=void 0;const h=a(6114);i.INVERTED_DEFAULT_COLOR=257,i.DIM_OPACITY=.5,i.TEXT_BASELINE=h.isFirefox||h.isLegacyEdge?"bottom":"ideographic"},6171:(L,i)=>{function a(h){return 57508<=h&&h<=57558}Object.defineProperty(i,"__esModule",{value:!0}),i.createRenderDimensions=i.excludeFromContrastRatioDemands=i.isRestrictedPowerlineGlyph=i.isPowerlineGlyph=i.throwIfFalsy=void 0,i.throwIfFalsy=function(h){if(!h)throw new Error("value must not be falsy");return h},i.isPowerlineGlyph=a,i.isRestrictedPowerlineGlyph=function(h){return 57520<=h&&h<=57527},i.excludeFromContrastRatioDemands=function(h){return a(h)||function(_){return 9472<=_&&_<=9631}(h)},i.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}}},456:(L,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.SelectionModel=void 0,i.SelectionModel=class{constructor(a){this._bufferService=a,this.isSelectAllActive=!1,this.selectionStartLength=0}clearSelection(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0}get finalSelectionStart(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart&&this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart}get finalSelectionEnd(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){const a=this.selectionStart[0]+this.selectionStartLength;return a>this._bufferService.cols?a%this._bufferService.cols==0?[this._bufferService.cols,this.selectionStart[1]+Math.floor(a/this._bufferService.cols)-1]:[a%this._bufferService.cols,this.selectionStart[1]+Math.floor(a/this._bufferService.cols)]:[a,this.selectionStart[1]]}if(this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]){const a=this.selectionStart[0]+this.selectionStartLength;return a>this._bufferService.cols?[a%this._bufferService.cols,this.selectionStart[1]+Math.floor(a/this._bufferService.cols)]:[Math.max(a,this.selectionEnd[0]),this.selectionEnd[1]]}return this.selectionEnd}}areSelectionValuesReversed(){const a=this.selectionStart,h=this.selectionEnd;return!(!a||!h)&&(a[1]>h[1]||a[1]===h[1]&&a[0]>h[0])}handleTrim(a){return this.selectionStart&&(this.selectionStart[1]-=a),this.selectionEnd&&(this.selectionEnd[1]-=a),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)}}},428:function(L,i,a){var h=this&&this.__decorate||function(t,o,r,n){var c,f=arguments.length,S=f<3?o:n===null?n=Object.getOwnPropertyDescriptor(o,r):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(t,o,r,n);else for(var E=t.length-1;E>=0;E--)(c=t[E])&&(S=(f<3?c(S):f>3?c(o,r,S):c(o,r))||S);return f>3&&S&&Object.defineProperty(o,r,S),S},_=this&&this.__param||function(t,o){return function(r,n){o(r,n,t)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CharSizeService=void 0;const l=a(2585),p=a(8460),m=a(844);let b=i.CharSizeService=class extends m.Disposable{get hasValidSize(){return this.width>0&&this.height>0}constructor(t,o,r){super(),this._optionsService=r,this.width=0,this.height=0,this._onCharSizeChange=this.register(new p.EventEmitter),this.onCharSizeChange=this._onCharSizeChange.event,this._measureStrategy=new g(t,o,this._optionsService),this.register(this._optionsService.onMultipleOptionChange(["fontFamily","fontSize"],()=>this.measure()))}measure(){const t=this._measureStrategy.measure();t.width===this.width&&t.height===this.height||(this.width=t.width,this.height=t.height,this._onCharSizeChange.fire())}};i.CharSizeService=b=h([_(2,l.IOptionsService)],b);class g{constructor(o,r,n){this._document=o,this._parentElement=r,this._optionsService=n,this._result={width:0,height:0},this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W".repeat(32),this._measureElement.setAttribute("aria-hidden","true"),this._measureElement.style.whiteSpace="pre",this._measureElement.style.fontKerning="none",this._parentElement.appendChild(this._measureElement)}measure(){this._measureElement.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._measureElement.style.fontSize=`${this._optionsService.rawOptions.fontSize}px`;const o={height:Number(this._measureElement.offsetHeight),width:Number(this._measureElement.offsetWidth)};return o.width!==0&&o.height!==0&&(this._result.width=o.width/32,this._result.height=Math.ceil(o.height)),this._result}}},4269:function(L,i,a){var h=this&&this.__decorate||function(o,r,n,c){var f,S=arguments.length,E=S<3?r:c===null?c=Object.getOwnPropertyDescriptor(r,n):c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(o,r,n,c);else for(var u=o.length-1;u>=0;u--)(f=o[u])&&(E=(S<3?f(E):S>3?f(r,n,E):f(r,n))||E);return S>3&&E&&Object.defineProperty(r,n,E),E},_=this&&this.__param||function(o,r){return function(n,c){r(n,c,o)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CharacterJoinerService=i.JoinedCellData=void 0;const l=a(3734),p=a(643),m=a(511),b=a(2585);class g extends l.AttributeData{constructor(r,n,c){super(),this.content=0,this.combinedData="",this.fg=r.fg,this.bg=r.bg,this.combinedData=n,this._width=c}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(r){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}i.JoinedCellData=g;let t=i.CharacterJoinerService=class dr{constructor(r){this._bufferService=r,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new m.CellData}register(r){const n={id:this._nextCharacterJoinerId++,handler:r};return this._characterJoiners.push(n),n.id}deregister(r){for(let n=0;n<this._characterJoiners.length;n++)if(this._characterJoiners[n].id===r)return this._characterJoiners.splice(n,1),!0;return!1}getJoinedCharacters(r){if(this._characterJoiners.length===0)return[];const n=this._bufferService.buffer.lines.get(r);if(!n||n.length===0)return[];const c=[],f=n.translateToString(!0);let S=0,E=0,u=0,y=n.getFg(0),R=n.getBg(0);for(let O=0;O<n.getTrimmedLength();O++)if(n.loadCell(O,this._workCell),this._workCell.getWidth()!==0){if(this._workCell.fg!==y||this._workCell.bg!==R){if(O-S>1){const A=this._getJoinedRanges(f,u,E,n,S);for(let M=0;M<A.length;M++)c.push(A[M])}S=O,u=E,y=this._workCell.fg,R=this._workCell.bg}E+=this._workCell.getChars().length||p.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-S>1){const O=this._getJoinedRanges(f,u,E,n,S);for(let A=0;A<O.length;A++)c.push(O[A])}return c}_getJoinedRanges(r,n,c,f,S){const E=r.substring(n,c);let u=[];try{u=this._characterJoiners[0].handler(E)}catch(y){console.error(y)}for(let y=1;y<this._characterJoiners.length;y++)try{const R=this._characterJoiners[y].handler(E);for(let O=0;O<R.length;O++)dr._mergeRanges(u,R[O])}catch(R){console.error(R)}return this._stringRangesToCellRanges(u,f,S),u}_stringRangesToCellRanges(r,n,c){let f=0,S=!1,E=0,u=r[f];if(u){for(let y=c;y<this._bufferService.cols;y++){const R=n.getWidth(y),O=n.getString(y).length||p.WHITESPACE_CELL_CHAR.length;if(R!==0){if(!S&&u[0]<=E&&(u[0]=y,S=!0),u[1]<=E){if(u[1]=y,u=r[++f],!u)break;u[0]<=E?(u[0]=y,S=!0):S=!1}E+=O}}u&&(u[1]=this._bufferService.cols)}}static _mergeRanges(r,n){let c=!1;for(let f=0;f<r.length;f++){const S=r[f];if(c){if(n[1]<=S[0])return r[f-1][1]=n[1],r;if(n[1]<=S[1])return r[f-1][1]=Math.max(n[1],S[1]),r.splice(f,1),r;r.splice(f,1),f--}else{if(n[1]<=S[0])return r.splice(f,0,n),r;if(n[1]<=S[1])return S[0]=Math.min(n[0],S[0]),r;n[0]<S[1]&&(S[0]=Math.min(n[0],S[0]),c=!0)}}return c?r[r.length-1][1]=n[1]:r.push(n),r}};i.CharacterJoinerService=t=h([_(0,b.IBufferService)],t)},5114:(L,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CoreBrowserService=void 0,i.CoreBrowserService=class{constructor(a,h){this._textarea=a,this.window=h,this._isFocused=!1,this._cachedIsFocused=void 0,this._textarea.addEventListener("focus",()=>this._isFocused=!0),this._textarea.addEventListener("blur",()=>this._isFocused=!1)}get dpr(){return this.window.devicePixelRatio}get isFocused(){return this._cachedIsFocused===void 0&&(this._cachedIsFocused=this._isFocused&&this._textarea.ownerDocument.hasFocus(),queueMicrotask(()=>this._cachedIsFocused=void 0)),this._cachedIsFocused}}},8934:function(L,i,a){var h=this&&this.__decorate||function(b,g,t,o){var r,n=arguments.length,c=n<3?g:o===null?o=Object.getOwnPropertyDescriptor(g,t):o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(b,g,t,o);else for(var f=b.length-1;f>=0;f--)(r=b[f])&&(c=(n<3?r(c):n>3?r(g,t,c):r(g,t))||c);return n>3&&c&&Object.defineProperty(g,t,c),c},_=this&&this.__param||function(b,g){return function(t,o){g(t,o,b)}};Object.defineProperty(i,"__esModule",{value:!0}),i.MouseService=void 0;const l=a(4725),p=a(9806);let m=i.MouseService=class{constructor(b,g){this._renderService=b,this._charSizeService=g}getCoords(b,g,t,o,r){return(0,p.getCoords)(window,b,g,t,o,this._charSizeService.hasValidSize,this._renderService.dimensions.css.cell.width,this._renderService.dimensions.css.cell.height,r)}getMouseReportCoords(b,g){const t=(0,p.getCoordsRelativeToElement)(window,b,g);if(this._charSizeService.hasValidSize)return t[0]=Math.min(Math.max(t[0],0),this._renderService.dimensions.css.canvas.width-1),t[1]=Math.min(Math.max(t[1],0),this._renderService.dimensions.css.canvas.height-1),{col:Math.floor(t[0]/this._renderService.dimensions.css.cell.width),row:Math.floor(t[1]/this._renderService.dimensions.css.cell.height),x:Math.floor(t[0]),y:Math.floor(t[1])}}};i.MouseService=m=h([_(0,l.IRenderService),_(1,l.ICharSizeService)],m)},3230:function(L,i,a){var h=this&&this.__decorate||function(c,f,S,E){var u,y=arguments.length,R=y<3?f:E===null?E=Object.getOwnPropertyDescriptor(f,S):E;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")R=Reflect.decorate(c,f,S,E);else for(var O=c.length-1;O>=0;O--)(u=c[O])&&(R=(y<3?u(R):y>3?u(f,S,R):u(f,S))||R);return y>3&&R&&Object.defineProperty(f,S,R),R},_=this&&this.__param||function(c,f){return function(S,E){f(S,E,c)}};Object.defineProperty(i,"__esModule",{value:!0}),i.RenderService=void 0;const l=a(3656),p=a(6193),m=a(5596),b=a(4725),g=a(8460),t=a(844),o=a(7226),r=a(2585);let n=i.RenderService=class extends t.Disposable{get dimensions(){return this._renderer.value.dimensions}constructor(c,f,S,E,u,y,R,O){if(super(),this._rowCount=c,this._charSizeService=E,this._renderer=this.register(new t.MutableDisposable),this._pausedResizeTask=new o.DebouncedIdleTask,this._isPaused=!1,this._needsFullRefresh=!1,this._isNextRenderRedrawOnly=!0,this._needsSelectionRefresh=!1,this._canvasWidth=0,this._canvasHeight=0,this._selectionState={start:void 0,end:void 0,columnSelectMode:!1},this._onDimensionsChange=this.register(new g.EventEmitter),this.onDimensionsChange=this._onDimensionsChange.event,this._onRenderedViewportChange=this.register(new g.EventEmitter),this.onRenderedViewportChange=this._onRenderedViewportChange.event,this._onRender=this.register(new g.EventEmitter),this.onRender=this._onRender.event,this._onRefreshRequest=this.register(new g.EventEmitter),this.onRefreshRequest=this._onRefreshRequest.event,this._renderDebouncer=new p.RenderDebouncer(R.window,(A,M)=>this._renderRows(A,M)),this.register(this._renderDebouncer),this._screenDprMonitor=new m.ScreenDprMonitor(R.window),this._screenDprMonitor.setListener(()=>this.handleDevicePixelRatioChange()),this.register(this._screenDprMonitor),this.register(y.onResize(()=>this._fullRefresh())),this.register(y.buffers.onBufferActivate(()=>{var A;return(A=this._renderer.value)===null||A===void 0?void 0:A.clear()})),this.register(S.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._charSizeService.onCharSizeChange(()=>this.handleCharSizeChanged())),this.register(u.onDecorationRegistered(()=>this._fullRefresh())),this.register(u.onDecorationRemoved(()=>this._fullRefresh())),this.register(S.onMultipleOptionChange(["customGlyphs","drawBoldTextInBrightColors","letterSpacing","lineHeight","fontFamily","fontSize","fontWeight","fontWeightBold","minimumContrastRatio"],()=>{this.clear(),this.handleResize(y.cols,y.rows),this._fullRefresh()})),this.register(S.onMultipleOptionChange(["cursorBlink","cursorStyle"],()=>this.refreshRows(y.buffer.y,y.buffer.y,!0))),this.register((0,l.addDisposableDomListener)(R.window,"resize",()=>this.handleDevicePixelRatioChange())),this.register(O.onChangeColors(()=>this._fullRefresh())),"IntersectionObserver"in R.window){const A=new R.window.IntersectionObserver(M=>this._handleIntersectionChange(M[M.length-1]),{threshold:0});A.observe(f),this.register({dispose:()=>A.disconnect()})}}_handleIntersectionChange(c){this._isPaused=c.isIntersecting===void 0?c.intersectionRatio===0:!c.isIntersecting,this._isPaused||this._charSizeService.hasValidSize||this._charSizeService.measure(),!this._isPaused&&this._needsFullRefresh&&(this._pausedResizeTask.flush(),this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)}refreshRows(c,f,S=!1){this._isPaused?this._needsFullRefresh=!0:(S||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(c,f,this._rowCount))}_renderRows(c,f){this._renderer.value&&(c=Math.min(c,this._rowCount-1),f=Math.min(f,this._rowCount-1),this._renderer.value.renderRows(c,f),this._needsSelectionRefresh&&(this._renderer.value.handleSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRenderedViewportChange.fire({start:c,end:f}),this._onRender.fire({start:c,end:f}),this._isNextRenderRedrawOnly=!0)}resize(c,f){this._rowCount=f,this._fireOnCanvasResize()}_handleOptionsChanged(){this._renderer.value&&(this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize())}_fireOnCanvasResize(){this._renderer.value&&(this._renderer.value.dimensions.css.canvas.width===this._canvasWidth&&this._renderer.value.dimensions.css.canvas.height===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.value.dimensions))}hasRenderer(){return!!this._renderer.value}setRenderer(c){this._renderer.value=c,this._renderer.value.onRequestRedraw(f=>this.refreshRows(f.start,f.end,!0)),this._needsSelectionRefresh=!0,this._fullRefresh()}addRefreshCallback(c){return this._renderDebouncer.addRefreshCallback(c)}_fullRefresh(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)}clearTextureAtlas(){var c,f;this._renderer.value&&((f=(c=this._renderer.value).clearTextureAtlas)===null||f===void 0||f.call(c),this._fullRefresh())}handleDevicePixelRatioChange(){this._charSizeService.measure(),this._renderer.value&&(this._renderer.value.handleDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1))}handleResize(c,f){this._renderer.value&&(this._isPaused?this._pausedResizeTask.set(()=>this._renderer.value.handleResize(c,f)):this._renderer.value.handleResize(c,f),this._fullRefresh())}handleCharSizeChanged(){var c;(c=this._renderer.value)===null||c===void 0||c.handleCharSizeChanged()}handleBlur(){var c;(c=this._renderer.value)===null||c===void 0||c.handleBlur()}handleFocus(){var c;(c=this._renderer.value)===null||c===void 0||c.handleFocus()}handleSelectionChanged(c,f,S){var E;this._selectionState.start=c,this._selectionState.end=f,this._selectionState.columnSelectMode=S,(E=this._renderer.value)===null||E===void 0||E.handleSelectionChanged(c,f,S)}handleCursorMove(){var c;(c=this._renderer.value)===null||c===void 0||c.handleCursorMove()}clear(){var c;(c=this._renderer.value)===null||c===void 0||c.clear()}};i.RenderService=n=h([_(2,r.IOptionsService),_(3,b.ICharSizeService),_(4,r.IDecorationService),_(5,r.IBufferService),_(6,b.ICoreBrowserService),_(7,b.IThemeService)],n)},9312:function(L,i,a){var h=this&&this.__decorate||function(u,y,R,O){var A,M=arguments.length,N=M<3?y:O===null?O=Object.getOwnPropertyDescriptor(y,R):O;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")N=Reflect.decorate(u,y,R,O);else for(var K=u.length-1;K>=0;K--)(A=u[K])&&(N=(M<3?A(N):M>3?A(y,R,N):A(y,R))||N);return M>3&&N&&Object.defineProperty(y,R,N),N},_=this&&this.__param||function(u,y){return function(R,O){y(R,O,u)}};Object.defineProperty(i,"__esModule",{value:!0}),i.SelectionService=void 0;const l=a(9806),p=a(9504),m=a(456),b=a(4725),g=a(8460),t=a(844),o=a(6114),r=a(4841),n=a(511),c=a(2585),f=" ",S=new RegExp(f,"g");let E=i.SelectionService=class extends t.Disposable{constructor(u,y,R,O,A,M,N,K,z){super(),this._element=u,this._screenElement=y,this._linkifier=R,this._bufferService=O,this._coreService=A,this._mouseService=M,this._optionsService=N,this._renderService=K,this._coreBrowserService=z,this._dragScrollAmount=0,this._enabled=!0,this._workCell=new n.CellData,this._mouseDownTimeStamp=0,this._oldHasSelection=!1,this._oldSelectionStart=void 0,this._oldSelectionEnd=void 0,this._onLinuxMouseSelection=this.register(new g.EventEmitter),this.onLinuxMouseSelection=this._onLinuxMouseSelection.event,this._onRedrawRequest=this.register(new g.EventEmitter),this.onRequestRedraw=this._onRedrawRequest.event,this._onSelectionChange=this.register(new g.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onRequestScrollLines=this.register(new g.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this._mouseMoveListener=U=>this._handleMouseMove(U),this._mouseUpListener=U=>this._handleMouseUp(U),this._coreService.onUserInput(()=>{this.hasSelection&&this.clearSelection()}),this._trimListener=this._bufferService.buffer.lines.onTrim(U=>this._handleTrim(U)),this.register(this._bufferService.buffers.onBufferActivate(U=>this._handleBufferActivate(U))),this.enable(),this._model=new m.SelectionModel(this._bufferService),this._activeSelectionMode=0,this.register((0,t.toDisposable)(()=>{this._removeMouseDownListeners()}))}reset(){this.clearSelection()}disable(){this.clearSelection(),this._enabled=!1}enable(){this._enabled=!0}get selectionStart(){return this._model.finalSelectionStart}get selectionEnd(){return this._model.finalSelectionEnd}get hasSelection(){const u=this._model.finalSelectionStart,y=this._model.finalSelectionEnd;return!(!u||!y||u[0]===y[0]&&u[1]===y[1])}get selectionText(){const u=this._model.finalSelectionStart,y=this._model.finalSelectionEnd;if(!u||!y)return"";const R=this._bufferService.buffer,O=[];if(this._activeSelectionMode===3){if(u[0]===y[0])return"";const A=u[0]<y[0]?u[0]:y[0],M=u[0]<y[0]?y[0]:u[0];for(let N=u[1];N<=y[1];N++){const K=R.translateBufferLineToString(N,!0,A,M);O.push(K)}}else{const A=u[1]===y[1]?y[0]:void 0;O.push(R.translateBufferLineToString(u[1],!0,u[0],A));for(let M=u[1]+1;M<=y[1]-1;M++){const N=R.lines.get(M),K=R.translateBufferLineToString(M,!0);N!=null&&N.isWrapped?O[O.length-1]+=K:O.push(K)}if(u[1]!==y[1]){const M=R.lines.get(y[1]),N=R.translateBufferLineToString(y[1],!0,0,y[0]);M&&M.isWrapped?O[O.length-1]+=N:O.push(N)}}return O.map(A=>A.replace(S," ")).join(o.isWindows?`\r
`:`
`)}clearSelection(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()}refresh(u){this._refreshAnimationFrame||(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._refresh())),o.isLinux&&u&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)}_refresh(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:this._activeSelectionMode===3})}_isClickInSelection(u){const y=this._getMouseBufferCoords(u),R=this._model.finalSelectionStart,O=this._model.finalSelectionEnd;return!!(R&&O&&y)&&this._areCoordsInSelection(y,R,O)}isCellInSelection(u,y){const R=this._model.finalSelectionStart,O=this._model.finalSelectionEnd;return!(!R||!O)&&this._areCoordsInSelection([u,y],R,O)}_areCoordsInSelection(u,y,R){return u[1]>y[1]&&u[1]<R[1]||y[1]===R[1]&&u[1]===y[1]&&u[0]>=y[0]&&u[0]<R[0]||y[1]<R[1]&&u[1]===R[1]&&u[0]<R[0]||y[1]<R[1]&&u[1]===y[1]&&u[0]>=y[0]}_selectWordAtCursor(u,y){var R,O;const A=(O=(R=this._linkifier.currentLink)===null||R===void 0?void 0:R.link)===null||O===void 0?void 0:O.range;if(A)return this._model.selectionStart=[A.start.x-1,A.start.y-1],this._model.selectionStartLength=(0,r.getRangeLength)(A,this._bufferService.cols),this._model.selectionEnd=void 0,!0;const M=this._getMouseBufferCoords(u);return!!M&&(this._selectWordAt(M,y),this._model.selectionEnd=void 0,!0)}selectAll(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()}selectLines(u,y){this._model.clearSelection(),u=Math.max(u,0),y=Math.min(y,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,u],this._model.selectionEnd=[this._bufferService.cols,y],this.refresh(),this._onSelectionChange.fire()}_handleTrim(u){this._model.handleTrim(u)&&this.refresh()}_getMouseBufferCoords(u){const y=this._mouseService.getCoords(u,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(y)return y[0]--,y[1]--,y[1]+=this._bufferService.buffer.ydisp,y}_getMouseEventScrollAmount(u){let y=(0,l.getCoordsRelativeToElement)(this._coreBrowserService.window,u,this._screenElement)[1];const R=this._renderService.dimensions.css.canvas.height;return y>=0&&y<=R?0:(y>R&&(y-=R),y=Math.min(Math.max(y,-50),50),y/=50,y/Math.abs(y)+Math.round(14*y))}shouldForceSelection(u){return o.isMac?u.altKey&&this._optionsService.rawOptions.macOptionClickForcesSelection:u.shiftKey}handleMouseDown(u){if(this._mouseDownTimeStamp=u.timeStamp,(u.button!==2||!this.hasSelection)&&u.button===0){if(!this._enabled){if(!this.shouldForceSelection(u))return;u.stopPropagation()}u.preventDefault(),this._dragScrollAmount=0,this._enabled&&u.shiftKey?this._handleIncrementalClick(u):u.detail===1?this._handleSingleClick(u):u.detail===2?this._handleDoubleClick(u):u.detail===3&&this._handleTripleClick(u),this._addMouseDownListeners(),this.refresh(!0)}}_addMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=this._coreBrowserService.window.setInterval(()=>this._dragScroll(),50)}_removeMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),this._coreBrowserService.window.clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0}_handleIncrementalClick(u){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(u))}_handleSingleClick(u){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(u)?3:0,this._model.selectionStart=this._getMouseBufferCoords(u),!this._model.selectionStart)return;this._model.selectionEnd=void 0;const y=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);y&&y.length!==this._model.selectionStart[0]&&y.hasWidth(this._model.selectionStart[0])===0&&this._model.selectionStart[0]++}_handleDoubleClick(u){this._selectWordAtCursor(u,!0)&&(this._activeSelectionMode=1)}_handleTripleClick(u){const y=this._getMouseBufferCoords(u);y&&(this._activeSelectionMode=2,this._selectLineAt(y[1]))}shouldColumnSelect(u){return u.altKey&&!(o.isMac&&this._optionsService.rawOptions.macOptionClickForcesSelection)}_handleMouseMove(u){if(u.stopImmediatePropagation(),!this._model.selectionStart)return;const y=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(u),!this._model.selectionEnd)return void this.refresh(!0);this._activeSelectionMode===2?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:this._activeSelectionMode===1&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(u),this._activeSelectionMode!==3&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));const R=this._bufferService.buffer;if(this._model.selectionEnd[1]<R.lines.length){const O=R.lines.get(this._model.selectionEnd[1]);O&&O.hasWidth(this._model.selectionEnd[0])===0&&this._model.selectionEnd[0]++}y&&y[0]===this._model.selectionEnd[0]&&y[1]===this._model.selectionEnd[1]||this.refresh(!0)}_dragScroll(){if(this._model.selectionEnd&&this._model.selectionStart&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});const u=this._bufferService.buffer;this._dragScrollAmount>0?(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(u.ydisp+this._bufferService.rows,u.lines.length-1)):(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=u.ydisp),this.refresh()}}_handleMouseUp(u){const y=u.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&y<500&&u.altKey&&this._optionsService.rawOptions.altClickMovesCursor){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){const R=this._mouseService.getCoords(u,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(R&&R[0]!==void 0&&R[1]!==void 0){const O=(0,p.moveToCellSequence)(R[0]-1,R[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(O,!0)}}}else this._fireEventIfSelectionChanged()}_fireEventIfSelectionChanged(){const u=this._model.finalSelectionStart,y=this._model.finalSelectionEnd,R=!(!u||!y||u[0]===y[0]&&u[1]===y[1]);R?u&&y&&(this._oldSelectionStart&&this._oldSelectionEnd&&u[0]===this._oldSelectionStart[0]&&u[1]===this._oldSelectionStart[1]&&y[0]===this._oldSelectionEnd[0]&&y[1]===this._oldSelectionEnd[1]||this._fireOnSelectionChange(u,y,R)):this._oldHasSelection&&this._fireOnSelectionChange(u,y,R)}_fireOnSelectionChange(u,y,R){this._oldSelectionStart=u,this._oldSelectionEnd=y,this._oldHasSelection=R,this._onSelectionChange.fire()}_handleBufferActivate(u){this.clearSelection(),this._trimListener.dispose(),this._trimListener=u.activeBuffer.lines.onTrim(y=>this._handleTrim(y))}_convertViewportColToCharacterIndex(u,y){let R=y;for(let O=0;y>=O;O++){const A=u.loadCell(O,this._workCell).getChars().length;this._workCell.getWidth()===0?R--:A>1&&y!==O&&(R+=A-1)}return R}setSelection(u,y,R){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[u,y],this._model.selectionStartLength=R,this.refresh(),this._fireEventIfSelectionChanged()}rightClickSelect(u){this._isClickInSelection(u)||(this._selectWordAtCursor(u,!1)&&this.refresh(!0),this._fireEventIfSelectionChanged())}_getWordAt(u,y,R=!0,O=!0){if(u[0]>=this._bufferService.cols)return;const A=this._bufferService.buffer,M=A.lines.get(u[1]);if(!M)return;const N=A.translateBufferLineToString(u[1],!1);let K=this._convertViewportColToCharacterIndex(M,u[0]),z=K;const U=u[0]-K;let w=0,T=0,B=0,I=0;if(N.charAt(K)===" "){for(;K>0&&N.charAt(K-1)===" ";)K--;for(;z<N.length&&N.charAt(z+1)===" ";)z++}else{let ne=u[0],se=u[0];M.getWidth(ne)===0&&(w++,ne--),M.getWidth(se)===2&&(T++,se++);const ue=M.getString(se).length;for(ue>1&&(I+=ue-1,z+=ue-1);ne>0&&K>0&&!this._isCharWordSeparator(M.loadCell(ne-1,this._workCell));){M.loadCell(ne-1,this._workCell);const k=this._workCell.getChars().length;this._workCell.getWidth()===0?(w++,ne--):k>1&&(B+=k-1,K-=k-1),K--,ne--}for(;se<M.length&&z+1<N.length&&!this._isCharWordSeparator(M.loadCell(se+1,this._workCell));){M.loadCell(se+1,this._workCell);const k=this._workCell.getChars().length;this._workCell.getWidth()===2?(T++,se++):k>1&&(I+=k-1,z+=k-1),z++,se++}}z++;let V=K+U-w+B,ee=Math.min(this._bufferService.cols,z-K+w+T-B-I);if(y||N.slice(K,z).trim()!==""){if(R&&V===0&&M.getCodePoint(0)!==32){const ne=A.lines.get(u[1]-1);if(ne&&M.isWrapped&&ne.getCodePoint(this._bufferService.cols-1)!==32){const se=this._getWordAt([this._bufferService.cols-1,u[1]-1],!1,!0,!1);if(se){const ue=this._bufferService.cols-se.start;V-=ue,ee+=ue}}}if(O&&V+ee===this._bufferService.cols&&M.getCodePoint(this._bufferService.cols-1)!==32){const ne=A.lines.get(u[1]+1);if(ne!=null&&ne.isWrapped&&ne.getCodePoint(0)!==32){const se=this._getWordAt([0,u[1]+1],!1,!1,!0);se&&(ee+=se.length)}}return{start:V,length:ee}}}_selectWordAt(u,y){const R=this._getWordAt(u,y);if(R){for(;R.start<0;)R.start+=this._bufferService.cols,u[1]--;this._model.selectionStart=[R.start,u[1]],this._model.selectionStartLength=R.length}}_selectToWordAt(u){const y=this._getWordAt(u,!0);if(y){let R=u[1];for(;y.start<0;)y.start+=this._bufferService.cols,R--;if(!this._model.areSelectionValuesReversed())for(;y.start+y.length>this._bufferService.cols;)y.length-=this._bufferService.cols,R++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?y.start:y.start+y.length,R]}}_isCharWordSeparator(u){return u.getWidth()!==0&&this._optionsService.rawOptions.wordSeparator.indexOf(u.getChars())>=0}_selectLineAt(u){const y=this._bufferService.buffer.getWrappedRangeForLine(u),R={start:{x:0,y:y.first},end:{x:this._bufferService.cols-1,y:y.last}};this._model.selectionStart=[0,y.first],this._model.selectionEnd=void 0,this._model.selectionStartLength=(0,r.getRangeLength)(R,this._bufferService.cols)}};i.SelectionService=E=h([_(3,c.IBufferService),_(4,c.ICoreService),_(5,b.IMouseService),_(6,c.IOptionsService),_(7,b.IRenderService),_(8,b.ICoreBrowserService)],E)},4725:(L,i,a)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.IThemeService=i.ICharacterJoinerService=i.ISelectionService=i.IRenderService=i.IMouseService=i.ICoreBrowserService=i.ICharSizeService=void 0;const h=a(8343);i.ICharSizeService=(0,h.createDecorator)("CharSizeService"),i.ICoreBrowserService=(0,h.createDecorator)("CoreBrowserService"),i.IMouseService=(0,h.createDecorator)("MouseService"),i.IRenderService=(0,h.createDecorator)("RenderService"),i.ISelectionService=(0,h.createDecorator)("SelectionService"),i.ICharacterJoinerService=(0,h.createDecorator)("CharacterJoinerService"),i.IThemeService=(0,h.createDecorator)("ThemeService")},6731:function(L,i,a){var h=this&&this.__decorate||function(E,u,y,R){var O,A=arguments.length,M=A<3?u:R===null?R=Object.getOwnPropertyDescriptor(u,y):R;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")M=Reflect.decorate(E,u,y,R);else for(var N=E.length-1;N>=0;N--)(O=E[N])&&(M=(A<3?O(M):A>3?O(u,y,M):O(u,y))||M);return A>3&&M&&Object.defineProperty(u,y,M),M},_=this&&this.__param||function(E,u){return function(y,R){u(y,R,E)}};Object.defineProperty(i,"__esModule",{value:!0}),i.ThemeService=i.DEFAULT_ANSI_COLORS=void 0;const l=a(7239),p=a(8055),m=a(8460),b=a(844),g=a(2585),t=p.css.toColor("#ffffff"),o=p.css.toColor("#000000"),r=p.css.toColor("#ffffff"),n=p.css.toColor("#000000"),c={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117};i.DEFAULT_ANSI_COLORS=Object.freeze((()=>{const E=[p.css.toColor("#2e3436"),p.css.toColor("#cc0000"),p.css.toColor("#4e9a06"),p.css.toColor("#c4a000"),p.css.toColor("#3465a4"),p.css.toColor("#75507b"),p.css.toColor("#06989a"),p.css.toColor("#d3d7cf"),p.css.toColor("#555753"),p.css.toColor("#ef2929"),p.css.toColor("#8ae234"),p.css.toColor("#fce94f"),p.css.toColor("#729fcf"),p.css.toColor("#ad7fa8"),p.css.toColor("#34e2e2"),p.css.toColor("#eeeeec")],u=[0,95,135,175,215,255];for(let y=0;y<216;y++){const R=u[y/36%6|0],O=u[y/6%6|0],A=u[y%6];E.push({css:p.channels.toCss(R,O,A),rgba:p.channels.toRgba(R,O,A)})}for(let y=0;y<24;y++){const R=8+10*y;E.push({css:p.channels.toCss(R,R,R),rgba:p.channels.toRgba(R,R,R)})}return E})());let f=i.ThemeService=class extends b.Disposable{get colors(){return this._colors}constructor(E){super(),this._optionsService=E,this._contrastCache=new l.ColorContrastCache,this._halfContrastCache=new l.ColorContrastCache,this._onChangeColors=this.register(new m.EventEmitter),this.onChangeColors=this._onChangeColors.event,this._colors={foreground:t,background:o,cursor:r,cursorAccent:n,selectionForeground:void 0,selectionBackgroundTransparent:c,selectionBackgroundOpaque:p.color.blend(o,c),selectionInactiveBackgroundTransparent:c,selectionInactiveBackgroundOpaque:p.color.blend(o,c),ansi:i.DEFAULT_ANSI_COLORS.slice(),contrastCache:this._contrastCache,halfContrastCache:this._halfContrastCache},this._updateRestoreColors(),this._setTheme(this._optionsService.rawOptions.theme),this.register(this._optionsService.onSpecificOptionChange("minimumContrastRatio",()=>this._contrastCache.clear())),this.register(this._optionsService.onSpecificOptionChange("theme",()=>this._setTheme(this._optionsService.rawOptions.theme)))}_setTheme(E={}){const u=this._colors;if(u.foreground=S(E.foreground,t),u.background=S(E.background,o),u.cursor=S(E.cursor,r),u.cursorAccent=S(E.cursorAccent,n),u.selectionBackgroundTransparent=S(E.selectionBackground,c),u.selectionBackgroundOpaque=p.color.blend(u.background,u.selectionBackgroundTransparent),u.selectionInactiveBackgroundTransparent=S(E.selectionInactiveBackground,u.selectionBackgroundTransparent),u.selectionInactiveBackgroundOpaque=p.color.blend(u.background,u.selectionInactiveBackgroundTransparent),u.selectionForeground=E.selectionForeground?S(E.selectionForeground,p.NULL_COLOR):void 0,u.selectionForeground===p.NULL_COLOR&&(u.selectionForeground=void 0),p.color.isOpaque(u.selectionBackgroundTransparent)&&(u.selectionBackgroundTransparent=p.color.opacity(u.selectionBackgroundTransparent,.3)),p.color.isOpaque(u.selectionInactiveBackgroundTransparent)&&(u.selectionInactiveBackgroundTransparent=p.color.opacity(u.selectionInactiveBackgroundTransparent,.3)),u.ansi=i.DEFAULT_ANSI_COLORS.slice(),u.ansi[0]=S(E.black,i.DEFAULT_ANSI_COLORS[0]),u.ansi[1]=S(E.red,i.DEFAULT_ANSI_COLORS[1]),u.ansi[2]=S(E.green,i.DEFAULT_ANSI_COLORS[2]),u.ansi[3]=S(E.yellow,i.DEFAULT_ANSI_COLORS[3]),u.ansi[4]=S(E.blue,i.DEFAULT_ANSI_COLORS[4]),u.ansi[5]=S(E.magenta,i.DEFAULT_ANSI_COLORS[5]),u.ansi[6]=S(E.cyan,i.DEFAULT_ANSI_COLORS[6]),u.ansi[7]=S(E.white,i.DEFAULT_ANSI_COLORS[7]),u.ansi[8]=S(E.brightBlack,i.DEFAULT_ANSI_COLORS[8]),u.ansi[9]=S(E.brightRed,i.DEFAULT_ANSI_COLORS[9]),u.ansi[10]=S(E.brightGreen,i.DEFAULT_ANSI_COLORS[10]),u.ansi[11]=S(E.brightYellow,i.DEFAULT_ANSI_COLORS[11]),u.ansi[12]=S(E.brightBlue,i.DEFAULT_ANSI_COLORS[12]),u.ansi[13]=S(E.brightMagenta,i.DEFAULT_ANSI_COLORS[13]),u.ansi[14]=S(E.brightCyan,i.DEFAULT_ANSI_COLORS[14]),u.ansi[15]=S(E.brightWhite,i.DEFAULT_ANSI_COLORS[15]),E.extendedAnsi){const y=Math.min(u.ansi.length-16,E.extendedAnsi.length);for(let R=0;R<y;R++)u.ansi[R+16]=S(E.extendedAnsi[R],i.DEFAULT_ANSI_COLORS[R+16])}this._contrastCache.clear(),this._halfContrastCache.clear(),this._updateRestoreColors(),this._onChangeColors.fire(this.colors)}restoreColor(E){this._restoreColor(E),this._onChangeColors.fire(this.colors)}_restoreColor(E){if(E!==void 0)switch(E){case 256:this._colors.foreground=this._restoreColors.foreground;break;case 257:this._colors.background=this._restoreColors.background;break;case 258:this._colors.cursor=this._restoreColors.cursor;break;default:this._colors.ansi[E]=this._restoreColors.ansi[E]}else for(let u=0;u<this._restoreColors.ansi.length;++u)this._colors.ansi[u]=this._restoreColors.ansi[u]}modifyColors(E){E(this._colors),this._onChangeColors.fire(this.colors)}_updateRestoreColors(){this._restoreColors={foreground:this._colors.foreground,background:this._colors.background,cursor:this._colors.cursor,ansi:this._colors.ansi.slice()}}};function S(E,u){if(E!==void 0)try{return p.css.toColor(E)}catch{}return u}i.ThemeService=f=h([_(0,g.IOptionsService)],f)},6349:(L,i,a)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CircularList=void 0;const h=a(8460),_=a(844);class l extends _.Disposable{constructor(m){super(),this._maxLength=m,this.onDeleteEmitter=this.register(new h.EventEmitter),this.onDelete=this.onDeleteEmitter.event,this.onInsertEmitter=this.register(new h.EventEmitter),this.onInsert=this.onInsertEmitter.event,this.onTrimEmitter=this.register(new h.EventEmitter),this.onTrim=this.onTrimEmitter.event,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}get maxLength(){return this._maxLength}set maxLength(m){if(this._maxLength===m)return;const b=new Array(m);for(let g=0;g<Math.min(m,this.length);g++)b[g]=this._array[this._getCyclicIndex(g)];this._array=b,this._maxLength=m,this._startIndex=0}get length(){return this._length}set length(m){if(m>this._length)for(let b=this._length;b<m;b++)this._array[b]=void 0;this._length=m}get(m){return this._array[this._getCyclicIndex(m)]}set(m,b){this._array[this._getCyclicIndex(m)]=b}push(m){this._array[this._getCyclicIndex(this._length)]=m,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++}recycle(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]}get isFull(){return this._length===this._maxLength}pop(){return this._array[this._getCyclicIndex(this._length---1)]}splice(m,b,...g){if(b){for(let t=m;t<this._length-b;t++)this._array[this._getCyclicIndex(t)]=this._array[this._getCyclicIndex(t+b)];this._length-=b,this.onDeleteEmitter.fire({index:m,amount:b})}for(let t=this._length-1;t>=m;t--)this._array[this._getCyclicIndex(t+g.length)]=this._array[this._getCyclicIndex(t)];for(let t=0;t<g.length;t++)this._array[this._getCyclicIndex(m+t)]=g[t];if(g.length&&this.onInsertEmitter.fire({index:m,amount:g.length}),this._length+g.length>this._maxLength){const t=this._length+g.length-this._maxLength;this._startIndex+=t,this._length=this._maxLength,this.onTrimEmitter.fire(t)}else this._length+=g.length}trimStart(m){m>this._length&&(m=this._length),this._startIndex+=m,this._length-=m,this.onTrimEmitter.fire(m)}shiftElements(m,b,g){if(!(b<=0)){if(m<0||m>=this._length)throw new Error("start argument out of range");if(m+g<0)throw new Error("Cannot shift elements in list beyond index 0");if(g>0){for(let o=b-1;o>=0;o--)this.set(m+o+g,this.get(m+o));const t=m+b+g-this._length;if(t>0)for(this._length+=t;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(let t=0;t<b;t++)this.set(m+t+g,this.get(m+t))}}_getCyclicIndex(m){return(this._startIndex+m)%this._maxLength}}i.CircularList=l},1439:(L,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.clone=void 0,i.clone=function a(h,_=5){if(typeof h!="object")return h;const l=Array.isArray(h)?[]:{};for(const p in h)l[p]=_<=1?h[p]:h[p]&&a(h[p],_-1);return l}},8055:(L,i,a)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.contrastRatio=i.toPaddedHex=i.rgba=i.rgb=i.css=i.color=i.channels=i.NULL_COLOR=void 0;const h=a(6114);let _=0,l=0,p=0,m=0;var b,g,t,o,r;function n(f){const S=f.toString(16);return S.length<2?"0"+S:S}function c(f,S){return f<S?(S+.05)/(f+.05):(f+.05)/(S+.05)}i.NULL_COLOR={css:"#00000000",rgba:0},function(f){f.toCss=function(S,E,u,y){return y!==void 0?`#${n(S)}${n(E)}${n(u)}${n(y)}`:`#${n(S)}${n(E)}${n(u)}`},f.toRgba=function(S,E,u,y=255){return(S<<24|E<<16|u<<8|y)>>>0}}(b||(i.channels=b={})),function(f){function S(E,u){return m=Math.round(255*u),[_,l,p]=r.toChannels(E.rgba),{css:b.toCss(_,l,p,m),rgba:b.toRgba(_,l,p,m)}}f.blend=function(E,u){if(m=(255&u.rgba)/255,m===1)return{css:u.css,rgba:u.rgba};const y=u.rgba>>24&255,R=u.rgba>>16&255,O=u.rgba>>8&255,A=E.rgba>>24&255,M=E.rgba>>16&255,N=E.rgba>>8&255;return _=A+Math.round((y-A)*m),l=M+Math.round((R-M)*m),p=N+Math.round((O-N)*m),{css:b.toCss(_,l,p),rgba:b.toRgba(_,l,p)}},f.isOpaque=function(E){return(255&E.rgba)==255},f.ensureContrastRatio=function(E,u,y){const R=r.ensureContrastRatio(E.rgba,u.rgba,y);if(R)return r.toColor(R>>24&255,R>>16&255,R>>8&255)},f.opaque=function(E){const u=(255|E.rgba)>>>0;return[_,l,p]=r.toChannels(u),{css:b.toCss(_,l,p),rgba:u}},f.opacity=S,f.multiplyOpacity=function(E,u){return m=255&E.rgba,S(E,m*u/255)},f.toColorRGB=function(E){return[E.rgba>>24&255,E.rgba>>16&255,E.rgba>>8&255]}}(g||(i.color=g={})),function(f){let S,E;if(!h.isNode){const u=document.createElement("canvas");u.width=1,u.height=1;const y=u.getContext("2d",{willReadFrequently:!0});y&&(S=y,S.globalCompositeOperation="copy",E=S.createLinearGradient(0,0,1,1))}f.toColor=function(u){if(u.match(/#[\da-f]{3,8}/i))switch(u.length){case 4:return _=parseInt(u.slice(1,2).repeat(2),16),l=parseInt(u.slice(2,3).repeat(2),16),p=parseInt(u.slice(3,4).repeat(2),16),r.toColor(_,l,p);case 5:return _=parseInt(u.slice(1,2).repeat(2),16),l=parseInt(u.slice(2,3).repeat(2),16),p=parseInt(u.slice(3,4).repeat(2),16),m=parseInt(u.slice(4,5).repeat(2),16),r.toColor(_,l,p,m);case 7:return{css:u,rgba:(parseInt(u.slice(1),16)<<8|255)>>>0};case 9:return{css:u,rgba:parseInt(u.slice(1),16)>>>0}}const y=u.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(y)return _=parseInt(y[1]),l=parseInt(y[2]),p=parseInt(y[3]),m=Math.round(255*(y[5]===void 0?1:parseFloat(y[5]))),r.toColor(_,l,p,m);if(!S||!E)throw new Error("css.toColor: Unsupported css format");if(S.fillStyle=E,S.fillStyle=u,typeof S.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(S.fillRect(0,0,1,1),[_,l,p,m]=S.getImageData(0,0,1,1).data,m!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:b.toRgba(_,l,p,m),css:u}}}(t||(i.css=t={})),function(f){function S(E,u,y){const R=E/255,O=u/255,A=y/255;return .2126*(R<=.03928?R/12.92:Math.pow((R+.055)/1.055,2.4))+.7152*(O<=.03928?O/12.92:Math.pow((O+.055)/1.055,2.4))+.0722*(A<=.03928?A/12.92:Math.pow((A+.055)/1.055,2.4))}f.relativeLuminance=function(E){return S(E>>16&255,E>>8&255,255&E)},f.relativeLuminance2=S}(o||(i.rgb=o={})),function(f){function S(u,y,R){const O=u>>24&255,A=u>>16&255,M=u>>8&255;let N=y>>24&255,K=y>>16&255,z=y>>8&255,U=c(o.relativeLuminance2(N,K,z),o.relativeLuminance2(O,A,M));for(;U<R&&(N>0||K>0||z>0);)N-=Math.max(0,Math.ceil(.1*N)),K-=Math.max(0,Math.ceil(.1*K)),z-=Math.max(0,Math.ceil(.1*z)),U=c(o.relativeLuminance2(N,K,z),o.relativeLuminance2(O,A,M));return(N<<24|K<<16|z<<8|255)>>>0}function E(u,y,R){const O=u>>24&255,A=u>>16&255,M=u>>8&255;let N=y>>24&255,K=y>>16&255,z=y>>8&255,U=c(o.relativeLuminance2(N,K,z),o.relativeLuminance2(O,A,M));for(;U<R&&(N<255||K<255||z<255);)N=Math.min(255,N+Math.ceil(.1*(255-N))),K=Math.min(255,K+Math.ceil(.1*(255-K))),z=Math.min(255,z+Math.ceil(.1*(255-z))),U=c(o.relativeLuminance2(N,K,z),o.relativeLuminance2(O,A,M));return(N<<24|K<<16|z<<8|255)>>>0}f.ensureContrastRatio=function(u,y,R){const O=o.relativeLuminance(u>>8),A=o.relativeLuminance(y>>8);if(c(O,A)<R){if(A<O){const K=S(u,y,R),z=c(O,o.relativeLuminance(K>>8));if(z<R){const U=E(u,y,R);return z>c(O,o.relativeLuminance(U>>8))?K:U}return K}const M=E(u,y,R),N=c(O,o.relativeLuminance(M>>8));if(N<R){const K=S(u,y,R);return N>c(O,o.relativeLuminance(K>>8))?M:K}return M}},f.reduceLuminance=S,f.increaseLuminance=E,f.toChannels=function(u){return[u>>24&255,u>>16&255,u>>8&255,255&u]},f.toColor=function(u,y,R,O){return{css:b.toCss(u,y,R,O),rgba:b.toRgba(u,y,R,O)}}}(r||(i.rgba=r={})),i.toPaddedHex=n,i.contrastRatio=c},8969:(L,i,a)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CoreTerminal=void 0;const h=a(844),_=a(2585),l=a(4348),p=a(7866),m=a(744),b=a(7302),g=a(6975),t=a(8460),o=a(1753),r=a(1480),n=a(7994),c=a(9282),f=a(5435),S=a(5981),E=a(2660);let u=!1;class y extends h.Disposable{get onScroll(){return this._onScrollApi||(this._onScrollApi=this.register(new t.EventEmitter),this._onScroll.event(O=>{var A;(A=this._onScrollApi)===null||A===void 0||A.fire(O.position)})),this._onScrollApi.event}get cols(){return this._bufferService.cols}get rows(){return this._bufferService.rows}get buffers(){return this._bufferService.buffers}get options(){return this.optionsService.options}set options(O){for(const A in O)this.optionsService.options[A]=O[A]}constructor(O){super(),this._windowsWrappingHeuristics=this.register(new h.MutableDisposable),this._onBinary=this.register(new t.EventEmitter),this.onBinary=this._onBinary.event,this._onData=this.register(new t.EventEmitter),this.onData=this._onData.event,this._onLineFeed=this.register(new t.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onResize=this.register(new t.EventEmitter),this.onResize=this._onResize.event,this._onWriteParsed=this.register(new t.EventEmitter),this.onWriteParsed=this._onWriteParsed.event,this._onScroll=this.register(new t.EventEmitter),this._instantiationService=new l.InstantiationService,this.optionsService=this.register(new b.OptionsService(O)),this._instantiationService.setService(_.IOptionsService,this.optionsService),this._bufferService=this.register(this._instantiationService.createInstance(m.BufferService)),this._instantiationService.setService(_.IBufferService,this._bufferService),this._logService=this.register(this._instantiationService.createInstance(p.LogService)),this._instantiationService.setService(_.ILogService,this._logService),this.coreService=this.register(this._instantiationService.createInstance(g.CoreService)),this._instantiationService.setService(_.ICoreService,this.coreService),this.coreMouseService=this.register(this._instantiationService.createInstance(o.CoreMouseService)),this._instantiationService.setService(_.ICoreMouseService,this.coreMouseService),this.unicodeService=this.register(this._instantiationService.createInstance(r.UnicodeService)),this._instantiationService.setService(_.IUnicodeService,this.unicodeService),this._charsetService=this._instantiationService.createInstance(n.CharsetService),this._instantiationService.setService(_.ICharsetService,this._charsetService),this._oscLinkService=this._instantiationService.createInstance(E.OscLinkService),this._instantiationService.setService(_.IOscLinkService,this._oscLinkService),this._inputHandler=this.register(new f.InputHandler(this._bufferService,this._charsetService,this.coreService,this._logService,this.optionsService,this._oscLinkService,this.coreMouseService,this.unicodeService)),this.register((0,t.forwardEvent)(this._inputHandler.onLineFeed,this._onLineFeed)),this.register(this._inputHandler),this.register((0,t.forwardEvent)(this._bufferService.onResize,this._onResize)),this.register((0,t.forwardEvent)(this.coreService.onData,this._onData)),this.register((0,t.forwardEvent)(this.coreService.onBinary,this._onBinary)),this.register(this.coreService.onRequestScrollToBottom(()=>this.scrollToBottom())),this.register(this.coreService.onUserInput(()=>this._writeBuffer.handleUserInput())),this.register(this.optionsService.onMultipleOptionChange(["windowsMode","windowsPty"],()=>this._handleWindowsPtyOptionChange())),this.register(this._bufferService.onScroll(A=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this.register(this._inputHandler.onScroll(A=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this._writeBuffer=this.register(new S.WriteBuffer((A,M)=>this._inputHandler.parse(A,M))),this.register((0,t.forwardEvent)(this._writeBuffer.onWriteParsed,this._onWriteParsed))}write(O,A){this._writeBuffer.write(O,A)}writeSync(O,A){this._logService.logLevel<=_.LogLevelEnum.WARN&&!u&&(this._logService.warn("writeSync is unreliable and will be removed soon."),u=!0),this._writeBuffer.writeSync(O,A)}resize(O,A){isNaN(O)||isNaN(A)||(O=Math.max(O,m.MINIMUM_COLS),A=Math.max(A,m.MINIMUM_ROWS),this._bufferService.resize(O,A))}scroll(O,A=!1){this._bufferService.scroll(O,A)}scrollLines(O,A,M){this._bufferService.scrollLines(O,A,M)}scrollPages(O){this.scrollLines(O*(this.rows-1))}scrollToTop(){this.scrollLines(-this._bufferService.buffer.ydisp)}scrollToBottom(){this.scrollLines(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp)}scrollToLine(O){const A=O-this._bufferService.buffer.ydisp;A!==0&&this.scrollLines(A)}registerEscHandler(O,A){return this._inputHandler.registerEscHandler(O,A)}registerDcsHandler(O,A){return this._inputHandler.registerDcsHandler(O,A)}registerCsiHandler(O,A){return this._inputHandler.registerCsiHandler(O,A)}registerOscHandler(O,A){return this._inputHandler.registerOscHandler(O,A)}_setup(){this._handleWindowsPtyOptionChange()}reset(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this.coreService.reset(),this.coreMouseService.reset()}_handleWindowsPtyOptionChange(){let O=!1;const A=this.optionsService.rawOptions.windowsPty;A&&A.buildNumber!==void 0&&A.buildNumber!==void 0?O=A.backend==="conpty"&&A.buildNumber<21376:this.optionsService.rawOptions.windowsMode&&(O=!0),O?this._enableWindowsWrappingHeuristics():this._windowsWrappingHeuristics.clear()}_enableWindowsWrappingHeuristics(){if(!this._windowsWrappingHeuristics.value){const O=[];O.push(this.onLineFeed(c.updateWindowsModeWrappedState.bind(null,this._bufferService))),O.push(this.registerCsiHandler({final:"H"},()=>((0,c.updateWindowsModeWrappedState)(this._bufferService),!1))),this._windowsWrappingHeuristics.value=(0,h.toDisposable)(()=>{for(const A of O)A.dispose()})}}}i.CoreTerminal=y},8460:(L,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.forwardEvent=i.EventEmitter=void 0,i.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=a=>(this._listeners.push(a),{dispose:()=>{if(!this._disposed){for(let h=0;h<this._listeners.length;h++)if(this._listeners[h]===a)return void this._listeners.splice(h,1)}}})),this._event}fire(a,h){const _=[];for(let l=0;l<this._listeners.length;l++)_.push(this._listeners[l]);for(let l=0;l<_.length;l++)_[l].call(void 0,a,h)}dispose(){this.clearListeners(),this._disposed=!0}clearListeners(){this._listeners&&(this._listeners.length=0)}},i.forwardEvent=function(a,h){return a(_=>h.fire(_))}},5435:function(L,i,a){var h=this&&this.__decorate||function(U,w,T,B){var I,V=arguments.length,ee=V<3?w:B===null?B=Object.getOwnPropertyDescriptor(w,T):B;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")ee=Reflect.decorate(U,w,T,B);else for(var ne=U.length-1;ne>=0;ne--)(I=U[ne])&&(ee=(V<3?I(ee):V>3?I(w,T,ee):I(w,T))||ee);return V>3&&ee&&Object.defineProperty(w,T,ee),ee},_=this&&this.__param||function(U,w){return function(T,B){w(T,B,U)}};Object.defineProperty(i,"__esModule",{value:!0}),i.InputHandler=i.WindowsOptionsReportType=void 0;const l=a(2584),p=a(7116),m=a(2015),b=a(844),g=a(482),t=a(8437),o=a(8460),r=a(643),n=a(511),c=a(3734),f=a(2585),S=a(6242),E=a(6351),u=a(5941),y={"(":0,")":1,"*":2,"+":3,"-":1,".":2},R=131072;function O(U,w){if(U>24)return w.setWinLines||!1;switch(U){case 1:return!!w.restoreWin;case 2:return!!w.minimizeWin;case 3:return!!w.setWinPosition;case 4:return!!w.setWinSizePixels;case 5:return!!w.raiseWin;case 6:return!!w.lowerWin;case 7:return!!w.refreshWin;case 8:return!!w.setWinSizeChars;case 9:return!!w.maximizeWin;case 10:return!!w.fullscreenWin;case 11:return!!w.getWinState;case 13:return!!w.getWinPosition;case 14:return!!w.getWinSizePixels;case 15:return!!w.getScreenSizePixels;case 16:return!!w.getCellSizePixels;case 18:return!!w.getWinSizeChars;case 19:return!!w.getScreenSizeChars;case 20:return!!w.getIconTitle;case 21:return!!w.getWinTitle;case 22:return!!w.pushTitle;case 23:return!!w.popTitle;case 24:return!!w.setWinLines}return!1}var A;(function(U){U[U.GET_WIN_SIZE_PIXELS=0]="GET_WIN_SIZE_PIXELS",U[U.GET_CELL_SIZE_PIXELS=1]="GET_CELL_SIZE_PIXELS"})(A||(i.WindowsOptionsReportType=A={}));let M=0;class N extends b.Disposable{getAttrData(){return this._curAttrData}constructor(w,T,B,I,V,ee,ne,se,ue=new m.EscapeSequenceParser){super(),this._bufferService=w,this._charsetService=T,this._coreService=B,this._logService=I,this._optionsService=V,this._oscLinkService=ee,this._coreMouseService=ne,this._unicodeService=se,this._parser=ue,this._parseBuffer=new Uint32Array(4096),this._stringDecoder=new g.StringToUtf32,this._utf8Decoder=new g.Utf8ToUtf32,this._workCell=new n.CellData,this._windowTitle="",this._iconName="",this._windowTitleStack=[],this._iconNameStack=[],this._curAttrData=t.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=t.DEFAULT_ATTR_DATA.clone(),this._onRequestBell=this.register(new o.EventEmitter),this.onRequestBell=this._onRequestBell.event,this._onRequestRefreshRows=this.register(new o.EventEmitter),this.onRequestRefreshRows=this._onRequestRefreshRows.event,this._onRequestReset=this.register(new o.EventEmitter),this.onRequestReset=this._onRequestReset.event,this._onRequestSendFocus=this.register(new o.EventEmitter),this.onRequestSendFocus=this._onRequestSendFocus.event,this._onRequestSyncScrollBar=this.register(new o.EventEmitter),this.onRequestSyncScrollBar=this._onRequestSyncScrollBar.event,this._onRequestWindowsOptionsReport=this.register(new o.EventEmitter),this.onRequestWindowsOptionsReport=this._onRequestWindowsOptionsReport.event,this._onA11yChar=this.register(new o.EventEmitter),this.onA11yChar=this._onA11yChar.event,this._onA11yTab=this.register(new o.EventEmitter),this.onA11yTab=this._onA11yTab.event,this._onCursorMove=this.register(new o.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onLineFeed=this.register(new o.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onScroll=this.register(new o.EventEmitter),this.onScroll=this._onScroll.event,this._onTitleChange=this.register(new o.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onColor=this.register(new o.EventEmitter),this.onColor=this._onColor.event,this._parseStack={paused:!1,cursorStartX:0,cursorStartY:0,decodedLength:0,position:0},this._specialColors=[256,257,258],this.register(this._parser),this._dirtyRowTracker=new K(this._bufferService),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(k=>this._activeBuffer=k.activeBuffer)),this._parser.setCsiHandlerFallback((k,H)=>{this._logService.debug("Unknown CSI code: ",{identifier:this._parser.identToString(k),params:H.toArray()})}),this._parser.setEscHandlerFallback(k=>{this._logService.debug("Unknown ESC code: ",{identifier:this._parser.identToString(k)})}),this._parser.setExecuteHandlerFallback(k=>{this._logService.debug("Unknown EXECUTE code: ",{code:k})}),this._parser.setOscHandlerFallback((k,H,j)=>{this._logService.debug("Unknown OSC code: ",{identifier:k,action:H,data:j})}),this._parser.setDcsHandlerFallback((k,H,j)=>{H==="HOOK"&&(j=j.toArray()),this._logService.debug("Unknown DCS code: ",{identifier:this._parser.identToString(k),action:H,payload:j})}),this._parser.setPrintHandler((k,H,j)=>this.print(k,H,j)),this._parser.registerCsiHandler({final:"@"},k=>this.insertChars(k)),this._parser.registerCsiHandler({intermediates:" ",final:"@"},k=>this.scrollLeft(k)),this._parser.registerCsiHandler({final:"A"},k=>this.cursorUp(k)),this._parser.registerCsiHandler({intermediates:" ",final:"A"},k=>this.scrollRight(k)),this._parser.registerCsiHandler({final:"B"},k=>this.cursorDown(k)),this._parser.registerCsiHandler({final:"C"},k=>this.cursorForward(k)),this._parser.registerCsiHandler({final:"D"},k=>this.cursorBackward(k)),this._parser.registerCsiHandler({final:"E"},k=>this.cursorNextLine(k)),this._parser.registerCsiHandler({final:"F"},k=>this.cursorPrecedingLine(k)),this._parser.registerCsiHandler({final:"G"},k=>this.cursorCharAbsolute(k)),this._parser.registerCsiHandler({final:"H"},k=>this.cursorPosition(k)),this._parser.registerCsiHandler({final:"I"},k=>this.cursorForwardTab(k)),this._parser.registerCsiHandler({final:"J"},k=>this.eraseInDisplay(k,!1)),this._parser.registerCsiHandler({prefix:"?",final:"J"},k=>this.eraseInDisplay(k,!0)),this._parser.registerCsiHandler({final:"K"},k=>this.eraseInLine(k,!1)),this._parser.registerCsiHandler({prefix:"?",final:"K"},k=>this.eraseInLine(k,!0)),this._parser.registerCsiHandler({final:"L"},k=>this.insertLines(k)),this._parser.registerCsiHandler({final:"M"},k=>this.deleteLines(k)),this._parser.registerCsiHandler({final:"P"},k=>this.deleteChars(k)),this._parser.registerCsiHandler({final:"S"},k=>this.scrollUp(k)),this._parser.registerCsiHandler({final:"T"},k=>this.scrollDown(k)),this._parser.registerCsiHandler({final:"X"},k=>this.eraseChars(k)),this._parser.registerCsiHandler({final:"Z"},k=>this.cursorBackwardTab(k)),this._parser.registerCsiHandler({final:"`"},k=>this.charPosAbsolute(k)),this._parser.registerCsiHandler({final:"a"},k=>this.hPositionRelative(k)),this._parser.registerCsiHandler({final:"b"},k=>this.repeatPrecedingCharacter(k)),this._parser.registerCsiHandler({final:"c"},k=>this.sendDeviceAttributesPrimary(k)),this._parser.registerCsiHandler({prefix:">",final:"c"},k=>this.sendDeviceAttributesSecondary(k)),this._parser.registerCsiHandler({final:"d"},k=>this.linePosAbsolute(k)),this._parser.registerCsiHandler({final:"e"},k=>this.vPositionRelative(k)),this._parser.registerCsiHandler({final:"f"},k=>this.hVPosition(k)),this._parser.registerCsiHandler({final:"g"},k=>this.tabClear(k)),this._parser.registerCsiHandler({final:"h"},k=>this.setMode(k)),this._parser.registerCsiHandler({prefix:"?",final:"h"},k=>this.setModePrivate(k)),this._parser.registerCsiHandler({final:"l"},k=>this.resetMode(k)),this._parser.registerCsiHandler({prefix:"?",final:"l"},k=>this.resetModePrivate(k)),this._parser.registerCsiHandler({final:"m"},k=>this.charAttributes(k)),this._parser.registerCsiHandler({final:"n"},k=>this.deviceStatus(k)),this._parser.registerCsiHandler({prefix:"?",final:"n"},k=>this.deviceStatusPrivate(k)),this._parser.registerCsiHandler({intermediates:"!",final:"p"},k=>this.softReset(k)),this._parser.registerCsiHandler({intermediates:" ",final:"q"},k=>this.setCursorStyle(k)),this._parser.registerCsiHandler({final:"r"},k=>this.setScrollRegion(k)),this._parser.registerCsiHandler({final:"s"},k=>this.saveCursor(k)),this._parser.registerCsiHandler({final:"t"},k=>this.windowOptions(k)),this._parser.registerCsiHandler({final:"u"},k=>this.restoreCursor(k)),this._parser.registerCsiHandler({intermediates:"'",final:"}"},k=>this.insertColumns(k)),this._parser.registerCsiHandler({intermediates:"'",final:"~"},k=>this.deleteColumns(k)),this._parser.registerCsiHandler({intermediates:'"',final:"q"},k=>this.selectProtected(k)),this._parser.registerCsiHandler({intermediates:"$",final:"p"},k=>this.requestMode(k,!0)),this._parser.registerCsiHandler({prefix:"?",intermediates:"$",final:"p"},k=>this.requestMode(k,!1)),this._parser.setExecuteHandler(l.C0.BEL,()=>this.bell()),this._parser.setExecuteHandler(l.C0.LF,()=>this.lineFeed()),this._parser.setExecuteHandler(l.C0.VT,()=>this.lineFeed()),this._parser.setExecuteHandler(l.C0.FF,()=>this.lineFeed()),this._parser.setExecuteHandler(l.C0.CR,()=>this.carriageReturn()),this._parser.setExecuteHandler(l.C0.BS,()=>this.backspace()),this._parser.setExecuteHandler(l.C0.HT,()=>this.tab()),this._parser.setExecuteHandler(l.C0.SO,()=>this.shiftOut()),this._parser.setExecuteHandler(l.C0.SI,()=>this.shiftIn()),this._parser.setExecuteHandler(l.C1.IND,()=>this.index()),this._parser.setExecuteHandler(l.C1.NEL,()=>this.nextLine()),this._parser.setExecuteHandler(l.C1.HTS,()=>this.tabSet()),this._parser.registerOscHandler(0,new S.OscHandler(k=>(this.setTitle(k),this.setIconName(k),!0))),this._parser.registerOscHandler(1,new S.OscHandler(k=>this.setIconName(k))),this._parser.registerOscHandler(2,new S.OscHandler(k=>this.setTitle(k))),this._parser.registerOscHandler(4,new S.OscHandler(k=>this.setOrReportIndexedColor(k))),this._parser.registerOscHandler(8,new S.OscHandler(k=>this.setHyperlink(k))),this._parser.registerOscHandler(10,new S.OscHandler(k=>this.setOrReportFgColor(k))),this._parser.registerOscHandler(11,new S.OscHandler(k=>this.setOrReportBgColor(k))),this._parser.registerOscHandler(12,new S.OscHandler(k=>this.setOrReportCursorColor(k))),this._parser.registerOscHandler(104,new S.OscHandler(k=>this.restoreIndexedColor(k))),this._parser.registerOscHandler(110,new S.OscHandler(k=>this.restoreFgColor(k))),this._parser.registerOscHandler(111,new S.OscHandler(k=>this.restoreBgColor(k))),this._parser.registerOscHandler(112,new S.OscHandler(k=>this.restoreCursorColor(k))),this._parser.registerEscHandler({final:"7"},()=>this.saveCursor()),this._parser.registerEscHandler({final:"8"},()=>this.restoreCursor()),this._parser.registerEscHandler({final:"D"},()=>this.index()),this._parser.registerEscHandler({final:"E"},()=>this.nextLine()),this._parser.registerEscHandler({final:"H"},()=>this.tabSet()),this._parser.registerEscHandler({final:"M"},()=>this.reverseIndex()),this._parser.registerEscHandler({final:"="},()=>this.keypadApplicationMode()),this._parser.registerEscHandler({final:">"},()=>this.keypadNumericMode()),this._parser.registerEscHandler({final:"c"},()=>this.fullReset()),this._parser.registerEscHandler({final:"n"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"o"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"|"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"}"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"~"},()=>this.setgLevel(1)),this._parser.registerEscHandler({intermediates:"%",final:"@"},()=>this.selectDefaultCharset()),this._parser.registerEscHandler({intermediates:"%",final:"G"},()=>this.selectDefaultCharset());for(const k in p.CHARSETS)this._parser.registerEscHandler({intermediates:"(",final:k},()=>this.selectCharset("("+k)),this._parser.registerEscHandler({intermediates:")",final:k},()=>this.selectCharset(")"+k)),this._parser.registerEscHandler({intermediates:"*",final:k},()=>this.selectCharset("*"+k)),this._parser.registerEscHandler({intermediates:"+",final:k},()=>this.selectCharset("+"+k)),this._parser.registerEscHandler({intermediates:"-",final:k},()=>this.selectCharset("-"+k)),this._parser.registerEscHandler({intermediates:".",final:k},()=>this.selectCharset("."+k)),this._parser.registerEscHandler({intermediates:"/",final:k},()=>this.selectCharset("/"+k));this._parser.registerEscHandler({intermediates:"#",final:"8"},()=>this.screenAlignmentPattern()),this._parser.setErrorHandler(k=>(this._logService.error("Parsing error: ",k),k)),this._parser.registerDcsHandler({intermediates:"$",final:"q"},new E.DcsHandler((k,H)=>this.requestStatusString(k,H)))}_preserveStack(w,T,B,I){this._parseStack.paused=!0,this._parseStack.cursorStartX=w,this._parseStack.cursorStartY=T,this._parseStack.decodedLength=B,this._parseStack.position=I}_logSlowResolvingAsync(w){this._logService.logLevel<=f.LogLevelEnum.WARN&&Promise.race([w,new Promise((T,B)=>setTimeout(()=>B("#SLOW_TIMEOUT"),5e3))]).catch(T=>{if(T!=="#SLOW_TIMEOUT")throw T;console.warn("async parser handler taking longer than 5000 ms")})}_getCurrentLinkId(){return this._curAttrData.extended.urlId}parse(w,T){let B,I=this._activeBuffer.x,V=this._activeBuffer.y,ee=0;const ne=this._parseStack.paused;if(ne){if(B=this._parser.parse(this._parseBuffer,this._parseStack.decodedLength,T))return this._logSlowResolvingAsync(B),B;I=this._parseStack.cursorStartX,V=this._parseStack.cursorStartY,this._parseStack.paused=!1,w.length>R&&(ee=this._parseStack.position+R)}if(this._logService.logLevel<=f.LogLevelEnum.DEBUG&&this._logService.debug("parsing data"+(typeof w=="string"?` "${w}"`:` "${Array.prototype.map.call(w,se=>String.fromCharCode(se)).join("")}"`),typeof w=="string"?w.split("").map(se=>se.charCodeAt(0)):w),this._parseBuffer.length<w.length&&this._parseBuffer.length<R&&(this._parseBuffer=new Uint32Array(Math.min(w.length,R))),ne||this._dirtyRowTracker.clearRange(),w.length>R)for(let se=ee;se<w.length;se+=R){const ue=se+R<w.length?se+R:w.length,k=typeof w=="string"?this._stringDecoder.decode(w.substring(se,ue),this._parseBuffer):this._utf8Decoder.decode(w.subarray(se,ue),this._parseBuffer);if(B=this._parser.parse(this._parseBuffer,k))return this._preserveStack(I,V,k,se),this._logSlowResolvingAsync(B),B}else if(!ne){const se=typeof w=="string"?this._stringDecoder.decode(w,this._parseBuffer):this._utf8Decoder.decode(w,this._parseBuffer);if(B=this._parser.parse(this._parseBuffer,se))return this._preserveStack(I,V,se,0),this._logSlowResolvingAsync(B),B}this._activeBuffer.x===I&&this._activeBuffer.y===V||this._onCursorMove.fire(),this._onRequestRefreshRows.fire(this._dirtyRowTracker.start,this._dirtyRowTracker.end)}print(w,T,B){let I,V;const ee=this._charsetService.charset,ne=this._optionsService.rawOptions.screenReaderMode,se=this._bufferService.cols,ue=this._coreService.decPrivateModes.wraparound,k=this._coreService.modes.insertMode,H=this._curAttrData;let j=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._activeBuffer.x&&B-T>0&&j.getWidth(this._activeBuffer.x-1)===2&&j.setCellFromCodePoint(this._activeBuffer.x-1,0,1,H.fg,H.bg,H.extended);for(let $=T;$<B;++$){if(I=w[$],V=this._unicodeService.wcwidth(I),I<127&&ee){const ae=ee[String.fromCharCode(I)];ae&&(I=ae.charCodeAt(0))}if(ne&&this._onA11yChar.fire((0,g.stringFromCodePoint)(I)),this._getCurrentLinkId()&&this._oscLinkService.addLineToLink(this._getCurrentLinkId(),this._activeBuffer.ybase+this._activeBuffer.y),V||!this._activeBuffer.x){if(this._activeBuffer.x+V-1>=se){if(ue){for(;this._activeBuffer.x<se;)j.setCellFromCodePoint(this._activeBuffer.x++,0,1,H.fg,H.bg,H.extended);this._activeBuffer.x=0,this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData(),!0)):(this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!0),j=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y)}else if(this._activeBuffer.x=se-1,V===2)continue}if(k&&(j.insertCells(this._activeBuffer.x,V,this._activeBuffer.getNullCell(H),H),j.getWidth(se-1)===2&&j.setCellFromCodePoint(se-1,r.NULL_CELL_CODE,r.NULL_CELL_WIDTH,H.fg,H.bg,H.extended)),j.setCellFromCodePoint(this._activeBuffer.x++,I,V,H.fg,H.bg,H.extended),V>0)for(;--V;)j.setCellFromCodePoint(this._activeBuffer.x++,0,0,H.fg,H.bg,H.extended)}else j.getWidth(this._activeBuffer.x-1)?j.addCodepointToCell(this._activeBuffer.x-1,I):j.addCodepointToCell(this._activeBuffer.x-2,I)}B-T>0&&(j.loadCell(this._activeBuffer.x-1,this._workCell),this._workCell.getWidth()===2||this._workCell.getCode()>65535?this._parser.precedingCodepoint=0:this._workCell.isCombined()?this._parser.precedingCodepoint=this._workCell.getChars().charCodeAt(0):this._parser.precedingCodepoint=this._workCell.content),this._activeBuffer.x<se&&B-T>0&&j.getWidth(this._activeBuffer.x)===0&&!j.hasContent(this._activeBuffer.x)&&j.setCellFromCodePoint(this._activeBuffer.x,0,1,H.fg,H.bg,H.extended),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}registerCsiHandler(w,T){return w.final!=="t"||w.prefix||w.intermediates?this._parser.registerCsiHandler(w,T):this._parser.registerCsiHandler(w,B=>!O(B.params[0],this._optionsService.rawOptions.windowOptions)||T(B))}registerDcsHandler(w,T){return this._parser.registerDcsHandler(w,new E.DcsHandler(T))}registerEscHandler(w,T){return this._parser.registerEscHandler(w,T)}registerOscHandler(w,T){return this._parser.registerOscHandler(w,new S.OscHandler(T))}bell(){return this._onRequestBell.fire(),!0}lineFeed(){return this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._optionsService.rawOptions.convertEol&&(this._activeBuffer.x=0),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows?this._activeBuffer.y=this._bufferService.rows-1:this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.x>=this._bufferService.cols&&this._activeBuffer.x--,this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._onLineFeed.fire(),!0}carriageReturn(){return this._activeBuffer.x=0,!0}backspace(){var w;if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),this._activeBuffer.x>0&&this._activeBuffer.x--,!0;if(this._restrictCursor(this._bufferService.cols),this._activeBuffer.x>0)this._activeBuffer.x--;else if(this._activeBuffer.x===0&&this._activeBuffer.y>this._activeBuffer.scrollTop&&this._activeBuffer.y<=this._activeBuffer.scrollBottom&&(!((w=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y))===null||w===void 0)&&w.isWrapped)){this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.y--,this._activeBuffer.x=this._bufferService.cols-1;const T=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);T.hasWidth(this._activeBuffer.x)&&!T.hasContent(this._activeBuffer.x)&&this._activeBuffer.x--}return this._restrictCursor(),!0}tab(){if(this._activeBuffer.x>=this._bufferService.cols)return!0;const w=this._activeBuffer.x;return this._activeBuffer.x=this._activeBuffer.nextStop(),this._optionsService.rawOptions.screenReaderMode&&this._onA11yTab.fire(this._activeBuffer.x-w),!0}shiftOut(){return this._charsetService.setgLevel(1),!0}shiftIn(){return this._charsetService.setgLevel(0),!0}_restrictCursor(w=this._bufferService.cols-1){this._activeBuffer.x=Math.min(w,Math.max(0,this._activeBuffer.x)),this._activeBuffer.y=this._coreService.decPrivateModes.origin?Math.min(this._activeBuffer.scrollBottom,Math.max(this._activeBuffer.scrollTop,this._activeBuffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._activeBuffer.y)),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_setCursor(w,T){this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._coreService.decPrivateModes.origin?(this._activeBuffer.x=w,this._activeBuffer.y=this._activeBuffer.scrollTop+T):(this._activeBuffer.x=w,this._activeBuffer.y=T),this._restrictCursor(),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_moveCursor(w,T){this._restrictCursor(),this._setCursor(this._activeBuffer.x+w,this._activeBuffer.y+T)}cursorUp(w){const T=this._activeBuffer.y-this._activeBuffer.scrollTop;return T>=0?this._moveCursor(0,-Math.min(T,w.params[0]||1)):this._moveCursor(0,-(w.params[0]||1)),!0}cursorDown(w){const T=this._activeBuffer.scrollBottom-this._activeBuffer.y;return T>=0?this._moveCursor(0,Math.min(T,w.params[0]||1)):this._moveCursor(0,w.params[0]||1),!0}cursorForward(w){return this._moveCursor(w.params[0]||1,0),!0}cursorBackward(w){return this._moveCursor(-(w.params[0]||1),0),!0}cursorNextLine(w){return this.cursorDown(w),this._activeBuffer.x=0,!0}cursorPrecedingLine(w){return this.cursorUp(w),this._activeBuffer.x=0,!0}cursorCharAbsolute(w){return this._setCursor((w.params[0]||1)-1,this._activeBuffer.y),!0}cursorPosition(w){return this._setCursor(w.length>=2?(w.params[1]||1)-1:0,(w.params[0]||1)-1),!0}charPosAbsolute(w){return this._setCursor((w.params[0]||1)-1,this._activeBuffer.y),!0}hPositionRelative(w){return this._moveCursor(w.params[0]||1,0),!0}linePosAbsolute(w){return this._setCursor(this._activeBuffer.x,(w.params[0]||1)-1),!0}vPositionRelative(w){return this._moveCursor(0,w.params[0]||1),!0}hVPosition(w){return this.cursorPosition(w),!0}tabClear(w){const T=w.params[0];return T===0?delete this._activeBuffer.tabs[this._activeBuffer.x]:T===3&&(this._activeBuffer.tabs={}),!0}cursorForwardTab(w){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let T=w.params[0]||1;for(;T--;)this._activeBuffer.x=this._activeBuffer.nextStop();return!0}cursorBackwardTab(w){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let T=w.params[0]||1;for(;T--;)this._activeBuffer.x=this._activeBuffer.prevStop();return!0}selectProtected(w){const T=w.params[0];return T===1&&(this._curAttrData.bg|=536870912),T!==2&&T!==0||(this._curAttrData.bg&=-536870913),!0}_eraseInBufferLine(w,T,B,I=!1,V=!1){const ee=this._activeBuffer.lines.get(this._activeBuffer.ybase+w);ee.replaceCells(T,B,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData(),V),I&&(ee.isWrapped=!1)}_resetBufferLine(w,T=!1){const B=this._activeBuffer.lines.get(this._activeBuffer.ybase+w);B&&(B.fill(this._activeBuffer.getNullCell(this._eraseAttrData()),T),this._bufferService.buffer.clearMarkers(this._activeBuffer.ybase+w),B.isWrapped=!1)}eraseInDisplay(w,T=!1){let B;switch(this._restrictCursor(this._bufferService.cols),w.params[0]){case 0:for(B=this._activeBuffer.y,this._dirtyRowTracker.markDirty(B),this._eraseInBufferLine(B++,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,T);B<this._bufferService.rows;B++)this._resetBufferLine(B,T);this._dirtyRowTracker.markDirty(B);break;case 1:for(B=this._activeBuffer.y,this._dirtyRowTracker.markDirty(B),this._eraseInBufferLine(B,0,this._activeBuffer.x+1,!0,T),this._activeBuffer.x+1>=this._bufferService.cols&&(this._activeBuffer.lines.get(B+1).isWrapped=!1);B--;)this._resetBufferLine(B,T);this._dirtyRowTracker.markDirty(0);break;case 2:for(B=this._bufferService.rows,this._dirtyRowTracker.markDirty(B-1);B--;)this._resetBufferLine(B,T);this._dirtyRowTracker.markDirty(0);break;case 3:const I=this._activeBuffer.lines.length-this._bufferService.rows;I>0&&(this._activeBuffer.lines.trimStart(I),this._activeBuffer.ybase=Math.max(this._activeBuffer.ybase-I,0),this._activeBuffer.ydisp=Math.max(this._activeBuffer.ydisp-I,0),this._onScroll.fire(0))}return!0}eraseInLine(w,T=!1){switch(this._restrictCursor(this._bufferService.cols),w.params[0]){case 0:this._eraseInBufferLine(this._activeBuffer.y,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,T);break;case 1:this._eraseInBufferLine(this._activeBuffer.y,0,this._activeBuffer.x+1,!1,T);break;case 2:this._eraseInBufferLine(this._activeBuffer.y,0,this._bufferService.cols,!0,T)}return this._dirtyRowTracker.markDirty(this._activeBuffer.y),!0}insertLines(w){this._restrictCursor();let T=w.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const B=this._activeBuffer.ybase+this._activeBuffer.y,I=this._bufferService.rows-1-this._activeBuffer.scrollBottom,V=this._bufferService.rows-1+this._activeBuffer.ybase-I+1;for(;T--;)this._activeBuffer.lines.splice(V-1,1),this._activeBuffer.lines.splice(B,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}deleteLines(w){this._restrictCursor();let T=w.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const B=this._activeBuffer.ybase+this._activeBuffer.y;let I;for(I=this._bufferService.rows-1-this._activeBuffer.scrollBottom,I=this._bufferService.rows-1+this._activeBuffer.ybase-I;T--;)this._activeBuffer.lines.splice(B,1),this._activeBuffer.lines.splice(I,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}insertChars(w){this._restrictCursor();const T=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return T&&(T.insertCells(this._activeBuffer.x,w.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}deleteChars(w){this._restrictCursor();const T=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return T&&(T.deleteCells(this._activeBuffer.x,w.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}scrollUp(w){let T=w.params[0]||1;for(;T--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollDown(w){let T=w.params[0]||1;for(;T--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,0,this._activeBuffer.getBlankLine(t.DEFAULT_ATTR_DATA));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollLeft(w){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const T=w.params[0]||1;for(let B=this._activeBuffer.scrollTop;B<=this._activeBuffer.scrollBottom;++B){const I=this._activeBuffer.lines.get(this._activeBuffer.ybase+B);I.deleteCells(0,T,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),I.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollRight(w){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const T=w.params[0]||1;for(let B=this._activeBuffer.scrollTop;B<=this._activeBuffer.scrollBottom;++B){const I=this._activeBuffer.lines.get(this._activeBuffer.ybase+B);I.insertCells(0,T,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),I.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}insertColumns(w){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const T=w.params[0]||1;for(let B=this._activeBuffer.scrollTop;B<=this._activeBuffer.scrollBottom;++B){const I=this._activeBuffer.lines.get(this._activeBuffer.ybase+B);I.insertCells(this._activeBuffer.x,T,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),I.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}deleteColumns(w){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const T=w.params[0]||1;for(let B=this._activeBuffer.scrollTop;B<=this._activeBuffer.scrollBottom;++B){const I=this._activeBuffer.lines.get(this._activeBuffer.ybase+B);I.deleteCells(this._activeBuffer.x,T,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),I.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}eraseChars(w){this._restrictCursor();const T=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return T&&(T.replaceCells(this._activeBuffer.x,this._activeBuffer.x+(w.params[0]||1),this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}repeatPrecedingCharacter(w){if(!this._parser.precedingCodepoint)return!0;const T=w.params[0]||1,B=new Uint32Array(T);for(let I=0;I<T;++I)B[I]=this._parser.precedingCodepoint;return this.print(B,0,B.length),!0}sendDeviceAttributesPrimary(w){return w.params[0]>0||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(l.C0.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(l.C0.ESC+"[?6c")),!0}sendDeviceAttributesSecondary(w){return w.params[0]>0||(this._is("xterm")?this._coreService.triggerDataEvent(l.C0.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(l.C0.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(w.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(l.C0.ESC+"[>83;40003;0c")),!0}_is(w){return(this._optionsService.rawOptions.termName+"").indexOf(w)===0}setMode(w){for(let T=0;T<w.length;T++)switch(w.params[T]){case 4:this._coreService.modes.insertMode=!0;break;case 20:this._optionsService.options.convertEol=!0}return!0}setModePrivate(w){for(let T=0;T<w.length;T++)switch(w.params[T]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,p.DEFAULT_CHARSET),this._charsetService.setgCharset(1,p.DEFAULT_CHARSET),this._charsetService.setgCharset(2,p.DEFAULT_CHARSET),this._charsetService.setgCharset(3,p.DEFAULT_CHARSET);break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:this._optionsService.options.cursorBlink=!0;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0,this._onRequestSendFocus.fire();break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 1016:this._coreMouseService.activeEncoding="SGR_PIXELS";break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0}return!0}resetMode(w){for(let T=0;T<w.length;T++)switch(w.params[T]){case 4:this._coreService.modes.insertMode=!1;break;case 20:this._optionsService.options.convertEol=!1}return!0}resetModePrivate(w){for(let T=0;T<w.length;T++)switch(w.params[T]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:this._optionsService.options.cursorBlink=!1;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:case 1016:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),w.params[T]===1049&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1}return!0}requestMode(w,T){const B=this._coreService.decPrivateModes,{activeProtocol:I,activeEncoding:V}=this._coreMouseService,ee=this._coreService,{buffers:ne,cols:se}=this._bufferService,{active:ue,alt:k}=ne,H=this._optionsService.rawOptions,j=D=>D?1:2,$=w.params[0];return ae=$,te=T?$===2?4:$===4?j(ee.modes.insertMode):$===12?3:$===20?j(H.convertEol):0:$===1?j(B.applicationCursorKeys):$===3?H.windowOptions.setWinLines?se===80?2:se===132?1:0:0:$===6?j(B.origin):$===7?j(B.wraparound):$===8?3:$===9?j(I==="X10"):$===12?j(H.cursorBlink):$===25?j(!ee.isCursorHidden):$===45?j(B.reverseWraparound):$===66?j(B.applicationKeypad):$===67?4:$===1e3?j(I==="VT200"):$===1002?j(I==="DRAG"):$===1003?j(I==="ANY"):$===1004?j(B.sendFocus):$===1005?4:$===1006?j(V==="SGR"):$===1015?4:$===1016?j(V==="SGR_PIXELS"):$===1048?1:$===47||$===1047||$===1049?j(ue===k):$===2004?j(B.bracketedPasteMode):0,ee.triggerDataEvent(`${l.C0.ESC}[${T?"":"?"}${ae};${te}$y`),!0;var ae,te}_updateAttrColor(w,T,B,I,V){return T===2?(w|=50331648,w&=-16777216,w|=c.AttributeData.fromColorRGB([B,I,V])):T===5&&(w&=-50331904,w|=33554432|255&B),w}_extractColor(w,T,B){const I=[0,0,-1,0,0,0];let V=0,ee=0;do{if(I[ee+V]=w.params[T+ee],w.hasSubParams(T+ee)){const ne=w.getSubParams(T+ee);let se=0;do I[1]===5&&(V=1),I[ee+se+1+V]=ne[se];while(++se<ne.length&&se+ee+1+V<I.length);break}if(I[1]===5&&ee+V>=2||I[1]===2&&ee+V>=5)break;I[1]&&(V=1)}while(++ee+T<w.length&&ee+V<I.length);for(let ne=2;ne<I.length;++ne)I[ne]===-1&&(I[ne]=0);switch(I[0]){case 38:B.fg=this._updateAttrColor(B.fg,I[1],I[3],I[4],I[5]);break;case 48:B.bg=this._updateAttrColor(B.bg,I[1],I[3],I[4],I[5]);break;case 58:B.extended=B.extended.clone(),B.extended.underlineColor=this._updateAttrColor(B.extended.underlineColor,I[1],I[3],I[4],I[5])}return ee}_processUnderline(w,T){T.extended=T.extended.clone(),(!~w||w>5)&&(w=1),T.extended.underlineStyle=w,T.fg|=268435456,w===0&&(T.fg&=-268435457),T.updateExtended()}_processSGR0(w){w.fg=t.DEFAULT_ATTR_DATA.fg,w.bg=t.DEFAULT_ATTR_DATA.bg,w.extended=w.extended.clone(),w.extended.underlineStyle=0,w.extended.underlineColor&=-67108864,w.updateExtended()}charAttributes(w){if(w.length===1&&w.params[0]===0)return this._processSGR0(this._curAttrData),!0;const T=w.length;let B;const I=this._curAttrData;for(let V=0;V<T;V++)B=w.params[V],B>=30&&B<=37?(I.fg&=-50331904,I.fg|=16777216|B-30):B>=40&&B<=47?(I.bg&=-50331904,I.bg|=16777216|B-40):B>=90&&B<=97?(I.fg&=-50331904,I.fg|=16777224|B-90):B>=100&&B<=107?(I.bg&=-50331904,I.bg|=16777224|B-100):B===0?this._processSGR0(I):B===1?I.fg|=134217728:B===3?I.bg|=67108864:B===4?(I.fg|=268435456,this._processUnderline(w.hasSubParams(V)?w.getSubParams(V)[0]:1,I)):B===5?I.fg|=536870912:B===7?I.fg|=67108864:B===8?I.fg|=1073741824:B===9?I.fg|=2147483648:B===2?I.bg|=134217728:B===21?this._processUnderline(2,I):B===22?(I.fg&=-134217729,I.bg&=-134217729):B===23?I.bg&=-67108865:B===24?(I.fg&=-268435457,this._processUnderline(0,I)):B===25?I.fg&=-536870913:B===27?I.fg&=-67108865:B===28?I.fg&=-1073741825:B===29?I.fg&=2147483647:B===39?(I.fg&=-67108864,I.fg|=16777215&t.DEFAULT_ATTR_DATA.fg):B===49?(I.bg&=-67108864,I.bg|=16777215&t.DEFAULT_ATTR_DATA.bg):B===38||B===48||B===58?V+=this._extractColor(w,V,I):B===53?I.bg|=1073741824:B===55?I.bg&=-1073741825:B===59?(I.extended=I.extended.clone(),I.extended.underlineColor=-1,I.updateExtended()):B===100?(I.fg&=-67108864,I.fg|=16777215&t.DEFAULT_ATTR_DATA.fg,I.bg&=-67108864,I.bg|=16777215&t.DEFAULT_ATTR_DATA.bg):this._logService.debug("Unknown SGR attribute: %d.",B);return!0}deviceStatus(w){switch(w.params[0]){case 5:this._coreService.triggerDataEvent(`${l.C0.ESC}[0n`);break;case 6:const T=this._activeBuffer.y+1,B=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${l.C0.ESC}[${T};${B}R`)}return!0}deviceStatusPrivate(w){if(w.params[0]===6){const T=this._activeBuffer.y+1,B=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${l.C0.ESC}[?${T};${B}R`)}return!0}softReset(w){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._activeBuffer.scrollTop=0,this._activeBuffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=t.DEFAULT_ATTR_DATA.clone(),this._coreService.reset(),this._charsetService.reset(),this._activeBuffer.savedX=0,this._activeBuffer.savedY=this._activeBuffer.ybase,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1,!0}setCursorStyle(w){const T=w.params[0]||1;switch(T){case 1:case 2:this._optionsService.options.cursorStyle="block";break;case 3:case 4:this._optionsService.options.cursorStyle="underline";break;case 5:case 6:this._optionsService.options.cursorStyle="bar"}const B=T%2==1;return this._optionsService.options.cursorBlink=B,!0}setScrollRegion(w){const T=w.params[0]||1;let B;return(w.length<2||(B=w.params[1])>this._bufferService.rows||B===0)&&(B=this._bufferService.rows),B>T&&(this._activeBuffer.scrollTop=T-1,this._activeBuffer.scrollBottom=B-1,this._setCursor(0,0)),!0}windowOptions(w){if(!O(w.params[0],this._optionsService.rawOptions.windowOptions))return!0;const T=w.length>1?w.params[1]:0;switch(w.params[0]){case 14:T!==2&&this._onRequestWindowsOptionsReport.fire(A.GET_WIN_SIZE_PIXELS);break;case 16:this._onRequestWindowsOptionsReport.fire(A.GET_CELL_SIZE_PIXELS);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(`${l.C0.ESC}[8;${this._bufferService.rows};${this._bufferService.cols}t`);break;case 22:T!==0&&T!==2||(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>10&&this._windowTitleStack.shift()),T!==0&&T!==1||(this._iconNameStack.push(this._iconName),this._iconNameStack.length>10&&this._iconNameStack.shift());break;case 23:T!==0&&T!==2||this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),T!==0&&T!==1||this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop())}return!0}saveCursor(w){return this._activeBuffer.savedX=this._activeBuffer.x,this._activeBuffer.savedY=this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,!0}restoreCursor(w){return this._activeBuffer.x=this._activeBuffer.savedX||0,this._activeBuffer.y=Math.max(this._activeBuffer.savedY-this._activeBuffer.ybase,0),this._curAttrData.fg=this._activeBuffer.savedCurAttrData.fg,this._curAttrData.bg=this._activeBuffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._activeBuffer.savedCharset&&(this._charsetService.charset=this._activeBuffer.savedCharset),this._restrictCursor(),!0}setTitle(w){return this._windowTitle=w,this._onTitleChange.fire(w),!0}setIconName(w){return this._iconName=w,!0}setOrReportIndexedColor(w){const T=[],B=w.split(";");for(;B.length>1;){const I=B.shift(),V=B.shift();if(/^\d+$/.exec(I)){const ee=parseInt(I);if(z(ee))if(V==="?")T.push({type:0,index:ee});else{const ne=(0,u.parseColor)(V);ne&&T.push({type:1,index:ee,color:ne})}}}return T.length&&this._onColor.fire(T),!0}setHyperlink(w){const T=w.split(";");return!(T.length<2)&&(T[1]?this._createHyperlink(T[0],T[1]):!T[0]&&this._finishHyperlink())}_createHyperlink(w,T){this._getCurrentLinkId()&&this._finishHyperlink();const B=w.split(":");let I;const V=B.findIndex(ee=>ee.startsWith("id="));return V!==-1&&(I=B[V].slice(3)||void 0),this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=this._oscLinkService.registerLink({id:I,uri:T}),this._curAttrData.updateExtended(),!0}_finishHyperlink(){return this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=0,this._curAttrData.updateExtended(),!0}_setOrReportSpecialColor(w,T){const B=w.split(";");for(let I=0;I<B.length&&!(T>=this._specialColors.length);++I,++T)if(B[I]==="?")this._onColor.fire([{type:0,index:this._specialColors[T]}]);else{const V=(0,u.parseColor)(B[I]);V&&this._onColor.fire([{type:1,index:this._specialColors[T],color:V}])}return!0}setOrReportFgColor(w){return this._setOrReportSpecialColor(w,0)}setOrReportBgColor(w){return this._setOrReportSpecialColor(w,1)}setOrReportCursorColor(w){return this._setOrReportSpecialColor(w,2)}restoreIndexedColor(w){if(!w)return this._onColor.fire([{type:2}]),!0;const T=[],B=w.split(";");for(let I=0;I<B.length;++I)if(/^\d+$/.exec(B[I])){const V=parseInt(B[I]);z(V)&&T.push({type:2,index:V})}return T.length&&this._onColor.fire(T),!0}restoreFgColor(w){return this._onColor.fire([{type:2,index:256}]),!0}restoreBgColor(w){return this._onColor.fire([{type:2,index:257}]),!0}restoreCursorColor(w){return this._onColor.fire([{type:2,index:258}]),!0}nextLine(){return this._activeBuffer.x=0,this.index(),!0}keypadApplicationMode(){return this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0}keypadNumericMode(){return this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),!0}selectDefaultCharset(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,p.DEFAULT_CHARSET),!0}selectCharset(w){return w.length!==2?(this.selectDefaultCharset(),!0):(w[0]==="/"||this._charsetService.setgCharset(y[w[0]],p.CHARSETS[w[1]]||p.DEFAULT_CHARSET),!0)}index(){return this._restrictCursor(),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._restrictCursor(),!0}tabSet(){return this._activeBuffer.tabs[this._activeBuffer.x]=!0,!0}reverseIndex(){if(this._restrictCursor(),this._activeBuffer.y===this._activeBuffer.scrollTop){const w=this._activeBuffer.scrollBottom-this._activeBuffer.scrollTop;this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase+this._activeBuffer.y,w,1),this._activeBuffer.lines.set(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.getBlankLine(this._eraseAttrData())),this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom)}else this._activeBuffer.y--,this._restrictCursor();return!0}fullReset(){return this._parser.reset(),this._onRequestReset.fire(),!0}reset(){this._curAttrData=t.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=t.DEFAULT_ATTR_DATA.clone()}_eraseAttrData(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=67108863&this._curAttrData.bg,this._eraseAttrDataInternal}setgLevel(w){return this._charsetService.setgLevel(w),!0}screenAlignmentPattern(){const w=new n.CellData;w.content=4194373,w.fg=this._curAttrData.fg,w.bg=this._curAttrData.bg,this._setCursor(0,0);for(let T=0;T<this._bufferService.rows;++T){const B=this._activeBuffer.ybase+this._activeBuffer.y+T,I=this._activeBuffer.lines.get(B);I&&(I.fill(w),I.isWrapped=!1)}return this._dirtyRowTracker.markAllDirty(),this._setCursor(0,0),!0}requestStatusString(w,T){const B=this._bufferService.buffer,I=this._optionsService.rawOptions;return(V=>(this._coreService.triggerDataEvent(`${l.C0.ESC}${V}${l.C0.ESC}\\`),!0))(w==='"q'?`P1$r${this._curAttrData.isProtected()?1:0}"q`:w==='"p'?'P1$r61;1"p':w==="r"?`P1$r${B.scrollTop+1};${B.scrollBottom+1}r`:w==="m"?"P1$r0m":w===" q"?`P1$r${{block:2,underline:4,bar:6}[I.cursorStyle]-(I.cursorBlink?1:0)} q`:"P0$r")}markRangeDirty(w,T){this._dirtyRowTracker.markRangeDirty(w,T)}}i.InputHandler=N;let K=class{constructor(U){this._bufferService=U,this.clearRange()}clearRange(){this.start=this._bufferService.buffer.y,this.end=this._bufferService.buffer.y}markDirty(U){U<this.start?this.start=U:U>this.end&&(this.end=U)}markRangeDirty(U,w){U>w&&(M=U,U=w,w=M),U<this.start&&(this.start=U),w>this.end&&(this.end=w)}markAllDirty(){this.markRangeDirty(0,this._bufferService.rows-1)}};function z(U){return 0<=U&&U<256}K=h([_(0,f.IBufferService)],K)},844:(L,i)=>{function a(h){for(const _ of h)_.dispose();h.length=0}Object.defineProperty(i,"__esModule",{value:!0}),i.getDisposeArrayDisposable=i.disposeArray=i.toDisposable=i.MutableDisposable=i.Disposable=void 0,i.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(const h of this._disposables)h.dispose();this._disposables.length=0}register(h){return this._disposables.push(h),h}unregister(h){const _=this._disposables.indexOf(h);_!==-1&&this._disposables.splice(_,1)}},i.MutableDisposable=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(h){var _;this._isDisposed||h===this._value||((_=this._value)===null||_===void 0||_.dispose(),this._value=h)}clear(){this.value=void 0}dispose(){var h;this._isDisposed=!0,(h=this._value)===null||h===void 0||h.dispose(),this._value=void 0}},i.toDisposable=function(h){return{dispose:h}},i.disposeArray=a,i.getDisposeArrayDisposable=function(h){return{dispose:()=>a(h)}}},1505:(L,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.FourKeyMap=i.TwoKeyMap=void 0;class a{constructor(){this._data={}}set(_,l,p){this._data[_]||(this._data[_]={}),this._data[_][l]=p}get(_,l){return this._data[_]?this._data[_][l]:void 0}clear(){this._data={}}}i.TwoKeyMap=a,i.FourKeyMap=class{constructor(){this._data=new a}set(h,_,l,p,m){this._data.get(h,_)||this._data.set(h,_,new a),this._data.get(h,_).set(l,p,m)}get(h,_,l,p){var m;return(m=this._data.get(h,_))===null||m===void 0?void 0:m.get(l,p)}clear(){this._data.clear()}}},6114:(L,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.isChromeOS=i.isLinux=i.isWindows=i.isIphone=i.isIpad=i.isMac=i.getSafariVersion=i.isSafari=i.isLegacyEdge=i.isFirefox=i.isNode=void 0,i.isNode=typeof navigator>"u";const a=i.isNode?"node":navigator.userAgent,h=i.isNode?"node":navigator.platform;i.isFirefox=a.includes("Firefox"),i.isLegacyEdge=a.includes("Edge"),i.isSafari=/^((?!chrome|android).)*safari/i.test(a),i.getSafariVersion=function(){if(!i.isSafari)return 0;const _=a.match(/Version\/(\d+)/);return _===null||_.length<2?0:parseInt(_[1])},i.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(h),i.isIpad=h==="iPad",i.isIphone=h==="iPhone",i.isWindows=["Windows","Win16","Win32","WinCE"].includes(h),i.isLinux=h.indexOf("Linux")>=0,i.isChromeOS=/\bCrOS\b/.test(a)},6106:(L,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.SortedList=void 0;let a=0;i.SortedList=class{constructor(h){this._getKey=h,this._array=[]}clear(){this._array.length=0}insert(h){this._array.length!==0?(a=this._search(this._getKey(h)),this._array.splice(a,0,h)):this._array.push(h)}delete(h){if(this._array.length===0)return!1;const _=this._getKey(h);if(_===void 0||(a=this._search(_),a===-1)||this._getKey(this._array[a])!==_)return!1;do if(this._array[a]===h)return this._array.splice(a,1),!0;while(++a<this._array.length&&this._getKey(this._array[a])===_);return!1}*getKeyIterator(h){if(this._array.length!==0&&(a=this._search(h),!(a<0||a>=this._array.length)&&this._getKey(this._array[a])===h))do yield this._array[a];while(++a<this._array.length&&this._getKey(this._array[a])===h)}forEachByKey(h,_){if(this._array.length!==0&&(a=this._search(h),!(a<0||a>=this._array.length)&&this._getKey(this._array[a])===h))do _(this._array[a]);while(++a<this._array.length&&this._getKey(this._array[a])===h)}values(){return[...this._array].values()}_search(h){let _=0,l=this._array.length-1;for(;l>=_;){let p=_+l>>1;const m=this._getKey(this._array[p]);if(m>h)l=p-1;else{if(!(m<h)){for(;p>0&&this._getKey(this._array[p-1])===h;)p--;return p}_=p+1}}return _}}},7226:(L,i,a)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.DebouncedIdleTask=i.IdleTaskQueue=i.PriorityTaskQueue=void 0;const h=a(6114);class _{constructor(){this._tasks=[],this._i=0}enqueue(m){this._tasks.push(m),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(m){this._idleCallback=void 0;let b=0,g=0,t=m.timeRemaining(),o=0;for(;this._i<this._tasks.length;){if(b=Date.now(),this._tasks[this._i]()||this._i++,b=Math.max(1,Date.now()-b),g=Math.max(b,g),o=m.timeRemaining(),1.5*g>o)return t-b<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(t-b))}ms`),void this._start();t=o}this.clear()}}class l extends _{_requestCallback(m){return setTimeout(()=>m(this._createDeadline(16)))}_cancelCallback(m){clearTimeout(m)}_createDeadline(m){const b=Date.now()+m;return{timeRemaining:()=>Math.max(0,b-Date.now())}}}i.PriorityTaskQueue=l,i.IdleTaskQueue=!h.isNode&&"requestIdleCallback"in window?class extends _{_requestCallback(p){return requestIdleCallback(p)}_cancelCallback(p){cancelIdleCallback(p)}}:l,i.DebouncedIdleTask=class{constructor(){this._queue=new i.IdleTaskQueue}set(p){this._queue.clear(),this._queue.enqueue(p)}flush(){this._queue.flush()}}},9282:(L,i,a)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.updateWindowsModeWrappedState=void 0;const h=a(643);i.updateWindowsModeWrappedState=function(_){const l=_.buffer.lines.get(_.buffer.ybase+_.buffer.y-1),p=l==null?void 0:l.get(_.cols-1),m=_.buffer.lines.get(_.buffer.ybase+_.buffer.y);m&&p&&(m.isWrapped=p[h.CHAR_DATA_CODE_INDEX]!==h.NULL_CELL_CODE&&p[h.CHAR_DATA_CODE_INDEX]!==h.WHITESPACE_CELL_CODE)}},3734:(L,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ExtendedAttrs=i.AttributeData=void 0;class a{constructor(){this.fg=0,this.bg=0,this.extended=new h}static toColorRGB(l){return[l>>>16&255,l>>>8&255,255&l]}static fromColorRGB(l){return(255&l[0])<<16|(255&l[1])<<8|255&l[2]}clone(){const l=new a;return l.fg=this.fg,l.bg=this.bg,l.extended=this.extended.clone(),l}isInverse(){return 67108864&this.fg}isBold(){return 134217728&this.fg}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:268435456&this.fg}isBlink(){return 536870912&this.fg}isInvisible(){return 1073741824&this.fg}isItalic(){return 67108864&this.bg}isDim(){return 134217728&this.bg}isStrikethrough(){return 2147483648&this.fg}isProtected(){return 536870912&this.bg}isOverline(){return 1073741824&this.bg}getFgColorMode(){return 50331648&this.fg}getBgColorMode(){return 50331648&this.bg}isFgRGB(){return(50331648&this.fg)==50331648}isBgRGB(){return(50331648&this.bg)==50331648}isFgPalette(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432}isBgPalette(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432}isFgDefault(){return(50331648&this.fg)==0}isBgDefault(){return(50331648&this.bg)==0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}}getBgColor(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}}hasExtendedAttrs(){return 268435456&this.bg}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()}isUnderlineColorRGB(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()}isUnderlineColorPalette(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()}isUnderlineColorDefault(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()}getUnderlineStyle(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0}}i.AttributeData=a;class h{get ext(){return this._urlId?-469762049&this._ext|this.underlineStyle<<26:this._ext}set ext(l){this._ext=l}get underlineStyle(){return this._urlId?5:(469762048&this._ext)>>26}set underlineStyle(l){this._ext&=-469762049,this._ext|=l<<26&469762048}get underlineColor(){return 67108863&this._ext}set underlineColor(l){this._ext&=-67108864,this._ext|=67108863&l}get urlId(){return this._urlId}set urlId(l){this._urlId=l}constructor(l=0,p=0){this._ext=0,this._urlId=0,this._ext=l,this._urlId=p}clone(){return new h(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}}i.ExtendedAttrs=h},9092:(L,i,a)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Buffer=i.MAX_BUFFER_SIZE=void 0;const h=a(6349),_=a(7226),l=a(3734),p=a(8437),m=a(4634),b=a(511),g=a(643),t=a(4863),o=a(7116);i.MAX_BUFFER_SIZE=4294967295,i.Buffer=class{constructor(r,n,c){this._hasScrollback=r,this._optionsService=n,this._bufferService=c,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.tabs={},this.savedY=0,this.savedX=0,this.savedCurAttrData=p.DEFAULT_ATTR_DATA.clone(),this.savedCharset=o.DEFAULT_CHARSET,this.markers=[],this._nullCell=b.CellData.fromCharData([0,g.NULL_CELL_CHAR,g.NULL_CELL_WIDTH,g.NULL_CELL_CODE]),this._whitespaceCell=b.CellData.fromCharData([0,g.WHITESPACE_CELL_CHAR,g.WHITESPACE_CELL_WIDTH,g.WHITESPACE_CELL_CODE]),this._isClearing=!1,this._memoryCleanupQueue=new _.IdleTaskQueue,this._memoryCleanupPosition=0,this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new h.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}getNullCell(r){return r?(this._nullCell.fg=r.fg,this._nullCell.bg=r.bg,this._nullCell.extended=r.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new l.ExtendedAttrs),this._nullCell}getWhitespaceCell(r){return r?(this._whitespaceCell.fg=r.fg,this._whitespaceCell.bg=r.bg,this._whitespaceCell.extended=r.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new l.ExtendedAttrs),this._whitespaceCell}getBlankLine(r,n){return new p.BufferLine(this._bufferService.cols,this.getNullCell(r),n)}get hasScrollback(){return this._hasScrollback&&this.lines.maxLength>this._rows}get isCursorInViewport(){const r=this.ybase+this.y-this.ydisp;return r>=0&&r<this._rows}_getCorrectBufferLength(r){if(!this._hasScrollback)return r;const n=r+this._optionsService.rawOptions.scrollback;return n>i.MAX_BUFFER_SIZE?i.MAX_BUFFER_SIZE:n}fillViewportRows(r){if(this.lines.length===0){r===void 0&&(r=p.DEFAULT_ATTR_DATA);let n=this._rows;for(;n--;)this.lines.push(this.getBlankLine(r))}}clear(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new h.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}resize(r,n){const c=this.getNullCell(p.DEFAULT_ATTR_DATA);let f=0;const S=this._getCorrectBufferLength(n);if(S>this.lines.maxLength&&(this.lines.maxLength=S),this.lines.length>0){if(this._cols<r)for(let u=0;u<this.lines.length;u++)f+=+this.lines.get(u).resize(r,c);let E=0;if(this._rows<n)for(let u=this._rows;u<n;u++)this.lines.length<n+this.ybase&&(this._optionsService.rawOptions.windowsMode||this._optionsService.rawOptions.windowsPty.backend!==void 0||this._optionsService.rawOptions.windowsPty.buildNumber!==void 0?this.lines.push(new p.BufferLine(r,c)):this.ybase>0&&this.lines.length<=this.ybase+this.y+E+1?(this.ybase--,E++,this.ydisp>0&&this.ydisp--):this.lines.push(new p.BufferLine(r,c)));else for(let u=this._rows;u>n;u--)this.lines.length>n+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(S<this.lines.maxLength){const u=this.lines.length-S;u>0&&(this.lines.trimStart(u),this.ybase=Math.max(this.ybase-u,0),this.ydisp=Math.max(this.ydisp-u,0),this.savedY=Math.max(this.savedY-u,0)),this.lines.maxLength=S}this.x=Math.min(this.x,r-1),this.y=Math.min(this.y,n-1),E&&(this.y+=E),this.savedX=Math.min(this.savedX,r-1),this.scrollTop=0}if(this.scrollBottom=n-1,this._isReflowEnabled&&(this._reflow(r,n),this._cols>r))for(let E=0;E<this.lines.length;E++)f+=+this.lines.get(E).resize(r,c);this._cols=r,this._rows=n,this._memoryCleanupQueue.clear(),f>.1*this.lines.length&&(this._memoryCleanupPosition=0,this._memoryCleanupQueue.enqueue(()=>this._batchedMemoryCleanup()))}_batchedMemoryCleanup(){let r=!0;this._memoryCleanupPosition>=this.lines.length&&(this._memoryCleanupPosition=0,r=!1);let n=0;for(;this._memoryCleanupPosition<this.lines.length;)if(n+=this.lines.get(this._memoryCleanupPosition++).cleanupMemory(),n>100)return!0;return r}get _isReflowEnabled(){const r=this._optionsService.rawOptions.windowsPty;return r&&r.buildNumber?this._hasScrollback&&r.backend==="conpty"&&r.buildNumber>=21376:this._hasScrollback&&!this._optionsService.rawOptions.windowsMode}_reflow(r,n){this._cols!==r&&(r>this._cols?this._reflowLarger(r,n):this._reflowSmaller(r,n))}_reflowLarger(r,n){const c=(0,m.reflowLargerGetLinesToRemove)(this.lines,this._cols,r,this.ybase+this.y,this.getNullCell(p.DEFAULT_ATTR_DATA));if(c.length>0){const f=(0,m.reflowLargerCreateNewLayout)(this.lines,c);(0,m.reflowLargerApplyNewLayout)(this.lines,f.layout),this._reflowLargerAdjustViewport(r,n,f.countRemoved)}}_reflowLargerAdjustViewport(r,n,c){const f=this.getNullCell(p.DEFAULT_ATTR_DATA);let S=c;for(;S-- >0;)this.ybase===0?(this.y>0&&this.y--,this.lines.length<n&&this.lines.push(new p.BufferLine(r,f))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-c,0)}_reflowSmaller(r,n){const c=this.getNullCell(p.DEFAULT_ATTR_DATA),f=[];let S=0;for(let E=this.lines.length-1;E>=0;E--){let u=this.lines.get(E);if(!u||!u.isWrapped&&u.getTrimmedLength()<=r)continue;const y=[u];for(;u.isWrapped&&E>0;)u=this.lines.get(--E),y.unshift(u);const R=this.ybase+this.y;if(R>=E&&R<E+y.length)continue;const O=y[y.length-1].getTrimmedLength(),A=(0,m.reflowSmallerGetNewLineLengths)(y,this._cols,r),M=A.length-y.length;let N;N=this.ybase===0&&this.y!==this.lines.length-1?Math.max(0,this.y-this.lines.maxLength+M):Math.max(0,this.lines.length-this.lines.maxLength+M);const K=[];for(let I=0;I<M;I++){const V=this.getBlankLine(p.DEFAULT_ATTR_DATA,!0);K.push(V)}K.length>0&&(f.push({start:E+y.length+S,newLines:K}),S+=K.length),y.push(...K);let z=A.length-1,U=A[z];U===0&&(z--,U=A[z]);let w=y.length-M-1,T=O;for(;w>=0;){const I=Math.min(T,U);if(y[z]===void 0)break;if(y[z].copyCellsFrom(y[w],T-I,U-I,I,!0),U-=I,U===0&&(z--,U=A[z]),T-=I,T===0){w--;const V=Math.max(w,0);T=(0,m.getWrappedLineTrimmedLength)(y,V,this._cols)}}for(let I=0;I<y.length;I++)A[I]<r&&y[I].setCell(A[I],c);let B=M-N;for(;B-- >0;)this.ybase===0?this.y<n-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+S)-n&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+M,this.ybase+n-1)}if(f.length>0){const E=[],u=[];for(let z=0;z<this.lines.length;z++)u.push(this.lines.get(z));const y=this.lines.length;let R=y-1,O=0,A=f[O];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+S);let M=0;for(let z=Math.min(this.lines.maxLength-1,y+S-1);z>=0;z--)if(A&&A.start>R+M){for(let U=A.newLines.length-1;U>=0;U--)this.lines.set(z--,A.newLines[U]);z++,E.push({index:R+1,amount:A.newLines.length}),M+=A.newLines.length,A=f[++O]}else this.lines.set(z,u[R--]);let N=0;for(let z=E.length-1;z>=0;z--)E[z].index+=N,this.lines.onInsertEmitter.fire(E[z]),N+=E[z].amount;const K=Math.max(0,y+S-this.lines.maxLength);K>0&&this.lines.onTrimEmitter.fire(K)}}translateBufferLineToString(r,n,c=0,f){const S=this.lines.get(r);return S?S.translateToString(n,c,f):""}getWrappedRangeForLine(r){let n=r,c=r;for(;n>0&&this.lines.get(n).isWrapped;)n--;for(;c+1<this.lines.length&&this.lines.get(c+1).isWrapped;)c++;return{first:n,last:c}}setupTabStops(r){for(r!=null?this.tabs[r]||(r=this.prevStop(r)):(this.tabs={},r=0);r<this._cols;r+=this._optionsService.rawOptions.tabStopWidth)this.tabs[r]=!0}prevStop(r){for(r==null&&(r=this.x);!this.tabs[--r]&&r>0;);return r>=this._cols?this._cols-1:r<0?0:r}nextStop(r){for(r==null&&(r=this.x);!this.tabs[++r]&&r<this._cols;);return r>=this._cols?this._cols-1:r<0?0:r}clearMarkers(r){this._isClearing=!0;for(let n=0;n<this.markers.length;n++)this.markers[n].line===r&&(this.markers[n].dispose(),this.markers.splice(n--,1));this._isClearing=!1}clearAllMarkers(){this._isClearing=!0;for(let r=0;r<this.markers.length;r++)this.markers[r].dispose(),this.markers.splice(r--,1);this._isClearing=!1}addMarker(r){const n=new t.Marker(r);return this.markers.push(n),n.register(this.lines.onTrim(c=>{n.line-=c,n.line<0&&n.dispose()})),n.register(this.lines.onInsert(c=>{n.line>=c.index&&(n.line+=c.amount)})),n.register(this.lines.onDelete(c=>{n.line>=c.index&&n.line<c.index+c.amount&&n.dispose(),n.line>c.index&&(n.line-=c.amount)})),n.register(n.onDispose(()=>this._removeMarker(n))),n}_removeMarker(r){this._isClearing||this.markers.splice(this.markers.indexOf(r),1)}}},8437:(L,i,a)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferLine=i.DEFAULT_ATTR_DATA=void 0;const h=a(3734),_=a(511),l=a(643),p=a(482);i.DEFAULT_ATTR_DATA=Object.freeze(new h.AttributeData);let m=0;class b{constructor(t,o,r=!1){this.isWrapped=r,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(3*t);const n=o||_.CellData.fromCharData([0,l.NULL_CELL_CHAR,l.NULL_CELL_WIDTH,l.NULL_CELL_CODE]);for(let c=0;c<t;++c)this.setCell(c,n);this.length=t}get(t){const o=this._data[3*t+0],r=2097151&o;return[this._data[3*t+1],2097152&o?this._combined[t]:r?(0,p.stringFromCodePoint)(r):"",o>>22,2097152&o?this._combined[t].charCodeAt(this._combined[t].length-1):r]}set(t,o){this._data[3*t+1]=o[l.CHAR_DATA_ATTR_INDEX],o[l.CHAR_DATA_CHAR_INDEX].length>1?(this._combined[t]=o[1],this._data[3*t+0]=2097152|t|o[l.CHAR_DATA_WIDTH_INDEX]<<22):this._data[3*t+0]=o[l.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|o[l.CHAR_DATA_WIDTH_INDEX]<<22}getWidth(t){return this._data[3*t+0]>>22}hasWidth(t){return 12582912&this._data[3*t+0]}getFg(t){return this._data[3*t+1]}getBg(t){return this._data[3*t+2]}hasContent(t){return 4194303&this._data[3*t+0]}getCodePoint(t){const o=this._data[3*t+0];return 2097152&o?this._combined[t].charCodeAt(this._combined[t].length-1):2097151&o}isCombined(t){return 2097152&this._data[3*t+0]}getString(t){const o=this._data[3*t+0];return 2097152&o?this._combined[t]:2097151&o?(0,p.stringFromCodePoint)(2097151&o):""}isProtected(t){return 536870912&this._data[3*t+2]}loadCell(t,o){return m=3*t,o.content=this._data[m+0],o.fg=this._data[m+1],o.bg=this._data[m+2],2097152&o.content&&(o.combinedData=this._combined[t]),268435456&o.bg&&(o.extended=this._extendedAttrs[t]),o}setCell(t,o){2097152&o.content&&(this._combined[t]=o.combinedData),268435456&o.bg&&(this._extendedAttrs[t]=o.extended),this._data[3*t+0]=o.content,this._data[3*t+1]=o.fg,this._data[3*t+2]=o.bg}setCellFromCodePoint(t,o,r,n,c,f){268435456&c&&(this._extendedAttrs[t]=f),this._data[3*t+0]=o|r<<22,this._data[3*t+1]=n,this._data[3*t+2]=c}addCodepointToCell(t,o){let r=this._data[3*t+0];2097152&r?this._combined[t]+=(0,p.stringFromCodePoint)(o):(2097151&r?(this._combined[t]=(0,p.stringFromCodePoint)(2097151&r)+(0,p.stringFromCodePoint)(o),r&=-2097152,r|=2097152):r=o|4194304,this._data[3*t+0]=r)}insertCells(t,o,r,n){if((t%=this.length)&&this.getWidth(t-1)===2&&this.setCellFromCodePoint(t-1,0,1,(n==null?void 0:n.fg)||0,(n==null?void 0:n.bg)||0,(n==null?void 0:n.extended)||new h.ExtendedAttrs),o<this.length-t){const c=new _.CellData;for(let f=this.length-t-o-1;f>=0;--f)this.setCell(t+o+f,this.loadCell(t+f,c));for(let f=0;f<o;++f)this.setCell(t+f,r)}else for(let c=t;c<this.length;++c)this.setCell(c,r);this.getWidth(this.length-1)===2&&this.setCellFromCodePoint(this.length-1,0,1,(n==null?void 0:n.fg)||0,(n==null?void 0:n.bg)||0,(n==null?void 0:n.extended)||new h.ExtendedAttrs)}deleteCells(t,o,r,n){if(t%=this.length,o<this.length-t){const c=new _.CellData;for(let f=0;f<this.length-t-o;++f)this.setCell(t+f,this.loadCell(t+o+f,c));for(let f=this.length-o;f<this.length;++f)this.setCell(f,r)}else for(let c=t;c<this.length;++c)this.setCell(c,r);t&&this.getWidth(t-1)===2&&this.setCellFromCodePoint(t-1,0,1,(n==null?void 0:n.fg)||0,(n==null?void 0:n.bg)||0,(n==null?void 0:n.extended)||new h.ExtendedAttrs),this.getWidth(t)!==0||this.hasContent(t)||this.setCellFromCodePoint(t,0,1,(n==null?void 0:n.fg)||0,(n==null?void 0:n.bg)||0,(n==null?void 0:n.extended)||new h.ExtendedAttrs)}replaceCells(t,o,r,n,c=!1){if(c)for(t&&this.getWidth(t-1)===2&&!this.isProtected(t-1)&&this.setCellFromCodePoint(t-1,0,1,(n==null?void 0:n.fg)||0,(n==null?void 0:n.bg)||0,(n==null?void 0:n.extended)||new h.ExtendedAttrs),o<this.length&&this.getWidth(o-1)===2&&!this.isProtected(o)&&this.setCellFromCodePoint(o,0,1,(n==null?void 0:n.fg)||0,(n==null?void 0:n.bg)||0,(n==null?void 0:n.extended)||new h.ExtendedAttrs);t<o&&t<this.length;)this.isProtected(t)||this.setCell(t,r),t++;else for(t&&this.getWidth(t-1)===2&&this.setCellFromCodePoint(t-1,0,1,(n==null?void 0:n.fg)||0,(n==null?void 0:n.bg)||0,(n==null?void 0:n.extended)||new h.ExtendedAttrs),o<this.length&&this.getWidth(o-1)===2&&this.setCellFromCodePoint(o,0,1,(n==null?void 0:n.fg)||0,(n==null?void 0:n.bg)||0,(n==null?void 0:n.extended)||new h.ExtendedAttrs);t<o&&t<this.length;)this.setCell(t++,r)}resize(t,o){if(t===this.length)return 4*this._data.length*2<this._data.buffer.byteLength;const r=3*t;if(t>this.length){if(this._data.buffer.byteLength>=4*r)this._data=new Uint32Array(this._data.buffer,0,r);else{const n=new Uint32Array(r);n.set(this._data),this._data=n}for(let n=this.length;n<t;++n)this.setCell(n,o)}else{this._data=this._data.subarray(0,r);const n=Object.keys(this._combined);for(let f=0;f<n.length;f++){const S=parseInt(n[f],10);S>=t&&delete this._combined[S]}const c=Object.keys(this._extendedAttrs);for(let f=0;f<c.length;f++){const S=parseInt(c[f],10);S>=t&&delete this._extendedAttrs[S]}}return this.length=t,4*r*2<this._data.buffer.byteLength}cleanupMemory(){if(4*this._data.length*2<this._data.buffer.byteLength){const t=new Uint32Array(this._data.length);return t.set(this._data),this._data=t,1}return 0}fill(t,o=!1){if(o)for(let r=0;r<this.length;++r)this.isProtected(r)||this.setCell(r,t);else{this._combined={},this._extendedAttrs={};for(let r=0;r<this.length;++r)this.setCell(r,t)}}copyFrom(t){this.length!==t.length?this._data=new Uint32Array(t._data):this._data.set(t._data),this.length=t.length,this._combined={};for(const o in t._combined)this._combined[o]=t._combined[o];this._extendedAttrs={};for(const o in t._extendedAttrs)this._extendedAttrs[o]=t._extendedAttrs[o];this.isWrapped=t.isWrapped}clone(){const t=new b(0);t._data=new Uint32Array(this._data),t.length=this.length;for(const o in this._combined)t._combined[o]=this._combined[o];for(const o in this._extendedAttrs)t._extendedAttrs[o]=this._extendedAttrs[o];return t.isWrapped=this.isWrapped,t}getTrimmedLength(){for(let t=this.length-1;t>=0;--t)if(4194303&this._data[3*t+0])return t+(this._data[3*t+0]>>22);return 0}getNoBgTrimmedLength(){for(let t=this.length-1;t>=0;--t)if(4194303&this._data[3*t+0]||50331648&this._data[3*t+2])return t+(this._data[3*t+0]>>22);return 0}copyCellsFrom(t,o,r,n,c){const f=t._data;if(c)for(let E=n-1;E>=0;E--){for(let u=0;u<3;u++)this._data[3*(r+E)+u]=f[3*(o+E)+u];268435456&f[3*(o+E)+2]&&(this._extendedAttrs[r+E]=t._extendedAttrs[o+E])}else for(let E=0;E<n;E++){for(let u=0;u<3;u++)this._data[3*(r+E)+u]=f[3*(o+E)+u];268435456&f[3*(o+E)+2]&&(this._extendedAttrs[r+E]=t._extendedAttrs[o+E])}const S=Object.keys(t._combined);for(let E=0;E<S.length;E++){const u=parseInt(S[E],10);u>=o&&(this._combined[u-o+r]=t._combined[u])}}translateToString(t=!1,o=0,r=this.length){t&&(r=Math.min(r,this.getTrimmedLength()));let n="";for(;o<r;){const c=this._data[3*o+0],f=2097151&c;n+=2097152&c?this._combined[o]:f?(0,p.stringFromCodePoint)(f):l.WHITESPACE_CELL_CHAR,o+=c>>22||1}return n}}i.BufferLine=b},4841:(L,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.getRangeLength=void 0,i.getRangeLength=function(a,h){if(a.start.y>a.end.y)throw new Error(`Buffer range end (${a.end.x}, ${a.end.y}) cannot be before start (${a.start.x}, ${a.start.y})`);return h*(a.end.y-a.start.y)+(a.end.x-a.start.x+1)}},4634:(L,i)=>{function a(h,_,l){if(_===h.length-1)return h[_].getTrimmedLength();const p=!h[_].hasContent(l-1)&&h[_].getWidth(l-1)===1,m=h[_+1].getWidth(0)===2;return p&&m?l-1:l}Object.defineProperty(i,"__esModule",{value:!0}),i.getWrappedLineTrimmedLength=i.reflowSmallerGetNewLineLengths=i.reflowLargerApplyNewLayout=i.reflowLargerCreateNewLayout=i.reflowLargerGetLinesToRemove=void 0,i.reflowLargerGetLinesToRemove=function(h,_,l,p,m){const b=[];for(let g=0;g<h.length-1;g++){let t=g,o=h.get(++t);if(!o.isWrapped)continue;const r=[h.get(g)];for(;t<h.length&&o.isWrapped;)r.push(o),o=h.get(++t);if(p>=g&&p<t){g+=r.length-1;continue}let n=0,c=a(r,n,_),f=1,S=0;for(;f<r.length;){const u=a(r,f,_),y=u-S,R=l-c,O=Math.min(y,R);r[n].copyCellsFrom(r[f],S,c,O,!1),c+=O,c===l&&(n++,c=0),S+=O,S===u&&(f++,S=0),c===0&&n!==0&&r[n-1].getWidth(l-1)===2&&(r[n].copyCellsFrom(r[n-1],l-1,c++,1,!1),r[n-1].setCell(l-1,m))}r[n].replaceCells(c,l,m);let E=0;for(let u=r.length-1;u>0&&(u>n||r[u].getTrimmedLength()===0);u--)E++;E>0&&(b.push(g+r.length-E),b.push(E)),g+=r.length-1}return b},i.reflowLargerCreateNewLayout=function(h,_){const l=[];let p=0,m=_[p],b=0;for(let g=0;g<h.length;g++)if(m===g){const t=_[++p];h.onDeleteEmitter.fire({index:g-b,amount:t}),g+=t-1,b+=t,m=_[++p]}else l.push(g);return{layout:l,countRemoved:b}},i.reflowLargerApplyNewLayout=function(h,_){const l=[];for(let p=0;p<_.length;p++)l.push(h.get(_[p]));for(let p=0;p<l.length;p++)h.set(p,l[p]);h.length=_.length},i.reflowSmallerGetNewLineLengths=function(h,_,l){const p=[],m=h.map((o,r)=>a(h,r,_)).reduce((o,r)=>o+r);let b=0,g=0,t=0;for(;t<m;){if(m-t<l){p.push(m-t);break}b+=l;const o=a(h,g,_);b>o&&(b-=o,g++);const r=h[g].getWidth(b-1)===2;r&&b--;const n=r?l-1:l;p.push(n),t+=n}return p},i.getWrappedLineTrimmedLength=a},5295:(L,i,a)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferSet=void 0;const h=a(8460),_=a(844),l=a(9092);class p extends _.Disposable{constructor(b,g){super(),this._optionsService=b,this._bufferService=g,this._onBufferActivate=this.register(new h.EventEmitter),this.onBufferActivate=this._onBufferActivate.event,this.reset(),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.resize(this._bufferService.cols,this._bufferService.rows))),this.register(this._optionsService.onSpecificOptionChange("tabStopWidth",()=>this.setupTabStops()))}reset(){this._normal=new l.Buffer(!0,this._optionsService,this._bufferService),this._normal.fillViewportRows(),this._alt=new l.Buffer(!1,this._optionsService,this._bufferService),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}),this.setupTabStops()}get alt(){return this._alt}get active(){return this._activeBuffer}get normal(){return this._normal}activateNormalBuffer(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clearAllMarkers(),this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))}activateAltBuffer(b){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(b),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))}resize(b,g){this._normal.resize(b,g),this._alt.resize(b,g),this.setupTabStops(b)}setupTabStops(b){this._normal.setupTabStops(b),this._alt.setupTabStops(b)}}i.BufferSet=p},511:(L,i,a)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CellData=void 0;const h=a(482),_=a(643),l=a(3734);class p extends l.AttributeData{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new l.ExtendedAttrs,this.combinedData=""}static fromCharData(b){const g=new p;return g.setFromCharData(b),g}isCombined(){return 2097152&this.content}getWidth(){return this.content>>22}getChars(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,h.stringFromCodePoint)(2097151&this.content):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}setFromCharData(b){this.fg=b[_.CHAR_DATA_ATTR_INDEX],this.bg=0;let g=!1;if(b[_.CHAR_DATA_CHAR_INDEX].length>2)g=!0;else if(b[_.CHAR_DATA_CHAR_INDEX].length===2){const t=b[_.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=t&&t<=56319){const o=b[_.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=o&&o<=57343?this.content=1024*(t-55296)+o-56320+65536|b[_.CHAR_DATA_WIDTH_INDEX]<<22:g=!0}else g=!0}else this.content=b[_.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|b[_.CHAR_DATA_WIDTH_INDEX]<<22;g&&(this.combinedData=b[_.CHAR_DATA_CHAR_INDEX],this.content=2097152|b[_.CHAR_DATA_WIDTH_INDEX]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}i.CellData=p},643:(L,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.WHITESPACE_CELL_CODE=i.WHITESPACE_CELL_WIDTH=i.WHITESPACE_CELL_CHAR=i.NULL_CELL_CODE=i.NULL_CELL_WIDTH=i.NULL_CELL_CHAR=i.CHAR_DATA_CODE_INDEX=i.CHAR_DATA_WIDTH_INDEX=i.CHAR_DATA_CHAR_INDEX=i.CHAR_DATA_ATTR_INDEX=i.DEFAULT_EXT=i.DEFAULT_ATTR=i.DEFAULT_COLOR=void 0,i.DEFAULT_COLOR=0,i.DEFAULT_ATTR=256|i.DEFAULT_COLOR<<9,i.DEFAULT_EXT=0,i.CHAR_DATA_ATTR_INDEX=0,i.CHAR_DATA_CHAR_INDEX=1,i.CHAR_DATA_WIDTH_INDEX=2,i.CHAR_DATA_CODE_INDEX=3,i.NULL_CELL_CHAR="",i.NULL_CELL_WIDTH=1,i.NULL_CELL_CODE=0,i.WHITESPACE_CELL_CHAR=" ",i.WHITESPACE_CELL_WIDTH=1,i.WHITESPACE_CELL_CODE=32},4863:(L,i,a)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Marker=void 0;const h=a(8460),_=a(844);class l{get id(){return this._id}constructor(m){this.line=m,this.isDisposed=!1,this._disposables=[],this._id=l._nextId++,this._onDispose=this.register(new h.EventEmitter),this.onDispose=this._onDispose.event}dispose(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),(0,_.disposeArray)(this._disposables),this._disposables.length=0)}register(m){return this._disposables.push(m),m}}i.Marker=l,l._nextId=1},7116:(L,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.DEFAULT_CHARSET=i.CHARSETS=void 0,i.CHARSETS={},i.DEFAULT_CHARSET=i.CHARSETS.B,i.CHARSETS[0]={"`":"◆",a:"▒",b:"␉",c:"␌",d:"␍",e:"␊",f:"°",g:"±",h:"␤",i:"␋",j:"┘",k:"┐",l:"┌",m:"└",n:"┼",o:"⎺",p:"⎻",q:"─",r:"⎼",s:"⎽",t:"├",u:"┤",v:"┴",w:"┬",x:"│",y:"≤",z:"≥","{":"π","|":"≠","}":"£","~":"·"},i.CHARSETS.A={"#":"£"},i.CHARSETS.B=void 0,i.CHARSETS[4]={"#":"£","@":"¾","[":"ij","\\":"½","]":"|","{":"¨","|":"f","}":"¼","~":"´"},i.CHARSETS.C=i.CHARSETS[5]={"[":"Ä","\\":"Ö","]":"Å","^":"Ü","`":"é","{":"ä","|":"ö","}":"å","~":"ü"},i.CHARSETS.R={"#":"£","@":"à","[":"°","\\":"ç","]":"§","{":"é","|":"ù","}":"è","~":"¨"},i.CHARSETS.Q={"@":"à","[":"â","\\":"ç","]":"ê","^":"î","`":"ô","{":"é","|":"ù","}":"è","~":"û"},i.CHARSETS.K={"@":"§","[":"Ä","\\":"Ö","]":"Ü","{":"ä","|":"ö","}":"ü","~":"ß"},i.CHARSETS.Y={"#":"£","@":"§","[":"°","\\":"ç","]":"é","`":"ù","{":"à","|":"ò","}":"è","~":"ì"},i.CHARSETS.E=i.CHARSETS[6]={"@":"Ä","[":"Æ","\\":"Ø","]":"Å","^":"Ü","`":"ä","{":"æ","|":"ø","}":"å","~":"ü"},i.CHARSETS.Z={"#":"£","@":"§","[":"¡","\\":"Ñ","]":"¿","{":"°","|":"ñ","}":"ç"},i.CHARSETS.H=i.CHARSETS[7]={"@":"É","[":"Ä","\\":"Ö","]":"Å","^":"Ü","`":"é","{":"ä","|":"ö","}":"å","~":"ü"},i.CHARSETS["="]={"#":"ù","@":"à","[":"é","\\":"ç","]":"ê","^":"î",_:"è","`":"ô","{":"ä","|":"ö","}":"ü","~":"û"}},2584:(L,i)=>{var a,h,_;Object.defineProperty(i,"__esModule",{value:!0}),i.C1_ESCAPED=i.C1=i.C0=void 0,function(l){l.NUL="\0",l.SOH="",l.STX="",l.ETX="",l.EOT="",l.ENQ="",l.ACK="",l.BEL="\x07",l.BS="\b",l.HT="	",l.LF=`
`,l.VT="\v",l.FF="\f",l.CR="\r",l.SO="",l.SI="",l.DLE="",l.DC1="",l.DC2="",l.DC3="",l.DC4="",l.NAK="",l.SYN="",l.ETB="",l.CAN="",l.EM="",l.SUB="",l.ESC="\x1B",l.FS="",l.GS="",l.RS="",l.US="",l.SP=" ",l.DEL=""}(a||(i.C0=a={})),function(l){l.PAD="",l.HOP="",l.BPH="",l.NBH="",l.IND="",l.NEL="",l.SSA="",l.ESA="",l.HTS="",l.HTJ="",l.VTS="",l.PLD="",l.PLU="",l.RI="",l.SS2="",l.SS3="",l.DCS="",l.PU1="",l.PU2="",l.STS="",l.CCH="",l.MW="",l.SPA="",l.EPA="",l.SOS="",l.SGCI="",l.SCI="",l.CSI="",l.ST="",l.OSC="",l.PM="",l.APC=""}(h||(i.C1=h={})),function(l){l.ST=`${a.ESC}\\`}(_||(i.C1_ESCAPED=_={}))},7399:(L,i,a)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.evaluateKeyboardEvent=void 0;const h=a(2584),_={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};i.evaluateKeyboardEvent=function(l,p,m,b){const g={type:0,cancel:!1,key:void 0},t=(l.shiftKey?1:0)|(l.altKey?2:0)|(l.ctrlKey?4:0)|(l.metaKey?8:0);switch(l.keyCode){case 0:l.key==="UIKeyInputUpArrow"?g.key=p?h.C0.ESC+"OA":h.C0.ESC+"[A":l.key==="UIKeyInputLeftArrow"?g.key=p?h.C0.ESC+"OD":h.C0.ESC+"[D":l.key==="UIKeyInputRightArrow"?g.key=p?h.C0.ESC+"OC":h.C0.ESC+"[C":l.key==="UIKeyInputDownArrow"&&(g.key=p?h.C0.ESC+"OB":h.C0.ESC+"[B");break;case 8:if(l.altKey){g.key=h.C0.ESC+h.C0.DEL;break}g.key=h.C0.DEL;break;case 9:if(l.shiftKey){g.key=h.C0.ESC+"[Z";break}g.key=h.C0.HT,g.cancel=!0;break;case 13:g.key=l.altKey?h.C0.ESC+h.C0.CR:h.C0.CR,g.cancel=!0;break;case 27:g.key=h.C0.ESC,l.altKey&&(g.key=h.C0.ESC+h.C0.ESC),g.cancel=!0;break;case 37:if(l.metaKey)break;t?(g.key=h.C0.ESC+"[1;"+(t+1)+"D",g.key===h.C0.ESC+"[1;3D"&&(g.key=h.C0.ESC+(m?"b":"[1;5D"))):g.key=p?h.C0.ESC+"OD":h.C0.ESC+"[D";break;case 39:if(l.metaKey)break;t?(g.key=h.C0.ESC+"[1;"+(t+1)+"C",g.key===h.C0.ESC+"[1;3C"&&(g.key=h.C0.ESC+(m?"f":"[1;5C"))):g.key=p?h.C0.ESC+"OC":h.C0.ESC+"[C";break;case 38:if(l.metaKey)break;t?(g.key=h.C0.ESC+"[1;"+(t+1)+"A",m||g.key!==h.C0.ESC+"[1;3A"||(g.key=h.C0.ESC+"[1;5A")):g.key=p?h.C0.ESC+"OA":h.C0.ESC+"[A";break;case 40:if(l.metaKey)break;t?(g.key=h.C0.ESC+"[1;"+(t+1)+"B",m||g.key!==h.C0.ESC+"[1;3B"||(g.key=h.C0.ESC+"[1;5B")):g.key=p?h.C0.ESC+"OB":h.C0.ESC+"[B";break;case 45:l.shiftKey||l.ctrlKey||(g.key=h.C0.ESC+"[2~");break;case 46:g.key=t?h.C0.ESC+"[3;"+(t+1)+"~":h.C0.ESC+"[3~";break;case 36:g.key=t?h.C0.ESC+"[1;"+(t+1)+"H":p?h.C0.ESC+"OH":h.C0.ESC+"[H";break;case 35:g.key=t?h.C0.ESC+"[1;"+(t+1)+"F":p?h.C0.ESC+"OF":h.C0.ESC+"[F";break;case 33:l.shiftKey?g.type=2:l.ctrlKey?g.key=h.C0.ESC+"[5;"+(t+1)+"~":g.key=h.C0.ESC+"[5~";break;case 34:l.shiftKey?g.type=3:l.ctrlKey?g.key=h.C0.ESC+"[6;"+(t+1)+"~":g.key=h.C0.ESC+"[6~";break;case 112:g.key=t?h.C0.ESC+"[1;"+(t+1)+"P":h.C0.ESC+"OP";break;case 113:g.key=t?h.C0.ESC+"[1;"+(t+1)+"Q":h.C0.ESC+"OQ";break;case 114:g.key=t?h.C0.ESC+"[1;"+(t+1)+"R":h.C0.ESC+"OR";break;case 115:g.key=t?h.C0.ESC+"[1;"+(t+1)+"S":h.C0.ESC+"OS";break;case 116:g.key=t?h.C0.ESC+"[15;"+(t+1)+"~":h.C0.ESC+"[15~";break;case 117:g.key=t?h.C0.ESC+"[17;"+(t+1)+"~":h.C0.ESC+"[17~";break;case 118:g.key=t?h.C0.ESC+"[18;"+(t+1)+"~":h.C0.ESC+"[18~";break;case 119:g.key=t?h.C0.ESC+"[19;"+(t+1)+"~":h.C0.ESC+"[19~";break;case 120:g.key=t?h.C0.ESC+"[20;"+(t+1)+"~":h.C0.ESC+"[20~";break;case 121:g.key=t?h.C0.ESC+"[21;"+(t+1)+"~":h.C0.ESC+"[21~";break;case 122:g.key=t?h.C0.ESC+"[23;"+(t+1)+"~":h.C0.ESC+"[23~";break;case 123:g.key=t?h.C0.ESC+"[24;"+(t+1)+"~":h.C0.ESC+"[24~";break;default:if(!l.ctrlKey||l.shiftKey||l.altKey||l.metaKey)if(m&&!b||!l.altKey||l.metaKey)!m||l.altKey||l.ctrlKey||l.shiftKey||!l.metaKey?l.key&&!l.ctrlKey&&!l.altKey&&!l.metaKey&&l.keyCode>=48&&l.key.length===1?g.key=l.key:l.key&&l.ctrlKey&&(l.key==="_"&&(g.key=h.C0.US),l.key==="@"&&(g.key=h.C0.NUL)):l.keyCode===65&&(g.type=1);else{const o=_[l.keyCode],r=o==null?void 0:o[l.shiftKey?1:0];if(r)g.key=h.C0.ESC+r;else if(l.keyCode>=65&&l.keyCode<=90){const n=l.ctrlKey?l.keyCode-64:l.keyCode+32;let c=String.fromCharCode(n);l.shiftKey&&(c=c.toUpperCase()),g.key=h.C0.ESC+c}else if(l.keyCode===32)g.key=h.C0.ESC+(l.ctrlKey?h.C0.NUL:" ");else if(l.key==="Dead"&&l.code.startsWith("Key")){let n=l.code.slice(3,4);l.shiftKey||(n=n.toLowerCase()),g.key=h.C0.ESC+n,g.cancel=!0}}else l.keyCode>=65&&l.keyCode<=90?g.key=String.fromCharCode(l.keyCode-64):l.keyCode===32?g.key=h.C0.NUL:l.keyCode>=51&&l.keyCode<=55?g.key=String.fromCharCode(l.keyCode-51+27):l.keyCode===56?g.key=h.C0.DEL:l.keyCode===219?g.key=h.C0.ESC:l.keyCode===220?g.key=h.C0.FS:l.keyCode===221&&(g.key=h.C0.GS)}return g}},482:(L,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Utf8ToUtf32=i.StringToUtf32=i.utf32ToString=i.stringFromCodePoint=void 0,i.stringFromCodePoint=function(a){return a>65535?(a-=65536,String.fromCharCode(55296+(a>>10))+String.fromCharCode(a%1024+56320)):String.fromCharCode(a)},i.utf32ToString=function(a,h=0,_=a.length){let l="";for(let p=h;p<_;++p){let m=a[p];m>65535?(m-=65536,l+=String.fromCharCode(55296+(m>>10))+String.fromCharCode(m%1024+56320)):l+=String.fromCharCode(m)}return l},i.StringToUtf32=class{constructor(){this._interim=0}clear(){this._interim=0}decode(a,h){const _=a.length;if(!_)return 0;let l=0,p=0;if(this._interim){const m=a.charCodeAt(p++);56320<=m&&m<=57343?h[l++]=1024*(this._interim-55296)+m-56320+65536:(h[l++]=this._interim,h[l++]=m),this._interim=0}for(let m=p;m<_;++m){const b=a.charCodeAt(m);if(55296<=b&&b<=56319){if(++m>=_)return this._interim=b,l;const g=a.charCodeAt(m);56320<=g&&g<=57343?h[l++]=1024*(b-55296)+g-56320+65536:(h[l++]=b,h[l++]=g)}else b!==65279&&(h[l++]=b)}return l}},i.Utf8ToUtf32=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(a,h){const _=a.length;if(!_)return 0;let l,p,m,b,g=0,t=0,o=0;if(this.interim[0]){let c=!1,f=this.interim[0];f&=(224&f)==192?31:(240&f)==224?15:7;let S,E=0;for(;(S=63&this.interim[++E])&&E<4;)f<<=6,f|=S;const u=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,y=u-E;for(;o<y;){if(o>=_)return 0;if(S=a[o++],(192&S)!=128){o--,c=!0;break}this.interim[E++]=S,f<<=6,f|=63&S}c||(u===2?f<128?o--:h[g++]=f:u===3?f<2048||f>=55296&&f<=57343||f===65279||(h[g++]=f):f<65536||f>1114111||(h[g++]=f)),this.interim.fill(0)}const r=_-4;let n=o;for(;n<_;){for(;!(!(n<r)||128&(l=a[n])||128&(p=a[n+1])||128&(m=a[n+2])||128&(b=a[n+3]));)h[g++]=l,h[g++]=p,h[g++]=m,h[g++]=b,n+=4;if(l=a[n++],l<128)h[g++]=l;else if((224&l)==192){if(n>=_)return this.interim[0]=l,g;if(p=a[n++],(192&p)!=128){n--;continue}if(t=(31&l)<<6|63&p,t<128){n--;continue}h[g++]=t}else if((240&l)==224){if(n>=_)return this.interim[0]=l,g;if(p=a[n++],(192&p)!=128){n--;continue}if(n>=_)return this.interim[0]=l,this.interim[1]=p,g;if(m=a[n++],(192&m)!=128){n--;continue}if(t=(15&l)<<12|(63&p)<<6|63&m,t<2048||t>=55296&&t<=57343||t===65279)continue;h[g++]=t}else if((248&l)==240){if(n>=_)return this.interim[0]=l,g;if(p=a[n++],(192&p)!=128){n--;continue}if(n>=_)return this.interim[0]=l,this.interim[1]=p,g;if(m=a[n++],(192&m)!=128){n--;continue}if(n>=_)return this.interim[0]=l,this.interim[1]=p,this.interim[2]=m,g;if(b=a[n++],(192&b)!=128){n--;continue}if(t=(7&l)<<18|(63&p)<<12|(63&m)<<6|63&b,t<65536||t>1114111)continue;h[g++]=t}}return g}}},225:(L,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.UnicodeV6=void 0;const a=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],h=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]];let _;i.UnicodeV6=class{constructor(){if(this.version="6",!_){_=new Uint8Array(65536),_.fill(1),_[0]=0,_.fill(0,1,32),_.fill(0,127,160),_.fill(2,4352,4448),_[9001]=2,_[9002]=2,_.fill(2,11904,42192),_[12351]=1,_.fill(2,44032,55204),_.fill(2,63744,64256),_.fill(2,65040,65050),_.fill(2,65072,65136),_.fill(2,65280,65377),_.fill(2,65504,65511);for(let l=0;l<a.length;++l)_.fill(0,a[l][0],a[l][1]+1)}}wcwidth(l){return l<32?0:l<127?1:l<65536?_[l]:function(p,m){let b,g=0,t=m.length-1;if(p<m[0][0]||p>m[t][1])return!1;for(;t>=g;)if(b=g+t>>1,p>m[b][1])g=b+1;else{if(!(p<m[b][0]))return!0;t=b-1}return!1}(l,h)?0:l>=131072&&l<=196605||l>=196608&&l<=262141?2:1}}},5981:(L,i,a)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.WriteBuffer=void 0;const h=a(8460),_=a(844);class l extends _.Disposable{constructor(m){super(),this._action=m,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0,this._isSyncWriting=!1,this._syncCalls=0,this._didUserInput=!1,this._onWriteParsed=this.register(new h.EventEmitter),this.onWriteParsed=this._onWriteParsed.event}handleUserInput(){this._didUserInput=!0}writeSync(m,b){if(b!==void 0&&this._syncCalls>b)return void(this._syncCalls=0);if(this._pendingData+=m.length,this._writeBuffer.push(m),this._callbacks.push(void 0),this._syncCalls++,this._isSyncWriting)return;let g;for(this._isSyncWriting=!0;g=this._writeBuffer.shift();){this._action(g);const t=this._callbacks.shift();t&&t()}this._pendingData=0,this._bufferOffset=2147483647,this._isSyncWriting=!1,this._syncCalls=0}write(m,b){if(this._pendingData>5e7)throw new Error("write data discarded, use flow control to avoid losing data");if(!this._writeBuffer.length){if(this._bufferOffset=0,this._didUserInput)return this._didUserInput=!1,this._pendingData+=m.length,this._writeBuffer.push(m),this._callbacks.push(b),void this._innerWrite();setTimeout(()=>this._innerWrite())}this._pendingData+=m.length,this._writeBuffer.push(m),this._callbacks.push(b)}_innerWrite(m=0,b=!0){const g=m||Date.now();for(;this._writeBuffer.length>this._bufferOffset;){const t=this._writeBuffer[this._bufferOffset],o=this._action(t,b);if(o){const n=c=>Date.now()-g>=12?setTimeout(()=>this._innerWrite(0,c)):this._innerWrite(g,c);return void o.catch(c=>(queueMicrotask(()=>{throw c}),Promise.resolve(!1))).then(n)}const r=this._callbacks[this._bufferOffset];if(r&&r(),this._bufferOffset++,this._pendingData-=t.length,Date.now()-g>=12)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>50&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout(()=>this._innerWrite())):(this._writeBuffer.length=0,this._callbacks.length=0,this._pendingData=0,this._bufferOffset=0),this._onWriteParsed.fire()}}i.WriteBuffer=l},5941:(L,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.toRgbString=i.parseColor=void 0;const a=/^([\da-f])\/([\da-f])\/([\da-f])$|^([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})$|^([\da-f]{3})\/([\da-f]{3})\/([\da-f]{3})$|^([\da-f]{4})\/([\da-f]{4})\/([\da-f]{4})$/,h=/^[\da-f]+$/;function _(l,p){const m=l.toString(16),b=m.length<2?"0"+m:m;switch(p){case 4:return m[0];case 8:return b;case 12:return(b+b).slice(0,3);default:return b+b}}i.parseColor=function(l){if(!l)return;let p=l.toLowerCase();if(p.indexOf("rgb:")===0){p=p.slice(4);const m=a.exec(p);if(m){const b=m[1]?15:m[4]?255:m[7]?4095:65535;return[Math.round(parseInt(m[1]||m[4]||m[7]||m[10],16)/b*255),Math.round(parseInt(m[2]||m[5]||m[8]||m[11],16)/b*255),Math.round(parseInt(m[3]||m[6]||m[9]||m[12],16)/b*255)]}}else if(p.indexOf("#")===0&&(p=p.slice(1),h.exec(p)&&[3,6,9,12].includes(p.length))){const m=p.length/3,b=[0,0,0];for(let g=0;g<3;++g){const t=parseInt(p.slice(m*g,m*g+m),16);b[g]=m===1?t<<4:m===2?t:m===3?t>>4:t>>8}return b}},i.toRgbString=function(l,p=16){const[m,b,g]=l;return`rgb:${_(m,p)}/${_(b,p)}/${_(g,p)}`}},5770:(L,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.PAYLOAD_LIMIT=void 0,i.PAYLOAD_LIMIT=1e7},6351:(L,i,a)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.DcsHandler=i.DcsParser=void 0;const h=a(482),_=a(8742),l=a(5770),p=[];i.DcsParser=class{constructor(){this._handlers=Object.create(null),this._active=p,this._ident=0,this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=p}registerHandler(b,g){this._handlers[b]===void 0&&(this._handlers[b]=[]);const t=this._handlers[b];return t.push(g),{dispose:()=>{const o=t.indexOf(g);o!==-1&&t.splice(o,1)}}}clearHandler(b){this._handlers[b]&&delete this._handlers[b]}setHandlerFallback(b){this._handlerFb=b}reset(){if(this._active.length)for(let b=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;b>=0;--b)this._active[b].unhook(!1);this._stack.paused=!1,this._active=p,this._ident=0}hook(b,g){if(this.reset(),this._ident=b,this._active=this._handlers[b]||p,this._active.length)for(let t=this._active.length-1;t>=0;t--)this._active[t].hook(g);else this._handlerFb(this._ident,"HOOK",g)}put(b,g,t){if(this._active.length)for(let o=this._active.length-1;o>=0;o--)this._active[o].put(b,g,t);else this._handlerFb(this._ident,"PUT",(0,h.utf32ToString)(b,g,t))}unhook(b,g=!0){if(this._active.length){let t=!1,o=this._active.length-1,r=!1;if(this._stack.paused&&(o=this._stack.loopPosition-1,t=g,r=this._stack.fallThrough,this._stack.paused=!1),!r&&t===!1){for(;o>=0&&(t=this._active[o].unhook(b),t!==!0);o--)if(t instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=o,this._stack.fallThrough=!1,t;o--}for(;o>=0;o--)if(t=this._active[o].unhook(!1),t instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=o,this._stack.fallThrough=!0,t}else this._handlerFb(this._ident,"UNHOOK",b);this._active=p,this._ident=0}};const m=new _.Params;m.addParam(0),i.DcsHandler=class{constructor(b){this._handler=b,this._data="",this._params=m,this._hitLimit=!1}hook(b){this._params=b.length>1||b.params[0]?b.clone():m,this._data="",this._hitLimit=!1}put(b,g,t){this._hitLimit||(this._data+=(0,h.utf32ToString)(b,g,t),this._data.length>l.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}unhook(b){let g=!1;if(this._hitLimit)g=!1;else if(b&&(g=this._handler(this._data,this._params),g instanceof Promise))return g.then(t=>(this._params=m,this._data="",this._hitLimit=!1,t));return this._params=m,this._data="",this._hitLimit=!1,g}}},2015:(L,i,a)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.EscapeSequenceParser=i.VT500_TRANSITION_TABLE=i.TransitionTable=void 0;const h=a(844),_=a(8742),l=a(6242),p=a(6351);class m{constructor(o){this.table=new Uint8Array(o)}setDefault(o,r){this.table.fill(o<<4|r)}add(o,r,n,c){this.table[r<<8|o]=n<<4|c}addMany(o,r,n,c){for(let f=0;f<o.length;f++)this.table[r<<8|o[f]]=n<<4|c}}i.TransitionTable=m;const b=160;i.VT500_TRANSITION_TABLE=function(){const t=new m(4095),o=Array.apply(null,Array(256)).map((E,u)=>u),r=(E,u)=>o.slice(E,u),n=r(32,127),c=r(0,24);c.push(25),c.push.apply(c,r(28,32));const f=r(0,14);let S;for(S in t.setDefault(1,0),t.addMany(n,0,2,0),f)t.addMany([24,26,153,154],S,3,0),t.addMany(r(128,144),S,3,0),t.addMany(r(144,152),S,3,0),t.add(156,S,0,0),t.add(27,S,11,1),t.add(157,S,4,8),t.addMany([152,158,159],S,0,7),t.add(155,S,11,3),t.add(144,S,11,9);return t.addMany(c,0,3,0),t.addMany(c,1,3,1),t.add(127,1,0,1),t.addMany(c,8,0,8),t.addMany(c,3,3,3),t.add(127,3,0,3),t.addMany(c,4,3,4),t.add(127,4,0,4),t.addMany(c,6,3,6),t.addMany(c,5,3,5),t.add(127,5,0,5),t.addMany(c,2,3,2),t.add(127,2,0,2),t.add(93,1,4,8),t.addMany(n,8,5,8),t.add(127,8,5,8),t.addMany([156,27,24,26,7],8,6,0),t.addMany(r(28,32),8,0,8),t.addMany([88,94,95],1,0,7),t.addMany(n,7,0,7),t.addMany(c,7,0,7),t.add(156,7,0,0),t.add(127,7,0,7),t.add(91,1,11,3),t.addMany(r(64,127),3,7,0),t.addMany(r(48,60),3,8,4),t.addMany([60,61,62,63],3,9,4),t.addMany(r(48,60),4,8,4),t.addMany(r(64,127),4,7,0),t.addMany([60,61,62,63],4,0,6),t.addMany(r(32,64),6,0,6),t.add(127,6,0,6),t.addMany(r(64,127),6,0,0),t.addMany(r(32,48),3,9,5),t.addMany(r(32,48),5,9,5),t.addMany(r(48,64),5,0,6),t.addMany(r(64,127),5,7,0),t.addMany(r(32,48),4,9,5),t.addMany(r(32,48),1,9,2),t.addMany(r(32,48),2,9,2),t.addMany(r(48,127),2,10,0),t.addMany(r(48,80),1,10,0),t.addMany(r(81,88),1,10,0),t.addMany([89,90,92],1,10,0),t.addMany(r(96,127),1,10,0),t.add(80,1,11,9),t.addMany(c,9,0,9),t.add(127,9,0,9),t.addMany(r(28,32),9,0,9),t.addMany(r(32,48),9,9,12),t.addMany(r(48,60),9,8,10),t.addMany([60,61,62,63],9,9,10),t.addMany(c,11,0,11),t.addMany(r(32,128),11,0,11),t.addMany(r(28,32),11,0,11),t.addMany(c,10,0,10),t.add(127,10,0,10),t.addMany(r(28,32),10,0,10),t.addMany(r(48,60),10,8,10),t.addMany([60,61,62,63],10,0,11),t.addMany(r(32,48),10,9,12),t.addMany(c,12,0,12),t.add(127,12,0,12),t.addMany(r(28,32),12,0,12),t.addMany(r(32,48),12,9,12),t.addMany(r(48,64),12,0,11),t.addMany(r(64,127),12,12,13),t.addMany(r(64,127),10,12,13),t.addMany(r(64,127),9,12,13),t.addMany(c,13,13,13),t.addMany(n,13,13,13),t.add(127,13,0,13),t.addMany([27,156,24,26],13,14,0),t.add(b,0,2,0),t.add(b,8,5,8),t.add(b,6,0,6),t.add(b,11,0,11),t.add(b,13,13,13),t}();class g extends h.Disposable{constructor(o=i.VT500_TRANSITION_TABLE){super(),this._transitions=o,this._parseStack={state:0,handlers:[],handlerPos:0,transition:0,chunkPos:0},this.initialState=0,this.currentState=this.initialState,this._params=new _.Params,this._params.addParam(0),this._collect=0,this.precedingCodepoint=0,this._printHandlerFb=(r,n,c)=>{},this._executeHandlerFb=r=>{},this._csiHandlerFb=(r,n)=>{},this._escHandlerFb=r=>{},this._errorHandlerFb=r=>r,this._printHandler=this._printHandlerFb,this._executeHandlers=Object.create(null),this._csiHandlers=Object.create(null),this._escHandlers=Object.create(null),this.register((0,h.toDisposable)(()=>{this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null)})),this._oscParser=this.register(new l.OscParser),this._dcsParser=this.register(new p.DcsParser),this._errorHandler=this._errorHandlerFb,this.registerEscHandler({final:"\\"},()=>!0)}_identifier(o,r=[64,126]){let n=0;if(o.prefix){if(o.prefix.length>1)throw new Error("only one byte as prefix supported");if(n=o.prefix.charCodeAt(0),n&&60>n||n>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(o.intermediates){if(o.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(let f=0;f<o.intermediates.length;++f){const S=o.intermediates.charCodeAt(f);if(32>S||S>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");n<<=8,n|=S}}if(o.final.length!==1)throw new Error("final must be a single byte");const c=o.final.charCodeAt(0);if(r[0]>c||c>r[1])throw new Error(`final must be in range ${r[0]} .. ${r[1]}`);return n<<=8,n|=c,n}identToString(o){const r=[];for(;o;)r.push(String.fromCharCode(255&o)),o>>=8;return r.reverse().join("")}setPrintHandler(o){this._printHandler=o}clearPrintHandler(){this._printHandler=this._printHandlerFb}registerEscHandler(o,r){const n=this._identifier(o,[48,126]);this._escHandlers[n]===void 0&&(this._escHandlers[n]=[]);const c=this._escHandlers[n];return c.push(r),{dispose:()=>{const f=c.indexOf(r);f!==-1&&c.splice(f,1)}}}clearEscHandler(o){this._escHandlers[this._identifier(o,[48,126])]&&delete this._escHandlers[this._identifier(o,[48,126])]}setEscHandlerFallback(o){this._escHandlerFb=o}setExecuteHandler(o,r){this._executeHandlers[o.charCodeAt(0)]=r}clearExecuteHandler(o){this._executeHandlers[o.charCodeAt(0)]&&delete this._executeHandlers[o.charCodeAt(0)]}setExecuteHandlerFallback(o){this._executeHandlerFb=o}registerCsiHandler(o,r){const n=this._identifier(o);this._csiHandlers[n]===void 0&&(this._csiHandlers[n]=[]);const c=this._csiHandlers[n];return c.push(r),{dispose:()=>{const f=c.indexOf(r);f!==-1&&c.splice(f,1)}}}clearCsiHandler(o){this._csiHandlers[this._identifier(o)]&&delete this._csiHandlers[this._identifier(o)]}setCsiHandlerFallback(o){this._csiHandlerFb=o}registerDcsHandler(o,r){return this._dcsParser.registerHandler(this._identifier(o),r)}clearDcsHandler(o){this._dcsParser.clearHandler(this._identifier(o))}setDcsHandlerFallback(o){this._dcsParser.setHandlerFallback(o)}registerOscHandler(o,r){return this._oscParser.registerHandler(o,r)}clearOscHandler(o){this._oscParser.clearHandler(o)}setOscHandlerFallback(o){this._oscParser.setHandlerFallback(o)}setErrorHandler(o){this._errorHandler=o}clearErrorHandler(){this._errorHandler=this._errorHandlerFb}reset(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0,this._parseStack.state!==0&&(this._parseStack.state=2,this._parseStack.handlers=[])}_preserveStack(o,r,n,c,f){this._parseStack.state=o,this._parseStack.handlers=r,this._parseStack.handlerPos=n,this._parseStack.transition=c,this._parseStack.chunkPos=f}parse(o,r,n){let c,f=0,S=0,E=0;if(this._parseStack.state)if(this._parseStack.state===2)this._parseStack.state=0,E=this._parseStack.chunkPos+1;else{if(n===void 0||this._parseStack.state===1)throw this._parseStack.state=1,new Error("improper continuation due to previous async handler, giving up parsing");const u=this._parseStack.handlers;let y=this._parseStack.handlerPos-1;switch(this._parseStack.state){case 3:if(n===!1&&y>-1){for(;y>=0&&(c=u[y](this._params),c!==!0);y--)if(c instanceof Promise)return this._parseStack.handlerPos=y,c}this._parseStack.handlers=[];break;case 4:if(n===!1&&y>-1){for(;y>=0&&(c=u[y](),c!==!0);y--)if(c instanceof Promise)return this._parseStack.handlerPos=y,c}this._parseStack.handlers=[];break;case 6:if(f=o[this._parseStack.chunkPos],c=this._dcsParser.unhook(f!==24&&f!==26,n),c)return c;f===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break;case 5:if(f=o[this._parseStack.chunkPos],c=this._oscParser.end(f!==24&&f!==26,n),c)return c;f===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0}this._parseStack.state=0,E=this._parseStack.chunkPos+1,this.precedingCodepoint=0,this.currentState=15&this._parseStack.transition}for(let u=E;u<r;++u){switch(f=o[u],S=this._transitions.table[this.currentState<<8|(f<160?f:b)],S>>4){case 2:for(let M=u+1;;++M){if(M>=r||(f=o[M])<32||f>126&&f<b){this._printHandler(o,u,M),u=M-1;break}if(++M>=r||(f=o[M])<32||f>126&&f<b){this._printHandler(o,u,M),u=M-1;break}if(++M>=r||(f=o[M])<32||f>126&&f<b){this._printHandler(o,u,M),u=M-1;break}if(++M>=r||(f=o[M])<32||f>126&&f<b){this._printHandler(o,u,M),u=M-1;break}}break;case 3:this._executeHandlers[f]?this._executeHandlers[f]():this._executeHandlerFb(f),this.precedingCodepoint=0;break;case 0:break;case 1:if(this._errorHandler({position:u,code:f,currentState:this.currentState,collect:this._collect,params:this._params,abort:!1}).abort)return;break;case 7:const y=this._csiHandlers[this._collect<<8|f];let R=y?y.length-1:-1;for(;R>=0&&(c=y[R](this._params),c!==!0);R--)if(c instanceof Promise)return this._preserveStack(3,y,R,S,u),c;R<0&&this._csiHandlerFb(this._collect<<8|f,this._params),this.precedingCodepoint=0;break;case 8:do switch(f){case 59:this._params.addParam(0);break;case 58:this._params.addSubParam(-1);break;default:this._params.addDigit(f-48)}while(++u<r&&(f=o[u])>47&&f<60);u--;break;case 9:this._collect<<=8,this._collect|=f;break;case 10:const O=this._escHandlers[this._collect<<8|f];let A=O?O.length-1:-1;for(;A>=0&&(c=O[A](),c!==!0);A--)if(c instanceof Promise)return this._preserveStack(4,O,A,S,u),c;A<0&&this._escHandlerFb(this._collect<<8|f),this.precedingCodepoint=0;break;case 11:this._params.reset(),this._params.addParam(0),this._collect=0;break;case 12:this._dcsParser.hook(this._collect<<8|f,this._params);break;case 13:for(let M=u+1;;++M)if(M>=r||(f=o[M])===24||f===26||f===27||f>127&&f<b){this._dcsParser.put(o,u,M),u=M-1;break}break;case 14:if(c=this._dcsParser.unhook(f!==24&&f!==26),c)return this._preserveStack(6,[],0,S,u),c;f===27&&(S|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0;break;case 4:this._oscParser.start();break;case 5:for(let M=u+1;;M++)if(M>=r||(f=o[M])<32||f>127&&f<b){this._oscParser.put(o,u,M),u=M-1;break}break;case 6:if(c=this._oscParser.end(f!==24&&f!==26),c)return this._preserveStack(5,[],0,S,u),c;f===27&&(S|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0}this.currentState=15&S}}}i.EscapeSequenceParser=g},6242:(L,i,a)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.OscHandler=i.OscParser=void 0;const h=a(5770),_=a(482),l=[];i.OscParser=class{constructor(){this._state=0,this._active=l,this._id=-1,this._handlers=Object.create(null),this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}registerHandler(p,m){this._handlers[p]===void 0&&(this._handlers[p]=[]);const b=this._handlers[p];return b.push(m),{dispose:()=>{const g=b.indexOf(m);g!==-1&&b.splice(g,1)}}}clearHandler(p){this._handlers[p]&&delete this._handlers[p]}setHandlerFallback(p){this._handlerFb=p}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=l}reset(){if(this._state===2)for(let p=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;p>=0;--p)this._active[p].end(!1);this._stack.paused=!1,this._active=l,this._id=-1,this._state=0}_start(){if(this._active=this._handlers[this._id]||l,this._active.length)for(let p=this._active.length-1;p>=0;p--)this._active[p].start();else this._handlerFb(this._id,"START")}_put(p,m,b){if(this._active.length)for(let g=this._active.length-1;g>=0;g--)this._active[g].put(p,m,b);else this._handlerFb(this._id,"PUT",(0,_.utf32ToString)(p,m,b))}start(){this.reset(),this._state=1}put(p,m,b){if(this._state!==3){if(this._state===1)for(;m<b;){const g=p[m++];if(g===59){this._state=2,this._start();break}if(g<48||57<g)return void(this._state=3);this._id===-1&&(this._id=0),this._id=10*this._id+g-48}this._state===2&&b-m>0&&this._put(p,m,b)}}end(p,m=!0){if(this._state!==0){if(this._state!==3)if(this._state===1&&this._start(),this._active.length){let b=!1,g=this._active.length-1,t=!1;if(this._stack.paused&&(g=this._stack.loopPosition-1,b=m,t=this._stack.fallThrough,this._stack.paused=!1),!t&&b===!1){for(;g>=0&&(b=this._active[g].end(p),b!==!0);g--)if(b instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=g,this._stack.fallThrough=!1,b;g--}for(;g>=0;g--)if(b=this._active[g].end(!1),b instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=g,this._stack.fallThrough=!0,b}else this._handlerFb(this._id,"END",p);this._active=l,this._id=-1,this._state=0}}},i.OscHandler=class{constructor(p){this._handler=p,this._data="",this._hitLimit=!1}start(){this._data="",this._hitLimit=!1}put(p,m,b){this._hitLimit||(this._data+=(0,_.utf32ToString)(p,m,b),this._data.length>h.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}end(p){let m=!1;if(this._hitLimit)m=!1;else if(p&&(m=this._handler(this._data),m instanceof Promise))return m.then(b=>(this._data="",this._hitLimit=!1,b));return this._data="",this._hitLimit=!1,m}}},8742:(L,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Params=void 0;const a=2147483647;class h{static fromArray(l){const p=new h;if(!l.length)return p;for(let m=Array.isArray(l[0])?1:0;m<l.length;++m){const b=l[m];if(Array.isArray(b))for(let g=0;g<b.length;++g)p.addSubParam(b[g]);else p.addParam(b)}return p}constructor(l=32,p=32){if(this.maxLength=l,this.maxSubParamsLength=p,p>256)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(l),this.length=0,this._subParams=new Int32Array(p),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(l),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}clone(){const l=new h(this.maxLength,this.maxSubParamsLength);return l.params.set(this.params),l.length=this.length,l._subParams.set(this._subParams),l._subParamsLength=this._subParamsLength,l._subParamsIdx.set(this._subParamsIdx),l._rejectDigits=this._rejectDigits,l._rejectSubDigits=this._rejectSubDigits,l._digitIsSub=this._digitIsSub,l}toArray(){const l=[];for(let p=0;p<this.length;++p){l.push(this.params[p]);const m=this._subParamsIdx[p]>>8,b=255&this._subParamsIdx[p];b-m>0&&l.push(Array.prototype.slice.call(this._subParams,m,b))}return l}reset(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}addParam(l){if(this._digitIsSub=!1,this.length>=this.maxLength)this._rejectDigits=!0;else{if(l<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=l>a?a:l}}addSubParam(l){if(this._digitIsSub=!0,this.length)if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength)this._rejectSubDigits=!0;else{if(l<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=l>a?a:l,this._subParamsIdx[this.length-1]++}}hasSubParams(l){return(255&this._subParamsIdx[l])-(this._subParamsIdx[l]>>8)>0}getSubParams(l){const p=this._subParamsIdx[l]>>8,m=255&this._subParamsIdx[l];return m-p>0?this._subParams.subarray(p,m):null}getSubParamsAll(){const l={};for(let p=0;p<this.length;++p){const m=this._subParamsIdx[p]>>8,b=255&this._subParamsIdx[p];b-m>0&&(l[p]=this._subParams.slice(m,b))}return l}addDigit(l){let p;if(this._rejectDigits||!(p=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)return;const m=this._digitIsSub?this._subParams:this.params,b=m[p-1];m[p-1]=~b?Math.min(10*b+l,a):l}}i.Params=h},5741:(L,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.AddonManager=void 0,i.AddonManager=class{constructor(){this._addons=[]}dispose(){for(let a=this._addons.length-1;a>=0;a--)this._addons[a].instance.dispose()}loadAddon(a,h){const _={instance:h,dispose:h.dispose,isDisposed:!1};this._addons.push(_),h.dispose=()=>this._wrappedAddonDispose(_),h.activate(a)}_wrappedAddonDispose(a){if(a.isDisposed)return;let h=-1;for(let _=0;_<this._addons.length;_++)if(this._addons[_]===a){h=_;break}if(h===-1)throw new Error("Could not dispose an addon that has not been loaded");a.isDisposed=!0,a.dispose.apply(a.instance),this._addons.splice(h,1)}}},8771:(L,i,a)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferApiView=void 0;const h=a(3785),_=a(511);i.BufferApiView=class{constructor(l,p){this._buffer=l,this.type=p}init(l){return this._buffer=l,this}get cursorY(){return this._buffer.y}get cursorX(){return this._buffer.x}get viewportY(){return this._buffer.ydisp}get baseY(){return this._buffer.ybase}get length(){return this._buffer.lines.length}getLine(l){const p=this._buffer.lines.get(l);if(p)return new h.BufferLineApiView(p)}getNullCell(){return new _.CellData}}},3785:(L,i,a)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferLineApiView=void 0;const h=a(511);i.BufferLineApiView=class{constructor(_){this._line=_}get isWrapped(){return this._line.isWrapped}get length(){return this._line.length}getCell(_,l){if(!(_<0||_>=this._line.length))return l?(this._line.loadCell(_,l),l):this._line.loadCell(_,new h.CellData)}translateToString(_,l,p){return this._line.translateToString(_,l,p)}}},8285:(L,i,a)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferNamespaceApi=void 0;const h=a(8771),_=a(8460),l=a(844);class p extends l.Disposable{constructor(b){super(),this._core=b,this._onBufferChange=this.register(new _.EventEmitter),this.onBufferChange=this._onBufferChange.event,this._normal=new h.BufferApiView(this._core.buffers.normal,"normal"),this._alternate=new h.BufferApiView(this._core.buffers.alt,"alternate"),this._core.buffers.onBufferActivate(()=>this._onBufferChange.fire(this.active))}get active(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")}get normal(){return this._normal.init(this._core.buffers.normal)}get alternate(){return this._alternate.init(this._core.buffers.alt)}}i.BufferNamespaceApi=p},7975:(L,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ParserApi=void 0,i.ParserApi=class{constructor(a){this._core=a}registerCsiHandler(a,h){return this._core.registerCsiHandler(a,_=>h(_.toArray()))}addCsiHandler(a,h){return this.registerCsiHandler(a,h)}registerDcsHandler(a,h){return this._core.registerDcsHandler(a,(_,l)=>h(_,l.toArray()))}addDcsHandler(a,h){return this.registerDcsHandler(a,h)}registerEscHandler(a,h){return this._core.registerEscHandler(a,h)}addEscHandler(a,h){return this.registerEscHandler(a,h)}registerOscHandler(a,h){return this._core.registerOscHandler(a,h)}addOscHandler(a,h){return this.registerOscHandler(a,h)}}},7090:(L,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.UnicodeApi=void 0,i.UnicodeApi=class{constructor(a){this._core=a}register(a){this._core.unicodeService.register(a)}get versions(){return this._core.unicodeService.versions}get activeVersion(){return this._core.unicodeService.activeVersion}set activeVersion(a){this._core.unicodeService.activeVersion=a}}},744:function(L,i,a){var h=this&&this.__decorate||function(t,o,r,n){var c,f=arguments.length,S=f<3?o:n===null?n=Object.getOwnPropertyDescriptor(o,r):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(t,o,r,n);else for(var E=t.length-1;E>=0;E--)(c=t[E])&&(S=(f<3?c(S):f>3?c(o,r,S):c(o,r))||S);return f>3&&S&&Object.defineProperty(o,r,S),S},_=this&&this.__param||function(t,o){return function(r,n){o(r,n,t)}};Object.defineProperty(i,"__esModule",{value:!0}),i.BufferService=i.MINIMUM_ROWS=i.MINIMUM_COLS=void 0;const l=a(8460),p=a(844),m=a(5295),b=a(2585);i.MINIMUM_COLS=2,i.MINIMUM_ROWS=1;let g=i.BufferService=class extends p.Disposable{get buffer(){return this.buffers.active}constructor(t){super(),this.isUserScrolling=!1,this._onResize=this.register(new l.EventEmitter),this.onResize=this._onResize.event,this._onScroll=this.register(new l.EventEmitter),this.onScroll=this._onScroll.event,this.cols=Math.max(t.rawOptions.cols||0,i.MINIMUM_COLS),this.rows=Math.max(t.rawOptions.rows||0,i.MINIMUM_ROWS),this.buffers=this.register(new m.BufferSet(t,this))}resize(t,o){this.cols=t,this.rows=o,this.buffers.resize(t,o),this._onResize.fire({cols:t,rows:o})}reset(){this.buffers.reset(),this.isUserScrolling=!1}scroll(t,o=!1){const r=this.buffer;let n;n=this._cachedBlankLine,n&&n.length===this.cols&&n.getFg(0)===t.fg&&n.getBg(0)===t.bg||(n=r.getBlankLine(t,o),this._cachedBlankLine=n),n.isWrapped=o;const c=r.ybase+r.scrollTop,f=r.ybase+r.scrollBottom;if(r.scrollTop===0){const S=r.lines.isFull;f===r.lines.length-1?S?r.lines.recycle().copyFrom(n):r.lines.push(n.clone()):r.lines.splice(f+1,0,n.clone()),S?this.isUserScrolling&&(r.ydisp=Math.max(r.ydisp-1,0)):(r.ybase++,this.isUserScrolling||r.ydisp++)}else{const S=f-c+1;r.lines.shiftElements(c+1,S-1,-1),r.lines.set(f,n.clone())}this.isUserScrolling||(r.ydisp=r.ybase),this._onScroll.fire(r.ydisp)}scrollLines(t,o,r){const n=this.buffer;if(t<0){if(n.ydisp===0)return;this.isUserScrolling=!0}else t+n.ydisp>=n.ybase&&(this.isUserScrolling=!1);const c=n.ydisp;n.ydisp=Math.max(Math.min(n.ydisp+t,n.ybase),0),c!==n.ydisp&&(o||this._onScroll.fire(n.ydisp))}};i.BufferService=g=h([_(0,b.IOptionsService)],g)},7994:(L,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CharsetService=void 0,i.CharsetService=class{constructor(){this.glevel=0,this._charsets=[]}reset(){this.charset=void 0,this._charsets=[],this.glevel=0}setgLevel(a){this.glevel=a,this.charset=this._charsets[a]}setgCharset(a,h){this._charsets[a]=h,this.glevel===a&&(this.charset=h)}}},1753:function(L,i,a){var h=this&&this.__decorate||function(n,c,f,S){var E,u=arguments.length,y=u<3?c:S===null?S=Object.getOwnPropertyDescriptor(c,f):S;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(n,c,f,S);else for(var R=n.length-1;R>=0;R--)(E=n[R])&&(y=(u<3?E(y):u>3?E(c,f,y):E(c,f))||y);return u>3&&y&&Object.defineProperty(c,f,y),y},_=this&&this.__param||function(n,c){return function(f,S){c(f,S,n)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CoreMouseService=void 0;const l=a(2585),p=a(8460),m=a(844),b={NONE:{events:0,restrict:()=>!1},X10:{events:1,restrict:n=>n.button!==4&&n.action===1&&(n.ctrl=!1,n.alt=!1,n.shift=!1,!0)},VT200:{events:19,restrict:n=>n.action!==32},DRAG:{events:23,restrict:n=>n.action!==32||n.button!==3},ANY:{events:31,restrict:n=>!0}};function g(n,c){let f=(n.ctrl?16:0)|(n.shift?4:0)|(n.alt?8:0);return n.button===4?(f|=64,f|=n.action):(f|=3&n.button,4&n.button&&(f|=64),8&n.button&&(f|=128),n.action===32?f|=32:n.action!==0||c||(f|=3)),f}const t=String.fromCharCode,o={DEFAULT:n=>{const c=[g(n,!1)+32,n.col+32,n.row+32];return c[0]>255||c[1]>255||c[2]>255?"":`\x1B[M${t(c[0])}${t(c[1])}${t(c[2])}`},SGR:n=>{const c=n.action===0&&n.button!==4?"m":"M";return`\x1B[<${g(n,!0)};${n.col};${n.row}${c}`},SGR_PIXELS:n=>{const c=n.action===0&&n.button!==4?"m":"M";return`\x1B[<${g(n,!0)};${n.x};${n.y}${c}`}};let r=i.CoreMouseService=class extends m.Disposable{constructor(n,c){super(),this._bufferService=n,this._coreService=c,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._lastEvent=null,this._onProtocolChange=this.register(new p.EventEmitter),this.onProtocolChange=this._onProtocolChange.event;for(const f of Object.keys(b))this.addProtocol(f,b[f]);for(const f of Object.keys(o))this.addEncoding(f,o[f]);this.reset()}addProtocol(n,c){this._protocols[n]=c}addEncoding(n,c){this._encodings[n]=c}get activeProtocol(){return this._activeProtocol}get areMouseEventsActive(){return this._protocols[this._activeProtocol].events!==0}set activeProtocol(n){if(!this._protocols[n])throw new Error(`unknown protocol "${n}"`);this._activeProtocol=n,this._onProtocolChange.fire(this._protocols[n].events)}get activeEncoding(){return this._activeEncoding}set activeEncoding(n){if(!this._encodings[n])throw new Error(`unknown encoding "${n}"`);this._activeEncoding=n}reset(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null}triggerMouseEvent(n){if(n.col<0||n.col>=this._bufferService.cols||n.row<0||n.row>=this._bufferService.rows||n.button===4&&n.action===32||n.button===3&&n.action!==32||n.button!==4&&(n.action===2||n.action===3)||(n.col++,n.row++,n.action===32&&this._lastEvent&&this._equalEvents(this._lastEvent,n,this._activeEncoding==="SGR_PIXELS"))||!this._protocols[this._activeProtocol].restrict(n))return!1;const c=this._encodings[this._activeEncoding](n);return c&&(this._activeEncoding==="DEFAULT"?this._coreService.triggerBinaryEvent(c):this._coreService.triggerDataEvent(c,!0)),this._lastEvent=n,!0}explainEvents(n){return{down:!!(1&n),up:!!(2&n),drag:!!(4&n),move:!!(8&n),wheel:!!(16&n)}}_equalEvents(n,c,f){if(f){if(n.x!==c.x||n.y!==c.y)return!1}else if(n.col!==c.col||n.row!==c.row)return!1;return n.button===c.button&&n.action===c.action&&n.ctrl===c.ctrl&&n.alt===c.alt&&n.shift===c.shift}};i.CoreMouseService=r=h([_(0,l.IBufferService),_(1,l.ICoreService)],r)},6975:function(L,i,a){var h=this&&this.__decorate||function(r,n,c,f){var S,E=arguments.length,u=E<3?n:f===null?f=Object.getOwnPropertyDescriptor(n,c):f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")u=Reflect.decorate(r,n,c,f);else for(var y=r.length-1;y>=0;y--)(S=r[y])&&(u=(E<3?S(u):E>3?S(n,c,u):S(n,c))||u);return E>3&&u&&Object.defineProperty(n,c,u),u},_=this&&this.__param||function(r,n){return function(c,f){n(c,f,r)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CoreService=void 0;const l=a(1439),p=a(8460),m=a(844),b=a(2585),g=Object.freeze({insertMode:!1}),t=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,origin:!1,reverseWraparound:!1,sendFocus:!1,wraparound:!0});let o=i.CoreService=class extends m.Disposable{constructor(r,n,c){super(),this._bufferService=r,this._logService=n,this._optionsService=c,this.isCursorInitialized=!1,this.isCursorHidden=!1,this._onData=this.register(new p.EventEmitter),this.onData=this._onData.event,this._onUserInput=this.register(new p.EventEmitter),this.onUserInput=this._onUserInput.event,this._onBinary=this.register(new p.EventEmitter),this.onBinary=this._onBinary.event,this._onRequestScrollToBottom=this.register(new p.EventEmitter),this.onRequestScrollToBottom=this._onRequestScrollToBottom.event,this.modes=(0,l.clone)(g),this.decPrivateModes=(0,l.clone)(t)}reset(){this.modes=(0,l.clone)(g),this.decPrivateModes=(0,l.clone)(t)}triggerDataEvent(r,n=!1){if(this._optionsService.rawOptions.disableStdin)return;const c=this._bufferService.buffer;n&&this._optionsService.rawOptions.scrollOnUserInput&&c.ybase!==c.ydisp&&this._onRequestScrollToBottom.fire(),n&&this._onUserInput.fire(),this._logService.debug(`sending data "${r}"`,()=>r.split("").map(f=>f.charCodeAt(0))),this._onData.fire(r)}triggerBinaryEvent(r){this._optionsService.rawOptions.disableStdin||(this._logService.debug(`sending binary "${r}"`,()=>r.split("").map(n=>n.charCodeAt(0))),this._onBinary.fire(r))}};i.CoreService=o=h([_(0,b.IBufferService),_(1,b.ILogService),_(2,b.IOptionsService)],o)},9074:(L,i,a)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.DecorationService=void 0;const h=a(8055),_=a(8460),l=a(844),p=a(6106);let m=0,b=0;class g extends l.Disposable{get decorations(){return this._decorations.values()}constructor(){super(),this._decorations=new p.SortedList(r=>r==null?void 0:r.marker.line),this._onDecorationRegistered=this.register(new _.EventEmitter),this.onDecorationRegistered=this._onDecorationRegistered.event,this._onDecorationRemoved=this.register(new _.EventEmitter),this.onDecorationRemoved=this._onDecorationRemoved.event,this.register((0,l.toDisposable)(()=>this.reset()))}registerDecoration(r){if(r.marker.isDisposed)return;const n=new t(r);if(n){const c=n.marker.onDispose(()=>n.dispose());n.onDispose(()=>{n&&(this._decorations.delete(n)&&this._onDecorationRemoved.fire(n),c.dispose())}),this._decorations.insert(n),this._onDecorationRegistered.fire(n)}return n}reset(){for(const r of this._decorations.values())r.dispose();this._decorations.clear()}*getDecorationsAtCell(r,n,c){var f,S,E;let u=0,y=0;for(const R of this._decorations.getKeyIterator(n))u=(f=R.options.x)!==null&&f!==void 0?f:0,y=u+((S=R.options.width)!==null&&S!==void 0?S:1),r>=u&&r<y&&(!c||((E=R.options.layer)!==null&&E!==void 0?E:"bottom")===c)&&(yield R)}forEachDecorationAtCell(r,n,c,f){this._decorations.forEachByKey(n,S=>{var E,u,y;m=(E=S.options.x)!==null&&E!==void 0?E:0,b=m+((u=S.options.width)!==null&&u!==void 0?u:1),r>=m&&r<b&&(!c||((y=S.options.layer)!==null&&y!==void 0?y:"bottom")===c)&&f(S)})}}i.DecorationService=g;class t extends l.Disposable{get isDisposed(){return this._isDisposed}get backgroundColorRGB(){return this._cachedBg===null&&(this.options.backgroundColor?this._cachedBg=h.css.toColor(this.options.backgroundColor):this._cachedBg=void 0),this._cachedBg}get foregroundColorRGB(){return this._cachedFg===null&&(this.options.foregroundColor?this._cachedFg=h.css.toColor(this.options.foregroundColor):this._cachedFg=void 0),this._cachedFg}constructor(r){super(),this.options=r,this.onRenderEmitter=this.register(new _.EventEmitter),this.onRender=this.onRenderEmitter.event,this._onDispose=this.register(new _.EventEmitter),this.onDispose=this._onDispose.event,this._cachedBg=null,this._cachedFg=null,this.marker=r.marker,this.options.overviewRulerOptions&&!this.options.overviewRulerOptions.position&&(this.options.overviewRulerOptions.position="full")}dispose(){this._onDispose.fire(),super.dispose()}}},4348:(L,i,a)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.InstantiationService=i.ServiceCollection=void 0;const h=a(2585),_=a(8343);class l{constructor(...m){this._entries=new Map;for(const[b,g]of m)this.set(b,g)}set(m,b){const g=this._entries.get(m);return this._entries.set(m,b),g}forEach(m){for(const[b,g]of this._entries.entries())m(b,g)}has(m){return this._entries.has(m)}get(m){return this._entries.get(m)}}i.ServiceCollection=l,i.InstantiationService=class{constructor(){this._services=new l,this._services.set(h.IInstantiationService,this)}setService(p,m){this._services.set(p,m)}getService(p){return this._services.get(p)}createInstance(p,...m){const b=(0,_.getServiceDependencies)(p).sort((o,r)=>o.index-r.index),g=[];for(const o of b){const r=this._services.get(o.id);if(!r)throw new Error(`[createInstance] ${p.name} depends on UNKNOWN service ${o.id}.`);g.push(r)}const t=b.length>0?b[0].index:m.length;if(m.length!==t)throw new Error(`[createInstance] First service dependency of ${p.name} at position ${t+1} conflicts with ${m.length} static arguments`);return new p(...m,...g)}}},7866:function(L,i,a){var h=this&&this.__decorate||function(t,o,r,n){var c,f=arguments.length,S=f<3?o:n===null?n=Object.getOwnPropertyDescriptor(o,r):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(t,o,r,n);else for(var E=t.length-1;E>=0;E--)(c=t[E])&&(S=(f<3?c(S):f>3?c(o,r,S):c(o,r))||S);return f>3&&S&&Object.defineProperty(o,r,S),S},_=this&&this.__param||function(t,o){return function(r,n){o(r,n,t)}};Object.defineProperty(i,"__esModule",{value:!0}),i.traceCall=i.setTraceLogger=i.LogService=void 0;const l=a(844),p=a(2585),m={trace:p.LogLevelEnum.TRACE,debug:p.LogLevelEnum.DEBUG,info:p.LogLevelEnum.INFO,warn:p.LogLevelEnum.WARN,error:p.LogLevelEnum.ERROR,off:p.LogLevelEnum.OFF};let b,g=i.LogService=class extends l.Disposable{get logLevel(){return this._logLevel}constructor(t){super(),this._optionsService=t,this._logLevel=p.LogLevelEnum.OFF,this._updateLogLevel(),this.register(this._optionsService.onSpecificOptionChange("logLevel",()=>this._updateLogLevel())),b=this}_updateLogLevel(){this._logLevel=m[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(t){for(let o=0;o<t.length;o++)typeof t[o]=="function"&&(t[o]=t[o]())}_log(t,o,r){this._evalLazyOptionalParams(r),t.call(console,(this._optionsService.options.logger?"":"xterm.js: ")+o,...r)}trace(t,...o){var r,n;this._logLevel<=p.LogLevelEnum.TRACE&&this._log((n=(r=this._optionsService.options.logger)===null||r===void 0?void 0:r.trace.bind(this._optionsService.options.logger))!==null&&n!==void 0?n:console.log,t,o)}debug(t,...o){var r,n;this._logLevel<=p.LogLevelEnum.DEBUG&&this._log((n=(r=this._optionsService.options.logger)===null||r===void 0?void 0:r.debug.bind(this._optionsService.options.logger))!==null&&n!==void 0?n:console.log,t,o)}info(t,...o){var r,n;this._logLevel<=p.LogLevelEnum.INFO&&this._log((n=(r=this._optionsService.options.logger)===null||r===void 0?void 0:r.info.bind(this._optionsService.options.logger))!==null&&n!==void 0?n:console.info,t,o)}warn(t,...o){var r,n;this._logLevel<=p.LogLevelEnum.WARN&&this._log((n=(r=this._optionsService.options.logger)===null||r===void 0?void 0:r.warn.bind(this._optionsService.options.logger))!==null&&n!==void 0?n:console.warn,t,o)}error(t,...o){var r,n;this._logLevel<=p.LogLevelEnum.ERROR&&this._log((n=(r=this._optionsService.options.logger)===null||r===void 0?void 0:r.error.bind(this._optionsService.options.logger))!==null&&n!==void 0?n:console.error,t,o)}};i.LogService=g=h([_(0,p.IOptionsService)],g),i.setTraceLogger=function(t){b=t},i.traceCall=function(t,o,r){if(typeof r.value!="function")throw new Error("not supported");const n=r.value;r.value=function(...c){if(b.logLevel!==p.LogLevelEnum.TRACE)return n.apply(this,c);b.trace(`GlyphRenderer#${n.name}(${c.map(S=>JSON.stringify(S)).join(", ")})`);const f=n.apply(this,c);return b.trace(`GlyphRenderer#${n.name} return`,f),f}}},7302:(L,i,a)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.OptionsService=i.DEFAULT_OPTIONS=void 0;const h=a(8460),_=a(844),l=a(6114);i.DEFAULT_OPTIONS={cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,cursorInactiveStyle:"outline",customGlyphs:!0,drawBoldTextInBrightColors:!0,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"courier-new, courier, monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",ignoreBracketedPasteMode:!1,lineHeight:1,letterSpacing:0,linkHandler:null,logLevel:"info",logger:null,scrollback:1e3,scrollOnUserInput:!0,scrollSensitivity:1,screenReaderMode:!1,smoothScrollDuration:0,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!1,allowTransparency:!1,tabStopWidth:8,theme:{},rightClickSelectsWord:l.isMac,windowOptions:{},windowsMode:!1,windowsPty:{},wordSeparator:" ()[]{}',\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1,overviewRulerWidth:0};const p=["normal","bold","100","200","300","400","500","600","700","800","900"];class m extends _.Disposable{constructor(g){super(),this._onOptionChange=this.register(new h.EventEmitter),this.onOptionChange=this._onOptionChange.event;const t=Object.assign({},i.DEFAULT_OPTIONS);for(const o in g)if(o in t)try{const r=g[o];t[o]=this._sanitizeAndValidateOption(o,r)}catch(r){console.error(r)}this.rawOptions=t,this.options=Object.assign({},t),this._setupOptions()}onSpecificOptionChange(g,t){return this.onOptionChange(o=>{o===g&&t(this.rawOptions[g])})}onMultipleOptionChange(g,t){return this.onOptionChange(o=>{g.indexOf(o)!==-1&&t()})}_setupOptions(){const g=o=>{if(!(o in i.DEFAULT_OPTIONS))throw new Error(`No option with key "${o}"`);return this.rawOptions[o]},t=(o,r)=>{if(!(o in i.DEFAULT_OPTIONS))throw new Error(`No option with key "${o}"`);r=this._sanitizeAndValidateOption(o,r),this.rawOptions[o]!==r&&(this.rawOptions[o]=r,this._onOptionChange.fire(o))};for(const o in this.rawOptions){const r={get:g.bind(this,o),set:t.bind(this,o)};Object.defineProperty(this.options,o,r)}}_sanitizeAndValidateOption(g,t){switch(g){case"cursorStyle":if(t||(t=i.DEFAULT_OPTIONS[g]),!function(o){return o==="block"||o==="underline"||o==="bar"}(t))throw new Error(`"${t}" is not a valid value for ${g}`);break;case"wordSeparator":t||(t=i.DEFAULT_OPTIONS[g]);break;case"fontWeight":case"fontWeightBold":if(typeof t=="number"&&1<=t&&t<=1e3)break;t=p.includes(t)?t:i.DEFAULT_OPTIONS[g];break;case"cursorWidth":t=Math.floor(t);case"lineHeight":case"tabStopWidth":if(t<1)throw new Error(`${g} cannot be less than 1, value: ${t}`);break;case"minimumContrastRatio":t=Math.max(1,Math.min(21,Math.round(10*t)/10));break;case"scrollback":if((t=Math.min(t,4294967295))<0)throw new Error(`${g} cannot be less than 0, value: ${t}`);break;case"fastScrollSensitivity":case"scrollSensitivity":if(t<=0)throw new Error(`${g} cannot be less than or equal to 0, value: ${t}`);break;case"rows":case"cols":if(!t&&t!==0)throw new Error(`${g} must be numeric, value: ${t}`);break;case"windowsPty":t=t??{}}return t}}i.OptionsService=m},2660:function(L,i,a){var h=this&&this.__decorate||function(m,b,g,t){var o,r=arguments.length,n=r<3?b:t===null?t=Object.getOwnPropertyDescriptor(b,g):t;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(m,b,g,t);else for(var c=m.length-1;c>=0;c--)(o=m[c])&&(n=(r<3?o(n):r>3?o(b,g,n):o(b,g))||n);return r>3&&n&&Object.defineProperty(b,g,n),n},_=this&&this.__param||function(m,b){return function(g,t){b(g,t,m)}};Object.defineProperty(i,"__esModule",{value:!0}),i.OscLinkService=void 0;const l=a(2585);let p=i.OscLinkService=class{constructor(m){this._bufferService=m,this._nextId=1,this._entriesWithId=new Map,this._dataByLinkId=new Map}registerLink(m){const b=this._bufferService.buffer;if(m.id===void 0){const c=b.addMarker(b.ybase+b.y),f={data:m,id:this._nextId++,lines:[c]};return c.onDispose(()=>this._removeMarkerFromLink(f,c)),this._dataByLinkId.set(f.id,f),f.id}const g=m,t=this._getEntryIdKey(g),o=this._entriesWithId.get(t);if(o)return this.addLineToLink(o.id,b.ybase+b.y),o.id;const r=b.addMarker(b.ybase+b.y),n={id:this._nextId++,key:this._getEntryIdKey(g),data:g,lines:[r]};return r.onDispose(()=>this._removeMarkerFromLink(n,r)),this._entriesWithId.set(n.key,n),this._dataByLinkId.set(n.id,n),n.id}addLineToLink(m,b){const g=this._dataByLinkId.get(m);if(g&&g.lines.every(t=>t.line!==b)){const t=this._bufferService.buffer.addMarker(b);g.lines.push(t),t.onDispose(()=>this._removeMarkerFromLink(g,t))}}getLinkData(m){var b;return(b=this._dataByLinkId.get(m))===null||b===void 0?void 0:b.data}_getEntryIdKey(m){return`${m.id};;${m.uri}`}_removeMarkerFromLink(m,b){const g=m.lines.indexOf(b);g!==-1&&(m.lines.splice(g,1),m.lines.length===0&&(m.data.id!==void 0&&this._entriesWithId.delete(m.key),this._dataByLinkId.delete(m.id)))}};i.OscLinkService=p=h([_(0,l.IBufferService)],p)},8343:(L,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.createDecorator=i.getServiceDependencies=i.serviceRegistry=void 0;const a="di$target",h="di$dependencies";i.serviceRegistry=new Map,i.getServiceDependencies=function(_){return _[h]||[]},i.createDecorator=function(_){if(i.serviceRegistry.has(_))return i.serviceRegistry.get(_);const l=function(p,m,b){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");(function(g,t,o){t[a]===t?t[h].push({id:g,index:o}):(t[h]=[{id:g,index:o}],t[a]=t)})(l,p,b)};return l.toString=()=>_,i.serviceRegistry.set(_,l),l}},2585:(L,i,a)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.IDecorationService=i.IUnicodeService=i.IOscLinkService=i.IOptionsService=i.ILogService=i.LogLevelEnum=i.IInstantiationService=i.ICharsetService=i.ICoreService=i.ICoreMouseService=i.IBufferService=void 0;const h=a(8343);var _;i.IBufferService=(0,h.createDecorator)("BufferService"),i.ICoreMouseService=(0,h.createDecorator)("CoreMouseService"),i.ICoreService=(0,h.createDecorator)("CoreService"),i.ICharsetService=(0,h.createDecorator)("CharsetService"),i.IInstantiationService=(0,h.createDecorator)("InstantiationService"),function(l){l[l.TRACE=0]="TRACE",l[l.DEBUG=1]="DEBUG",l[l.INFO=2]="INFO",l[l.WARN=3]="WARN",l[l.ERROR=4]="ERROR",l[l.OFF=5]="OFF"}(_||(i.LogLevelEnum=_={})),i.ILogService=(0,h.createDecorator)("LogService"),i.IOptionsService=(0,h.createDecorator)("OptionsService"),i.IOscLinkService=(0,h.createDecorator)("OscLinkService"),i.IUnicodeService=(0,h.createDecorator)("UnicodeService"),i.IDecorationService=(0,h.createDecorator)("DecorationService")},1480:(L,i,a)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.UnicodeService=void 0;const h=a(8460),_=a(225);i.UnicodeService=class{constructor(){this._providers=Object.create(null),this._active="",this._onChange=new h.EventEmitter,this.onChange=this._onChange.event;const l=new _.UnicodeV6;this.register(l),this._active=l.version,this._activeProvider=l}dispose(){this._onChange.dispose()}get versions(){return Object.keys(this._providers)}get activeVersion(){return this._active}set activeVersion(l){if(!this._providers[l])throw new Error(`unknown Unicode version "${l}"`);this._active=l,this._activeProvider=this._providers[l],this._onChange.fire(l)}register(l){this._providers[l.version]=l}wcwidth(l){return this._activeProvider.wcwidth(l)}getStringCellWidth(l){let p=0;const m=l.length;for(let b=0;b<m;++b){let g=l.charCodeAt(b);if(55296<=g&&g<=56319){if(++b>=m)return p+this.wcwidth(g);const t=l.charCodeAt(b);56320<=t&&t<=57343?g=1024*(g-55296)+t-56320+65536:p+=this.wcwidth(t)}p+=this.wcwidth(g)}return p}}}},v={};function C(L){var i=v[L];if(i!==void 0)return i.exports;var a=v[L]={exports:{}};return d[L].call(a.exports,a,a.exports,C),a.exports}var x={};return(()=>{var L=x;Object.defineProperty(L,"__esModule",{value:!0}),L.Terminal=void 0;const i=C(9042),a=C(3236),h=C(844),_=C(5741),l=C(8285),p=C(7975),m=C(7090),b=["cols","rows"];class g extends h.Disposable{constructor(o){super(),this._core=this.register(new a.Terminal(o)),this._addonManager=this.register(new _.AddonManager),this._publicOptions=Object.assign({},this._core.options);const r=c=>this._core.options[c],n=(c,f)=>{this._checkReadonlyOptions(c),this._core.options[c]=f};for(const c in this._core.options){const f={get:r.bind(this,c),set:n.bind(this,c)};Object.defineProperty(this._publicOptions,c,f)}}_checkReadonlyOptions(o){if(b.includes(o))throw new Error(`Option "${o}" can only be set in the constructor`)}_checkProposedApi(){if(!this._core.optionsService.rawOptions.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")}get onBell(){return this._core.onBell}get onBinary(){return this._core.onBinary}get onCursorMove(){return this._core.onCursorMove}get onData(){return this._core.onData}get onKey(){return this._core.onKey}get onLineFeed(){return this._core.onLineFeed}get onRender(){return this._core.onRender}get onResize(){return this._core.onResize}get onScroll(){return this._core.onScroll}get onSelectionChange(){return this._core.onSelectionChange}get onTitleChange(){return this._core.onTitleChange}get onWriteParsed(){return this._core.onWriteParsed}get element(){return this._core.element}get parser(){return this._parser||(this._parser=new p.ParserApi(this._core)),this._parser}get unicode(){return this._checkProposedApi(),new m.UnicodeApi(this._core)}get textarea(){return this._core.textarea}get rows(){return this._core.rows}get cols(){return this._core.cols}get buffer(){return this._buffer||(this._buffer=this.register(new l.BufferNamespaceApi(this._core))),this._buffer}get markers(){return this._checkProposedApi(),this._core.markers}get modes(){const o=this._core.coreService.decPrivateModes;let r="none";switch(this._core.coreMouseService.activeProtocol){case"X10":r="x10";break;case"VT200":r="vt200";break;case"DRAG":r="drag";break;case"ANY":r="any"}return{applicationCursorKeysMode:o.applicationCursorKeys,applicationKeypadMode:o.applicationKeypad,bracketedPasteMode:o.bracketedPasteMode,insertMode:this._core.coreService.modes.insertMode,mouseTrackingMode:r,originMode:o.origin,reverseWraparoundMode:o.reverseWraparound,sendFocusMode:o.sendFocus,wraparoundMode:o.wraparound}}get options(){return this._publicOptions}set options(o){for(const r in o)this._publicOptions[r]=o[r]}blur(){this._core.blur()}focus(){this._core.focus()}resize(o,r){this._verifyIntegers(o,r),this._core.resize(o,r)}open(o){this._core.open(o)}attachCustomKeyEventHandler(o){this._core.attachCustomKeyEventHandler(o)}registerLinkProvider(o){return this._core.registerLinkProvider(o)}registerCharacterJoiner(o){return this._checkProposedApi(),this._core.registerCharacterJoiner(o)}deregisterCharacterJoiner(o){this._checkProposedApi(),this._core.deregisterCharacterJoiner(o)}registerMarker(o=0){return this._verifyIntegers(o),this._core.registerMarker(o)}registerDecoration(o){var r,n,c;return this._checkProposedApi(),this._verifyPositiveIntegers((r=o.x)!==null&&r!==void 0?r:0,(n=o.width)!==null&&n!==void 0?n:0,(c=o.height)!==null&&c!==void 0?c:0),this._core.registerDecoration(o)}hasSelection(){return this._core.hasSelection()}select(o,r,n){this._verifyIntegers(o,r,n),this._core.select(o,r,n)}getSelection(){return this._core.getSelection()}getSelectionPosition(){return this._core.getSelectionPosition()}clearSelection(){this._core.clearSelection()}selectAll(){this._core.selectAll()}selectLines(o,r){this._verifyIntegers(o,r),this._core.selectLines(o,r)}dispose(){super.dispose()}scrollLines(o){this._verifyIntegers(o),this._core.scrollLines(o)}scrollPages(o){this._verifyIntegers(o),this._core.scrollPages(o)}scrollToTop(){this._core.scrollToTop()}scrollToBottom(){this._core.scrollToBottom()}scrollToLine(o){this._verifyIntegers(o),this._core.scrollToLine(o)}clear(){this._core.clear()}write(o,r){this._core.write(o,r)}writeln(o,r){this._core.write(o),this._core.write(`\r
`,r)}paste(o){this._core.paste(o)}refresh(o,r){this._verifyIntegers(o,r),this._core.refresh(o,r)}reset(){this._core.reset()}clearTextureAtlas(){this._core.clearTextureAtlas()}loadAddon(o){this._addonManager.loadAddon(this,o)}static get strings(){return i}_verifyIntegers(...o){for(const r of o)if(r===1/0||isNaN(r)||r%1!=0)throw new Error("This API only accepts integers")}_verifyPositiveIntegers(...o){for(const r of o)if(r&&(r===1/0||isNaN(r)||r%1!=0||r<0))throw new Error("This API only accepts positive integers")}}L.Terminal=g})(),x})())})(cr);var zo=cr.exports,ur={exports:{}};(function(e,s){(function(d,v){e.exports=v()})(self,()=>(()=>{var d={};return(()=>{var v=d;Object.defineProperty(v,"__esModule",{value:!0}),v.FitAddon=void 0,v.FitAddon=class{activate(C){this._terminal=C}dispose(){}fit(){const C=this.proposeDimensions();if(!C||!this._terminal||isNaN(C.cols)||isNaN(C.rows))return;const x=this._terminal._core;this._terminal.rows===C.rows&&this._terminal.cols===C.cols||(x._renderService.clear(),this._terminal.resize(C.cols,C.rows))}proposeDimensions(){if(!this._terminal||!this._terminal.element||!this._terminal.element.parentElement)return;const C=this._terminal._core,x=C._renderService.dimensions;if(x.css.cell.width===0||x.css.cell.height===0)return;const L=this._terminal.options.scrollback===0?0:C.viewport.scrollBarWidth,i=window.getComputedStyle(this._terminal.element.parentElement),a=parseInt(i.getPropertyValue("height")),h=Math.max(0,parseInt(i.getPropertyValue("width"))),_=window.getComputedStyle(this._terminal.element),l=a-(parseInt(_.getPropertyValue("padding-top"))+parseInt(_.getPropertyValue("padding-bottom"))),p=h-(parseInt(_.getPropertyValue("padding-right"))+parseInt(_.getPropertyValue("padding-left")))-L;return{cols:Math.max(2,Math.floor(p/x.css.cell.width)),rows:Math.max(1,Math.floor(l/x.css.cell.height))}}}})(),d})())})(ur);var Ko=ur.exports,fr={exports:{}};(function(e,s){(function(d,v){e.exports=v()})(self,()=>(()=>{var d={};return(()=>{var v=d;function C(x,L,i){return x.addEventListener(L,i),{dispose:()=>{i&&x.removeEventListener(L,i)}}}Object.defineProperty(v,"__esModule",{value:!0}),v.AttachAddon=void 0,v.AttachAddon=class{constructor(x,L){this._disposables=[],this._socket=x,this._socket.binaryType="arraybuffer",this._bidirectional=!(L&&L.bidirectional===!1)}activate(x){this._disposables.push(C(this._socket,"message",L=>{const i=L.data;x.write(typeof i=="string"?i:new Uint8Array(i))})),this._bidirectional&&(this._disposables.push(x.onData(L=>this._sendData(L))),this._disposables.push(x.onBinary(L=>this._sendBinary(L)))),this._disposables.push(C(this._socket,"close",()=>this.dispose())),this._disposables.push(C(this._socket,"error",()=>this.dispose()))}dispose(){for(const x of this._disposables)x.dispose()}_sendData(x){this._checkOpenSocket()&&this._socket.send(x)}_sendBinary(x){if(!this._checkOpenSocket())return;const L=new Uint8Array(x.length);for(let i=0;i<x.length;++i)L[i]=255&x.charCodeAt(i);this._socket.send(L)}_checkOpenSocket(){switch(this._socket.readyState){case WebSocket.OPEN:return!0;case WebSocket.CONNECTING:throw new Error("Attach addon was loaded before socket was open");case WebSocket.CLOSING:return console.warn("Attach addon socket is closing"),!1;case WebSocket.CLOSED:throw new Error("Attach addon socket is closed");default:throw new Error("Unexpected socket state")}}}})(),d})())})(fr);var qo=fr.exports;const _r=(e,s)=>{const d=e.__vccOpts||e;for(const[v,C]of s)d[v]=C;return d},Vo={name:"Xterm",props:{socketURI:{type:String,default:"ws://127.0.0.1:8081/wstotcp"}},mounted(){this.initSocket()},beforeDestroy(){this.socket.close(),this.term.dispose()},methods:{initTerm(){const e=new zo.Terminal({fontSize:14,cursorBlink:!0}),s=new qo.AttachAddon(this.socket),d=new Ko.FitAddon;e.loadAddon(s),e.loadAddon(d),e.open(document.getElementById("xterm")),d.fit(),e.focus(),this.term=e},initSocket(){this.socket=new WebSocket(this.socketURI),this.socketOnClose(),this.socketOnOpen(),this.socketOnError()},socketOnOpen(){this.socket.onopen=()=>{this.initTerm()}},socketOnClose(){this.socket.onclose=()=>{}},socketOnError(){this.socket.onerror=()=>{}}}},Go={id:"xterm",class:"xterm"};function Xo(e,s,d,v,C,x){return rr(),eo("div",Go)}const Jo=_r(Vo,[["render",Xo]]),Yo={__name:"App",setup(e){return(s,d)=>(rr(),to(Jo))}},Zo=_r(Yo,[["__scopeId","data-v-8ba89a0d"]]);No(Zo).mount("#app");
